{"version":3,"file":"js/index.671a3af7.js","mappings":"2GAGO,SAASA,EAAmBC,GACjC,OAAmB,MAAfA,EAAIC,SAENC,aAAaC,QAGbC,OAAOC,cAAc,IAAIC,MAAM,gBAG/BC,MAAM,kDAGNC,EAAAA,EAAOC,KAAK,CAAEC,KAAM,WAEb,EAGX,C,mGCnBOC,MAAM,a,GAIFA,MAAM,W,kIAJfC,EAAAA,EAAAA,IAwCM,MAxCNC,EAwCM,EAvCJC,EAAAA,EAAAA,IAMS,gBALPA,EAAAA,EAAAA,IAAyD,UAArD,aAASC,EAAAA,EAAAA,IAAGC,EAAAC,iBAAkB,MAAEF,EAAAA,EAAAA,IAAGC,EAAAE,WAAY,IAAC,IAEpDJ,EAAAA,EAAAA,IAEM,MAFNK,EAEM,EADJL,EAAAA,EAAAA,IAAuC,UAA9BM,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAEN,EAAAO,QAAAP,EAAAO,UAAAD,KAAQ,eAY5BR,EAAAA,EAAAA,IAsBO,aAHwC,UAAdE,EAAAE,YAAS,WAAxCM,EAAAA,EAAAA,IAAwDC,EAAA,CAAAC,IAAA,qBACf,UAAdV,EAAAE,YAAS,WAApCM,EAAAA,EAAAA,IAAoDG,EAAA,CAAAD,IAAA,qBAC7B,eAAdV,EAAAE,YAAS,WAAlBN,EAAAA,EAAAA,IAA2J,IAAAgB,EAAtH,wHAAkH,kB,gCCtCtJjB,MAAM,a,GAIJA,MAAM,U,GAOJA,MAAM,U,GAQFA,MAAM,Y,iBAUNA,MAAM,c,GACNA,MAAM,Y,SAMZA,MAAM,Q,GACJA,MAAM,Q,GAEJA,MAAM,a,GAAkBA,MAAM,O,GAGhCA,MAAM,Q,GAEJA,MAAM,a,GAAkBA,MAAM,O,GAGhCA,MAAM,Q,GAEJA,MAAM,a,GAAkBA,MAAM,O,GAGhCA,MAAM,Q,GAEJA,MAAM,a,GAAkBA,MAAM,O,GAMlCA,MAAM,Q,GACJA,MAAM,S,GAiBIA,MAAM,Q,GAEHA,MAAM,K,aAqBnBA,MAAM,S,GAgBIA,MAAM,Q,GAEHA,MAAM,K,oDAvH5BC,EAAAA,EAAAA,IAiJM,MAjJNC,EAiJM,gBAhJJC,EAAAA,EAAAA,IAAoC,UAAhC,+BAA2B,KAG/BA,EAAAA,EAAAA,IA6BM,MA7BNK,EA6BM,WA5BJL,EAAAA,EAAAA,IAKE,S,qCAJSe,EAAAC,EAACC,GACVC,KAAK,SACLC,YAAY,iCACZtB,MAAM,U,iBAHGkB,EAAAC,MAKXhB,EAAAA,EAAAA,IAqBM,MArBNc,EAqBM,EApBJd,EAAAA,EAAAA,IAQS,UAPPH,OAAKuB,EAAAA,EAAAA,IAAA,CAAC,OAAM,CAAAC,OACoB,OAAfN,EAAAO,cAChBhB,QAAKC,EAAA,KAAAA,EAAA,GAAAU,GAAEf,EAAAqB,QAAQ,OAChBC,MAAM,kB,cAENxB,EAAAA,EAAAA,IAAiC,OAA5BH,MAAM,cAAa,OAAG,KAC3BG,EAAAA,EAAAA,IAAuE,MAAvEyB,EAAsB,mBAAexB,EAAAA,EAAAA,IAAGC,EAAAwB,UAAUC,cAAY,sBAGhE7B,EAAAA,EAAAA,IASS8B,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IARK3B,EAAA4B,OAALC,K,WADTjC,EAAAA,EAAAA,IASS,UAPNc,IAAKmB,EACNlC,OAAKuB,EAAAA,EAAAA,IAAA,CAAC,OAAM,CAAAC,OACKN,EAAAO,aAAeS,KAC/BzB,QAAKW,GAAEf,EAAAqB,QAAQQ,I,EAEhB/B,EAAAA,EAAAA,IAAqC,MAArCgC,GAAqC/B,EAAAA,EAAAA,IAAV8B,GAAC,IAC5B/B,EAAAA,EAAAA,IAAuE,MAAvEiC,EAAsB,mBAAehC,EAAAA,EAAAA,IAAGc,EAAAmB,eAAeH,IAAM,GAAL,a,UAMtC7B,EAAAiC,aAAU,WAAlCrC,EAAAA,EAAAA,IAqBM,MArBNsC,EAqBM,EApBJpC,EAAAA,EAAAA,IAIM,MAJNqC,EAIM,cAHJrC,EAAAA,EAAAA,IAA2C,OAAtCH,MAAM,cAAa,iBAAa,KACrCG,EAAAA,EAAAA,IAA0E,MAA1EsC,EAA0E,EAAnDtC,EAAAA,EAAAA,IAA6C,OAA7CuC,GAA6CtC,EAAAA,EAAAA,IAAxBC,EAAAsC,IAAIC,YAAU,kBAC1DzC,EAAAA,EAAAA,IAA6D,OAAxDH,MAAM,YAAW,qCAAiC,OAEzDG,EAAAA,EAAAA,IAIM,MAJN0C,EAIM,cAHJ1C,EAAAA,EAAAA,IAA2C,OAAtCH,MAAM,cAAa,iBAAa,KACrCG,EAAAA,EAAAA,IAA4E,MAA5E2C,EAA4E,EAArD3C,EAAAA,EAAAA,IAA+C,OAA/C4C,GAA+C3C,EAAAA,EAAAA,IAA1BC,EAAAsC,IAAIK,cAAY,kBAC5D7C,EAAAA,EAAAA,IAA8D,OAAzDH,MAAM,YAAW,sCAAkC,OAE1DG,EAAAA,EAAAA,IAIM,MAJN8C,EAIM,cAHJ9C,EAAAA,EAAAA,IAAkD,OAA7CH,MAAM,cAAa,wBAAoB,KAC5CG,EAAAA,EAAAA,IAAwE,MAAxE+C,EAAwE,EAAjD/C,EAAAA,EAAAA,IAA2C,OAA3CgD,GAA2C/C,EAAAA,EAAAA,IAAtBC,EAAAsC,IAAIS,UAAQ,kBACxDjD,EAAAA,EAAAA,IAA2D,OAAtDH,MAAM,YAAW,mCAA+B,OAEvDG,EAAAA,EAAAA,IAIM,MAJNkD,EAIM,cAHJlD,EAAAA,EAAAA,IAA+C,OAA1CH,MAAM,cAAa,qBAAiB,KACzCG,EAAAA,EAAAA,IAA2E,MAA3EmD,EAA2E,EAApDnD,EAAAA,EAAAA,IAA8C,OAA9CoD,GAA8CnD,EAAAA,EAAAA,IAAzBC,EAAAsC,IAAIa,aAAW,oBAC3DrD,EAAAA,EAAAA,IAA2D,OAAtDH,MAAM,YAAW,mCAA+B,0BAKzDG,EAAAA,EAAAA,IAkFM,MAlFNsD,EAkFM,EAjFJtD,EAAAA,EAAAA,IAsCM,MAtCNuD,EAsCM,gBArCJvD,EAAAA,EAAAA,IAAqE,OAAhEH,MAAM,eAAc,0CAAsC,KAC/DG,EAAAA,EAAAA,IAmCQ,6BAlCNA,EAAAA,EAAAA,IAUQ,eATNA,EAAAA,EAAAA,IAQK,YAPHA,EAAAA,EAAAA,IAAc,UAAV,UACJA,EAAAA,EAAAA,IAAgB,UAAZ,YACJA,EAAAA,EAAAA,IAAoB,UAAhB,gBACJA,EAAAA,EAAAA,IAAmB,UAAf,eACJA,EAAAA,EAAAA,IAAY,UAAR,QACJA,EAAAA,EAAAA,IAAqB,UAAjB,iBACJA,EAAAA,EAAAA,IAAc,UAAV,aAAK,KAGbA,EAAAA,EAAAA,IAsBQ,6BArBNF,EAAAA,EAAAA,IAiBK8B,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAjBa3B,EAAAsD,oBAAoBC,MAAM,EAAG,KAApCC,K,WAAX5D,EAAAA,EAAAA,IAiBK,MAjBgDc,IAAK8C,EAAIC,M,EAC5D3D,EAAAA,EAAAA,IASK,YARHA,EAAAA,EAAAA,IAGM,MAHN4D,EAGM,EADJ5D,EAAAA,EAAAA,IAAkD,OAAlD6D,GAAkD5D,EAAAA,EAAAA,IAA/ByD,EAAII,YAAc,KAAJ,QAOrC9D,EAAAA,EAAAA,IAAuC,WAAAC,EAAAA,EAAAA,IAAhCC,EAAA6D,OAAOL,EAAIM,eAAY,IAC9BhE,EAAAA,EAAAA,IAAmC,WAAAC,EAAAA,EAAAA,IAA5ByD,EAAIO,WAAa,KAAJ,IACpBjE,EAAAA,EAAAA,IAAkC,WAAAC,EAAAA,EAAAA,IAA3ByD,EAAIQ,UAAY,KAAJ,IACnBlE,EAAAA,EAAAA,IAA6B,WAAAC,EAAAA,EAAAA,IAAtByD,EAAIS,KAAO,KAAJ,IACdnE,EAAAA,EAAAA,IAAwD,WAAAC,EAAAA,EAAAA,IAAjDyD,EAAIU,QAAU,KAAM,KAACnE,EAAAA,EAAAA,IAAGyD,EAAIW,QAAU,KAAJ,IACzCrE,EAAAA,EAAAA,IAAmC,WAAAC,EAAAA,EAAAA,IAA5ByD,EAAIY,WAAa,KAAJ,Q,MAEXpE,EAAAsD,oBAAoBe,QAC8B,iBADxB,WAArCzE,EAAAA,EAAAA,IAEK,KAAA0E,EAAAjE,EAAA,MAAAA,EAAA,MADHP,EAAAA,EAAAA,IAAgE,MAA5DyE,QAAQ,IAAI5E,MAAM,SAAQ,iCAA6B,cAMnEG,EAAAA,EAAAA,IAwCM,MAxCN0E,EAwCM,gBAvCJ1E,EAAAA,EAAAA,IAAkE,OAA7DH,MAAM,eAAc,uCAAmC,KAC5DG,EAAAA,EAAAA,IAqCQ,6BApCNA,EAAAA,EAAAA,IASQ,eARNA,EAAAA,EAAAA,IAOK,YANHA,EAAAA,EAAAA,IAAc,UAAV,UACJA,EAAAA,EAAAA,IAAgB,UAAZ,YACJA,EAAAA,EAAAA,IAAY,UAAR,QACJA,EAAAA,EAAAA,IAAmB,UAAf,eACJA,EAAAA,EAAAA,IAAY,UAAR,QACJA,EAAAA,EAAAA,IAAkB,UAAd,iBAAS,KAGjBA,EAAAA,EAAAA,IAyBQ,6BAxBNF,EAAAA,EAAAA,IAoBK8B,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IApBW3B,EAAAyE,aAAalB,QAAQmB,UAAUnB,MAAM,EAAG,KAA7CoB,K,WAAX/E,EAAAA,EAAAA,IAoBK,MApByDc,IAAKiE,EAAEC,WAAa,IAAMD,EAAEE,a,EACxF/E,EAAAA,EAAAA,IASK,YARHA,EAAAA,EAAAA,IAGM,MAHNgF,EAGM,EADJhF,EAAAA,EAAAA,IAAgD,OAAhDiF,GAAgDhF,EAAAA,EAAAA,IAA7B4E,EAAEf,YAAc,KAAJ,QAOnC9D,EAAAA,EAAAA,IAAqC,WAAAC,EAAAA,EAAAA,IAA9BC,EAAA6D,OAAOc,EAAEb,eAAY,IAC5BhE,EAAAA,EAAAA,IAAyC,WAAAC,EAAAA,EAAAA,IAAlC4E,EAAEK,YAAc,YAAJ,IACnBlF,EAAAA,EAAAA,IAA2C,WAAAC,EAAAA,EAAAA,IAApC4E,EAAEM,cAAgB,YAAJ,IACrBnF,EAAAA,EAAAA,IAAyC,WAAAC,EAAAA,EAAAA,IAAlC4E,EAAEO,YAAc,YAAJ,IACnBpF,EAAAA,EAAAA,IAIK,YAHHA,EAAAA,EAAAA,IAEO,QAFAH,OAAKuB,EAAAA,EAAAA,IAAElB,EAAAmF,WAAWnF,EAAAoF,cAAcT,O,QAClC3E,EAAAoF,cAAcT,GAAK,MAAQ,MAAZ,U,MAIb3E,EAAAyE,aAAaJ,QACsC,iBADhC,WAA9BzE,EAAAA,EAAAA,IAEK,KAAAyF,EAAAhF,EAAA,MAAAA,EAAA,MADHP,EAAAA,EAAAA,IAAiE,MAA7DyE,QAAQ,IAAI5E,MAAM,SAAQ,kCAA8B,gB,yHAc1E,GACED,KAAM,mBACN4F,IAAAA,GACE,MAAO,CACLC,QAASC,EAAAA,EAAIC,aAEbC,QAAS,KACTC,SAAU,IAAIC,IACdC,eAAgB,GAEhBC,OAAQ,GACRC,KAAM,GAEN3E,WAAY,KACZN,EAAG,GACHkB,eAAgB,CAAC,EAErB,EACAgE,SAAU,CACR/D,UAAAA,GACE,SAAUgE,KAAKP,SAAWO,KAAKH,OAAOzB,QAAU4B,KAAKF,KAAK1B,OAC5D,EACAzC,KAAAA,GAEE,MAAMsE,EAAK,IAAIC,KACZF,KAAKJ,gBAAkB,IACrBO,KAAIC,GAAKJ,KAAKK,eAAeD,EAAEE,UAC/BC,OAAOC,UAEZ,MAAO,IAAIP,GAAIQ,MAAK,CAACC,EAAEC,IAAMA,EAAED,GACjC,EAEAE,cAAAA,GACE,IAAIC,EAAMb,KAAKc,aAAad,KAAKH,QACjC,OAAOG,KAAKe,cAAcF,EAC5B,EACArC,YAAAA,GACE,IAAIqC,EAAMb,KAAKc,aAAad,KAAKF,MACjC,OAAOE,KAAKe,cAAcF,EAC5B,EACAtF,SAAAA,GAEE,MAAMyF,EAAShB,KAAKiB,sBAAsBjB,KAAKJ,gBAC/C,MAAO,CAAEpE,aAAcwF,EAAOlE,SAChC,EACAT,GAAAA,GAEE,MAAMK,EAAesD,KAAKkB,2BAGpB,SAAEpE,EAAQ,OAAEqE,EAAM,QAAEC,GAAYpB,KAAKiB,sBAAsBjB,KAAKqB,sBAChEC,EAAkBxE,EAAWqE,EAASC,EACtCG,EAASD,EAAkBE,KAAKC,MAAO3E,EAAWwE,EAAmB,KAAO,IAAM,IAGlFI,EAAW,IAAIxB,IAAIF,KAAKY,eAAeT,KAAIwB,GAAKA,EAAE/C,eACxD,MAAO,CACLtC,WAAYoF,EAASE,KACrBlF,eACAI,WACAI,YAAaqE,EAEjB,EAEAlE,mBAAAA,GACE,MAAMwE,EAAK,IAAIlC,IACf,IAAK,MAAMmC,KAAK9B,KAAKY,eAAgB,CACnC,MAAMmB,EAAID,EAAElD,YACNoD,EAAMH,EAAGI,IAAIF,KACdC,GAAO,IAAIE,KAAKJ,EAAEjE,cAAgB,IAAIqE,KAAKF,EAAInE,gBAClDgE,EAAGM,IAAIJ,EAAGD,EAEd,CACA,MAAMM,EAAM,IAAIP,EAAGQ,UAAU5B,MAAK,CAACC,EAAEC,IAAM,IAAIuB,KAAKvB,EAAE9C,cAAgB,IAAIqE,KAAKxB,EAAE7C,gBAEjF,OADAuE,EAAIE,SAAQ,CAAClC,EAAGmC,IAAMnC,EAAE5C,KAAO4C,EAAEzB,WAAa,IAAMyB,EAAExB,YAAc,IAAM2D,IACnEH,CACT,GAEF,aAAMI,SACExC,KAAKyC,WACXzC,KAAK0C,qBACP,EACAC,QAAS,CAEP,cAAMF,GACJ,MAAMG,EAAU,CAAEC,cAAe,UAAU5J,aAAa6J,QAAQ,gBAG1DC,QAAkBC,MAAM,GAAGhD,KAAKV,2BAA4B,CAAEsD,YACjEK,MAAKlK,IACJ,KAAID,EAAAA,EAAAA,GAAmBC,GAEvB,OAAOA,EAAImK,UAEZC,OAAM,IAAM,KACfnD,KAAKN,SAAW,IAAIC,IAAIoD,EAAU5C,KAAIiD,GAAK,CAACA,EAAExE,YAAawE,EAAEzF,eAG7D,MAAO8B,EAAS4D,SAAkBC,QAAQC,IAAI,CAC5CP,MAAM,GAAGhD,KAAKV,4CAA6C,CAAEsD,YAAWK,MAAK7C,GAAKA,EAAE8C,SACpFF,MAAM,GAAGhD,KAAKV,kFAAmF,CAAEsD,YAAWK,MAAK7C,GAAKA,EAAE8C,WAG5HlD,KAAKP,QAAUA,GAAW,KAC1BO,KAAKJ,eAAkByD,GAAYA,EAASG,OAAUH,EAASG,OAAS,GAIxE,MAAMC,GAAOhE,GAASiE,uBAAyB,IAAIpG,MAAM,EAAG,IACtDqG,EAAcF,EAAItD,KAAIyD,GAAKA,EAAEhF,cAC7BiF,EAASC,MAAMC,KAAK,IAAI7D,IAAIyD,IAG5BK,EAAmBH,EAAO1D,KAAI8D,UAClC,MAAMC,EAAWC,EAAMC,QAAQ,MAAO,QAC/BC,EAAYC,SAAkBhB,QAAQC,IAAI,CAC/CP,MAAM,GAAGhD,KAAKV,wBAAwB4E,IAAY,CAAEtB,YAAWK,MAAK7C,GAAKA,EAAE8C,SAAQC,OAAM,IAAI,KAC7FH,MAAM,GAAGhD,KAAKV,sBAAsB4E,8CAAsD,CAAEtB,YAAWK,MAAK7C,GAAKA,EAAE8C,SAAQC,OAAM,IAAI,OAGjI1J,EAAOuG,KAAKN,SAASuC,IAAIkC,IAAU,KAGzC,OAFAE,EAAW/B,SAAQlC,IAAOA,EAAExB,YAAcuF,EAAO/D,EAAEzC,WAAalE,KAChE6K,EAAShC,SAAQlC,IAASA,EAAExB,YAAcuF,EAAO/D,EAAEzC,WAAalE,KACzD,CAAE4K,aAAYC,eAGjBf,QAAYD,QAAQC,IAAIS,GACxBO,EAAY,GAAIC,EAAU,GAChCjB,EAAIjB,SAAQ,EAAE+B,aAAYC,gBACvBD,GAAc,IAAI/B,SAAQR,GAAKyC,EAAU/K,KAAKsI,MAC9CwC,GAAY,IAAIhC,SAAQ5D,GAAK8F,EAAQhL,KAAKkF,QAI7C,MAAM+F,EAAYA,CAAC/D,EAAEC,IAAM,IAAIuB,KAAKxB,EAAE7C,cAAgB,IAAIqE,KAAKvB,EAAE9C,cACjEmC,KAAKH,OAAS0E,EAAU9D,KAAKgE,GAC7BzE,KAAKF,KAAS0E,EAAQ/D,KAAKgE,GAC3BzE,KAAK0E,aACP,EAGA9G,MAAAA,CAAO+G,GAAK,OAAOA,EAAI,IAAIzC,KAAKyC,GAAGC,cAAgB,EAAI,EACvDxJ,OAAAA,CAAQQ,GAAKoE,KAAK7E,WAAaS,CAAG,EAClC8I,WAAAA,GACE,MAAMzC,EAAOkC,GAAUnE,KAAKN,SAASuC,IAAIkC,IAAU,KACnDnE,KAAKH,OAAOyC,SAAQR,IAAYA,EAAEnE,aAAYmE,EAAEnE,WAAasE,EAAIH,EAAElD,iBACnEoB,KAAKF,KAAKwC,SAAQ5D,IAAcA,EAAEf,aAAYe,EAAEf,WAAasE,EAAIvD,EAAEE,gBACrE,EAEAyB,cAAAA,CAAeC,GAGb,MAAM1E,EAAIiJ,OAAOvE,GAAU,IAAIhD,MAAM,EAAE,GACjCwH,EAAIC,OAAOnJ,GACjB,OAAOmJ,OAAOC,SAASF,GAAKA,EAAI,IAClC,EAEAhE,YAAAA,CAAaD,GACX,OAAuB,MAAnBb,KAAK7E,WAA2B0F,EAC7BA,EAAIN,QAAOH,GAAKJ,KAAKpC,OAAOwC,EAAEvC,gBAAkBmC,KAAK7E,YAC9D,EACA4F,aAAAA,CAAcF,GACZ,MAAMhG,GAAKmF,KAAKnF,GAAK,IAAIoK,cAAcC,OACvC,OAAKrK,EACEgG,EAAIN,QAAOH,IAChB,MAAM3G,GAAQ2G,EAAEzC,YAAc,IAAIsH,cAC5Bd,GAAS/D,EAAExB,aAAe,IAAIqG,cACpC,OAAOxL,EAAK0L,SAAStK,IAAMsJ,EAAMgB,SAAStK,MAJ7BgG,CAMjB,EAEAQ,kBAAAA,GACE,OAAuB,MAAnBrB,KAAK7E,WAA2B6E,KAAKJ,gBACjCI,KAAKJ,gBAAkB,IAAIW,QAAOH,GAAKJ,KAAKK,eAAeD,EAAEE,UAAYN,KAAK7E,YACxF,EAEA+F,uBAAAA,GAEE,MAAMkE,EAAOpF,KAAKP,SAAS4F,oBAAsB,GACjD,OAAuB,MAAnBrF,KAAK7E,WACAiK,EAAKE,QAAO,CAACC,EAAKnF,IAAMmF,GAAOR,OAAO3E,EAAEoF,QAAU,IAAI,GAGxDJ,EACJ7E,QAAOH,GAAKJ,KAAKK,eAAewE,OAAOzE,EAAEE,WAAaN,KAAK7E,aAC3DmK,QAAO,CAACC,EAAKnF,IAAMmF,GAAOR,OAAO3E,EAAEoF,QAAU,IAAI,EACtD,EAEAvE,qBAAAA,CAAsBuC,GAEpB,IAAI1G,EAAW,EAAGqE,EAAS,EAAGC,EAAU,EACxC,IAAK,MAAMhB,KAAMoD,GAAU,GAAK,CAC9B,MAAMiC,EAAO1D,GAAMgD,OAAO3E,EAAE2B,IAAM,GAClCjF,GAAY2I,EAAI,uBAAyBA,EAAI,yBAA2BA,EAAI,uBAC5EtE,GAAYsE,EAAI,qBAAyBA,EAAI,uBAA2BA,EAAI,qBAC5ErE,GAAYqE,EAAI,uBAAyBA,EAAI,yBAA2BA,EAAI,sBAC9E,CACA,MAAO,CAAE3I,WAAUqE,SAAQC,UAC7B,EAEAsB,mBAAAA,GACE,MAAMb,EAAK,CAAC,EACZ,IAAK,MAAMzB,KAAMJ,KAAKJ,gBAAkB,GAAK,CAC3C,MAAMhE,EAAIoE,KAAKK,eAAeD,EAAEE,QAChC,IAAK1E,EAAG,SACR,MAAM8J,EAAS,CACb5I,SAAWiI,OAAO3E,EAAEuF,qBAAqB,GAAKZ,OAAO3E,EAAEwF,uBAAuB,GAAKb,OAAO3E,EAAEyF,qBAAqB,IAEnHhE,EAAGjG,IAAMiG,EAAGjG,IAAM,GAAK8J,EAAO5I,QAChC,CACAkD,KAAKjE,eAAiB8F,CACxB,EAGA1C,aAAAA,CAAcT,GACZ,MAAO,CAACA,EAAEK,WAAYL,EAAEM,aAAcN,EAAEO,YAAY6G,MAAKhE,GAAW,aAANA,GAChE,EACA5C,UAAAA,CAAW6G,GACT,OAAOA,EAAQ,YAAc,YAC/B,I,UC5WJ,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAAS,GAAQ,CAAC,YAAY,qBAEzF,Q,SCROtM,MAAM,a,GAIJA,MAAM,U,GAQFA,MAAM,Y,yBAWNA,MAAM,c,GACNA,MAAM,Y,SAMVA,MAAM,Q,IACJA,MAAM,Q,IAEJA,MAAM,a,IACHA,MAAM,O,IAGTA,MAAM,Y,IAGRA,MAAM,Q,IAEJA,MAAM,a,IACHA,MAAM,O,IAMXA,MAAM,Q,IAEJA,MAAM,a,IACHA,MAAM,O,IAMXA,MAAM,Q,IAEJA,MAAM,a,IACHA,MAAM,O,IAETA,MAAM,Y,IAOVA,MAAM,Q,IACJA,MAAM,S,eA6BNA,MAAM,S,sDApGfC,EAAAA,EAAAA,IAoIM,MApINC,EAoIM,gBAnIJC,EAAAA,EAAAA,IAA8B,UAA1B,yBAAqB,KAGzBA,EAAAA,EAAAA,IAsBM,MAtBNK,EAsBM,EArBJL,EAAAA,EAAAA,IAQS,UAPPH,OAAKuB,EAAAA,EAAAA,IAAA,CAAC,OAAM,CAAAC,OACyB,OAApBN,EAAAqL,mBAChB9L,QAAKC,EAAA,KAAAA,EAAA,GAAAU,GAAEf,EAAAmM,iBAAiB,OACzB7K,MAAM,qB,cAENxB,EAAAA,EAAAA,IAAiC,OAA5BH,MAAM,cAAa,OAAG,KAC3BG,EAAAA,EAAAA,IAAuE,MAAvEc,EAAsB,mBAAeb,EAAAA,EAAAA,IAAGC,EAAAwB,UAAUC,cAAY,sBAGhE7B,EAAAA,EAAAA,IAUS8B,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IATK3B,EAAAoM,gBAALxE,K,WADThI,EAAAA,EAAAA,IAUS,UARNc,IAAKkH,EAAEhD,WACRjF,OAAKuB,EAAAA,EAAAA,IAAA,CAAC,OAAM,CAAAC,OACKN,EAAAqL,kBAAoBtE,EAAEhD,cACtCxE,QAAKW,GAAEf,EAAAmM,iBAAiBvE,EAAEhD,YAC1BtD,MAAOtB,EAAAqM,QAAQzE,EAAE9D,e,EAElBhE,EAAAA,EAAAA,IAA0D,MAA1DwM,GAA0DvM,EAAAA,EAAAA,IAA/BC,EAAA6D,OAAO+D,EAAE9D,eAAY,IAChDhE,EAAAA,EAAAA,IAAqF,MAArFgC,EAAsB,mBAAe/B,EAAAA,EAAAA,IAAGc,EAAA0L,kBAAkB3E,EAAEhD,aAAe,GAAL,a,uBAK1E9E,EAAAA,EAAAA,IAAuB,UAAnB,kBAAc,IACME,EAAA6G,eAAexC,QAAUrE,EAAAyE,aAAaJ,SAAM,WAApEzE,EAAAA,EAAAA,IAqCM,MArCNmC,EAqCM,EApCJjC,EAAAA,EAAAA,IAOM,MAPNoC,GAOM,cANJpC,EAAAA,EAAAA,IAAiC,OAA5BH,MAAM,cAAa,OAAG,KAC3BG,EAAAA,EAAAA,IAGM,MAHNqC,GAGM,EAFJrC,EAAAA,EAAAA,IAAkD,OAAlDsC,IAAkDrC,EAAAA,EAAAA,IAA7BC,EAAAwM,OAAOC,OAAS,KAAJ,IACjC3M,EAAAA,EAAAA,IAA4F,QAAtFH,OAAKuB,EAAAA,EAAAA,IAAA,CAAC,QAAgBlB,EAAA0M,WAAW1M,EAAAwM,OAAOG,W,QAAW3M,EAAA4M,YAAY5M,EAAAwM,OAAOG,QAAK,MAEnF7M,EAAAA,EAAAA,IAAgD,MAAhDuC,IAAgDtC,EAAAA,EAAAA,IAAvBC,EAAAwM,OAAOK,SAAO,MAGzC/M,EAAAA,EAAAA,IAOM,MAPN0C,GAOM,cANJ1C,EAAAA,EAAAA,IAA4C,OAAvCH,MAAM,cAAa,kBAAc,KACtCG,EAAAA,EAAAA,IAGM,MAHN2C,GAGM,EAFJ3C,EAAAA,EAAAA,IAAiD,OAAjD4C,IAAiD3C,EAAAA,EAAAA,IAA5BC,EAAA8M,MAAML,OAAS,KAAJ,IAChC3M,EAAAA,EAAAA,IAA0F,QAApFH,OAAKuB,EAAAA,EAAAA,IAAA,CAAC,QAAgBlB,EAAA0M,WAAW1M,EAAA8M,MAAMH,W,QAAW3M,EAAA4M,YAAY5M,EAAA8M,MAAMH,QAAK,kBAEjF7M,EAAAA,EAAAA,IAAuD,OAAlDH,MAAM,YAAW,+BAA2B,OAGnDG,EAAAA,EAAAA,IAOM,MAPN8C,GAOM,cANJ9C,EAAAA,EAAAA,IAAmC,OAA9BH,MAAM,cAAa,SAAK,KAC7BG,EAAAA,EAAAA,IAGM,MAHN+C,GAGM,EAFJ/C,EAAAA,EAAAA,IAAoD,OAApDgD,IAAoD/C,EAAAA,EAAAA,IAA/BC,EAAA+M,SAASN,OAAS,KAAJ,IACnC3M,EAAAA,EAAAA,IAAgG,QAA1FH,OAAKuB,EAAAA,EAAAA,IAAA,CAAC,QAAgBlB,EAAA0M,WAAW1M,EAAA+M,SAASJ,W,QAAW3M,EAAA4M,YAAY5M,EAAA+M,SAASJ,QAAK,kBAEvF7M,EAAAA,EAAAA,IAA4C,OAAvCH,MAAM,YAAW,oBAAgB,OAGxCG,EAAAA,EAAAA,IAQM,MARNkD,GAQM,cAPJlD,EAAAA,EAAAA,IAA2C,OAAtCH,MAAM,cAAa,iBAAa,KACrCG,EAAAA,EAAAA,IAEM,MAFNmD,GAEM,EADJnD,EAAAA,EAAAA,IAA+C,OAA/CoD,IAA+CnD,EAAAA,EAAAA,IAA1BC,EAAAgN,QAAQjK,UAAQ,MAEvCjD,EAAAA,EAAAA,IAEM,MAFNsD,GAAsB,aACZrD,EAAAA,EAAAA,IAAGC,EAAAgN,QAAQ5F,QAAS,iBAAarH,EAAAA,EAAAA,IAAGC,EAAAgN,QAAQ3F,SAAO,yBAMjEvH,EAAAA,EAAAA,IA4DM,MA5DNuD,GA4DM,EA3DJvD,EAAAA,EAAAA,IA2BM,MA3BN4D,GA2BM,gBA1BJ5D,EAAAA,EAAAA,IAA2D,OAAtDH,MAAM,eAAc,gCAA4B,KACrDG,EAAAA,EAAAA,IAwBQ,2BAvBNA,EAAAA,EAAAA,IASQ,eARNA,EAAAA,EAAAA,IAOK,YANHA,EAAAA,EAAAA,IAAgB,UAAZ,YACJA,EAAAA,EAAAA,IAAoB,UAAhB,gBACJA,EAAAA,EAAAA,IAAmB,UAAf,eACJA,EAAAA,EAAAA,IAAY,UAAR,QACJA,EAAAA,EAAAA,IAAqB,UAAjB,iBACJA,EAAAA,EAAAA,IAAc,UAAV,aAAK,KAGbA,EAAAA,EAAAA,IAYQ,6BAXNF,EAAAA,EAAAA,IAOK8B,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAPW3B,EAAA6G,eAAetD,QAAQmB,UAAUnB,MAAM,EAAD,IAA3CwE,K,WAAXnI,EAAAA,EAAAA,IAOK,MAPyDc,IAAKqH,EAAEnD,Y,EACnE9E,EAAAA,EAAAA,IAAqC,WAAAC,EAAAA,EAAAA,IAA9BC,EAAA6D,OAAOkE,EAAEjE,eAAY,IAC5BhE,EAAAA,EAAAA,IAAiC,WAAAC,EAAAA,EAAAA,IAA1BgI,EAAEhE,WAAa,KAAJ,IAClBjE,EAAAA,EAAAA,IAAgC,WAAAC,EAAAA,EAAAA,IAAzBgI,EAAE/D,UAAY,KAAJ,IACjBlE,EAAAA,EAAAA,IAA2B,WAAAC,EAAAA,EAAAA,IAApBgI,EAAE9D,KAAO,KAAJ,IACZnE,EAAAA,EAAAA,IAAoD,WAAAC,EAAAA,EAAAA,IAA7CgI,EAAE7D,QAAU,KAAM,KAACnE,EAAAA,EAAAA,IAAGgI,EAAE5D,QAAU,KAAJ,IACrCrE,EAAAA,EAAAA,IAAiC,WAAAC,EAAAA,EAAAA,IAA1BgI,EAAE3D,WAAa,KAAJ,Q,MAETpE,EAAA6G,eAAexC,QACkC,iBAD5B,WAAhCzE,EAAAA,EAAAA,IAEK,KAAA+D,GAAAtD,EAAA,KAAAA,EAAA,KADHP,EAAAA,EAAAA,IAA+D,MAA3DyE,QAAQ,IAAI5E,MAAM,SAAQ,gCAA4B,cAMlEG,EAAAA,EAAAA,IA6BM,MA7BNwE,GA6BM,gBA5BJxE,EAAAA,EAAAA,IAAkE,OAA7DH,MAAM,eAAc,uCAAmC,KAC5DG,EAAAA,EAAAA,IA0BQ,6BAzBNA,EAAAA,EAAAA,IAQQ,eAPNA,EAAAA,EAAAA,IAMK,YALHA,EAAAA,EAAAA,IAAgB,UAAZ,YACJA,EAAAA,EAAAA,IAAY,UAAR,QACJA,EAAAA,EAAAA,IAAmB,UAAf,eACJA,EAAAA,EAAAA,IAAY,UAAR,QACJA,EAAAA,EAAAA,IAAkB,UAAd,iBAAS,KAGjBA,EAAAA,EAAAA,IAeQ,6BAdNF,EAAAA,EAAAA,IAUK8B,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAVW3B,EAAAyE,aAAalB,QAAQmB,UAAUnB,MAAM,EAAD,IAAzCoB,K,WAAX/E,EAAAA,EAAAA,IAUK,MAVuDc,IAAKiE,EAAEC,Y,EACjE9E,EAAAA,EAAAA,IAAqC,WAAAC,EAAAA,EAAAA,IAA9BC,EAAA6D,OAAOc,EAAEb,eAAY,IAC5BhE,EAAAA,EAAAA,IAAyC,WAAAC,EAAAA,EAAAA,IAAlC4E,EAAEK,YAAc,YAAJ,IACnBlF,EAAAA,EAAAA,IAA2C,WAAAC,EAAAA,EAAAA,IAApC4E,EAAEM,cAAgB,YAAJ,IACrBnF,EAAAA,EAAAA,IAAyC,WAAAC,EAAAA,EAAAA,IAAlC4E,EAAEO,YAAc,YAAJ,IACnBpF,EAAAA,EAAAA,IAIK,YAHHA,EAAAA,EAAAA,IAEO,QAFAH,OAAKuB,EAAAA,EAAAA,IAAElB,EAAAmF,WAAWnF,EAAAoF,cAAcT,O,QAClC3E,EAAAoF,cAAcT,GAAK,MAAQ,MAAZ,U,MAIb3E,EAAAyE,aAAaJ,QACsC,iBADhC,WAA9BzE,EAAAA,EAAAA,IAEK,KAAA4E,GAAAnE,EAAA,MAAAA,EAAA,MADHP,EAAAA,EAAAA,IAAiE,MAA7DyE,QAAQ,IAAI5E,MAAM,SAAQ,kCAA8B,gB,CAa1E,QACED,KAAM,qBACN4F,IAAAA,GACE,MAAO,CACLC,QAASC,EAAAA,EAAIC,aACbwH,SAAU,GACVnH,OAAQ,GACRC,KAAM,GACNmG,gBAAiB,KACjBK,kBAAmB,CAAC,EAExB,EACAvG,SAAU,CAERa,cAAAA,GACE,OAAKZ,KAAKiG,gBACHjG,KAAKH,OAAOU,QAAOuB,GAAKA,EAAEnD,aAAeqB,KAAKiG,kBADnBjG,KAAKH,MAEzC,EACArB,YAAAA,GACE,OAAKwB,KAAKiG,gBACHjG,KAAKF,KAAKS,QAAOuB,GAAKA,EAAEnD,aAAeqB,KAAKiG,kBADjBjG,KAAKF,IAEzC,EACAqG,cAAAA,GAEI,MAAO,IAAInG,KAAKgH,UAAUvG,MAAK,CAACC,EAAGC,KAE/B,MAAMsG,EAAQ,IAAI/E,KAAKxB,EAAE7C,cAAcqJ,UACjCC,EAAQ,IAAIjF,KAAKvB,EAAE9C,cAAcqJ,UAGvC,OAAOC,EAAQF,IAEvB,EAGA1L,SAAAA,GACE,MAAMmK,EAAS1F,KAAKoH,iBAAiBpH,KAAKF,MAC1C,MAAO,CAAEtE,aAAckK,EAAO2B,SAChC,EAGAd,MAAAA,GACE,MAAMe,EAAStH,KAAKuH,WAAWvH,KAAKY,gBAC9B4G,EAASxH,KAAKyH,WAAWzH,KAAKY,gBAC9B4F,EAAQc,GAAQtJ,KAAO,KACvB0I,EAAwB,MAAfY,GAAQtJ,KAA4B,MAAbwJ,GAAMxJ,MAAiBsJ,EAAOtJ,IAAMwJ,EAAKxJ,KAAK0J,QAAQ,GAAK,KACjG,MAAO,CAAElB,QAAOE,QAAOE,QAASU,EAAS,mBAAmBtH,KAAKpC,OAAO0J,EAAOzJ,gBAAkB,IACnG,EACAgJ,KAAAA,GACE,MAAMS,EAAStH,KAAKuH,WAAWvH,KAAKY,gBAC9B4G,EAASxH,KAAKyH,WAAWzH,KAAKY,gBAC9B4F,EAA2B,MAAlBc,GAAQrJ,QAAoC,MAAlBqJ,GAAQpJ,OAAkB,GAAGoJ,EAAOrJ,UAAUqJ,EAAOpJ,SAAW,KACzG,IAAIwI,EAAQ,KACZ,GAAsB,MAAlBY,GAAQrJ,QAAkC,MAAhBuJ,GAAMvJ,QAAoC,MAAlBqJ,GAAQpJ,QAAkC,MAAhBsJ,GAAMtJ,OAAgB,CACpGwI,EAAQ,IAAIY,EAAOrJ,OAASuJ,EAAKvJ,WAAWqJ,EAAOpJ,OAASsJ,EAAKtJ,SACjE,MAAMyJ,EAAKL,EAAOrJ,OAASuJ,EAAKvJ,OAC1B2J,EAAKN,EAAOpJ,OAASsJ,EAAKtJ,OAE5ByJ,GAAM,GAAKC,GAAM,IAAGlB,EAAQ,IAAIlF,KAAKqG,IAAIF,MAAOnG,KAAKqG,IAAID,KAC/D,CACA,MAAO,CAAEpB,QAAOE,QAAOE,QAASU,EAAS,mBAAmBtH,KAAKpC,OAAO0J,EAAOzJ,gBAAkB,IACnG,EACAiJ,QAAAA,GACE,MAAMQ,EAAStH,KAAKuH,WAAWvH,KAAKY,gBAC9B4G,EAASxH,KAAKyH,WAAWzH,KAAKY,gBAC9B4F,EAAQc,GAAQnJ,WAAa,KAC7BuI,EAA8B,MAArBY,GAAQnJ,WAAwC,MAAnBqJ,GAAMrJ,UAAqBmJ,EAAOnJ,UAAYqJ,EAAKrJ,UAAY,KAC3G,MAAO,CAAEqI,QAAOE,QAAOE,QAASU,EAAS,mBAAmBtH,KAAKpC,OAAO0J,EAAOzJ,gBAAkB,IACnG,EACAkJ,OAAAA,GACE,MAAMrB,EAAS1F,KAAKoH,iBAAiBpH,KAAKxB,cAC1C,MAAO,CACL1B,SAAU4I,EAAO2B,SACjBlG,OAAQuE,EAAOoC,OACf1G,QAASsE,EAAO,YAEpB,GAEF,aAAMlD,SACExC,KAAKyC,WACXzC,KAAK+H,qBACL/H,KAAKiG,gBAAkB,IACzB,EACAtD,QAAS,CACPyD,OAAAA,CAAQzB,GAAK,OAAO,IAAIzC,KAAKyC,GAAGqD,oBAAsB,EACtDpK,MAAAA,CAAO+G,GAAK,OAAO,IAAIzC,KAAKyC,GAAGC,aAAe,EAE9C,cAAMnC,GACJ,MAAMwF,EAAWC,KAAKC,MAAMlP,aAAa6J,QAAQ,cACjD,IAAKmF,EAAU,OACf,MAAM/D,EAAW+D,EAAS9D,MAAMC,QAAQ,MAAO,OACzCxB,EAAU,CACdC,cAAe,UAAU5J,aAAa6J,QAAQ,iBAGzCkE,EAAUnH,EAAQC,SAAcwD,QAAQC,IAAI,CAEjDP,MAAM,GAAGhD,KAAKV,kCAAkC4E,IAAY,CAAEtB,YAAWK,MAAKlK,IAC5E,KAAID,EAAAA,EAAAA,GAAmBC,GAEvB,OAAOA,EAAImK,UAEbF,MAAM,GAAGhD,KAAKV,wBAAwB4E,IAAY,CAAEtB,YAAWK,MAAK7C,GAAKA,EAAE8C,SAC3EF,MAAM,GAAGhD,KAAKV,sBAAsB4E,8CAAsD,CAAEtB,YAAWK,MAAK7C,GAAKA,EAAE8C,WAGrHlD,KAAKgH,UAAYA,GAAY,IAAIvG,MAAK,CAACC,EAAEC,IAAM,IAAIuB,KAAKxB,EAAE7C,cAAgB,IAAIqE,KAAKvB,EAAE9C,gBACrFmC,KAAKH,QAAYA,GAAY,IAAIY,MAAK,CAACC,EAAEC,IAAM,IAAIuB,KAAKxB,EAAE7C,cAAgB,IAAIqE,KAAKvB,EAAE9C,gBACrFmC,KAAKF,MAAYA,GAAY,IAAIW,MAAK,CAACC,EAAEC,IAAM,IAAIuB,KAAKxB,EAAE7C,cAAgB,IAAIqE,KAAKvB,EAAE9C,gBAGrFmC,KAAKiG,gBAAkBjG,KAAKgH,SAASoB,IAAI,IAAIzJ,YAAc,IAC7D,EAEAuH,gBAAAA,CAAiBmC,GACfrI,KAAKiG,gBAAkBoC,CACzB,EAGAN,kBAAAA,GACE,MAAMlG,EAAK,CAAC,EACZ,IAAK,MAAMtE,KAAOyC,KAAKF,KAAM,CAC3B,MAAMwI,EAAM/K,EAAIoB,WACV4J,EAAO,CAAChL,EAAIwB,WAAYxB,EAAIyB,aAAczB,EAAI0B,YAAYsB,OAAOC,SACjE1D,EAAWyL,EAAKhI,QAAOuB,GAAW,aAANA,IAAkB1D,OACpDyD,EAAGyG,IAAQzG,EAAGyG,IAAQ,GAAKxL,CAC7B,CACAkD,KAAKsG,kBAAoBzE,CAC3B,EAGA0F,UAAAA,CAAW1G,GACT,OAAKA,EAAIzC,OACFyC,EAAIvD,QAAQmD,MAAK,CAACC,EAAEC,IAAM,IAAIuB,KAAKxB,EAAE7C,cAAgB,IAAIqE,KAAKvB,EAAE9C,gBAAeuK,IAAI,GADlE,IAE1B,EACAX,UAAAA,CAAW5G,GACT,GAAIA,EAAIzC,OAAS,EAAG,OAAO,KAC3B,MAAMuD,EAAId,EAAIvD,QAAQmD,MAAK,CAACC,EAAEC,IAAM,IAAIuB,KAAKxB,EAAE7C,cAAgB,IAAIqE,KAAKvB,EAAE9C,gBAC1E,OAAO8D,EAAEyG,IAAI,EACf,EACAhB,gBAAAA,CAAiBhC,GACf,MAAMM,EAAS,CAAEoC,OAAO,EAAGT,SAAS,EAAG,WAAW,GAClD,IAAK,MAAMjH,KAAKgF,EACd,CAAChF,EAAErB,WAAYqB,EAAEpB,aAAcoB,EAAEnB,YAAYqD,SAAQR,IACnD,MAAMC,EAAID,GAAK,WACE,MAAb4D,EAAO3D,KAAY2D,EAAO3D,GAAK,GACnC2D,EAAO3D,IAAM,KAGjB,OAAO2D,CACT,EACAvG,aAAAA,CAAcT,GACZ,MAAO,CAACA,EAAEK,WAAYL,EAAEM,aAAcN,EAAEO,YAAY6G,MAAKhE,GAAW,aAANA,GAChE,EACA2E,UAAAA,CAAWC,GACT,OAAa,MAATA,EAAsB,GACL,kBAAVA,EAEFA,EAAM8B,WAAW,KAAO,MAAQ,MAElC9B,EAAQ,EAAI,MAASA,EAAQ,EAAI,MAAQ,EAClD,EACAC,WAAAA,CAAYD,GACV,OAAa,MAATA,EAAsB,IACL,kBAAVA,EAA2BA,EAC9BA,EAAQ,EAAI,IAAIA,IAAU,GAAGA,GACvC,EACAxH,UAAAA,CAAW6G,GACT,OAAOA,EAAQ,YAAc,YAC/B,IC7SJ,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,UJuCA,IACEtM,KAAM,cACNgP,WAAY,CACVC,sBAAqB,EACrBC,mBAAkBA,IAGpBtJ,IAAAA,GACE,MAAO,CAELuJ,gBAAiB,KACjBC,UAAU,EAEd,EAEA9I,SAAU,CACR+I,QAAAA,GACE,OAAO7P,aAAa6J,QAAQ,YAC9B,EAEAiG,QAAAA,GACE,OAAO/I,KAAK4I,iBAAmB5I,KAAK4I,gBAAgBI,MAAwB,YAC9E,EAEAhP,eAAAA,GACE,OAAIgG,KAAK4I,iBAAiBK,SAAiBjJ,KAAK4I,gBAAgBK,SAC5DjJ,KAAK4I,iBAAiBM,SAAiBlJ,KAAK4I,gBAAgBM,SACzD,cACT,EAEAjP,SAAAA,GACE,MAAO,CACLkP,OAAQ,SACRC,MAAO,QACPC,MAAO,QACPC,WAAY,cACZtJ,KAAK+I,WAAa,YACtB,GAIFQ,OAAAA,GACEvJ,KAAKwJ,cACP,EAEAhH,OAAAA,GACOxC,KAAK8I,UAAa9I,KAAK4I,kBAC1Ba,QAAQC,KAAK,iFACb1J,KAAK1F,SAET,EAEAqI,QAAS,CACP6G,YAAAA,GACE,MAAMG,EAAiB1Q,aAAa6J,QAAQ,aAC5C,GAAK6G,EACL,IACE3J,KAAK4I,gBAAkBV,KAAKC,MAAMwB,EACpC,CAAE,MAAOC,GACPH,QAAQI,MAAM,wCAAyCD,GACvD5J,KAAK4I,gBAAkB,IACzB,MANuB5I,KAAK4I,gBAAkB,IAOhD,EAEAtO,MAAAA,GACErB,aAAa6Q,WAAW,aACxB7Q,aAAa6Q,WAAW,aACxB3Q,OAAOC,cAAc,IAAIC,MAAM,gBAC/B2G,KAAK+J,QAAQvQ,KAAK,IACpB,IK9GJ,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,SAASwQ,GAAQ,CAAC,YAAY,qBAEzF,U,UCPStQ,MAAM,sB,IAIFA,MAAM,Y,IAKNA,MAAM,Y,IAKNA,MAAM,Y,IAKNA,MAAM,Y,eAcFA,MAAM,Y,IAKNA,MAAM,Y,IAKNA,MAAM,Y,IAKNA,MAAM,Y,IAKNA,MAAM,Y,eASNA,MAAM,Y,IAKNA,MAAM,Y,IAKNA,MAAM,Y,IAKNA,MAAM,Y,eASNA,MAAM,Y,IAKNA,MAAM,Y,IAKNA,MAAM,Y,IAKNA,MAAM,Y,IAKNA,MAAM,Y,eASRA,MAAM,Y,IAKNA,MAAM,Y,UASVA,MAAM,W,UACNA,MAAM,S,IAENA,MAAM,c,2EArIfC,EAAAA,EAAAA,IA2IM,aA1IJE,EAAAA,EAAAA,IAyIM,MAzIND,GAyIM,gBAxIJC,EAAAA,EAAAA,IAAiB,UAAb,YAAQ,KACZA,EAAAA,EAAAA,IAsIO,QAtIAoQ,SAAM7P,EAAA,MAAAA,EAAA,KAAA8P,EAAAA,EAAAA,KAAA,IAAA7P,IAAUN,EAAAoQ,UAAApQ,EAAAoQ,YAAA9P,IAAQ,e,EAE7BR,EAAAA,EAAAA,IAGM,MAHNK,GAGM,gBAFJL,EAAAA,EAAAA,IAAuC,SAAhCuQ,IAAI,YAAW,aAAS,cAC/BvQ,EAAAA,EAAAA,IAAoE,S,qCAApDe,EAAAyP,KAAKnB,SAAQpO,GAAEC,KAAK,OAAOsN,GAAG,WAAWiC,SAAA,I,iBAAzC1P,EAAAyP,KAAKnB,eAGvBrP,EAAAA,EAAAA,IAGM,MAHNc,GAGM,gBAFJd,EAAAA,EAAAA,IAAuC,SAAhCuQ,IAAI,YAAW,aAAS,cAC/BvQ,EAAAA,EAAAA,IAAwE,S,qCAAxDe,EAAAyP,KAAKE,SAAQzP,GAAEC,KAAK,WAAWsN,GAAG,WAAWiC,SAAA,I,iBAA7C1P,EAAAyP,KAAKE,eAGvB1Q,EAAAA,EAAAA,IAGM,MAHNyB,GAGM,gBAFJzB,EAAAA,EAAAA,IAAsD,SAA/CuQ,IAAI,mBAAkB,qBAAiB,cAC9CvQ,EAAAA,EAAAA,IAAsF,S,qCAAtEe,EAAAyP,KAAKG,gBAAe1P,GAAEC,KAAK,WAAWsN,GAAG,kBAAkBiC,SAAA,I,iBAA3D1P,EAAAyP,KAAKG,sBAGvB3Q,EAAAA,EAAAA,IASM,MATNwM,GASM,gBARJxM,EAAAA,EAAAA,IAA+B,SAAxBuQ,IAAI,QAAO,SAAK,cACvBvQ,EAAAA,EAAAA,IAMS,U,qCANQe,EAAAyP,KAAKrB,KAAIlO,GAAEuN,GAAG,OAAOiC,SAAA,I,gBACpCzQ,EAAAA,EAAAA,IAAkE,UAAzD2M,MAAO,KAAMiE,SAAA,IAAS,8BAA0B,IACzD5Q,EAAAA,EAAAA,IAAwC,UAAhC2M,MAAM,WAAU,WAAO,IAC/B3M,EAAAA,EAAAA,IAA0C,UAAlC2M,MAAM,YAAW,YAAQ,IACjC3M,EAAAA,EAAAA,IAAwC,UAAhC2M,MAAM,WAAU,WAAO,IAC/B3M,EAAAA,EAAAA,IAAoC,UAA5B2M,MAAM,SAAQ,SAAK,iBALZ5L,EAAAyP,KAAKrB,UAUC,YAAdpO,EAAAyP,KAAKrB,OAAI,WAApBrP,EAAAA,EAAAA,IA0BM,MAAAkC,GAAA,gBAzBFhC,EAAAA,EAAAA,IAAwB,UAApB,mBAAe,KACnBA,EAAAA,EAAAA,IAGM,MAHNiC,GAGM,gBAFFjC,EAAAA,EAAAA,IAAwC,SAAjCuQ,IAAI,YAAW,cAAU,cAChCvQ,EAAAA,EAAAA,IAAoE,S,qCAApDe,EAAAyP,KAAKK,SAAQ5P,GAAEC,KAAK,OAAOsN,GAAG,WAAWiC,SAAA,I,iBAAzC1P,EAAAyP,KAAKK,eAGzB7Q,EAAAA,EAAAA,IAGM,MAHNoC,GAGM,gBAFFpC,EAAAA,EAAAA,IAAwC,SAAjCuQ,IAAI,YAAW,cAAU,cAChCvQ,EAAAA,EAAAA,IAAoE,S,qCAApDe,EAAAyP,KAAKM,SAAQ7P,GAAEC,KAAK,OAAOsN,GAAG,WAAWiC,SAAA,I,iBAAzC1P,EAAAyP,KAAKM,eAGzB9Q,EAAAA,EAAAA,IAGM,MAHNqC,GAGM,gBAFFrC,EAAAA,EAAAA,IAAiC,SAA1BuQ,IAAI,SAAQ,UAAM,cACzBvQ,EAAAA,EAAAA,IAA+D,S,qCAA/Ce,EAAAyP,KAAKlG,MAAKrJ,GAAEC,KAAK,QAAQsN,GAAG,QAAQiC,SAAA,I,iBAApC1P,EAAAyP,KAAKlG,YAGzBtK,EAAAA,EAAAA,IAGM,MAHNsC,GAGM,gBAFFtC,EAAAA,EAAAA,IAA+C,SAAxCuQ,IAAI,eAAc,kBAAc,cACvCvQ,EAAAA,EAAAA,IAA2F,S,qCAA3Ee,EAAAyP,KAAKO,YAAW9P,GAAEC,KAAK,SAASsN,GAAG,cAAciC,SAAA,GAASO,IAAI,IAAIC,IAAI,K,iBAAtElQ,EAAAyP,KAAKO,kBAGzB/Q,EAAAA,EAAAA,IAGM,MAHNuC,GAGM,gBAFFvC,EAAAA,EAAAA,IAAyC,SAAlCuQ,IAAI,aAAY,cAAU,cACjCvQ,EAAAA,EAAAA,IAAsE,S,qCAAtDe,EAAAyP,KAAKU,UAASjQ,GAAEC,KAAK,OAAOsN,GAAG,YAAYiC,SAAA,I,iBAA3C1P,EAAAyP,KAAKU,mBAAS,eAKb,aAAdnQ,EAAAyP,KAAKrB,OAAI,WAApBrP,EAAAA,EAAAA,IAqBM,MAAA4C,GAAA,gBApBF1C,EAAAA,EAAAA,IAAyB,UAArB,oBAAgB,KACpBA,EAAAA,EAAAA,IAGM,MAHN2C,GAGM,gBAFF3C,EAAAA,EAAAA,IAA4C,SAArCuQ,IAAI,gBAAe,cAAU,cACpCvQ,EAAAA,EAAAA,IAA4E,S,qCAA5De,EAAAyP,KAAKW,aAAYlQ,GAAEC,KAAK,OAAOsN,GAAG,eAAeiC,SAAA,I,iBAAjD1P,EAAAyP,KAAKW,mBAGzBnR,EAAAA,EAAAA,IAGM,MAHN4C,GAGM,gBAFF5C,EAAAA,EAAAA,IAA8C,SAAvCuQ,IAAI,mBAAkB,aAAS,cACtCvQ,EAAAA,EAAAA,IAAkF,S,uCAAlEe,EAAAyP,KAAKY,gBAAenQ,GAAEC,KAAK,OAAOsN,GAAG,kBAAkBiC,SAAA,I,iBAAvD1P,EAAAyP,KAAKY,sBAGzBpR,EAAAA,EAAAA,IAGM,MAHN8C,GAGM,gBAFF9C,EAAAA,EAAAA,IAAyC,SAAlCuQ,IAAI,iBAAgB,UAAM,cACjCvQ,EAAAA,EAAAA,IAA+E,S,uCAA/De,EAAAyP,KAAKa,cAAapQ,GAAEC,KAAK,QAAQsN,GAAG,gBAAgBiC,SAAA,I,iBAApD1P,EAAAyP,KAAKa,oBAGzBrR,EAAAA,EAAAA,IAGM,MAHN+C,GAGM,gBAFF/C,EAAAA,EAAAA,IAAmD,SAA5CuQ,IAAI,sBAAqB,eAAW,cAC3CvQ,EAAAA,EAAAA,IAAwF,S,uCAAxEe,EAAAyP,KAAKc,mBAAkBrQ,GAAEC,KAAK,OAAOsN,GAAG,qBAAqBiC,SAAA,I,iBAA7D1P,EAAAyP,KAAKc,4BAAkB,eAKtB,YAAdvQ,EAAAyP,KAAKrB,OAAI,WAApBrP,EAAAA,EAAAA,IA0BM,MAAAkD,GAAA,gBAzBFhD,EAAAA,EAAAA,IAAiC,UAA7B,4BAAwB,KAC5BA,EAAAA,EAAAA,IAGM,MAHNkD,GAGM,gBAFFlD,EAAAA,EAAAA,IAA2C,SAApCuQ,IAAI,eAAc,cAAU,cACnCvQ,EAAAA,EAAAA,IAA0E,S,uCAA1De,EAAAyP,KAAKe,YAAWtQ,GAAEC,KAAK,OAAOsN,GAAG,cAAciC,SAAA,I,iBAA/C1P,EAAAyP,KAAKe,kBAGzBvR,EAAAA,EAAAA,IAGM,MAHNmD,GAGM,gBAFFnD,EAAAA,EAAAA,IAA6C,SAAtCuQ,IAAI,kBAAiB,aAAS,cACrCvQ,EAAAA,EAAAA,IAAgF,S,uCAAhEe,EAAAyP,KAAKgB,eAAcvQ,GAAEC,KAAK,OAAOsN,GAAG,iBAAiBiC,SAAA,I,iBAArD1P,EAAAyP,KAAKgB,qBAGzBxR,EAAAA,EAAAA,IAGM,MAHNoD,GAGM,gBAFFpD,EAAAA,EAAAA,IAAwC,SAAjCuQ,IAAI,gBAAe,UAAM,cAChCvQ,EAAAA,EAAAA,IAA6E,S,uCAA7De,EAAAyP,KAAKiB,aAAYxQ,GAAEC,KAAK,QAAQsN,GAAG,eAAeiC,SAAA,I,iBAAlD1P,EAAAyP,KAAKiB,mBAGzBzR,EAAAA,EAAAA,IAGM,MAHNsD,GAGM,gBAFFtD,EAAAA,EAAAA,IAAkD,SAA3CuQ,IAAI,qBAAoB,eAAW,cAC1CvQ,EAAAA,EAAAA,IAAsF,S,uCAAtEe,EAAAyP,KAAKkB,kBAAiBzQ,GAAEC,KAAK,OAAOsN,GAAG,oBAAoBiC,SAAA,I,iBAA3D1P,EAAAyP,KAAKkB,wBAGzB1R,EAAAA,EAAAA,IAGM,MAHNuD,GAGM,gBAFFvD,EAAAA,EAAAA,IAAgD,SAAzCuQ,IAAI,gBAAe,kBAAc,cACxCvQ,EAAAA,EAAAA,IAA8E,S,uCAA9De,EAAAyP,KAAKmB,aAAY1Q,GAAEC,KAAK,SAASsN,GAAG,eAAeiC,SAAA,I,iBAAnD1P,EAAAyP,KAAKmB,sBAAY,eAKhB,UAAd5Q,EAAAyP,KAAKrB,OAAI,WAApBrP,EAAAA,EAAAA,IAWM,MAAA8D,GAAA,gBAVJ5D,EAAAA,EAAAA,IAAsB,UAAlB,iBAAa,KACjBA,EAAAA,EAAAA,IAGM,MAHN6D,GAGM,gBAFJ7D,EAAAA,EAAAA,IAAyC,SAAlCuQ,IAAI,aAAY,cAAU,cACjCvQ,EAAAA,EAAAA,IAAsE,S,uCAAtDe,EAAAyP,KAAKoB,UAAS3Q,GAAEC,KAAK,OAAOsN,GAAG,YAAYiC,SAAA,I,iBAA3C1P,EAAAyP,KAAKoB,gBAGvB5R,EAAAA,EAAAA,IAGM,MAHNwE,GAGM,gBAFJxE,EAAAA,EAAAA,IAAsC,SAA/BuQ,IAAI,cAAa,UAAM,cAC9BvQ,EAAAA,EAAAA,IAAyE,S,uCAAzDe,EAAAyP,KAAKqB,WAAU5Q,GAAEC,KAAK,QAAQsN,GAAG,aAAaiC,SAAA,I,iBAA9C1P,EAAAyP,KAAKqB,oBAAU,8BAKnC7R,EAAAA,EAAAA,IAAuC,UAA/BkB,KAAK,UAAS,YAAQ,IAELH,EAAA+Q,iBAAc,WAAvChS,EAAAA,EAAAA,IAAiE,IAAjE4E,IAAiEzE,EAAAA,EAAAA,IAArBc,EAAA+Q,gBAAc,oBACnC/Q,EAAAgR,eAAY,WAAnCjS,EAAAA,EAAAA,IAA2D,IAA3DkF,IAA2D/E,EAAAA,EAAAA,IAAnBc,EAAAgR,cAAY,qBAEpD/R,EAAAA,EAAAA,IAGI,IAHJiF,GAGI,wBAHkB,gCAEpB+M,EAAAA,EAAAA,IAA4CC,EAAA,CAA/BC,GAAG,KAAG,C,kBAAC,IAAU3R,EAAA,MAAAA,EAAA,cAAV,kB,yBAQ9B,QACEX,KAAM,aACN4F,IAAAA,GACE,MAAO,CACLsM,eAAgB,GAChBC,aAAc,GACdvB,KAAM,CACJnB,SAAU,GACVqB,SAAU,GACVC,gBAAiB,GACjBxB,KAAM,KAEN0B,SAAU,GACVC,SAAU,GACVxG,MAAO,GACPyG,YAAa,GACbG,UAAW,GAEXC,aAAc,GACdC,gBAAiB,GACjBC,cAAe,GACfC,mBAAoB,GAEpBC,YAAa,GACbC,eAAgB,GAChBC,aAAc,GACdC,kBAAmB,GACnBC,aAAa,GAEbC,UAAW,GACXC,WAAY,IAGlB,EACAM,MAAO,CAEL,YAAYC,EAASC,GACH,YAAZD,GAAqC,YAAZC,IAC3BlM,KAAKqK,KAAKK,SAAW,GACrB1K,KAAKqK,KAAKM,SAAW,GACrB3K,KAAKqK,KAAKlG,MAAQ,GAClBnE,KAAKqK,KAAKO,YAAc,GACxB5K,KAAKqK,KAAKU,UAAY,IAER,aAAZkB,GAAsC,aAAZC,IAC5BlM,KAAKqK,KAAKW,aAAe,GACzBhL,KAAKqK,KAAKY,gBAAkB,GAC5BjL,KAAKqK,KAAKa,cAAgB,GAC1BlL,KAAKqK,KAAKc,mBAAqB,IAEjB,YAAZc,GAAqC,YAAZC,IAC3BlM,KAAKqK,KAAKe,YAAc,GACxBpL,KAAKqK,KAAKgB,eAAiB,GAC3BrL,KAAKqK,KAAKiB,aAAe,GACzBtL,KAAKqK,KAAKkB,kBAAoB,GAC9BvL,KAAKqK,KAAKmB,aAAe,GAG7B,GAEF7I,QAAS,CACP,cAAMwH,GAKJ,GAJAnK,KAAK4L,aAAe,GACpB5L,KAAK2L,eAAiB,GAGlB3L,KAAKqK,KAAKE,WAAavK,KAAKqK,KAAKG,gBAEnC,YADAxK,KAAK4L,aAAe,2BAGtB,GAAuB,OAAnB5L,KAAKqK,KAAKrB,KAEZ,YADAhJ,KAAK4L,aAAe,yBAItB,MAAMO,EAAO,CACXjD,SAAUlJ,KAAKqK,KAAKnB,SACpBqB,SAAUvK,KAAKqK,KAAKE,SACpBvB,KAAMhJ,KAAKqK,KAAKrB,MAIlB,GAAuB,YAAnBhJ,KAAKqK,KAAKrB,KAAoB,CAChC,IAAKhJ,KAAKqK,KAAKK,WAAa1K,KAAKqK,KAAKM,WAAa3K,KAAKqK,KAAKlG,QAAUnE,KAAKqK,KAAKO,cAAgB5K,KAAKqK,KAAKU,UAEvG,YADA/K,KAAK4L,aAAe,6FAGxBO,EAAKC,UAAYpM,KAAKqK,KAAKK,SAC3ByB,EAAKE,UAAYrM,KAAKqK,KAAKM,SAC3BwB,EAAKhI,MAAQnE,KAAKqK,KAAKlG,MACvBgI,EAAKG,cAAgBC,SAASvM,KAAKqK,KAAKO,aACxCuB,EAAKpB,UAAY/K,KAAKqK,KAAKU,SAC7B,CAAE,GAAuB,aAAnB/K,KAAKqK,KAAKrB,KAAqB,CACjC,IAAKhJ,KAAKqK,KAAKW,eAAiBhL,KAAKqK,KAAKY,kBAAoBjL,KAAKqK,KAAKa,gBAAkBlL,KAAKqK,KAAKc,mBAElG,YADAnL,KAAK4L,aAAe,sCAItBO,EAAKC,UAAYpM,KAAKqK,KAAKW,aAC3BmB,EAAKhI,MAAQnE,KAAKqK,KAAKa,cACvBiB,EAAKK,YAAcxM,KAAKqK,KAAKY,gBAC7BkB,EAAKM,WAAazM,KAAKqK,KAAKc,mBAC5BgB,EAAKnT,OAAS,QAChB,MACG,GAAuB,YAAnBgH,KAAKqK,KAAKrB,KAAoB,CACrC,IAAKhJ,KAAKqK,KAAKe,cAAgBpL,KAAKqK,KAAKgB,iBAAmBrL,KAAKqK,KAAKiB,eAAiBtL,KAAKqK,KAAKkB,oBAAsBvL,KAAKqK,KAAKmB,aAE7H,YADAxL,KAAK4L,aAAe,6FAGxBO,EAAKC,UAAYpM,KAAKqK,KAAKe,YAC3Be,EAAKhI,MAAQnE,KAAKqK,KAAKiB,aACvBa,EAAKO,WAAa1M,KAAKqK,KAAKgB,eAC5Bc,EAAKM,WAAazM,KAAKqK,KAAKkB,kBAC5BY,EAAKQ,cAAgBJ,SAASvM,KAAKqK,KAAKmB,aAC1C,CAEA,GAAuB,UAAnBxL,KAAKqK,KAAKrB,KAAkB,CAC9B,IAAKhJ,KAAKqK,KAAKoB,YAAczL,KAAKqK,KAAKqB,WAErC,YADA1L,KAAK4L,aAAe,yDAGtBO,EAAKC,UAAYpM,KAAKqK,KAAKoB,UAC3BU,EAAKhI,MAAQnE,KAAKqK,KAAKqB,UACzB,CAEAjC,QAAQmD,IAAI,2BAA4BT,GAExC,IACE,MAAMpT,QAAYiK,MAAM,qCAAsC,CAC5D6J,OAAQ,OACRjK,QAAS,CAAE,eAAgB,oBAC3BuJ,KAAMjE,KAAK4E,UAAUX,KAGjB9M,QAAatG,EAAImK,OAEnBnK,EAAIgU,IACN/M,KAAK2L,eAAiB,mDACtB3L,KAAK4L,aAAe,GAEpB5L,KAAKgN,YAGLC,YAAW,KACTjN,KAAK+J,QAAQvQ,KAAK,OACjB,OAGHwG,KAAK4L,aAAevM,EAAKwK,OAAS,uBAClCJ,QAAQI,MAAM,sBAAuBxK,GAEzC,CAAE,MAAO6N,GACPzD,QAAQI,MAAM,qCAAsCqD,GACpDlN,KAAK4L,aAAe,mEACtB,CACF,EACAoB,SAAAA,GACIhN,KAAKqK,KAAO,CACRnB,SAAU,GACVqB,SAAU,GACVC,gBAAiB,GACjBxB,KAAM,KACN0B,SAAU,GAGVC,SAAU,GACVxG,MAAO,GACPyG,YAAa,GACbG,UAAW,GAGXC,aAAc,GACdC,gBAAiB,GACjBC,cAAe,GACfC,mBAAoB,GAGpBC,YAAa,GACbC,eAAgB,GAChBC,aAAc,GACdC,kBAAmB,GACnBC,aAAa,GAGbC,UAAW,GACXC,WAAY,GAEpB,ICpUJ,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,U,UCPShS,MAAM,mB,IAIFA,MAAM,Y,IAKNA,MAAM,Y,UAeUA,MAAM,W,UACRA,MAAM,S,2CA1B/BC,EAAAA,EAAAA,IA2BM,aA1BJE,EAAAA,EAAAA,IAqBM,MArBND,GAqBM,cApBJC,EAAAA,EAAAA,IAAc,UAAV,SAAK,KAETA,EAAAA,EAAAA,IAiBO,QAjBAoQ,SAAM7P,EAAA,KAAAA,EAAA,IAAA8P,EAAAA,EAAAA,KAAA,IAAA7P,IAAUN,EAAAoT,OAAApT,EAAAoT,SAAA9S,IAAK,e,EAC1BR,EAAAA,EAAAA,IAGM,MAHNK,GAGM,cAFJL,EAAAA,EAAAA,IAAiC,SAA1BuQ,IAAI,SAAQ,UAAM,cACzBvQ,EAAAA,EAAAA,IAAyD,S,qCAAzCe,EAAAuJ,MAAKrJ,GAAEC,KAAK,OAAOsN,GAAG,QAAQiC,SAAA,I,iBAA9B1P,EAAAuJ,YAGlBtK,EAAAA,EAAAA,IAGM,MAHNc,GAGM,cAFJd,EAAAA,EAAAA,IAAuC,SAAhCuQ,IAAI,YAAW,aAAS,cAC/BvQ,EAAAA,EAAAA,IAAmE,S,qCAAnDe,EAAA2P,SAAQzP,GAAEC,KAAK,WAAWsN,GAAG,WAAWiC,SAAA,I,iBAAxC1P,EAAA2P,cAAQ,aAG1B1Q,EAAAA,EAAAA,IAAoC,UAA5BkB,KAAK,UAAS,SAAK,WAUtBH,EAAA+Q,iBAAc,WAAvBhS,EAAAA,EAAAA,IAAiE,IAAjE2B,IAAiExB,EAAAA,EAAAA,IAArBc,EAAA+Q,gBAAc,oBACjD/Q,EAAAgR,eAAY,WAArBjS,EAAAA,EAAAA,IAA2D,IAA3D0M,IAA2DvM,EAAAA,EAAAA,IAAnBc,EAAAgR,cAAY,qB,CAMxD,QACEnS,KAAM,UACN4F,IAAAA,GACE,MAAO,CACL8E,MAAO,GACPoG,SAAU,GACVqB,aAAc,GACdD,eAAgB,GAEpB,EACAhJ,QAAS,CACP,WAAMwK,GAEJnN,KAAK4L,aAAe,GACpB5L,KAAK2L,eAAiB,GACtBlC,QAAQ2D,MAAM,iBACd3D,QAAQmD,IAAI,kCAAmC5M,KAAKmE,OAEpD,MAAM7E,EAAUC,EAAAA,EAAIC,aAEpB,IACE,MAAMzG,QAAYiK,MAAM,GAAG1D,UAAiB,CAC1CuN,OAAQ,OACRjK,QAAS,CAAE,eAAgB,oBAC3BuJ,KAAMjE,KAAK4E,UAAU,CACnB3I,MAAOnE,KAAKmE,MACZoG,SAAUvK,KAAKuK,aAIblL,QAAatG,EAAImK,OAGnBnK,EAAIgU,IAAM1N,EAAKgO,OACjB5D,QAAQmD,IAAI,kDACZ5M,KAAK2L,eAAiB,8BAA8BtM,EAAKiO,KAAKnJ,wBAG9DlL,aAAasU,QAAQ,YAAalO,EAAKgO,OAMvCpU,aAAasU,QAAQ,YAAarF,KAAK4E,UAAUzN,EAAKiO,OAGtD7D,QAAQmD,IAAI,2CACZzT,OAAOC,cAAc,IAAIC,MAAM,eAE3B2G,KAAK+J,QAGL/J,KAAK+J,QAAQvQ,KAAK,cAAcyJ,MAAK,SAElCE,OAAM+J,IACPzD,QAAQI,MAAM,uDAAwDqD,GACtElN,KAAK4L,aAAe,oCAGtBnC,QAAQC,KAAK,oIACbvQ,OAAOqU,SAASC,KAAO,oBAI3BzN,KAAK4L,aAAevM,EAAKwK,OAAS,+CAClCJ,QAAQI,MAAM,+BAAgC7J,KAAK4L,cAEvD,CAAE,MAAOsB,GACPzD,QAAQI,MAAM,mDAAoDqD,GAClElN,KAAK4L,aAAe,oDACtB,CAAE,QACAnC,QAAQiE,UACV,CACF,ICpGJ,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,U,UCROhU,MAAM,gB,eAMFA,MAAM,S,IAKNA,MAAM,S,IAKNA,MAAM,S,uBAKNA,MAAM,S,0BAONA,MAAM,S,IAKNA,MAAM,W,mFAjCfC,EAAAA,EAAAA,IAyDM,MAzDNC,GAyDM,gBAxDJC,EAAAA,EAAAA,IAAqB,UAAjB,gBAAY,IAELe,EAAA+S,UAAO,WAAlBhU,EAAAA,EAAAA,IAA0C,MAAAO,GAAtB,uBAAgB,WAEpCP,EAAAA,EAAAA,IAkDO,Q,MAlDOsQ,SAAM7P,EAAA,KAAAA,EAAA,IAAA8P,EAAAA,EAAAA,KAAA,IAAA7P,IAAUN,EAAA6T,MAAA7T,EAAA6T,QAAAvT,IAAI,e,EAChCR,EAAAA,EAAAA,IAGM,MAHNc,GAGM,cAFJd,EAAAA,EAAAA,IAAwB,aAAjB,aAAS,cAChBA,EAAAA,EAAAA,IAA0E,S,qCAArDe,EAAAyP,KAAKpB,SAAQnO,GAAEC,KAAK,OAAOC,YAAY,a,iBAAvCJ,EAAAyP,KAAKpB,cAAQ,GAAnB/D,MAAR,SAGTrL,EAAAA,EAAAA,IAGM,MAHNyB,GAGM,cAFJzB,EAAAA,EAAAA,IAAoB,aAAb,SAAK,cACZA,EAAAA,EAAAA,IAAqE,S,qCAArDe,EAAAyP,KAAKlG,MAAKrJ,GAAEC,KAAK,QAAQ8S,SAAA,GAASnU,MAAM,Y,iBAAxCkB,EAAAyP,KAAKlG,YAGvBtK,EAAAA,EAAAA,IAGM,MAHNwM,GAGM,gBAFJxM,EAAAA,EAAAA,IAAmB,aAAZ,QAAI,KACXA,EAAAA,EAAAA,IAAsE,SAA9D2M,MAAOzM,EAAA+T,cAAe/S,KAAK,OAAO8S,SAAA,GAASnU,MAAM,Y,aAGhB,UAAlBK,EAAA+T,eAA+C,UAAlB/T,EAAA+T,gBAAa,WAAnEnU,EAAAA,EAAAA,IAKM,MALNmC,GAKM,CAJ2B,UAAlB/B,EAAA+T,gBAAa,WAA1BnU,EAAAA,EAAAA,IAAyD,QAAAsC,GAAjB,eAAS,eAClB,UAAlBlC,EAAA+T,gBAAa,WAA1BnU,EAAAA,EAAAA,IAA0D,QAAAuC,GAAlB,gBAAU,eACnB,UAAlBnC,EAAA+T,eAAa,qBAA1BnU,EAAAA,EAAAA,IAA4G,S,2CAAtDiB,EAAAyP,KAAK0D,UAASjT,GAAEC,KAAK,OAAOC,YAAY,a,kBAAxCJ,EAAAyP,KAAK0D,eAAS,GAApB7I,MAAR,OAA6B,eACtC,UAAlBnL,EAAA+T,eAAa,qBAA1BnU,EAAAA,EAAAA,IAA8G,S,2CAAxDiB,EAAAyP,KAAKoC,WAAU3R,GAAEC,KAAK,OAAOC,YAAY,c,kBAAzCJ,EAAAyP,KAAKoC,gBAAU,GAArBvH,MAAR,OAA8B,mCAGxErL,EAAAA,EAAAA,IAGM,MAHNsC,GAGM,gBAFJtC,EAAAA,EAAAA,IAAwB,aAAjB,aAAS,cAChBA,EAAAA,EAAAA,IAAoF,S,qCAA/De,EAAAyP,KAAK2D,SAAQlT,GAAEC,KAAK,MAAMC,YAAY,wB,iBAAtCJ,EAAAyP,KAAK2D,cAAQ,GAAnB9I,MAAR,SAGTrL,EAAAA,EAAAA,IAqBM,MArBNuC,GAqBM,EAnBJvC,EAAAA,EAAAA,IAOS,UANPkB,KAAK,SACLrB,MAAM,cACL+Q,UAAW1Q,EAAAkU,SAAWrT,EAAAsT,OACtB7S,MAAQtB,EAAAkU,QAAiC,GAAvB,uB,QAEhBrT,EAAAsT,OAAS,UAAY,gBAAf,EAAA3R,KAGX1C,EAAAA,EAAAA,IAQS,UAPPkB,KAAK,SACLrB,MAAM,YACLS,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAEN,EAAAoU,OAAApU,EAAAoU,SAAA9T,IACPoQ,UAAW1Q,EAAAkU,SAAWrT,EAAAsT,OACvB7S,MAAM,iBACP,UAED,EAAAmB,OAAA,MAIJ3C,EAAAA,EAAAA,IAAiG,UAAzFkB,KAAK,SAASqT,MAAA,sBAA2BjU,QAAKC,EAAA,KAAAA,EAAA,GAAAU,GAAEuT,EAAAtE,QAAQvQ,KAAK,gBAAe,S,CAOxF,QACEC,KAAM,YACN4F,IAAAA,GACE,MAAO,CACLC,QAASC,EAAAA,EAAIC,aACbmO,SAAS,EACTO,QAAQ,EACRI,SAAU,KACVjE,KAAM,CACJpB,SAAU,GACV9E,MAAO,GACP6E,KAAM,GACNgF,SAAU,IAGhB,EACAjO,SAAU,CACR+N,aAAAA,GACE,MAAM9E,EAAOhJ,KAAKqK,KAAKrB,KACvB,IAAKA,EAAM,MAAO,eAClB,MAAM7I,EAAM,CAAEkJ,MAAO,QAASD,MAAO,QAASD,OAAQ,UACtD,OAAOhJ,EAAI6I,IAASA,EAAKuF,OAAO,GAAGC,cAAgBxF,EAAK1L,MAAM,EAChE,EACA2Q,OAAAA,GAEE,MAAMQ,EAAQC,IAAC,CACbzF,SAAUyF,EAAEzF,UAAY,GACxB+E,SAAUU,EAAEV,UAAY,GACxBD,UAAWW,EAAEX,WAAa,GAC1BtB,WAAYiC,EAAEjC,YAAc,KAG9B,IACE,OAAOvE,KAAK4E,UAAU2B,EAAKzO,KAAKqK,SAAWnC,KAAK4E,UAAU2B,EAAKzO,KAAKsO,UAAY,CAAC,GACnF,CAAE,MACA,OAAO,CACT,CACF,GAEF9L,OAAAA,GACExC,KAAK2O,cACP,EACAhM,QAAS,CACPgM,YAAAA,GAEE,MAAMrB,EAAOpF,KAAKC,MAAMlP,aAAa6J,QAAQ,cAAgB,QACvD8L,EAAgBtB,EAAKnJ,MAAMC,QAAQ,MAAO,OAChDpB,MAAM,GAAGhD,KAAKV,2BAA2BsP,IAAiB,CACxDhM,QAAS,CACPC,cAAe,UAAU5J,aAAa6J,QAAQ,kBAGjDG,MAAKlK,IACJ,KAAID,EAAAA,EAAAA,GAAmBC,GAEvB,OAAOA,EAAImK,UAEZD,MAAK5D,IACJW,KAAKqK,KAAOhL,EACZW,KAAKqK,KAAKlG,MACR9E,EAAKT,aAAeS,EAAKwP,cAAgBxP,EAAKyP,aAAe,GAC/D9O,KAAKqK,KAAKpB,SACR5J,EAAK1B,YAAc0B,EAAK0P,aAAe1P,EAAK2P,YAAc,GAE5DhP,KAAKsO,SAAWpG,KAAKC,MAAMD,KAAK4E,UAAU9M,KAAKqK,UAEhDlH,OAAM+J,IACLzD,QAAQI,MAAM,4BAA6BqD,MAE7ClN,KAAK2N,SAAU,CACjB,EACAQ,KAAAA,GACEnO,KAAKqK,KAAOnC,KAAKC,MAAMD,KAAK4E,UAAU9M,KAAKsO,UAC7C,EACA,UAAMV,GAEJ,IAAK5N,KAAKiO,SAAWjO,KAAKkO,OAAQ,OAClClO,KAAKkO,QAAS,EACd,MAAMU,EAAgB5O,KAAKqK,KAAKlG,MAAMC,QAAQ,MAAO,OACrD,IACE,MAAMhE,QAAU4C,MAAM,GAAGhD,KAAKV,gCAAgCsP,IAAiB,CAC7E/B,OAAQ,MACRjK,QAAS,CACP,eAAgB,mBAChBC,cAAe,UAAU5J,aAAa6J,QAAQ,gBAEhDqJ,KAAMjE,KAAK4E,UAAU,CACnB7D,SAAUjJ,KAAKqK,KAAKpB,SACpB+E,SAAUhO,KAAKqK,KAAK2D,SACpBhF,KAAMhJ,KAAKqK,KAAKrB,KAChB+E,UAAW/N,KAAKqK,KAAK0D,UACrBtB,WAAYzM,KAAKqK,KAAKoC,eAK1B,IAAKrM,EAAE2M,GAAI,MAAM,IAAIkC,MAAM,gBAAgB7O,EAAEpH,WAC7C,MAAMkW,QAAgB9O,EAAE8C,OAGlBiM,EAAUjH,KAAKC,MAAMlP,aAAa6J,QAAQ,cAAgB,MAC1DsM,EAAS,IACVD,EACHlG,SAAUiG,EAAQjG,UAAYjJ,KAAKqK,KAAKpB,UAI1ChQ,aAAasU,QAAQ,YAAarF,KAAK4E,UAAUsC,IAGjDpP,KAAKqK,KAAO,IACPrK,KAAKqK,KACRpB,SAAUmG,EAAOnG,SACjB+E,SAAUoB,EAAOpB,UAGnBhO,KAAKsO,SAAWpG,KAAKC,MAAMD,KAAK4E,UAAU9M,KAAKqK,OAC/CrK,KAAK2O,eAGLxV,OAAOC,cAAc,IAAIC,MAAM,eAG/BC,MAAM,mBACR,CAAE,MAAOsQ,GACPH,QAAQI,MAAMD,GACdtQ,MAAMsQ,EAAEyF,SAAW,yBACrB,CAAE,QACArP,KAAKkO,QAAS,CAChB,CACF,IC3LJ,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,U,UCROxU,MAAM,gB,IACJA,MAAM,Q,IAEFA,MAAM,S,IACNA,MAAM,S,IAQVA,MAAM,U,oGAZbC,EAAAA,EAAAA,IAqBM,MArBNC,GAqBM,EApBJC,EAAAA,EAAAA,IAQM,MARNK,GAQM,EAPJL,EAAAA,EAAAA,IAKM,aAJJA,EAAAA,EAAAA,IAAgD,MAAhDc,GAAmB,YAAQb,EAAAA,EAAAA,IAAGC,EAAAuV,WAAS,IACvCzV,EAAAA,EAAAA,IAEM,MAFNyB,IAEMxB,EAAAA,EAAAA,IADDc,EAAA2U,WAAa,aAAc,OAAGzV,EAAAA,EAAAA,IAAGc,EAAA4U,YAAU,MAGlD3V,EAAAA,EAAAA,IAAoF,UAA5EH,MAAM,QAASS,QAAKC,EAAA,KAAAA,EAAA,GAAAU,GAAEuT,EAAAtE,QAAQvQ,KAAK,gBAAe,wBAI5DK,EAAAA,EAAAA,IAKM,MALNwM,GAKM,EAJJwF,EAAAA,EAAAA,IAAkG4D,EAAA,CAArF1D,GAAIhS,EAAA2V,IAAI,mBAAqB,qBAAmB,U,mBAAS,IAAetV,EAAA,KAAAA,EAAA,aAAf,uB,uBACtEyR,EAAAA,EAAAA,IAA4F4D,EAAA,CAA/E1D,GAAIhS,EAAA2V,IAAI,aAAqB,qBAAmB,U,mBAAS,IAAStV,EAAA,KAAAA,EAAA,aAAT,iB,uBACtEyR,EAAAA,EAAAA,IAAgG4D,EAAA,CAAnF1D,GAAIhS,EAAA2V,IAAI,YAAoB,qBAAmB,U,mBAAS,IAActV,EAAA,KAAAA,EAAA,aAAd,sB,uBACrEyR,EAAAA,EAAAA,IAAiG4D,EAAA,CAApF1D,GAAIhS,EAAA2V,IAAI,kBAAqB,qBAAmB,U,mBAAS,IAActV,EAAA,KAAAA,EAAA,aAAd,sB,qCAIxEG,EAAAA,EAAAA,IAAsCoV,EAAA,CAAxBlV,IAAK4T,EAAAuB,OAAOC,a,CCpB9B,MAAMzV,GAAS,IAAIuF,IAIZsE,eAAe6L,GAAiBR,GACrC,MAAMS,EAAUxQ,EAAAA,EAAIC,aACpB,GAAIpF,GAAO4V,IAAIV,GAAY,OAAOlV,GAAO6H,IAAIqN,GAE7C,MAAMlP,QAAU4C,MAAM,GAAG+M,oBAA0BT,IAAa,CAC9D1M,QAAS,CAAEC,cAAe,UAAU5J,aAAa6J,QAAQ,kBAE3D,IAAK1C,EAAE2M,GAAI,MAAM,IAAIkC,MAAM,kCAC3B,MAAM5P,QAAae,EAAE8C,OAErB,OADA9I,GAAO+H,IAAImN,EAAWjQ,GACfA,CACT,CAEO,SAAS4Q,GAAiBX,EAAWY,GAC1C9V,GAAO+H,IAAImN,EAAWY,EACxB,CAEO,SAASC,GAAwBb,GAAalV,GAAOgW,OAAOd,EAAY,CDQ/E,QACEe,OAAAA,GACE,MAAO,CACLC,qBAAsBA,IAAMtQ,KAAKuQ,gBACjCC,qBAAsBA,IAAMxQ,KAAKyQ,cAErC,EACApR,IAAAA,GACE,MAAO,CACLC,QAASC,EAAAA,EAAIC,aACbgQ,WAAY,GACZD,UAAW,GACXkB,cAAe,KAEnB,EACAhX,KAAM,cACNsG,SAAU,CACRuP,SAAAA,GAAe,OAAOtP,KAAK4P,OAAOc,OAAOpB,SAAW,GAItD,aAAM9M,GACJxC,KAAK2Q,eACL3Q,KAAKyQ,oBAAsBX,GAAiB9P,KAAKsP,UACnD,EACA3M,QAAS,CACP,kBAAMgO,GACJ,MAAM5X,QAAYiK,MAAM,GAAGhD,KAAKV,yBAAyBU,KAAKsP,YAAa,CACzE1M,QAAS,CACPC,cAAe,UAAU5J,aAAa6J,QAAQ,kBAG5CzD,QAAatG,EAAImK,QACnBpK,EAAAA,EAAAA,GAAmBC,KACvBiH,KAAKwP,WAAanQ,EAAKT,YACvBoB,KAAKuP,UAAYlQ,EAAK1B,WACxB,EACA,mBAAM4S,GACJ,MAAMlI,EAAKrI,KAAK4P,OAAOc,OAAOpB,UAC9BtP,KAAKyQ,oBAAsBX,GAAiBzH,GAC5C4H,GAAiB5H,EAAIrI,KAAKyQ,cAC5B,EACAf,GAAAA,CAAIkB,GAEF,MAAO,CAAEnX,KAAM,WAAWmX,IAASF,OAAQ,CAAEpB,UAAWtP,KAAKsP,WAAauB,MAAO7Q,KAAK4P,OAAOiB,MAC/F,IEpEJ,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,U,UCROnX,MAAM,W,IACJA,MAAM,Q,IAGFA,MAAM,S,IAMVA,MAAM,U,oGAVbC,EAAAA,EAAAA,IAmBM,MAnBNC,GAmBM,EAlBJC,EAAAA,EAAAA,IAMM,MANNK,GAMM,EALJL,EAAAA,EAAAA,IAGM,yBAFJA,EAAAA,EAAAA,IAA4C,OAAvCH,MAAM,SAAQ,uBAAmB,KACtCG,EAAAA,EAAAA,IAAoE,MAApEc,IAAoEb,EAAAA,EAAAA,IAA9Cc,EAAA4U,YAAc,yBAAJ,MAElC3V,EAAAA,EAAAA,IAAoF,UAA5EH,MAAM,QAASS,QAAKC,EAAA,KAAAA,EAAA,GAAAU,GAAEuT,EAAAtE,QAAQvQ,KAAK,gBAAe,wBAI5DK,EAAAA,EAAAA,IAKM,MALNyB,GAKM,EAJJuQ,EAAAA,EAAAA,IAA0F4D,EAAA,CAA7E1D,GAAIhS,EAAA2V,IAAI,cAAe,qBAAmB,U,mBAAS,IAAatV,EAAA,KAAAA,EAAA,aAAb,qB,uBAChEyR,EAAAA,EAAAA,IAAkG4D,EAAA,CAArF1D,GAAIhS,EAAA2V,IAAI,eAAgB,qBAAmB,U,mBAAS,IAAoBtV,EAAA,KAAAA,EAAA,aAApB,4B,uBACjEyR,EAAAA,EAAAA,IAA4F4D,EAAA,CAA/E1D,GAAIhS,EAAA2V,IAAI,eAAgB,qBAAmB,U,mBAAS,IAActV,EAAA,KAAAA,EAAA,aAAd,sB,qCAKnEG,EAAAA,EAAAA,IAAsCoV,EAAA,CAAxBlV,IAAK4T,EAAAuB,OAAOC,a,CAM9B,QACEpW,KAAM,iBACN4W,OAAAA,GAEE,MAAO,CACLS,mBAAoBA,IAAM9Q,KAAK+Q,YAC/BC,mBAAoBA,IAAMhR,KAAKuQ,gBAEnC,EACAlR,IAAAA,GACE,MAAO,CACLC,QAASC,EAAAA,EAAIC,aACbgQ,WAAY,GACZD,UAAW,GACXwB,YAAa,KACbpD,SAAS,EAEb,EACAnL,OAAAA,GACIxC,KAAKiR,iBACT,EAUAtO,QAAS,CAEPsO,eAAAA,GACEjR,KAAKwP,WAAaxP,KAAK4P,OAAOc,OAAOlB,YAActH,KAAKC,MAAMlP,aAAa6J,QAAQ,cAAcqB,OAAS,EAC5G,EAEA+M,kBAAAA,CAAmB/M,GAEjB,OAAOgN,oBAAoBhN,GAAS,IAAIC,QAAQ,MAAO,OACzD,EACA,mBAAMmM,GACJ,GAAKvQ,KAAKwP,WAAV,CACAxP,KAAK2N,SAAU,EACf,IAGE,MAAMyD,EAAWpR,KAAKkR,mBAAmBlR,KAAKwP,YACxCpP,QAAU4C,MAAM,GAAGhD,KAAKV,mCAAmC8R,IAAY,CAC3ExO,QAAS,CAAEC,cAAe,UAAU5J,aAAa6J,QAAQ,kBAErDuO,QAAgBjR,EAAE8C,OAGlBvB,EAAI0P,GAASjI,OAAS,CAAC,EAC7BpJ,KAAKuP,UAAY5N,EAAEhE,YAAc,GAEjCqC,KAAK+Q,YAAc,CACjBnS,YAAa+C,EAAE/C,aAAeoB,KAAKwP,WACnC7R,WAAYgE,EAAEhE,YAAc,GAC5BoQ,UAAWpM,EAAEoM,WAAa,GAC1BC,SAAUrM,EAAEqM,UAAY,GAG5B,CAAE,MAAOpE,GACPH,QAAQI,MAAMD,GACd5J,KAAK+Q,YAAc,CAAEnS,YAAaoB,KAAKwP,WAAY7R,WAAY,GACjE,CAAE,QACAqC,KAAK2N,SAAU,CACjB,CA3B4B,CA4B9B,EACA+B,GAAAA,CAAIkB,GAEF,MAAO,CAAEnX,KAAM,MAAMmX,IAASF,OAAQ,CAAElB,WAAYxP,KAAKwP,YAC3D,IC3FJ,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,U,UCRO9V,MAAM,S,IAIJA,MAAM,Y,6LAJbC,EAAAA,EAAAA,IAiBM,MAjBNC,GAiBM,cAhBJC,EAAAA,EAAAA,IAA+B,UAA3B,0BAAsB,KAC1BA,EAAAA,EAAAA,IAAmG,UAA1FM,QAAKC,EAAA,KAAAA,EAAA,GAAAU,GAAEuT,EAAAtE,QAAQvQ,KAAK,eAAe4U,MAAA,0BAA6B,sBAEzEvU,EAAAA,EAAAA,IAKM,MALNK,GAKM,EAJJL,EAAAA,EAAAA,IAAyF,UAAhFH,OAAKuB,EAAAA,EAAAA,IAAA,CAAAC,OAAe,cAAJmT,EAAAiD,OAAsBnX,QAAKC,EAAA,KAAAA,EAAA,GAAAU,GAAEuT,EAAAiD,KAAI,cAAc,WAAQ,IAChFzX,EAAAA,EAAAA,IAAiF,UAAxEH,OAAKuB,EAAAA,EAAAA,IAAA,CAAAC,OAAe,WAAJmT,EAAAiD,OAAmBnX,QAAKC,EAAA,KAAAA,EAAA,GAAAU,GAAEuT,EAAAiD,KAAI,WAAW,SAAM,IACxEzX,EAAAA,EAAAA,IAA6F,UAApFH,OAAKuB,EAAAA,EAAAA,IAAA,CAAAC,OAAe,eAAJmT,EAAAiD,OAAuBnX,QAAKC,EAAA,KAAAA,EAAA,GAAAU,GAAEuT,EAAAiD,KAAI,eAAe,aAAU,IACpFzX,EAAAA,EAAAA,IAAqF,UAA5EH,OAAKuB,EAAAA,EAAAA,IAAA,CAAAC,OAAe,YAAJmT,EAAAiD,OAAoBnX,QAAKC,EAAA,KAAAA,EAAA,GAAAU,GAAEuT,EAAAiD,KAAI,YAAY,WAAQ,kBAG9E/W,EAAAA,EAAAA,IAKagX,EAAAA,GAAA,MAJ2B,cAATlD,EAAAiD,OAAI,WAAjC/W,EAAAA,EAAAA,IAAoDiX,EAAA,CAAA/W,IAAA,KACZ,WAAT4T,EAAAiD,OAAI,WAAnC/W,EAAAA,EAAAA,IAAmDkX,EAAA,CAAAhX,IAAA,KACP,eAAT4T,EAAAiD,OAAI,WAAvC/W,EAAAA,EAAAA,IAA2DmX,EAAA,CAAAjX,IAAA,kBAC3DF,EAAAA,EAAAA,IAA6BoX,EAAA,CAAAlX,IAAA,c,WCf5Bf,MAAM,oB,UAGJA,MAAM,e,iBAaNA,MAAM,iB,IACJA,MAAM,a,IAINA,MAAM,a,IAYRA,MAAM,Q,IAGJA,MAAM,a,IAEDkY,IAAI,mBAAmBC,OAAO,O,UACjCnY,MAAM,QAAiC0U,MAAA,sB,IAGzC1U,MAAM,Q,IAEDkY,IAAI,YAAYC,OAAO,O,IAG5BnY,MAAM,Q,IAEDkY,IAAI,WAAWC,OAAO,O,IAG3BnY,MAAM,Q,IAEDkY,IAAI,cAAcC,OAAO,O,IAG9BnY,MAAM,a,IAEDkY,IAAI,eAAeC,OAAO,O,2CA3DxClY,EAAAA,EAAAA,IA+DM,MA/DNC,GA+DM,gBA9DJC,EAAAA,EAAAA,IAAiC,UAA7B,4BAAwB,IAEGe,EAAAkX,iBAAiB1T,SAAM,WAAtDzE,EAAAA,EAAAA,IAUM,MAVNO,GAUM,cATJL,EAAAA,EAAAA,IAAkC,QAA5BH,MAAM,QAAO,YAAQ,mBAC3BC,EAAAA,EAAAA,IAOO8B,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IANOd,EAAAkX,kBAALnQ,K,WADThI,EAAAA,EAAAA,IAOO,QALJc,IAAKkH,EAAErB,OACR5G,MAAM,eACL2B,MAAOwJ,OAAOlD,EAAErB,U,QAEdvG,EAAAgY,gBAAgBpQ,EAAErB,SAAM,EAAA3F,O,0BAK/Bd,EAAAA,EAAAA,IAcM,MAdNyB,GAcM,EAbJzB,EAAAA,EAAAA,IAGM,MAHNwM,GAGM,cAFJxM,EAAAA,EAAAA,IAAqC,eAA9BA,EAAAA,EAAAA,IAAU,SAAP,QAAG,QAAI,kBAAY,cAC7BA,EAAAA,EAAAA,IAA6F,SAAtFkB,KAAK,SAASiX,KAAK,M,qCAAsBpX,EAAAqX,cAAcC,OAAMpX,GAAGqX,QAAK/X,EAAA,KAAAA,EAAA,OAAAC,IAAEN,EAAAqY,aAAArY,EAAAqY,eAAA/X,K,iBAA9BO,EAAAqX,cAAcC,YAAM,GAA5BG,QAAR,SAElCxY,EAAAA,EAAAA,IAGM,MAHNgC,GAGM,cAFJhC,EAAAA,EAAAA,IAAqC,eAA9BA,EAAAA,EAAAA,IAAU,SAAP,QAAG,QAAI,kBAAY,cAC7BA,EAAAA,EAAAA,IAA6F,SAAtFkB,KAAK,SAASiX,KAAK,M,qCAAsBpX,EAAAqX,cAAcK,OAAMxX,GAAGqX,QAAK/X,EAAA,KAAAA,EAAA,OAAAC,IAAEN,EAAAqY,aAAArY,EAAAqY,eAAA/X,K,iBAA9BO,EAAAqX,cAAcK,YAAM,GAA5BD,QAAR,QAAqC,aAEvExY,EAAAA,EAAAA,IAIM,OAJDH,MAAM,eAAa,EACtBG,EAAAA,EAAAA,IAAiC,QAA3BH,MAAM,iBAAa,QAAQ,UACjCG,EAAAA,EAAAA,IAAiC,QAA3BH,MAAM,iBAAa,QAAQ,UACjCG,EAAAA,EAAAA,IAAoC,QAA9BH,MAAM,oBAAgB,QAAQ,cACtC,OAIFG,EAAAA,EAAAA,IA6BM,MA7BNiC,GA6BM,EA1BJjC,EAAAA,EAAAA,IAIM,MAJNoC,GAIM,cAHJpC,EAAAA,EAAAA,IAAiE,OAA5DH,MAAM,cAAa,uCAAmC,KAC3DG,EAAAA,EAAAA,IAAqD,SAArDqC,GAAqD,UAC3BtB,EAAA2X,UAAUnU,QAA6E,iBAAvE,WAA1CzE,EAAAA,EAAAA,IAAuH,MAAvHwC,GAAoE,qDAGtEtC,EAAAA,EAAAA,IAGM,MAHNuC,GAGM,cAFJvC,EAAAA,EAAAA,IAA6C,OAAxCH,MAAM,cAAa,mBAAe,KACvCG,EAAAA,EAAAA,IAA8C,SAA9C0C,GAA8C,aAGhD1C,EAAAA,EAAAA,IAGM,MAHN2C,GAGM,gBAFJ3C,EAAAA,EAAAA,IAAwD,OAAnDH,MAAM,cAAa,8BAA0B,KAClDG,EAAAA,EAAAA,IAA6C,SAA7C4C,GAA6C,aAG/C5C,EAAAA,EAAAA,IAGM,MAHN8C,GAGM,gBAFJ9C,EAAAA,EAAAA,IAA+C,OAA1CH,MAAM,cAAa,qBAAiB,KACzCG,EAAAA,EAAAA,IAAgD,SAAhD+C,GAAgD,aAGlD/C,EAAAA,EAAAA,IAGM,MAHNgD,GAGM,gBAFJhD,EAAAA,EAAAA,IAAiF,OAA5EH,MAAM,cAAa,uDAAmD,KAC3EG,EAAAA,EAAAA,IAAiD,SAAjDkD,GAAiD,e,cAczDyV,GAAAA,GAAMrI,SAASsI,GAAAA,GAAgBC,GAAAA,GAAeC,GAAAA,GAAaC,GAAAA,GAAYC,GAAAA,GAAcC,GAAAA,GAAaC,GAAAA,GAAeC,GAAAA,GAASC,GAAAA,GAAQC,GAAAA,GAAQC,GAAAA,GAAOC,GAAAA,IAEjJ,QACE3Z,KAAM,kBACN4F,IAAAA,GACE,MAAO,CACLC,QAASC,EAAAA,EAAIC,aAEbsS,iBAAkB,GAClBuB,aAAc,GACdC,WAAY,GAGZ5T,SAAU,IAAIC,IACd4S,UAAW,GACXN,cAAe,CAAEC,OAAQ,KAAMI,OAAQ,MAEvCiB,OAAQ,CACNvV,IAAK,KACLwV,GAAI,KACJC,MAAO,KACPC,OAAQ,KACRC,WAAY,MAEdC,gBAAiB,KAErB,EACA,aAAMpR,SACExC,KAAKyC,WACXzC,KAAK6T,kBACL1a,OAAO2a,iBAAiB,SAAU9T,KAAK+T,aACzC,EACAC,aAAAA,GACEhU,KAAKiU,gBACL9a,OAAO+a,oBAAoB,SAAUlU,KAAK+T,aAC5C,EACApR,QAAS,CAEP,cAAMF,GACJ,MAAMG,EAAU,CAAEC,cAAe,UAAU5J,aAAa6J,QAAQ,iBAEzDrD,EAASI,EAAQC,SAAcwD,QAAQC,IAAI,CAChDP,MAAM,GAAGhD,KAAKV,4CAA6C,CAAEsD,YAAWK,MAAK7C,GAAKA,EAAE8C,SACpFF,MAAM,GAAGhD,KAAKV,8EAA+E,CAAEsD,YAAWK,MAAK7C,GAAKA,EAAE8C,SACtHF,MAAM,GAAGhD,KAAKV,mFAAoF,CAAEsD,YAAWK,MAAK7C,GAAKA,EAAE8C,WAG7HlD,KAAK8R,kBAAoBrS,GAAS4F,oBAAsB,IAAIlF,KAAIC,IAAA,CAAQE,OAAQF,EAAEE,OAAQkF,MAAOT,OAAO3E,EAAEoF,OAAS,OACnHxF,KAAKqT,aAAgBxT,GAAQ2D,QAAU,GACvCxD,KAAKsT,WAAcxT,GAAM0D,QAAU,GAGnC,MAAM2Q,EAAoB,GACpB1Q,GAAOhE,GAASiE,uBAAyB,IAAIpG,MAAM,EAAG6W,GACtDC,EAAStQ,MAAMC,KAAK,IAAI7D,IAAIuD,EAAItD,KAAIyD,GAAKA,EAAEhF,gBAS3CyV,QAAY/Q,QAAQC,IAAI6Q,EAAOjU,KAAI8D,UACvC,MAAMC,EAAWC,EAAMC,QAAQ,MAAO,OAChCgB,QAAapC,MAAM,GAAGhD,KAAKV,wBAAwB4E,IAAY,CAAEtB,YACpEK,MAAKlK,IACJ,KAAID,EAAAA,EAAAA,GAAmBC,GAEvB,OAAOA,EAAImK,UAEZC,OAAM,IAAM,KACf,IAAKW,MAAMwQ,QAAQlP,KAAUA,EAAKhH,OAAQ,OAAO,KAEjDgH,EAAK3E,MAAK,CAACC,EAAEC,IAAM,IAAIuB,KAAKxB,EAAE7C,cAAgB,IAAIqE,KAAKvB,EAAE9C,gBACzD,MAAMyJ,EAASlC,EAAKgD,IAAI,GAClBpK,EAAMsJ,GAAQtJ,IACpB,GAAW,MAAPA,GAAeuW,MAAMvW,GAAM,OAAO,KACtC,MAAMvE,EAAOuG,KAAKN,SAASuC,IAAIkC,IAAU,KACzC,MAAO,CAAEA,QAAO1K,OAAMuE,IAAK+G,OAAO/G,GAAMwW,KAAMlN,EAAOzJ,kBAIjD4W,EAAOJ,EAAI9T,OAAOC,UAAY,GACpCR,KAAKuS,UAAYkC,EAAItU,KAAI,CAACuU,EAAGnS,KAAM,CACjCa,EAAGb,EAAI,EACP3G,EAAG8Y,EAAE1W,IACLmG,MAAOuQ,EAAEvQ,MACT1K,KAAMib,EAAEjb,KACR+a,KAAME,EAAEF,QAEZ,EAGApO,OAAAA,CAAQzB,GAAK,OAAO,IAAIzC,KAAKyC,GAAGqD,oBAAsB,EACtD+J,eAAAA,CAAgBzR,GAEd,MAAMqB,EAAIkD,OAAOvE,GAAU,IAC3B,OAAOqB,EAAEvD,QAAU,EAAIuD,EAAErE,MAAM,EAAE,GAAKqE,CACxC,EAGAsS,aAAAA,GACEU,OAAOC,KAAK5U,KAAKuT,QAAQjR,SAAQP,IAC3B/B,KAAKuT,OAAOxR,KAAM/B,KAAKuT,OAAOxR,GAAG8S,UAAW7U,KAAKuT,OAAOxR,GAAK,QAErE,EACAgS,YAAAA,GACEY,OAAOtS,OAAOrC,KAAKuT,QAAQjR,SAAQwS,GAAKA,GAAKA,EAAEC,UACjD,EACAlB,eAAAA,GACE7T,KAAKiU,gBACLjU,KAAKgV,YACLhV,KAAKiV,WACLjV,KAAKkV,cACLlV,KAAKmV,eACLnV,KAAKoV,kBACP,EAGAJ,SAAAA,GACE,MAAMK,EAAMrV,KAAKsV,MAAMC,WAAWC,WAAW,MAAO,IAAKH,EAAK,OAC9D,MAAMI,EAASzV,KAAKqT,aAAalT,KAAI2B,GAAK9B,KAAK+R,gBAAgBjQ,EAAExB,UAC3DjB,EAAOW,KAAKqT,aAAalT,KAAI2B,GAAKA,EAAE4T,SAAW,OAErD1V,KAAKuT,OAAOvV,IAAM,IAAIwU,GAAAA,GAAM6C,EAAK,CAC/Bta,KAAM,OACNsE,KAAM,CACJoW,SACAE,SAAU,CAAC,CAAEC,MAAO,YAAavW,OAAMwW,QAAS,GAC9CC,MAAM,EAAOC,YAAa,KAE9BC,QAAS,CACPC,YAAY,EAEZC,QAAS,CACPC,OAAQ,CAAEC,SAAS,GAAQC,QAAS,CAAE/E,KAAM,QAASgF,WAAW,GAChEC,WAAY,CACVC,MAAO,MACPC,OAAQ,MACRC,OAAQ,EACRC,MAAO,UACPC,KAAM,CAAEhV,KAAM,GAAIiV,OAAQ,QAC1BC,UAAYC,GAEI,MAAPA,EAAchS,OAAOgS,GAAKrP,QAAQ,GAAK,GAGhD0O,QAAS,SAGbY,OAAQ,CACNpb,EAAG,CAAEqb,aAAa,EAAO5b,MAAO,CAAE+a,SAAS,EAAMc,KAAM,QACvD9T,EAAG,CAAE/H,MAAO,CAAE+a,SAAS,EAAMc,KAAM,cAI3C,EAGAjC,QAAAA,GACE,MAAMI,EAAMrV,KAAKsV,MAAM6B,UAAU3B,WAAW,MAAO,IAAKH,EAAK,OAC7D,MAAMI,EAASzV,KAAKqT,aAAalT,KAAI2B,GAAK9B,KAAK+R,gBAAgBjQ,EAAExB,UAC3D8W,EAAMpX,KAAKqT,aAAalT,KAAI2B,GAAKA,EAAEuV,YAAc,OACjDC,EAAMtX,KAAKqT,aAAalT,KAAI2B,GAAKA,EAAEyV,YAAc,OAEvDvX,KAAKuT,OAAOC,GAAK,IAAIhB,GAAAA,GAAM6C,EAAK,CAC9Bta,KAAM,OACNsE,KAAM,CACJoW,SACAE,SAAU,CACR,CAAEC,MAAO,iBAAkBvW,KAAM+X,EAAKvB,QAAS,GAAKE,YAAa,GACjE,CAAEH,MAAO,kBAAmBvW,KAAMiY,EAAKzB,QAAS,GAAKE,YAAa,KAGtEC,QAAS,CACPC,YAAY,EAEZC,QAAS,CACPC,OAAQ,CAAEC,SAAS,GAAQC,QAAS,CAAE/E,KAAM,QAASgF,WAAW,GAChEC,WAAY,CACVC,MAAO,MACPC,OAAQ,MACRC,OAAQ,EACRC,MAAO,UACPC,KAAM,CAAEhV,KAAM,GAAIiV,OAAQ,QAC1BW,gBAAiB,wBACjBC,aAAc,EACdC,QAAS,EACTZ,UAAYC,GAAe,MAAPA,EAAcvV,KAAKC,MAAMsV,GAAO,GACpDX,QAAS,SAGbY,OAAQ,CACNpb,EAAG,CAAEqb,aAAa,EAAO5b,MAAO,CAAE+a,SAAS,EAAMc,KAAM,SACvD9T,EAAG,CAAE/H,MAAO,CAAE+a,SAAS,EAAMc,KAAM,cAI3C,EAGAhC,WAAAA,GACE,MAAMG,EAAMrV,KAAKsV,MAAMqC,aAAanC,WAAW,MAAO,IAAKH,EAAK,OAChE,MAAMI,EAASzV,KAAKqT,aAAalT,KAAI2B,GAAK9B,KAAK+R,gBAAgBjQ,EAAExB,UAC3DmT,EAAQzT,KAAKqT,aAAalT,KAAI2B,GAAKA,EAAE8V,eAAiB,OAE5D5X,KAAKuT,OAAOE,MAAQ,IAAIjB,GAAAA,GAAM6C,EAAK,CACjCta,KAAM,OACNsE,KAAM,CAAEoW,SAAQE,SAAU,CAAC,CAAEC,MAAO,kBAAmBvW,KAAMoU,EAAOoC,QAAS,GAAKE,YAAa,KAC/FC,QAAS,CACPC,YAAY,EACZC,QAAS,CACPC,OAAQ,CAAEC,SAAS,GACnBG,WAAY,CACVC,MAAO,MACPC,OAAQ,MACRC,OAAQ,EACRC,MAAO,UACPC,KAAM,CAAEhV,KAAM,GAAIiV,OAAQ,QAC1BC,UAAYC,GAEI,MAAPA,EAAchS,OAAOgS,GAAKrP,QAAQ,GAAK,GAGhD0O,QAAS,SAGbY,OAAQ,CACNpb,EAAG,CAAEqb,aAAa,EAAO5b,MAAO,CAAE+a,SAAS,EAAMc,KAAM,QACvD9T,EAAG,CAAE/H,MAAO,CAAE+a,SAAS,EAAMc,KAAM,cAI3C,EAGA/B,YAAAA,GACE,MAAME,EAAMrV,KAAKsV,MAAMuC,cAAcrC,WAAW,MAAO,IAAKH,EAAK,OAEjE,MAAMI,EAASzV,KAAKsT,WAAWnT,KAAI2B,GAAK9B,KAAK+R,gBAAgBjQ,EAAExB,UAEzDa,EAASnB,KAAKsT,WAAWnT,KAAI2B,GAChCiD,OAAOjD,EAAEgW,mBAAmB,GAAK/S,OAAOjD,EAAEiW,qBAAqB,GAAKhT,OAAOjD,EAAEkW,mBAAmB,KAE7Flb,EAAWkD,KAAKsT,WAAWnT,KAAI2B,GAClCiD,OAAOjD,EAAE6D,qBAAqB,GAAKZ,OAAOjD,EAAE8D,uBAAuB,GAAKb,OAAOjD,EAAE+D,qBAAqB,KAEnGzE,EAAUpB,KAAKsT,WAAWnT,KAAI2B,GACjCiD,OAAOjD,EAAEmW,qBAAqB,GAAKlT,OAAOjD,EAAEoW,uBAAuB,GAAKnT,OAAOjD,EAAEqW,qBAAqB,KAGzGnY,KAAKuT,OAAOG,OAAS,IAAIlB,GAAAA,GAAM6C,EAAK,CAClCta,KAAM,MACNsE,KAAM,CAEJoW,SACAE,SAAU,CACR,CAAEC,MAAO,SAAYvW,KAAM8B,EAAUiX,MAAO,SAAUZ,gBAAiB,WACvE,CAAE5B,MAAO,WAAYvW,KAAMvC,EAAUsb,MAAO,SAAUZ,gBAAiB,WACvE,CAAE5B,MAAO,WAAYvW,KAAM+B,EAAUgX,MAAO,SAAUZ,gBAAiB,aAG3ExB,QAAS,CACPC,YAAY,EACZC,QAAS,CAAEC,OAAQ,CAAEC,SAAS,IAC9BY,OAAQ,CACN5T,EAAG,CAAEiV,SAAS,EAAMhd,MAAO,CAAE+a,SAAS,EAAMc,KAAM,WAClDtb,EAAG,CAAEyc,SAAS,EAAMpB,aAAa,EAAMqB,MAAO,CAAEC,SAAU,GAAKld,MAAO,CAAE+a,SAAS,EAAMc,KAAM,sBAIrG,EAGA9E,WAAAA,GACEoG,aAAaxY,KAAK4T,iBAElB5T,KAAK4T,gBAAkB3G,YAAW,KAChCjN,KAAKoV,qBACJ,IACL,EACAA,gBAAAA,GACE,MAAMqD,EAASzY,KAAKsV,MAAMoD,iBAC1B,IAAKD,EAAQ,OACb,MAAMpD,EAAMoD,EAAOjD,WAAW,MAC9B,IAAKH,EAAK,OAGV,GAAIrV,KAAKuT,OAAOI,WAAY,CAC1B,IAAM3T,KAAKuT,OAAOI,WAAWgF,MAAQ,CAAE,MAAOzL,GAAmB,CACjE,IAAMlN,KAAKuT,OAAOI,WAAWkB,SAAW,CAAE,MAAO3H,GAAmB,CACpElN,KAAKuT,OAAOI,WAAa,IAC3B,CAEA,MAAM,OAAEzB,EAAM,OAAEI,GAAWtS,KAAKiS,cAC1B2G,EAAM,GAAIC,EAAM,GAAIC,EAAS,GAC7BrD,EAAS,GAEfzV,KAAKuS,UAAUjQ,SAAQ,CAACoS,EAAGnS,KACzBkT,EAAOlT,GAAKmS,EAAEjb,MAAQib,EAAEvQ,MACxB,MAAM4U,EAAK,CAAE3V,EAAGsR,EAAEtR,EAAGxH,EAAG8Y,EAAE9Y,GACtB8Y,EAAE9Y,GAAKsW,EAAQ0G,EAAIpf,KAAKuf,GACnBrE,EAAE9Y,GAAK0W,EAAQuG,EAAIrf,KAAKuf,GAC5BD,EAAOtf,KAAKuf,MAGnB,MAAMC,EAAiB,CACrB3Q,GAAI,iBACJ4Q,UAAYC,IACV,MAAM,IAAE7D,EAAG,UAAE8D,EAAS,OAAEnC,GAAWkC,GAAS,CAAC,EAC7C,IAAK7D,IAAQ8D,IAAcnC,GAAQpb,EAAG,OAEtC,MAAMwd,EAAWA,CAACrC,EAAKsC,EAAO,CAAC,EAAG,MAChC,MAAMzd,EAAIob,EAAOpb,EAAE0d,iBAAiBvC,GACpC1B,EAAIzH,OACJyH,EAAIkE,YAAYF,GAChBhE,EAAImE,YAAc,UAClBnE,EAAIoE,UAAY,EAChBpE,EAAIqE,YACJrE,EAAIsE,OAAOR,EAAUS,KAAMhe,GAC3ByZ,EAAIwE,OAAOV,EAAUW,MAAOle,GAC5ByZ,EAAI0E,SACJ1E,EAAI2E,WAENZ,EAASlH,GACTkH,EAAS9G,EAAQ,CAAC,EAAG,MAInBqD,EAAW,CACf,CAAEC,MAAO,MAAOvW,KAAMuZ,EAAK7C,YAAa,EAAGyB,gBAAiB,WAC5D,CAAE5B,MAAO,MAAOvW,KAAMwZ,EAAK9C,YAAa,EAAGyB,gBAAiB,WAC5D,CAAE5B,MAAO,SAAUvW,KAAMyZ,EAAQ/C,YAAa,EAAGyB,gBAAiB,YAGpEyC,uBAAsB,KACpBja,KAAKuT,OAAOI,WAAa,IAAInB,GAAAA,GAAM6C,EAAK,CACtCta,KAAM,UACNsE,KAAM,CAAEsW,YACRK,QAAS,CACPkE,WAAW,EACXjE,YAAY,EACZC,QAAS,CACPC,OAAQ,CAAEC,SAAS,GACnBC,QAAS,CACP8D,UAAW,CACT9e,MAAQ+e,IACN,MAAMhX,EAAIgX,EAAM,IAAIC,QAAQjX,EACtBkX,GAAOlX,GAAK,GAAK,EACvB,OAAOqS,EAAO6E,IAAQ,UAAUlX,KAElCwS,MAAQ2E,GAAS,QAAQA,EAAKF,OAAOze,OAI3Cob,OAAQ,CACN5T,EAAG,CACDrI,KAAM,SACNM,MAAO,CAAE+a,SAAS,EAAMc,KAAM,2BAC9BoB,MAAO,CACLC,SAAU,EACViC,SAAWzD,IACT,MAAMuD,EAAM9Y,KAAKC,MAAMsV,GAAO,EACxB0D,EAAMhF,EAAO6E,GACnB,IAAKG,EAAK,MAAO,GACjB,MAAM9Y,EAAIkD,OAAO4V,GACjB,OAAO9Y,EAAEvD,OAAS,GAAKuD,EAAErE,MAAM,EAAG,IAAM,IAAMqE,IAGlDkJ,IAAK,GACLC,IAAKtJ,KAAKsJ,IAAI,IAAK9K,KAAKuS,UAAUnU,OAAS,KAE7CxC,EAAG,CAAEP,MAAO,CAAE+a,SAAS,EAAMc,KAAM,OAASD,aAAa,KAG7Df,QAAS,CAAC8C,OAGhB,IC9bJ,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,U,UCPOtf,MAAM,mC,IAGJA,MAAM,W,IACJA,MAAM,gB,IAWNA,MAAM,gB,IAUNA,MAAM,gB,IAEJA,MAAM,Y,0BAsBKA,MAAM,W,UAEZA,MAAM,a,UAsBuBA,MAAM,S,6EAzEnDC,EAAAA,EAAAA,IA0EM,MA1ENC,GA0EM,gBAzEJC,EAAAA,EAAAA,IAAmC,UAA/B,8BAA0B,KAE9BA,EAAAA,EAAAA,IA4CM,MA5CNK,GA4CM,EA3CJL,EAAAA,EAAAA,IASM,MATNc,GASM,cARJd,EAAAA,EAAAA,IAAmB,aAAZ,QAAI,cACXA,EAAAA,EAAAA,IAMS,U,qCANQe,EAAAG,KAAID,I,4aAAJF,EAAAG,WASnBlB,EAAAA,EAAAA,IAQM,MARNyB,GAQM,cAPJzB,EAAAA,EAAAA,IAA4B,aAArB,iBAAa,cACpBA,EAAAA,EAAAA,IAKS,U,qCALQe,EAAA8f,cAAa5f,I,cAC1BjB,EAAAA,EAAAA,IAAgC,UAAxB2M,MAAM,OAAM,OAAG,IACvB3M,EAAAA,EAAAA,IAA+C,UAAvC2M,MAAM,YAAW,iBAAa,IACtC3M,EAAAA,EAAAA,IAA2C,UAAnC2M,MAAM,UAAS,eAAW,IAClC3M,EAAAA,EAAAA,IAA+C,UAAvC2M,MAAM,YAAW,iBAAa,iBAJzB5L,EAAA8f,oBAQnB7gB,EAAAA,EAAAA,IAmBM,MAnBNwM,GAmBM,gBAlBJxM,EAAAA,EAAAA,IAAyB,aAAlB,cAAU,KACjBA,EAAAA,EAAAA,IAgBM,MAhBNgC,GAgBM,EAfJgQ,EAAAA,EAAAA,IAME8O,EAAA,C,WALS/f,EAAAmJ,K,qCAAAnJ,EAAAmJ,KAAIjJ,GACZ,WAAQ,IAAMoH,KACd,sBAAoB,EACrB,gBACAlH,YAAY,c,+CAEdnB,EAAAA,EAAAA,IAAc,YAAR,KAAC,KACPgS,EAAAA,EAAAA,IAME8O,EAAA,C,WALS/f,EAAAmR,G,qCAAAnR,EAAAmR,GAAEjR,GACV,WAAQ,IAAMoH,KACd,sBAAoB,EACrB,gBACAlH,YAAY,Y,uCAKlBnB,EAAAA,EAAAA,IAA0D,UAAjDM,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAEN,EAAA6gB,MAAA7gB,EAAA6gB,QAAAvgB,IAAOoQ,SAAU7P,EAAA+S,SAAS,UAAO,EAAA7R,MAGxClB,EAAA+S,UAAO,WAAlBhU,EAAAA,EAAAA,IAAkD,MAAlDsC,GAAoC,eAAQ,WAE5CtC,EAAAA,EAAAA,IAoBQ,QApBRuC,GAoBQ,EAnBNrC,EAAAA,EAAAA,IAMQ,eALNA,EAAAA,EAAAA,IAIK,0BAHHA,EAAAA,EAAAA,IAAc,UAAV,SAAK,mBACTA,EAAAA,EAAAA,IAAqB,UAAjB,gBAAY,mBAChBF,EAAAA,EAAAA,IAA+E8B,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAA3D3B,EAAA8gB,iBAATC,K,WAAXnhB,EAAAA,EAAAA,IAA+E,MAAzCc,IAAKqgB,IAAKhhB,EAAAA,EAAAA,IAAKC,EAAAghB,YAAYD,IAAK,M,WAG1EjhB,EAAAA,EAAAA,IAWQ,6BARNF,EAAAA,EAAAA,IAOK8B,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAPad,EAAAogB,SAAPzd,K,WAAX5D,EAAAA,EAAAA,IAOK,MAPuBc,IAAK8C,EAAIoB,Y,EACnC9E,EAAAA,EAAAA,IAA6B,WAAAC,EAAAA,EAAAA,IAAtByD,EAAII,YAAU,IACrB9D,EAAAA,EAAAA,IAAgD,WAAAC,EAAAA,EAAAA,IAAzCC,EAAAkhB,gBAAgB1d,EAAIM,eAAY,kBACvClE,EAAAA,EAAAA,IAGK8B,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAHe3B,EAAA8gB,iBAATC,K,WAAXnhB,EAAAA,EAAAA,IAGK,MAHiCc,IAAKqgB,EACtCphB,OAAKuB,EAAAA,EAAAA,IAAElB,EAAAmhB,cAAc3d,EAAIud,O,QACzBvd,EAAIud,IAAU,KAAL,M,sBAMVlgB,EAAA+S,SAA8B,IAAnB/S,EAAAogB,QAAQ5c,QAAsE,iBAAhE,WAAnCzE,EAAAA,EAAAA,IAAuG,IAAvGwC,GAAyD,gD,CCnEtD,SAASgf,GAAW3U,EAAOwP,EAAU,CAAC,GAC3C,IAAKxP,EAAO,MAAO,IAEnB,MAAMgO,EAAOhO,aAAiBtE,KAAOsE,EAAQ,IAAItE,KAAKsE,GACtD,OAAI+N,MAAMC,GAAc,IAEjB,IAAI4G,KAAKC,eAAe,QAAS,CACtCC,KAAM,UACNC,MAAO,QACPC,IAAK,UACLC,KAAM,UACNC,OAAQ,UACRC,QAAQ,KACL3F,IACF4F,OAAOpH,EACZ,CAGO,SAASyG,GAAgBzU,GAC9B,OAAO2U,GAAW3U,EAAO,CAAEiV,UAAMI,EAAWH,YAAQG,GACtD,C,eDyDA,MAAMC,GAAc,CAClB/c,WAAY,MAAOC,aAAc,aAAcC,WAAY,MAAO8c,UAAW,KAC7EC,YAAa,kBAAmBC,WAAY,MAAOC,WAAY,MAAOC,WAAY,MAClFC,WAAY,MAAOC,WAAY,MAC/BC,UAAW,YACXC,UAAW,OAAQC,aAAc,aAAcC,UAAW,KAAMC,SAAU,IAAKC,UAAW,MAGtFC,GAAe,CACnBC,YAAa,CAAC,aAAc,eAAgB,aAAc,aAC1DC,MAAO,CAAC,cAAe,aAAc,aAAc,cACnDC,QAAS,CAAC,aAAc,cACxBC,UAAW,CAAC,aACZC,MAAO,CAAC,YAAa,eAAgB,YAAa,WAAY,cAGhE,QACExU,WAAY,CAAEyU,cAAaA,GAAAA,GAC3B7d,IAAAA,GACE,MAAO,CACLtE,KAAM,cACN2f,cAAe,MACf3W,KAAM,KACNgI,GAAI,KACJoR,cAAe,KACfC,gBAAiB,KACjBpC,QAAS,GACTrN,SAAS,EAEb,EACA5N,SAAU,CACR8a,eAAAA,GACE,OAAO+B,GAAa5c,KAAKjF,KAC3B,GAEF4H,QAAS,CACPsY,gBAAe,GACfoC,aAAAA,GACE7E,aAAaxY,KAAKmd,eAClBnd,KAAKmd,cAAgBlQ,YAAW,KAC9BjN,KAAK4a,SACJ,IACL,EACA,UAAMA,GAEJ,MAAMO,EAAc3G,IAChB,IAAKA,EAAM,OAAO,KAElB,GAAoB,kBAATA,EAAmB,OAAOA,EAErC,IAGI,MAAMkC,EAAoC,IAA3BlC,EAAK8I,oBACdC,EAAgB,IAAIrb,KAAKsS,EAAOkC,GAAS8G,cAAclgB,MAAM,EAAG,IACtE,OAAOigB,CACX,CAAE,MAAO3T,GACL,OAAO,IACX,GAGJ5J,KAAK2N,SAAU,EAEf,MAAM/K,EAAU,CAAEC,cAAe,UAAU5J,aAAa6J,QAAQ,gBAGhE,IAAI2a,EAAM,GAAGle,EAAAA,EAAIC,mDAAmDQ,KAAKjF,sBAAsBiF,KAAK0a,gBAGpG,MAAMgD,EAAUvC,EAAWnb,KAAK+D,MAC1B4Z,EAAQxC,EAAWnb,KAAK+L,IAE1B2R,IAASD,GAAO,SAASC,KACzBC,IAAOF,GAAO,OAAOE,KAEzB,IACI,MAAM5kB,QAAYiK,MAAMya,EAAK,CAAE7a,YAE/B,IAAI9J,EAAAA,EAAAA,GAAmBC,GAAM,OAC7B,IAAKA,EAAIgU,GAAI,MAAM,IAAIkC,MAAM,UAE7B,MAAM/L,QAAanK,EAAImK,OACvBlD,KAAKgb,QAAU9X,EAAK8X,SAAW,EACnC,CAAE,MAAOpR,GAEU,eAAXA,EAAEnQ,OACFgQ,QAAQI,MAAMD,GACdtQ,MAAM,uBAEd,CAAE,QACE0G,KAAK2N,SAAU,CACnB,CACF,EAEAoN,WAAAA,CAAY6C,GAAO,OAAO9B,GAAY8B,IAAQA,CAAK,EACnD1C,aAAAA,CAAcnE,GACZ,OAAKA,EACwB,aAAtBA,EAAI9R,cAA+B,WACb,WAAtB8R,EAAI9R,cAA6B,SAAW,GAFlC,EAGnB,EACA4Y,WAAAA,CAAYvO,GACVtP,KAAK+J,QAAQvQ,KAAK,kBAAkB8V,mBACtC,GAEF9M,OAAAA,GACExC,KAAK4a,MACP,EACA5O,MAAO,CACLjI,IAAAA,GAAS/D,KAAKqd,eAAiB,EAC/BtR,EAAAA,GAAO/L,KAAKqd,eAAiB,EAC7BtiB,IAAAA,GAASiF,KAAKqd,eAAiB,EAC/B3C,aAAAA,GAAkB1a,KAAKqd,eAAiB,IE7L5C,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,U,UCRO3jB,MAAM,yB,IAGJA,MAAM,gB,IAMJA,MAAM,W,UAEDA,MAAM,O,IAIbA,MAAM,e,IACJA,MAAM,c,IAEDkY,IAAI,qB,IAGTlY,MAAM,c,IAEDkY,IAAI,e,IAGTlY,MAAM,c,IAEDkY,IAAI,iB,IAGTlY,MAAM,c,IAEDkY,IAAI,e,IAGTlY,MAAM,mB,IAEDkY,IAAI,e,2CAtClBjY,EAAAA,EAAAA,IAyCM,MAzCNC,GAyCM,cAxCJC,EAAAA,EAAAA,IAAqE,UAAjE,gEAA4D,KAEhEA,EAAAA,EAAAA,IAUM,MAVNK,GAUM,WATJL,EAAAA,EAAAA,IAGS,U,qCAHQe,EAAAkjB,aAAYhjB,I,cAC3BjB,EAAAA,EAAAA,IAAwC,UAA/B2M,MAAO,MAAM,aAAS,mBAC/B7M,EAAAA,EAAAA,IAAoD8B,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAAhC3B,EAAA4B,OAALC,K,WAAfjC,EAAAA,EAAAA,IAAoD,UAAxBc,IAAKmB,IAAC9B,EAAAA,EAAAA,IAAK8B,GAAC,M,mBAFzBhB,EAAAkjB,iBAKjBjkB,EAAAA,EAAAA,IAGM,MAHNc,GAGM,mBAFDZ,EAAAgkB,qBAAsB,2BACzB,GAA0BhkB,EAAAikB,cAAgB,IAAH,WAAvCrkB,EAAAA,EAAAA,IAAgG,SAAhG2B,IAAgGxB,EAAAA,EAAAA,IAAhDC,EAAAikB,eAAgB,0BAAuB,yBAI3FnkB,EAAAA,EAAAA,IAyBM,MAzBNwM,GAyBM,EAxBJxM,EAAAA,EAAAA,IAGM,MAHNgC,GAGM,cAFJhC,EAAAA,EAAAA,IAA4B,UAAxB,uBAAmB,KACvBA,EAAAA,EAAAA,IAAyC,SAAzCiC,GAAyC,aAG3CjC,EAAAA,EAAAA,IAGM,MAHNoC,GAGM,cAFJpC,EAAAA,EAAAA,IAAuB,UAAnB,kBAAc,KAClBA,EAAAA,EAAAA,IAAmC,SAAnCqC,GAAmC,aAGrCrC,EAAAA,EAAAA,IAGM,MAHNsC,GAGM,cAFJtC,EAAAA,EAAAA,IAAgB,UAAZ,WAAO,KACXA,EAAAA,EAAAA,IAAqC,SAArCuC,GAAqC,aAGvCvC,EAAAA,EAAAA,IAGM,MAHN0C,GAGM,cAFJ1C,EAAAA,EAAAA,IAAoB,UAAhB,eAAW,KACfA,EAAAA,EAAAA,IAAmC,SAAnC2C,GAAmC,aAGrC3C,EAAAA,EAAAA,IAGM,MAHN4C,GAGM,cAFJ5C,EAAAA,EAAAA,IAA8B,UAA1B,yBAAqB,KACzBA,EAAAA,EAAAA,IAAmC,SAAnC8C,GAAmC,e,2BAY3C6V,GAAAA,GAAMrI,SAAS8T,GAAAA,GAEf,MAAMC,GAAS,CACbrB,YAAa,CACXxhB,MAAO,sBACP8iB,MAAO,CACL,CAAEvI,MAAO,aAAckF,MAAO,cAC9B,CAAElF,MAAO,oBAAqBkF,MAAO,gBACrC,CAAElF,MAAO,wBAAyBkF,MAAO,cACzC,CAAElF,MAAO,uBAAwBkF,MAAO,cAE1CnE,MAAO,WAETmG,MAAO,CACLzhB,MAAO,iBACP8iB,MAAO,CACL,CAAEvI,MAAO,YAAakF,MAAO,cAC7B,CAAElF,MAAO,YAAakF,MAAO,cAC7B,CAAElF,MAAO,YAAakF,MAAO,cAC7B,CAAElF,MAAO,kBAAmBkF,MAAO,gBAErCnE,MAAO,WAEToG,QAAS,CACP1hB,MAAO,UACP8iB,MAAO,CACL,CAAEvI,MAAO,aAAckF,MAAO,cAC9B,CAAElF,MAAO,aAAckF,MAAO,eAEhCnE,MAAO,WAETsG,MAAO,CACL5hB,MAAO,cACP8iB,MAAO,CACL,CAAEvI,MAAO,oBAAqBkF,MAAO,gBACrC,CAAElF,MAAO,cAAekF,MAAO,aAC/B,CAAElF,MAAO,mBAAoBkF,MAAO,cAEtCnE,MAAO,WAETyH,MAAO,CACL/iB,MAAO,wBACP8iB,MAAO,CACL,CAAEvI,MAAO,oBAAqBkF,MAAO,aACrC,CAAElF,MAAO,uBAAwBkF,MAAO,YACxC,CAAElF,MAAO,qBAAsBkF,MAAO,cAExCnE,MAAO,YAIX,QACEtX,IAAAA,GACE,MAAO,CACLye,aAAc,KACdO,eAAgB,GAChB9K,OAAQ,CAAC,EACT5F,SAAS,EAEb,EACA5N,SAAU,CACRpE,KAAAA,GAEE,MAAMC,EAAI,IAAI,IAAIsE,IAAIF,KAAKqe,eACxB9d,QAAOH,GAAKA,EAAEvC,eACdsC,KAAIC,GAAK,IAAI8B,KAAK9B,EAAEvC,cAAc+G,kBAErC,OAAOhJ,EAAE6E,MAAK,CAACC,EAAEC,IAAMA,EAAED,GAC3B,EACA4d,QAAAA,GACE,OAAKte,KAAK8d,aACH9d,KAAKqe,eAAe9d,QAAOH,GAAK,IAAI8B,KAAK9B,EAAEvC,cAAc+G,gBAAkB5E,KAAK8d,eADxD9d,KAAKqe,cAEtC,EACAN,mBAAAA,GAAwB,OAAO/d,KAAKse,SAASlgB,MAAQ,EACrD4f,aAAAA,GACE,IAAIxY,EAAQ,EAOZ,OANAmP,OAAOtS,OAAO6b,IAAQ5b,SAAQic,IAC5BA,EAAEJ,MAAM7b,SAAQsB,IAEd4B,GAASxF,KAAKse,SAAS/d,QAAOH,GAAmC,aAA9BA,EAAEwD,EAAEkX,QAAQ7V,gBAA8B7G,aAG1EoH,CACT,GAEFwG,MAAO,CACL8R,YAAAA,GAAiB9d,KAAKwe,WAAa,GAErC,aAAMhc,SACExC,KAAKye,qBACXze,KAAKwe,WACP,EACA7b,QAAS,CACP,wBAAM8b,GACJze,KAAK2N,SAAU,EACf,IACE,MAAM5U,QAAYiK,MAAM,GAAGzD,EAAAA,EAAIC,gDAAiD,CAC9EoD,QAAS,CAAEC,cAAe,UAAU5J,aAAa6J,QAAQ,kBAE3D,IAAK/J,EAAIgU,GAAI,MAAM,IAAIkC,MAAMlW,EAAI2lB,YACjC,IAAI5lB,EAAAA,EAAAA,GAAmBC,GAAM,OAE7B,MAAMmK,QAAanK,EAAImK,OACvBlD,KAAKqe,eAAiBnb,EAAK8X,SAAW,GA8BtCvR,QAAQmD,IAAI,eAAgB5M,KAAKqe,eAAejgB,OAAQ,OAE1D,CAAE,MAAOwL,GACPH,QAAQI,MAAM,aAAcD,GAC5B5J,KAAKqe,eAAiB,EACxB,CACAre,KAAK2N,SAAU,CACjB,EAEA6Q,SAAAA,GACExe,KAAK2e,WAAU,KACb3e,KAAK4e,aACLjK,OAAOC,KAAKsJ,IAAQ5b,SAAQ7H,IACxB,IACIuF,KAAK6e,YAAYpkB,EACrB,CAAE,MAAOyS,GACLzD,QAAQI,MAAM,8BAA8BpP,KAAQyS,EACxD,OAGR,EAEA0R,UAAAA,GACEjK,OAAOtS,OAAOrC,KAAKuT,QAAQjR,SAAQwS,GAAKA,GAAGD,YAC3C7U,KAAKuT,OAAS,CAAC,CACjB,EAEAsL,WAAAA,CAAYC,GACV,MAAM1R,EAAQ8Q,GAAOY,GAEfrG,EAASzY,KAAKsV,MAAMwJ,EAAW,UAGrC,IAAKrG,EAEH,YADAhP,QAAQC,KAAK,+CAA+CoV,2BAI9D,MAAMzf,EAAOW,KAAKse,SACZS,EAAQ1f,EAAKjB,QAAU,EAEvBqX,EAAS,GACT/P,EAAS,GACTsZ,EAAW,GAEjB5R,EAAM+Q,MAAM7b,SAAQsB,IAElB,MAAM9G,EAAWuC,EAAKkB,QAAOH,GAAmC,aAA9BA,EAAEwD,EAAEkX,QAAQ7V,gBAA8B7G,OAG5EqX,EAAOjc,KAAKoK,EAAEgS,OACdlQ,EAAOlM,KAAKsD,GACZkiB,EAASxlB,KAAKuL,QAAQjI,EAAWiiB,EAAQ,KAAKrX,QAAQ,QAGxD1H,KAAKuT,OAAOuL,GAAY,IAAItM,GAAAA,GAAMiG,EAAQ,CACxC1d,KAAM,MACNsE,KAAM,CACJoW,SACAE,SAAU,CAAC,CACTtW,KAAM2f,EACNxH,gBAAiBpK,EAAMuJ,MAAQ,KAC/BsI,YAAa7R,EAAMuJ,MACnBuI,YAAa,EACbzH,aAAc,EACd0H,aAAc,MAGlBnJ,QAAS,CACPoJ,UAAW,IACXnJ,YAAY,EACZoJ,qBAAqB,EACrBnJ,QAAS,CACPC,OAAQ,CAAEC,SAAS,GACnBC,QAAS,CACL8D,UAAW,CACPvE,MAAOd,GAAK,GAAGA,EAAEuF,OAAOjX,OAAOsC,EAAOoP,EAAEwK,sBAGhD/I,WAAY,CACVE,OAAQ,MACRD,MAAO,MACPG,MAAO,UACPC,KAAM,CAAEC,OAAQ,QAChBC,UAAWA,CAACC,EAAK1B,IAEP3P,EAAO2P,EAAIiK,WAAa,EAAI5Z,EAAO2P,EAAIiK,WAAa,KAIlEtI,OAAQ,CACN5T,EAAG,CACC0H,IAAK,IACLwN,MAAO,CAAEkC,SAAU1Y,GAAKA,EAAI,KAC5BmV,aAAa,GAEjBrb,EAAG,CAAE0c,MAAO,CAAE1B,KAAM,CAAEhV,KAAM,SAIpC,GAEFoS,aAAAA,GAAkBhU,KAAK4e,YAAc,GCvRvC,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,UPkBA,IACEnlB,KAAM,mBACN4F,KAAMA,KAAA,CAASiS,KAAM,cACrB7I,WAAY,CACV8W,mBAAkB,GAClB7W,sBAAqB,EACrB8W,oBAAmB,GACnBC,uBAAsBA,KQ7B1B,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,SAAS,MAEpE,U,UCNO/lB,MAAM,gB,IAGJA,MAAM,W,IASNA,MAAM,UAAU0U,MAAA,0B,qBA0B8BA,MAAA,gB,IAYvC1U,MAAM,W,uGAlDpBC,EAAAA,EAAAA,IA4DM,MA5DNC,GA4DM,cA3DJC,EAAAA,EAAAA,IAAqB,UAAjB,gBAAY,KAEhBA,EAAAA,EAAAA,IAQM,MARNK,GAQM,cAPJL,EAAAA,EAAAA,IAA+C,SAAxCuQ,IAAI,cAAa,mBAAe,cACvCvQ,EAAAA,EAAAA,IAKS,U,qCALQe,EAAA8kB,WAAU5kB,GAAEuN,GAAG,c,cAC9BxO,EAAAA,EAAAA,IAA6B,UAArB2M,MAAM,IAAG,OAAG,IACpB3M,EAAAA,EAAAA,IAAsC,UAA9B2M,MAAM,UAAS,UAAM,IAC7B3M,EAAAA,EAAAA,IAAoC,UAA5B2M,MAAM,SAAQ,SAAK,IAC3B3M,EAAAA,EAAAA,IAAoC,UAA5B2M,MAAM,SAAQ,SAAK,iBAJZ5L,EAAA8kB,iBAOnB7lB,EAAAA,EAAAA,IAGM,MAHNc,GAGM,EAFJd,EAAAA,EAAAA,IAAgG,UAAvFM,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAEN,EAAA4lB,cAAA5lB,EAAA4lB,gBAAAtlB,IAAc+T,MAAA,mCAAwC,sBACtEvU,EAAAA,EAAAA,IAAgG,UAAvFM,QAAKC,EAAA,KAAAA,EAAA,GAAAU,GAAEuT,EAAAtE,QAAQvQ,KAAK,eAAe4U,MAAA,uBAA0B,wBAExEvU,EAAAA,EAAAA,IA2CQ,2BA1CNA,EAAAA,EAAAA,IASQ,eARNA,EAAAA,EAAAA,IAOK,YANHA,EAAAA,EAAAA,IAAgB,UAAZ,YACJA,EAAAA,EAAAA,IAAkB,UAAd,cACJA,EAAAA,EAAAA,IAAc,UAAV,UACJA,EAAAA,EAAAA,IAAa,UAAT,SAEJA,EAAAA,EAAAA,IAAgB,UAAZ,eAAO,KAGfA,EAAAA,EAAAA,IA+BQ,cA9B6B,IAAzBE,EAAA6lB,cAAcxhB,SAAM,WAA9BzE,EAAAA,EAAAA,IAEK,KAAA2B,GAAAlB,EAAA,KAAAA,EAAA,KADHP,EAAAA,EAAAA,IAAwD,MAApDyE,QAAQ,IAAI5E,MAAM,oBAAmB,cAAU,sBAGnDC,EAAAA,EAAAA,IAwBK8B,EAAAA,GAAA,CAAAhB,IAAA,IAAAiB,EAAAA,EAAAA,IAxBc3B,EAAA6lB,eAARtS,K,WAAX3T,EAAAA,EAAAA,IAwBK,MAxB8Bc,IAAK6S,EAAKnJ,O,EAC3CtK,EAAAA,EAAAA,IAA2B,WAAAC,EAAAA,EAAAA,IAApBwT,EAAKuS,SAAO,IACnBhmB,EAAAA,EAAAA,IAAmC,WAAAC,EAAAA,EAAAA,IAA5BwT,EAAKrE,UAAY,KAAJ,IACpBpP,EAAAA,EAAAA,IAMK,6BALAyT,EAAKnJ,OAAQ,IAEhB,GAAYmJ,EAAKnJ,QAAUpK,EAAA+lB,eAAY,WAAvCnmB,EAAAA,EAAAA,IAEO,OAFP0M,GAEOjM,EAAA,KAAAA,EAAA,KADLP,EAAAA,EAAAA,IAAa,SAAV,UAAM,0BAGbA,EAAAA,EAAAA,IAAoC,WAAAC,EAAAA,EAAAA,IAA7BC,EAAAgmB,WAAWzS,EAAKtE,OAAI,IAQ3BnP,EAAAA,EAAAA,IAKK,KALLgC,GAKK,EAJHhC,EAAAA,EAAAA,IAA6C,UAApCM,QAAKW,GAAEf,EAAAimB,SAAS1S,IAAO,OAAI,EAAAxR,KACpCjC,EAAAA,EAAAA,IAA+F,UAAtFM,QAAKW,GAAEuT,EAAAtE,QAAQvQ,KAAK,oBAAoB8T,EAAKnJ,UAAU,yBAAsB,EAAAlI,KACtFpC,EAAAA,EAAAA,IAAsG,UAA7FM,QAAKW,GAAEuT,EAAAtE,QAAQvQ,KAAK,mBAAmB8T,EAAKuS,WAAWvS,EAAKnJ,UAAU,iBAAc,EAAAjI,KAC7FrC,EAAAA,EAAAA,IAAgE,UAAxDH,MAAM,SAAUS,QAAKW,GAAEf,EAAAkmB,WAAW3S,IAAO,SAAM,EAAAnR,W,YAarE,QACE1C,KAAM,cACN4F,IAAAA,GACE,MAAO,CACLC,QAASC,EAAAA,EAAIC,aACbkgB,WAAY,GACZQ,MAAO,GAEX,EACAngB,SAAU,CACR6f,aAAAA,GACE,OAAO5f,KAAK0f,WACR1f,KAAKkgB,MAAM3f,QAAO4f,GAAKA,EAAEnX,OAAShJ,KAAK0f,aACvC1f,KAAKkgB,KACX,EACAJ,YAAAA,GACE,OAAO5X,KAAKC,MAAMlP,aAAa6J,QAAQ,cAAcqB,KACvD,GAEFxB,QAAS,CACPgd,YAAAA,GACE3f,KAAK+J,QAAQvQ,KAAK,uBACpB,EAEAumB,UAAAA,CAAW/W,GACT,IAAKA,EAAM,MAAO,UAClB,MAAM7I,EAAM,CACVkJ,MAAO,QACPF,OAAQ,SACRC,MAAO,SAET,OAAOjJ,EAAI6I,IAASA,EAAKuF,OAAO,GAAGC,cAAgBxF,EAAK1L,MAAM,EAChE,EAEA0iB,QAAAA,CAAS1S,GACPtN,KAAK+J,QAAQvQ,KAAK,oBAAoB8T,EAAKuS,UAC7C,EAEAI,UAAAA,CAAW3S,GACT,GAAI8S,QAAQ,UAAU9S,EAAKrE,aAAc,CAEvC,MAAMoE,EAAQpU,aAAa6J,QAAQ,aAEnCE,MAAM,GAAGhD,KAAKV,sBAAsBgO,EAAKuS,UAAW,CAClDhT,OAAQ,SACRjK,QAAS,CACX,cAAiB,UAAUyK,IAC3B,eAAgB,sBAGfpK,MAAKlK,IACJ,IAAKA,EAAIgU,GAAI,MAAM,IAAIkC,MAAM,yBAE7B9V,OAAOqU,SAAS6S,YAEjBld,OAAM+J,IACL5T,MAAM,wBAA0B4T,EAAImC,WAExC,CACF,GAGF7M,OAAAA,GACA,MAAM6K,EAAQpU,aAAa6J,QAAQ,aAGnCE,MAAM,GAAGhD,KAAKV,sBAAuB,CACnCuN,OAAQ,MACRjK,QAAS,CACP,cAAiB,UAAUyK,IAC3B,eAAgB,sBAGjBpK,MAAKlK,IACJ,KAAID,EAAAA,EAAAA,GAAmBC,GAEvB,OAAOA,EAAImK,UAEZD,MAAK5D,IAEJW,KAAKkgB,MAAQ7gB,KAEd8D,OAAM+J,IACLzD,QAAQI,MAAM,yBAA0BqD,KAE5C,GClJF,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,U,UCROxT,MAAM,c,2CAAXC,EAAAA,EAAAA,IAoBM,MApBNC,GAoBM,EAnBJC,EAAAA,EAAAA,IAAoB,WAAAC,EAAAA,EAAAA,IAAbC,EAAAsB,OAAK,IAEZxB,EAAAA,EAAAA,IAgBO,QAhBAoQ,SAAM7P,EAAA,KAAAA,EAAA,IAAA8P,EAAAA,EAAAA,KAAA,IAAA7P,IAAUN,EAAAumB,eAAAvmB,EAAAumB,iBAAAjmB,IAAa,e,EAClCR,EAAAA,EAAAA,IAGM,yBAFJA,EAAAA,EAAAA,IAAwB,aAAjB,aAAS,KAChBA,EAAAA,EAAAA,IAAgC,cAA1BA,EAAAA,EAAAA,IAAmB,UAAAC,EAAAA,EAAAA,IAAbc,EAAA2lB,QAAM,QAEpB1mB,EAAAA,EAAAA,IAGM,yBAFJA,EAAAA,EAAAA,IAAsB,aAAf,WAAO,KACdA,EAAAA,EAAAA,IAAmC,cAA7BA,EAAAA,EAAAA,IAAsB,UAAAC,EAAAA,EAAAA,IAAhBc,EAAA4lB,WAAS,QAEvB3mB,EAAAA,EAAAA,IAGM,yBAFJA,EAAAA,EAAAA,IAA+C,SAAxCuQ,IAAI,eAAc,kBAAc,cACvCvQ,EAAAA,EAAAA,IAAoD,SAA7CkB,KAAK,O,qCAAgBH,EAAA6lB,YAAW3lB,GAAEwP,SAAA,I,iBAAb1P,EAAA6lB,iBAAW,aAGzC5mB,EAAAA,EAAAA,IAA6C,UAArCkB,KAAK,UAAS,kBAAc,KACpClB,EAAAA,EAAAA,IAAsF,UAA9EkB,KAAK,SAAUZ,QAAKC,EAAA,KAAAA,EAAA,GAAAU,GAAEuT,EAAAtE,QAAQ2W,QAAQtS,MAAA,wBAA2B,SAAI,K,CAOnF,QACE/O,IAAAA,GACE,MAAO,CACLC,QAASC,EAAAA,EAAIC,aACbihB,YAAa,GACbE,SAAS,EACTJ,OAAQ,GACRC,UAAW,GACX/U,UAAW,GAEf,EACA1L,SAAU,CACR1E,KAAAA,GACE,OAAO2E,KAAK2gB,QACR,uCAAyC3gB,KAAKyL,UAC9C,qBACN,GAEFjJ,OAAAA,GACE,MAAMyF,EAAWC,KAAKC,MAAMlP,aAAa6J,QAAQ,cAC3Cyd,EAASvgB,KAAK4P,OAAOc,OAAO6P,QAAUtY,EAASI,GACrDrI,KAAKwgB,UAAYxgB,KAAK4P,OAAOc,OAAO8P,WAAavY,EAAS9D,MAE1DnE,KAAK2gB,QAA4B,UAAlB1Y,EAASe,KACxBhJ,KAAKyL,UAAYxD,EAASgB,SAC1BjJ,KAAKugB,OAASA,CAChB,EACA5d,QAAS,CACP2d,aAAAA,GAME,MAAMM,EAAeznB,OAAOinB,QAAQ,yDACpC,IAAKQ,EAEH,YADAtnB,MAAM,6BAIR,MAAMmkB,EAAMzd,KAAK2gB,QACb,GAAG3gB,KAAKV,qCAAqCU,KAAKugB,SAClD,GAAGvgB,KAAKV,+BAA+BU,KAAKugB,SAGhDvd,MAAMya,EAAK,CACT5Q,OAAQ,OACRjK,QAAS,CACP,cAAiB,UAAU3J,aAAa6J,QAAQ,eAChD,eAAgB,oBAElBqJ,KAAMjE,KAAK4E,UAAU,CAAE+T,aAAc7gB,KAAKygB,gBAE3Cxd,MAAKlK,GAAOA,EAAImK,SAChBD,MAAK,KACJ3J,MAAM,+BACN0G,KAAK+J,QAAQvQ,KAAK,0BAEnB2J,OAAM+J,IACLzD,QAAQI,MAAM,4BAA6BqD,KAE/C,IChFJ,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,U,UCROxT,MAAM,iB,uDAgCaA,MAAM,W,UAENA,MAAM,e,UAQNA,MAAM,e,UAQeA,MAAM,S,IAgC1CA,MAAM,W,2DAlFfC,EAAAA,EAAAA,IA+FM,MA/FNC,GA+FM,gBA9FJC,EAAAA,EAAAA,IAAsB,UAAlB,iBAAa,KAEjBA,EAAAA,EAAAA,IAuFO,QAvFAoQ,SAAM7P,EAAA,MAAAA,EAAA,KAAA8P,EAAAA,EAAAA,KAAA,IAAA7P,IAAUN,EAAA4lB,cAAA5lB,EAAA4lB,gBAAAtlB,IAAY,e,EACjCR,EAAAA,EAAAA,IAGM,2BAFJA,EAAAA,EAAAA,IAAyC,SAAlCuQ,IAAI,YAAW,eAAW,cACjCvQ,EAAAA,EAAAA,IAAyE,S,qCAApDe,EAAAyP,KAAKpB,SAAQnO,GAAEuN,GAAG,WAAWtN,KAAK,OAAOuP,SAAA,I,iBAAzC1P,EAAAyP,KAAKpB,cAAQ,GAAnB/D,MAAR,SAGTrL,EAAAA,EAAAA,IAKM,iBAJ2BinB,kBAAe,WAA9CnnB,EAAAA,EAAAA,IAAkE,S,MAA1DyQ,IAAKiE,EAAAlK,OAAmC,aAAU,EAAAjK,OAAA,WAC1DP,EAAAA,EAAAA,IAA0C,S,MAAlCyQ,IAAKiE,EAAAlK,OAAc,UAAO,EAAAxJ,MAAA,SAClCd,EAAAA,EAAAA,IAAuG,S,qCAAlFe,EAAAyP,KAAKlG,MAAKrJ,GAAEuN,GAAG,QAAStN,KAAI,KAAO+lB,gBAAkB,OAAS,QAASxW,SAAA,I,kBAAvE1P,EAAAyP,KAAKlG,WAAK,GAAhBe,MAAR,MAAyB,eAChCrL,EAAAA,EAAAA,IAAI,yBAAkBinB,kBAAe,WAAjCnnB,EAAAA,EAAAA,IAA2G,QAAA0M,GAAxE,sEAAgE,kBAGzGxM,EAAAA,EAAAA,IAGM,2BAFJA,EAAAA,EAAAA,IAAwC,SAAjCuQ,IAAI,YAAW,cAAU,cAChCvQ,EAAAA,EAAAA,IAAoE,S,qCAApDe,EAAAyP,KAAKE,SAAQzP,GAAEuN,GAAG,WAAWtN,KAAK,OAAOuP,SAAA,I,iBAAzC1P,EAAAyP,KAAKE,eAGvB1Q,EAAAA,EAAAA,IAQM,2BAPJA,EAAAA,EAAAA,IAAgC,SAAzBuQ,IAAI,QAAO,UAAM,cACxBvQ,EAAAA,EAAAA,IAKS,U,qCALQe,EAAAyP,KAAKrB,KAAIlO,GAAEuN,GAAG,OAAOiC,SAAA,I,gBACpCzQ,EAAAA,EAAAA,IAA8C,UAAtC2M,MAAM,GAAGiE,SAAA,IAAS,eAAW,IACnC5Q,EAAAA,EAAAA,IAAoC,UAA5B2M,MAAM,SAAQ,SAAK,IAC3B3M,EAAAA,EAAAA,IAAsC,UAA9B2M,MAAM,UAAS,UAAM,IAC7B3M,EAAAA,EAAAA,IAAoC,UAA5B2M,MAAM,SAAQ,SAAK,iBAJd5L,EAAAyP,KAAKrB,UASbjP,EAAAgnB,UAAO,WAAlBpnB,EAAAA,EAAAA,IAA0C,MAA1CkC,MAA0C,eAE/B9B,EAAAgnB,UAAO,WAAlBpnB,EAAAA,EAAAA,IAMM,MANNmC,GAMM,EALJjC,EAAAA,EAAAA,IAGQ,wBAFNA,EAAAA,EAAAA,IAA2D,SAApDkB,KAAK,W,qCAAoBH,EAAAyP,KAAK2W,mBAAkBlmB,I,iBAAvBF,EAAAyP,KAAK2W,sBAAkB,uBAAI,oCAE7D,eACAnnB,EAAAA,EAAAA,IAAwF,SAAjFH,MAAM,SAAO,UAAC,8BAAyBG,EAAAA,EAAAA,IAAkB,YAAZ,UAAK,QAAO,sBAAgB,uBAGvEE,EAAAgnB,UAAO,WAAlBpnB,EAAAA,EAAAA,IAMM,MANNsC,GAMM,EALJpC,EAAAA,EAAAA,IAGQ,wBAFNA,EAAAA,EAAAA,IAAqD,SAA9CkB,KAAK,W,qCAAoBH,EAAAyP,KAAK4W,aAAYnmB,I,iBAAjBF,EAAAyP,KAAK4W,gBAAY,uBAAI,mCAEvD,eACApnB,EAAAA,EAAAA,IAAsE,SAA/DH,MAAM,SAAQ,6CAAyC,uBAGrDK,EAAAgnB,SAAWnmB,EAAAyP,KAAK4W,eAAY,WAAvCtnB,EAAAA,EAAAA,IA8BM,MA9BNuC,GA8BM,EA7BJrC,EAAAA,EAAAA,IAGQ,qCAHD,oBAEL,SAAAA,EAAAA,EAAAA,IAAiD,SAA1CkB,KAAK,O,qCAAgBH,EAAAyP,KAAKxM,aAAY/C,I,iBAAjBF,EAAAyP,KAAKxM,mBAGnChE,EAAAA,EAAAA,IASQ,qCATD,oBAEL,SAAAA,EAAAA,EAAAA,IAMS,U,qCANQe,EAAAyP,KAAK6W,aAAYpmB,I,+VAAjBF,EAAAyP,KAAK6W,mBASxBrnB,EAAAA,EAAAA,IAOQ,qCAPD,cAEL,SAAAA,EAAAA,EAAAA,IAIS,U,qCAJQe,EAAAyP,KAAK8W,eAAcrmB,I,gBAClCjB,EAAAA,EAAAA,IAAoC,UAA5B2M,MAAM,SAAQ,SAAK,IAC3B3M,EAAAA,EAAAA,IAA4C,UAApC2M,MAAM,aAAY,aAAS,IACnC3M,EAAAA,EAAAA,IAAsC,UAA9B2M,MAAM,UAAS,UAAM,iBAHd5L,EAAAyP,KAAK8W,wBAAc,gBAaxCtnB,EAAAA,EAAAA,IAOM,MAPNsC,GAOM,EANJtC,EAAAA,EAAAA,IAES,UAFDkB,KAAK,SAAU0P,SAAU7P,EAAAwmB,a,QAC5BxmB,EAAAwmB,WAAa,eAAiB,YAApB,EAAAhlB,KAEfvC,EAAAA,EAAAA,IAES,UAFDkB,KAAK,SAASrB,MAAM,QAASS,QAAKC,EAAA,KAAAA,EAAA,GAAAU,GAAEuT,EAAAtE,QAAQvQ,KAAK,yBAAwB,aAEjF,IAIOoB,EAAAyU,UAAO,WAAlB1V,EAAAA,EAAAA,IAEM,O,MAFeD,OAAKuB,EAAAA,EAAAA,IAAA,EAAAomB,QAAazmB,EAAAymB,QAAOxX,OAAUjP,EAAAymB,SAAiB,U,QACpEzmB,EAAAyU,SAAO,qB,CAQhB,QACE5V,KAAM,eACN4F,IAAAA,GACE,MAAO,CACLC,QAASC,EAAAA,EAAIC,aACb4hB,YAAY,EACZN,iBAAiB,EACjBzW,KAAM,CACJpB,SAAU,GACV9E,MAAO,GACPoG,SAAU,GACVvB,KAAM,GAGNgY,oBAAoB,EACpBC,cAAc,EACdpjB,cAAc,IAAIqE,MAAOsb,cAAclgB,MAAM,EAAG,IAChD4jB,aAAc,SACdC,eAAgB,QAChBG,kBAAkB,GAEpBjS,QAAS,GACTgS,SAAS,EAEb,EACAthB,SAAU,CACRghB,OAAAA,GACE,MAA0B,UAAnB/gB,KAAKqK,KAAKrB,IACnB,GAEFgD,MAAO,CAEL,YAAYlK,GACA,UAANA,IACF9B,KAAKqK,KAAK2W,oBAAqB,EAC/BhhB,KAAKqK,KAAK4W,cAAe,EACzBjhB,KAAKqK,KAAKiX,kBAAmB,GAGZthB,KAAK8gB,gBAAd,UAANhf,CAEN,GAEFa,QAAS,CACP,kBAAMgd,GACJ3f,KAAKqP,QAAU,GACfrP,KAAKqhB,SAAU,EACfrhB,KAAKohB,YAAa,EAElB,IACE,MAAM/T,EAAQpU,aAAa6J,QAAQ,aAG7BqJ,EAAO,CACXlD,SAAUjJ,KAAKqK,KAAKpB,SACpB9E,MAAOnE,KAAKqK,KAAKlG,MACjBoG,SAAUvK,KAAKqK,KAAKE,SACpBvB,KAAMhJ,KAAKqK,KAAKrB,KAGhBgY,mBAAoBhhB,KAAKqK,KAAK2W,qBAAsB,EACpDC,aAAcjhB,KAAK+gB,WAAa/gB,KAAKqK,KAAK4W,aAC1CpjB,aAAcmC,KAAK+gB,SAAW/gB,KAAKqK,KAAK4W,aAAejhB,KAAKqK,KAAKxM,aAAe,KAChFqjB,aAAclhB,KAAK+gB,SAAW/gB,KAAKqK,KAAK4W,aAAejhB,KAAKqK,KAAK6W,aAAe,KAChFC,eAAgBnhB,KAAK+gB,SAAW/gB,KAAKqK,KAAK4W,aAAejhB,KAAKqK,KAAK8W,eAAiB,KACpFG,oBAAkBthB,KAAK+gB,UAAW/gB,KAAKqK,KAAK4W,iBAAiBjhB,KAAKqK,KAAKiX,kBAGnEC,QAAiBve,MAAM,GAAGhD,KAAKV,yBAA0B,CAC7DuN,OAAQ,OACRjK,QAAS,CACPC,cAAe,UAAUwK,IACzB,eAAgB,oBAElBlB,KAAMjE,KAAK4E,UAAUX,KAGvB,IAAKoV,EAASxU,GAAI,CAChB,MAAMyU,QAAYD,EAASrK,OAC3B,MAAM,IAAIjI,MAAMuS,GAAO,sBACzB,CAGAxhB,KAAKqP,QAAU,+BACfrP,KAAKqhB,SAAU,EAGfrhB,KAAKqK,KAAO,CACVpB,SAAU,GACV9E,MAAO,GACPoG,SAAU,GACVvB,KAAM,GACNgY,oBAAoB,EACpBC,cAAc,EACdpjB,cAAc,IAAIqE,MAAOsb,cAAclgB,MAAM,EAAG,IAChD4jB,aAAc,SACdC,eAAgB,QAChBG,kBAAkB,EAEtB,CAAE,MAAOpU,GACPlN,KAAKqP,QAAUnC,EAAImC,SAAW,sBAC9BrP,KAAKqhB,SAAU,CACjB,CAAE,QACArhB,KAAKohB,YAAa,CACpB,CACF,ICxMJ,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,U,UCRO1nB,MAAM,a,UAMuE0U,MAAA,gB,4CAWTA,MAAA,gB,qBAcDA,MAAA,gB,2DA/BxEzU,EAAAA,EAAAA,IAuCM,MAvCNC,GAuCM,gBAtCJC,EAAAA,EAAAA,IAAuB,UAAnB,kBAAc,KAClBA,EAAAA,EAAAA,IAoCO,QApCAoQ,SAAM7P,EAAA,KAAAA,EAAA,IAAA8P,EAAAA,EAAAA,KAAA,IAAA7P,IAAUN,EAAA0nB,YAAA1nB,EAAA0nB,cAAApnB,IAAU,e,EACjCR,EAAAA,EAAAA,IAMM,yBALJA,EAAAA,EAAAA,IAAyC,SAAlCuQ,IAAI,YAAW,eAAW,iBAAQvQ,EAAAA,EAAAA,IAAI,8BAC7CA,EAAAA,EAAAA,IAAsD,SAA/CkB,KAAK,O,qCAAgBH,EAAA0S,KAAKrE,SAAQnO,GAAEwP,SAAA,I,iBAAf1P,EAAA0S,KAAKrE,YAAQ,aAAapP,EAAAA,EAAAA,IAAI,oBAC9Ce,EAAA8mB,aAAazY,UAAYrO,EAAA0S,KAAKrE,WAAarO,EAAA8mB,aAAazY,WAAQ,WAA5EtP,EAAAA,EAAAA,IAEO,OAFPO,GAAmG,eACvFJ,EAAAA,EAAAA,IAAGc,EAAA8mB,aAAazY,UAAW,KACvC,uBAGFpP,EAAAA,EAAAA,IAUM,iBAT2BinB,kBAAe,WAA9CnnB,EAAAA,EAAAA,IAAkE,S,MAA1DyQ,IAAKiE,EAAAlK,OAAmC,aAAU,EAAAxJ,OAAA,WAC1DhB,EAAAA,EAAAA,IAA0C,S,MAAlCyQ,IAAKiE,EAAAlK,OAAc,UAAO,EAAA7I,KAAA,aAClCzB,EAAAA,EAAAA,IAAI,8BACJA,EAAAA,EAAAA,IAAuF,SAA/EkB,KAAI,KAAO+lB,gBAAkB,OAAS,Q,qCAAkBlmB,EAAA0S,KAAKnJ,MAAKrJ,GAAEwP,SAAA,I,kBAAZ1P,EAAA0S,KAAKnJ,SAAK,aAC1EtK,EAAAA,EAAAA,IAAI,oBACQe,EAAA8mB,aAAavd,OAASvJ,EAAA0S,KAAKnJ,QAAUvJ,EAAA8mB,aAAavd,QAAK,WAAnExK,EAAAA,EAAAA,IAEO,OAFPkC,GAA0F,eAC9E/B,EAAAA,EAAAA,IAAGc,EAAA8mB,aAAavd,OAAQ,KACpC,mCACAtK,EAAAA,EAAAA,IAAI,yBAAkBinB,kBAAe,WAAjCnnB,EAAAA,EAAAA,IAA2G,QAAAmC,GAAxE,sEAAgE,kBAGvGjC,EAAAA,EAAAA,IAWM,2BAVJA,EAAAA,EAAAA,IAAgC,SAAzBuQ,IAAI,QAAO,UAAM,cACxBvQ,EAAAA,EAAAA,IAKS,U,qCALQe,EAAA0S,KAAKtE,KAAIlO,GAAEwP,SAAA,I,gBAC1BzQ,EAAAA,EAAAA,IAAoC,UAA5B2M,MAAM,SAAQ,SAAK,IAC3B3M,EAAAA,EAAAA,IAAsC,UAA9B2M,MAAM,UAAS,UAAM,IAC7B3M,EAAAA,EAAAA,IAAoC,UAA5B2M,MAAM,SAAQ,SAAK,IAC3B3M,EAAAA,EAAAA,IAA8C,UAAtC2M,MAAM,cAAa,cAAU,iBAJtB5L,EAAA0S,KAAKtE,QAMVpO,EAAA8mB,aAAa1Y,MAAQpO,EAAA0S,KAAKtE,OAASpO,EAAA8mB,aAAa1Y,OAAI,WAAhErP,EAAAA,EAAAA,IAEO,OAFPsC,GAAuF,eAC3EnC,EAAAA,EAAAA,IAAGc,EAAA8mB,aAAa1Y,MAAO,KACnC,uBAGFnP,EAAAA,EAAAA,IAA0F,UAAlFH,MAAM,aAAaqB,KAAK,SAAU0P,UAAW1Q,EAAA4nB,gBAAgB,eAAY,EAAAzlB,KACjFrC,EAAAA,EAAAA,IAA2G,UAAnGkB,KAAK,SAAUZ,QAAKC,EAAA,KAAAA,EAAA,GAAAU,GAAEuT,EAAAtE,QAAQvQ,KAAK,wBAAwB4U,MAAA,wBAA2B,SAAI,K,CAQxG,QACE/O,IAAAA,GACE,MAAO,CACLC,QAASC,EAAAA,EAAIC,aACbshB,iBAAiB,EACjBxT,KAAM,CACJuS,QAAS,GACT5W,SAAU,GACV9E,MAAO,GACP6E,KAAM,IAER0Y,aAAc,CACZzY,SAAU,GACV9E,MAAO,GACP6E,KAAM,IAGZ,EACAxG,OAAAA,GACE,MAAM+d,EAASvgB,KAAK4P,OAAOc,OAAO6P,OAClCvgB,KAAK4hB,cAAcrB,EACrB,EACAxgB,SAAU,CACR4hB,cAAAA,GAEE,OACE3hB,KAAKsN,KAAKrE,WAAajJ,KAAK0hB,aAAazY,UACzCjJ,KAAKsN,KAAKnJ,QAAUnE,KAAK0hB,aAAavd,OACtCnE,KAAKsN,KAAKtE,OAAShJ,KAAK0hB,aAAa1Y,IAEzC,GAEFgD,MAAO,CACL,YAAYlK,GACS9B,KAAK8gB,gBAAd,UAANhf,CAEN,GAEFa,QAAS,CACPif,aAAAA,CAAcrB,GAGZvd,MAAM,GAAGhD,KAAKV,sBAAsBihB,IAAU,CAC5C3d,QAAS,CACP,cAAiB,UAAU3J,aAAa6J,QAAQ,eAChD,eAAgB,sBAGnBG,MAAKlK,IACJ,KAAID,EAAAA,EAAAA,GAAmBC,GAEvB,OAAOA,EAAImK,UAEZD,MAAK5D,IACJW,KAAKsN,KAAOjO,EACZW,KAAK0hB,aAAazY,SAAW5J,EAAK4J,SAClCjJ,KAAK0hB,aAAavd,MAAQ9E,EAAK8E,MAC/BnE,KAAK0hB,aAAa1Y,KAAO3J,EAAK2J,QAE/B7F,OAAM+J,IACLzD,QAAQI,MAAM,4BAA6BqD,KAE/C,EACAuU,UAAAA,GAGEze,MAAM,GAAGhD,KAAKV,sBAAsBU,KAAKsN,KAAKuS,UAAW,CACvDhT,OAAQ,MACRjK,QAAS,CACP,cAAiB,UAAU3J,aAAa6J,QAAQ,eAChD,eAAgB,oBAElBqJ,KAAMjE,KAAK4E,UAAU9M,KAAKsN,QAE3BrK,MAAKlK,GAAOA,EAAImK,SAChBD,MAAK,KACJ3J,MAAM,kCACN0G,KAAK+J,QAAQvQ,KAAK,0BAEnB2J,OAAM+J,IACLzD,QAAQI,MAAM,4BAA6BqD,KAE/C,ICzHJ,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,U,UCROxT,MAAM,mB,IAWEA,MAAM,S,iBA8CJ0U,MAAA,wE,IAMAA,MAAA,wE,0BAO4B1U,MAAM,S,IAGpCA,MAAM,iB,oBAaNA,MAAM,S,qGAoDNA,MAAM,iB,oBAWZA,MAAM,W,IAOJA,MAAM,UAAU0U,MAAA,sB,iBA4BlBA,MAAA,4B,oEASE1U,MAAM,W,IAQN0U,MAAA,4F,6KAgEQ1U,MAAM,Q,IAAaA,MAAM,K,uGA4BzBA,MAAM,e,UACoBA,MAAM,W,UACtBA,MAAM,c,yBAkB6BA,MAAM,S,UACiBA,MAAM,S,UAK/DA,MAAM,e,IAGTA,MAAM,Q,IAEJA,MAAM,O,IAKNA,MAAM,gB,2DAyBZA,MAAM,gB,yEAkCbA,MAAM,W,wCAKDA,MAAM,a,uDAiBwBA,MAAM,a,uGA1ZvDC,EAAAA,EAAAA,IAuaM,MAvaNC,GAuaM,gBAtaJC,EAAAA,EAAAA,IAAwB,UAApB,mBAAe,IAEmBE,EAAA8nB,iBAAc,WAApDloB,EAAAA,EAAAA,IAA4E,U,MAAnEQ,QAAKC,EAAA,KAAAA,EAAA,GAAAU,GAAEuT,EAAAtE,QAAQ2W,QAA8BhnB,MAAM,IAAG,WAAI,WACnEC,EAAAA,EAAAA,IAAsF,U,MAA7EQ,QAAKC,EAAA,KAAAA,EAAA,GAAAU,GAAEuT,EAAAtE,QAAQvQ,KAAK,eAAsBE,MAAM,IAAG,sBAGjDkB,EAAAknB,eAAY,WAAvBnoB,EAAAA,EAAAA,IAwEM,O,MAxEmBD,MAAM,gBAAiBS,QAAKC,EAAA,MAAAA,EAAA,QAAAC,IAAEN,EAAAgoB,kBAAAhoB,EAAAgoB,oBAAA1nB,K,EACrDR,EAAAA,EAAAA,IAsEM,OAtEDH,MAAM,gBAAiBS,QAAKC,EAAA,MAAAA,EAAA,KAAA8P,EAAAA,EAAAA,KAAN,QAAW,WAACkE,MAAA,uB,gBACrCvU,EAAAA,EAAAA,IAA+B,UAA3B,0BAAsB,KAC1BA,EAAAA,EAAAA,IAmEO,QAnEAoQ,SAAM7P,EAAA,MAAAA,EAAA,KAAA8P,EAAAA,EAAAA,KAAA,IAAA7P,IAAUN,EAAAioB,cAAAjoB,EAAAioB,gBAAA3nB,IAAY,e,EACjCR,EAAAA,EAAAA,IA4CM,MA5CNK,GA4CM,EA3CJL,EAAAA,EAAAA,IAOQ,qCAPD,mBAEL,SAAAA,EAAAA,EAAAA,IAIS,U,qCAJQe,EAAAqnB,WAAWrjB,YAAW9D,GAAEwP,SAAA,GAAU4X,SAAM9nB,EAAA,KAAAA,EAAA,OAAAC,IAAEN,EAAAooB,sBAAApoB,EAAAooB,wBAAA9nB,K,gBACzDV,EAAAA,EAAAA,IAES8B,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAFoBd,EAAAwnB,gBAAd5S,K,WAAf7V,EAAAA,EAAAA,IAES,UAFqCc,IAAK+U,EAAW5Q,YAAc4H,MAAOgJ,EAAW5Q,c,QACzF4Q,EAAW7R,YAAa,MAAE7D,EAAAA,EAAAA,IAAG0V,EAAW5Q,aAAc,KAC3D,EAAAjE,O,mBAHeC,EAAAqnB,WAAWrjB,kBAO9B/E,EAAAA,EAAAA,IAaM,2BAZJA,EAAAA,EAAAA,IAGQ,aAHD,kBAGP,KAEAgS,EAAAA,EAAAA,IAMI8O,EAAA,C,WALW/f,EAAAqnB,WAAWpkB,a,qCAAXjD,EAAAqnB,WAAWpkB,aAAY/C,GAC/B,WAAQ,IAAMoH,MAAK,IAAIA,MAAO0C,cAAgB,EAAG,GAAI,IACrD,aAAU,WAAa1C,MAAO0C,cAAgB,GAC/C,gBACC,sBAAoB,G,kDAI7B/K,EAAAA,EAAAA,IASQ,qCATD,YAEL,SAAAA,EAAAA,EAAAA,IAMS,U,qCANQe,EAAAqnB,WAAWf,aAAYpmB,GAAEwP,SAAA,I,+VAAzB1P,EAAAqnB,WAAWf,mBAS9BrnB,EAAAA,EAAAA,IAOQ,qCAPD,cAEL,SAAAA,EAAAA,EAAAA,IAIS,U,qCAJQe,EAAAqnB,WAAWjpB,OAAM8B,GAAEwP,SAAA,I,gBAClCzQ,EAAAA,EAAAA,IAAoC,UAA5B2M,MAAM,SAAQ,SAAK,IAC3B3M,EAAAA,EAAAA,IAA4C,UAApC2M,MAAM,aAAY,aAAS,IACnC3M,EAAAA,EAAAA,IAAsC,UAA9B2M,MAAM,UAAS,UAAM,iBAHd5L,EAAAqnB,WAAWjpB,eAQhCa,EAAAA,EAAAA,IAGQ,QAHRyB,GAGQ,WAFNzB,EAAAA,EAAAA,IAAuD,SAAhDkB,KAAK,W,qCAAoBH,EAAAqnB,WAAWI,SAAQvnB,I,iBAAnBF,EAAAqnB,WAAWI,YAAQ,uBAAI,qCAKzDxoB,EAAAA,EAAAA,IAQQ,QARRwM,GAQQ,WAPNxM,EAAAA,EAAAA,IAIE,SAHAkB,KAAK,W,qCACIH,EAAAqnB,WAAWX,iBAAgBxmB,GACnC2P,SAAU7P,EAAAqnB,WAAWI,WAAatoB,EAAAuoB,oB,kBAD1B1nB,EAAAqnB,WAAWX,oBAAgB,uBAEpC,2CAEWvnB,EAAAuoB,oBAA6D,iBAA3C,WAA/B3oB,EAAAA,EAAAA,IAAiF,OAAjFmC,GAA+C,mCAGjDjC,EAAAA,EAAAA,IAGM,MAHNoC,GAGM,EAFJpC,EAAAA,EAAAA,IAA2F,UAAnFkB,KAAK,SAAU0P,SAAU7P,EAAA2nB,W,QAAa3nB,EAAA2nB,SAAW,YAAc,UAAjB,EAAArmB,KACtDrC,EAAAA,EAAAA,IAA6E,UAArEkB,KAAK,SAASrB,MAAM,QAASS,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAEN,EAAAgoB,kBAAAhoB,EAAAgoB,oBAAA1nB,KAAkB,aAAM,yBAOjEO,EAAA4nB,aAAU,WAArB7oB,EAAAA,EAAAA,IAgEM,O,MAhEiBD,MAAM,gBAAiBS,QAAKC,EAAA,MAAAA,EAAA,QAAAC,IAAEN,EAAA0oB,gBAAA1oB,EAAA0oB,kBAAApoB,K,EACnDR,EAAAA,EAAAA,IA8DM,OA9DDH,MAAM,gBAAiBS,QAAKC,EAAA,MAAAA,EAAA,KAAA8P,EAAAA,EAAAA,KAAN,QAAW,WAACkE,MAAA,uB,gBACrCvU,EAAAA,EAAAA,IAA6B,UAAzB,wBAAoB,KACxBA,EAAAA,EAAAA,IA2DO,QA3DAoQ,SAAM7P,EAAA,MAAAA,EAAA,KAAA8P,EAAAA,EAAAA,KAAA,IAAA7P,IAAUN,EAAA2oB,YAAA3oB,EAAA2oB,cAAAroB,IAAU,e,EAC/BR,EAAAA,EAAAA,IAkDM,MAlDNsC,GAkDM,EAjDJtC,EAAAA,EAAAA,IAGQ,qCAHD,yBAELA,EAAAA,EAAAA,IAA4D,SAArDkB,KAAK,OAAQyL,MAAO5L,EAAA+nB,SAAS/jB,YAAa6L,SAAA,I,aAGtC7P,EAAAgoB,cAAW,WAAxBjpB,EAAAA,EAAAA,IAOQ,QAAA4C,GAAA,wBAPkB,uBAExB,SAAA1C,EAAAA,EAAAA,IAIS,U,uCAJQe,EAAA+nB,SAASE,sBAAqB/nB,I,gBAC7CnB,EAAAA,EAAAA,IAES8B,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAFgBd,EAAAkoB,iBAAV3Z,K,WAAfxP,EAAAA,EAAAA,IAES,UAFkCc,IAAK0O,EAAO0F,aAAerI,MAAO2C,EAAO0F,e,QAC/E1F,EAAO4F,aAAc,MAAEjV,EAAAA,EAAAA,IAAGqP,EAAO0F,cAAe,KACrD,EAAArS,O,mBAHe5B,EAAA+nB,SAASE,6BAAqB,gBAOjDhpB,EAAAA,EAAAA,IAGQ,qCAHD,uBAEL,SAAAA,EAAAA,EAAAA,IAAsH,Y,uCAAnGe,EAAA+nB,SAASI,gBAAejoB,GAAEE,YAAY,0BAA2ByP,SAAU7P,EAAAgoB,a,kBAA3EhoB,EAAA+nB,SAASI,qBAGnBnoB,EAAAgoB,cAAW,WAAtBjpB,EAAAA,EAAAA,IASM,MAAAgD,GAAA,CARS/B,EAAAgoB,cAAW,WAAxBjpB,EAAAA,EAAAA,IAA8C,QAAAiD,GAApB,kBAAY,gBACpCiP,EAAAA,EAAAA,IAME8O,EAAA,C,WALW/f,EAAA+nB,SAAS9kB,a,uCAATjD,EAAA+nB,SAAS9kB,aAAY/C,GAC7B,WAAQ,IAAMoH,MAAK,IAAIA,MAAO0C,cAAgB,EAAG,GAAI,IACrD,aAAU,WAAa1C,MAAO0C,cAAgB,GAC/C,gBACC,sBAAoB,G,kEAIhBhK,EAAAgoB,cAAW,WAAxBjpB,EAAAA,EAAAA,IASQ,QAAAkD,GAAA,wBATkB,YAExB,SAAAhD,EAAAA,EAAAA,IAMS,U,uCANQe,EAAA+nB,SAASzB,aAAYpmB,GAAEwP,SAAA,I,+VAAvB1P,EAAA+nB,SAASzB,oBAAY,eAS3BtmB,EAAAgoB,cAAW,WAAxBjpB,EAAAA,EAAAA,IAOQ,QAAAoD,GAAA,wBAPkB,cAExB,SAAAlD,EAAAA,EAAAA,IAIS,U,uCAJQe,EAAA+nB,SAAS3pB,OAAM8B,GAAEwP,SAAA,I,gBAChCzQ,EAAAA,EAAAA,IAAoC,UAA5B2M,MAAM,SAAQ,SAAK,IAC3B3M,EAAAA,EAAAA,IAA4C,UAApC2M,MAAM,aAAY,aAAS,IACnC3M,EAAAA,EAAAA,IAAsC,UAA9B2M,MAAM,UAAS,UAAM,iBAHd5L,EAAA+nB,SAAS3pB,cAAM,kBAQpCa,EAAAA,EAAAA,IAKM,MALNmD,GAKM,EAJJnD,EAAAA,EAAAA,IAES,UAFDkB,KAAK,SAAU0P,SAAU7P,EAAAooB,U,QAC5BpoB,EAAAooB,QAAU,UAAY,gBAAf,EAAA/lB,KAEZpD,EAAAA,EAAAA,IAA2E,UAAnEkB,KAAK,SAASrB,MAAM,QAASS,QAAKC,EAAA,MAAAA,EAAA,QAAAC,IAAEN,EAAA0oB,gBAAA1oB,EAAA0oB,kBAAApoB,KAAgB,aAAM,0BAO1ER,EAAAA,EAAAA,IAgCM,MAhCNsD,GAgCM,WA/BJtD,EAAAA,EAAAA,IAIgD,S,uCAHhCe,EAAAqoB,OAAMnoB,GACpBC,KAAK,OACLrB,MAAM,eACNsB,YAAY,iC,iBAHEJ,EAAAqoB,YAAM,GAAZ/d,MAAR,OAKFrL,EAAAA,EAAAA,IAuBM,MAvBNuD,GAuBM,WAtBJvD,EAAAA,EAAAA,IAKS,U,uCALQe,EAAAsoB,WAAUpoB,I,gBACzBjB,EAAAA,EAAAA,IAAmC,UAA3B2M,MAAM,IAAG,aAAS,mBAC1B7M,EAAAA,EAAAA,IAES8B,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAFc3B,EAAAopB,gBAAR7H,K,WAAf3hB,EAAAA,EAAAA,IAES,UAF+Bc,IAAK6gB,EAAO9U,MAAO8U,EAAK8H,a,QAC3D9H,GAAI,EAAA7d,O,mBAHM7C,EAAAsoB,eAAU,SAO3BrpB,EAAAA,EAAAA,IAOS,U,uCAPQe,EAAAyoB,WAAUvoB,I,kZAAVF,EAAAyoB,eAAU,SAS3BxpB,EAAAA,EAAAA,IAKS,U,uCALQe,EAAA0oB,aAAYxoB,I,gBAC3BjB,EAAAA,EAAAA,IAAoC,UAA5B2M,MAAM,IAAG,cAAU,IAC3B3M,EAAAA,EAAAA,IAAoC,UAA5B2M,MAAM,SAAQ,SAAK,IAC3B3M,EAAAA,EAAAA,IAA4C,UAApC2M,MAAM,aAAY,aAAS,IACnC3M,EAAAA,EAAAA,IAAsC,UAA9B2M,MAAM,UAAS,UAAM,iBAJd5L,EAAA0oB,qBAWrBzpB,EAAAA,EAAAA,IA8CM,MA9CN6D,GA8CM,EA5CJ7D,EAAAA,EAAAA,IAMM,aALJA,EAAAA,EAAAA,IAAwE,UAA/D4Q,SAAU7P,EAAA2oB,MAAI,GAAO3oB,EAAA+S,QAAUxT,QAAKC,EAAA,MAAAA,EAAA,QAAAC,IAAEN,EAAAypB,SAAAzpB,EAAAypB,WAAAnpB,KAAS,UAAO,EAAAgE,KAC/DxE,EAAAA,EAAAA,IAAwE,UAA/D4Q,SAAU7P,EAAA2oB,MAAI,GAAO3oB,EAAA+S,QAAUxT,QAAKC,EAAA,MAAAA,EAAA,QAAAC,IAAEN,EAAA0pB,UAAA1pB,EAAA0pB,YAAAppB,KAAU,SAAM,EAAAkE,KAC/D1E,EAAAA,EAAAA,IAAoD,YAA9C,SAAKC,EAAAA,EAAAA,IAAGc,EAAA2oB,MAAO,OAAGzpB,EAAAA,EAAAA,IAAGC,EAAA2pB,YAAc,GAAJ,IACrC7pB,EAAAA,EAAAA,IAAiF,UAAxE4Q,SAAU7P,EAAA2oB,MAAMxpB,EAAA2pB,YAAc9oB,EAAA+S,QAAUxT,QAAKC,EAAA,MAAAA,EAAA,QAAAC,IAAEN,EAAA4pB,UAAA5pB,EAAA4pB,YAAAtpB,KAAU,SAAM,EAAAwE,KACxEhF,EAAAA,EAAAA,IAA+E,UAAtE4Q,SAAU7P,EAAA2oB,MAAMxpB,EAAA2pB,YAAc9oB,EAAA+S,QAAUxT,QAAKC,EAAA,MAAAA,EAAA,QAAAC,IAAEN,EAAA6pB,QAAA7pB,EAAA6pB,UAAAvpB,KAAQ,SAAM,EAAAyE,OAExEjF,EAAAA,EAAAA,IAMM,MANNuF,GAMM,WALJvF,EAAAA,EAAAA,IAIS,U,uCAJee,EAAAipB,SAAQ/oB,GAAGonB,SAAM9nB,EAAA,MAAAA,EAAA,QAAAC,IAAEN,EAAA+pB,gBAAA/pB,EAAA+pB,kBAAAzpB,K,gBACzCR,EAAAA,EAAAA,IAA+B,UAAtB2M,MAAO,IAAI,MAAE,IACtB3M,EAAAA,EAAAA,IAA+B,UAAtB2M,MAAO,IAAI,MAAE,IACtB3M,EAAAA,EAAAA,IAA+B,UAAtB2M,MAAO,IAAI,MAAE,iBAHA5L,EAAAipB,cAAQ,GAAhBxR,QAAR,SAOVxY,EAAAA,EAAAA,IA2BM,MA3BNkqB,GA2BM,CA1BUnpB,EAAAgoB,cAAW,WAAzBjpB,EAAAA,EAAAA,IAES,U,MAFkBD,MAAM,UAAWS,QAAKC,EAAA,MAAAA,EAAA,QAAAC,IAAEN,EAAAiqB,kBAAAjqB,EAAAiqB,oBAAA3pB,KAAkB,qBAErE,gBAEAR,EAAAA,EAAAA,IAES,UAFAM,QAAKC,EAAA,MAAAA,EAAA,IAAAU,GAAEF,EAAAqpB,cAAgBrpB,EAAAqpB,cAAcvqB,MAAM,Y,QAC/CkB,EAAAqpB,aAAe,wBAA0B,yBAA7B,IAGjBpqB,EAAAA,EAAAA,IAES,UAFAM,QAAKC,EAAA,MAAAA,EAAA,IAAAU,GAAEF,EAAAspB,eAAiBtpB,EAAAspB,eAAexqB,MAAM,Y,QACjDkB,EAAAspB,cAAgB,yBAA2B,0BAA9B,IAGlBrqB,EAAAA,EAAAA,IAaM,aAZJgS,EAAAA,EAAAA,IAWcsY,EAAA,CAVX/e,KAAMrL,EAAAqqB,cACNC,QAASzpB,EAAAoM,SACTsd,QAASvqB,EAAAwqB,UACVC,SAAS,oBACTC,UAAU,eACVppB,MAAM,0B,CAEKqpB,SAAOC,EAAAA,EAAAA,KAChB,EADoBC,OAAMna,cAAQ,EAClC5Q,EAAAA,EAAAA,IAAgF,UAAvE4Q,SAAUA,EAAWtQ,QAAOyqB,EAAMlrB,MAAM,WAAU,eAAY,EAAAmrB,O,4CASjFhrB,EAAAA,EAAAA,IAwLM,OAxLDH,MAAM,aAAcorB,SAAM1qB,EAAA,MAAAA,EAAA,QAAAC,IAAEN,EAAAgrB,eAAAhrB,EAAAgrB,iBAAA1qB,K,EAC/BR,EAAAA,EAAAA,IAsLQ,eArLNA,EAAAA,EAAAA,IAwBQ,eAvBNA,EAAAA,EAAAA,IAsBK,WArBQE,EAAA8nB,gBAAqB,iBAAP,WAAzBloB,EAAAA,EAAAA,IAAqC,KAAAqrB,GAAV,WAC3BnrB,EAAAA,EAAAA,IAIK,MAJAM,QAAKC,EAAA,MAAAA,EAAA,QAAAC,IAAEN,EAAAkrB,gBAAAlrB,EAAAkrB,kBAAA5qB,IAAgB+T,MAAA,wC,wBAAyC,WAE3C,QAAZxT,EAAAsqB,UAAO,WAAnBvrB,EAAAA,EAAAA,IAAuC,OAAAwrB,GAAR,QAAC,WAChCxrB,EAAAA,EAAAA,IAAqB,OAAAyrB,GAAR,QAAC,eAEhBvrB,EAAAA,EAAAA,IAAyC,MAArCuU,MAAA,uBAA4B,QAAI,mBACpCvU,EAAAA,EAAAA,IAA2C,MAAvCuU,MAAA,uBAA4B,UAAM,IAC5BxT,EAAAgoB,aAAehoB,EAAAqpB,eAAY,WAArCtqB,EAAAA,EAAAA,IAAsD,KAAA0rB,GAAf,gBAAU,eACvCzqB,EAAAgoB,aAAehoB,EAAAqpB,eAAY,WAArCtqB,EAAAA,EAAAA,IAAsD,KAAA2rB,GAAf,gBAAU,eACvC1qB,EAAAgoB,aAAehoB,EAAAqpB,eAAY,WAArCtqB,EAAAA,EAAAA,IAAsD,KAAA4rB,GAAf,gBAAU,eACvC3qB,EAAAqpB,eAAY,WAAtBtqB,EAAAA,EAAAA,IAAuC,KAAA6rB,GAAf,gBAAU,eACxB5qB,EAAAqpB,eAAY,WAAtBtqB,EAAAA,EAAAA,IAA4C,KAAA8rB,GAApB,qBAAe,eAC7B7qB,EAAAspB,gBAAa,WAAvBvqB,EAAAA,EAAAA,IAAyD,KAAA+rB,GAAhC,iCAA2B,eAC1C9qB,EAAAspB,gBAAa,WAAvBvqB,EAAAA,EAAAA,IAAmD,KAAAgsB,GAA1B,2BAAqB,eACpC/qB,EAAAspB,gBAAa,WAAvBvqB,EAAAA,EAAAA,IAAwD,KAAAisB,GAA/B,gCAA0B,eACzChrB,EAAAspB,gBAAa,WAAvBvqB,EAAAA,EAAAA,IAAwD,KAAAksB,GAA/B,gCAA0B,8BAEnDhsB,EAAAA,EAAAA,IAA+B,MAA3BH,MAAM,UAAS,WAAO,mBAC1BG,EAAAA,EAAAA,IAA8C,MAA1CuU,MAAA,uBAA0B,eAAW,mBACzCvU,EAAAA,EAAAA,IAAe,UAAX,UAAM,SAIdA,EAAAA,EAAAA,IA0JQ,6BAxJNF,EAAAA,EAAAA,IAiJK8B,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAjJgB3B,EAAAqqB,eAAa,CAAtBziB,EAAGY,M,WAAf5I,EAAAA,EAAAA,IAiJK,MAjJgCc,IAAKkH,EAAEhD,YAAc4D,G,CAC7CxI,EAAA8nB,gBAC2C,iBAD7B,WAAzBloB,EAAAA,EAAAA,IAEK,KAAAmsB,GAAA,EADHjsB,EAAAA,EAAAA,IAAwE,MAAxEksB,GAAwE,EAAtDlsB,EAAAA,EAAAA,IAAgD,OAAhDmsB,GAAgD,EAAhCnsB,EAAAA,EAAAA,IAAyB,UAAAC,EAAAA,EAAAA,IAAnB6H,EAAEhE,YAAU,WAEtD9D,EAAAA,EAAAA,IAAyC,WAAAC,EAAAA,EAAAA,IAAlCC,EAAAohB,WAAWxZ,EAAE9D,eAAY,IAChChE,EAAAA,EAAAA,IAA6B,WAAAC,EAAAA,EAAAA,IAAtB6H,EAAEuf,cAAY,IACrBrnB,EAAAA,EAAAA,IAEK,YADHA,EAAAA,EAAAA,IAAiE,QAA3DH,OAAKuB,EAAAA,EAAAA,IAAA,CAAC,cAAsB0G,EAAE3I,W,QAAW2I,EAAE3I,QAAM,KAE/C4B,EAAAgoB,aAAehoB,EAAAqpB,eAAY,WAArCtqB,EAAAA,EAAAA,IAAqE,KAAAssB,IAAAnsB,EAAAA,EAAAA,IAA3B6H,EAAEukB,YAAc,KAAJ,oBAC5CtrB,EAAAgoB,aAAehoB,EAAAqpB,eAAY,WAArCtqB,EAAAA,EAAAA,IAA0E,KAAAwsB,IAAArsB,EAAAA,EAAAA,IAAhCC,EAAAohB,WAAWxZ,EAAEykB,aAAU,oBACvDxrB,EAAAgoB,aAAehoB,EAAAqpB,eAAY,WAArCtqB,EAAAA,EAAAA,IAAqE,KAAA0sB,IAAAvsB,EAAAA,EAAAA,IAA3B6H,EAAE2kB,YAAc,KAAJ,oBAC5C1rB,EAAAqpB,eAAY,WAAtBtqB,EAAAA,EAAAA,IAA2D,KAAA4sB,IAAAzsB,EAAAA,EAAAA,IAAhCC,EAAAohB,WAAWxZ,EAAE6kB,aAAU,oBACxC5rB,EAAAqpB,eAAY,WAAtBtqB,EAAAA,EAAAA,IAAiE,KAAA8sB,IAAA3sB,EAAAA,EAAAA,IAAtC6H,EAAE+kB,cAAgB,MAAQ,MAAX,oBAChC9rB,EAAAspB,gBAAa,WAAvBvqB,EAAAA,EAAAA,IAEK,KAAAgtB,GAAA,EADH9sB,EAAAA,EAAAA,IAA6F,QAAtFuU,OAAKwY,EAAAA,EAAAA,IAAA,CAAAjQ,MAAUhV,EAAEklB,OAAS,UAAY,c,QAAellB,EAAEklB,OAAS,MAAQ,MAAX,sBAE5DjsB,EAAAspB,gBAAa,WAAvBvqB,EAAAA,EAAAA,IAEK,KAAAmtB,GAAA,EADHjtB,EAAAA,EAAAA,IAA2G,QAApGuU,OAAKwY,EAAAA,EAAAA,IAAA,CAAAjQ,MAAUhV,EAAEolB,cAAgB,UAAY,c,QAAeplB,EAAEolB,cAAgB,MAAQ,MAAX,sBAE1EnsB,EAAAspB,gBAAa,WAAvBvqB,EAAAA,EAAAA,IAEK,KAAAqtB,GAAA,EADHntB,EAAAA,EAAAA,IAA6H,QAAtHuU,OAAKwY,EAAAA,EAAAA,IAAA,CAAAjQ,MAAWhV,EAAEslB,SAAWtlB,EAAEulB,QAAO,wB,QAAgCvlB,EAAEslB,SAAWtlB,EAAEulB,QAAO,kCAE3FtsB,EAAAspB,gBAAa,WAAvBvqB,EAAAA,EAAAA,IAEK,KAAAwtB,GAAA,EADHttB,EAAAA,EAAAA,IAAqJ,QAA9IuU,OAAKwY,EAAAA,EAAAA,IAAA,CAAAjQ,MAAWhV,EAAEylB,oBAAsBzlB,EAAE0lB,SAAQ,wB,QAAgC1lB,EAAEylB,oBAAsBzlB,EAAE0lB,SAAQ,mCAI7HxtB,EAAAA,EAAAA,IAsFK,MAtFDH,MAAM,eAAgBS,QAAKC,EAAA,MAAAA,EAAA,KAAA8P,EAAAA,EAAAA,KAAN,QAAW,Y,EAElCrQ,EAAAA,EAAAA,IAGM,MAHNytB,GAGM,CAFQvtB,EAAAwtB,aAAa5lB,KAAC,WAA1BhI,EAAAA,EAAAA,IAA4D,OAA5D6tB,GAA6C,eAAQ,WACrD7tB,EAAAA,EAAAA,IAA2C,OAA3C8tB,GAAgC,YAGlC5tB,EAAAA,EAAAA,IA8EM,OA9EDH,MAAM,cAAeS,QAAKC,EAAA,MAAAA,EAAA,KAAA8P,EAAAA,EAAAA,KAAN,QAAW,Y,EAClCrQ,EAAAA,EAAAA,IAKS,UAJPH,MAAM,WACLS,SAAK+P,EAAAA,EAAAA,KAAApP,GAAOf,EAAA2tB,iBAAiB/lB,EAAEhD,aAAU,WAC3C,cAED,EAAAgpB,IAKQ/sB,EAAAgtB,mBAAqBjmB,EAAEhD,aAAU,WAFzChF,EAAAA,EAAAA,IAoEM,O,MAnEJD,MAAM,YAELS,QAAKC,EAAA,MAAAA,EAAA,KAAA8P,EAAAA,EAAAA,KAAN,QAAW,Y,CAGAtP,EAAAitB,mBAAqBlmB,EAAEhD,aAAU,WAA5ChF,EAAAA,EAAAA,IAA0E,MAA1EmuB,GAA4D,aACM,KAAjDltB,EAAAmtB,iBAAiBpmB,EAAEhD,aAAe,IAAIP,SAAM,WAA7DzE,EAAAA,EAAAA,IAEM,MAFNquB,GAAmF,oBAEnF,WAGAruB,EAAAA,EAAAA,IA8BM,MA9BNsuB,GA8BM,gBA5BJtuB,EAAAA,EAAAA,IA0BM8B,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IA1BWd,EAAAmtB,iBAAiBpmB,EAAEhD,aAAxByB,K,WAAZzG,EAAAA,EAAAA,IA0BM,OA1B4Cc,IAAK2F,EAAE8nB,W,EACvDruB,EAAAA,EAAAA,IAwBM,MAxBNsuB,GAwBM,EAvBJtuB,EAAAA,EAAAA,IAA+G,eAAAC,EAAAA,EAAAA,IAApGsG,EAAE/E,QAAU+E,EAAEgoB,UAAUhqB,OAAS,GAAKgC,EAAEgoB,UAAUC,UAAU,EAAG,GAAK,MAAQjoB,EAAEgoB,YAAS,IAClGvuB,EAAAA,EAAAA,IAGM,MAHNyuB,IAGMxuB,EAAAA,EAAAA,KAFAsG,EAAEmoB,UAAS,MAAO7gB,QAAQ,IAAK,UACnC5N,EAAAA,EAAAA,IAAGC,EAAAohB,WAAW/a,EAAEooB,cAAW,IAG7B3uB,EAAAA,EAAAA,IAeM,MAfN4uB,GAeM,EAdJ5uB,EAAAA,EAAAA,IAKI,KAJD4T,KAAI,GAAK7S,EAAA0E,mBAAmBc,EAAE8nB,qBAC/BQ,OAAO,SAASC,IAAI,WAAWjvB,MAAM,OACtC,kBAED,EAAAkvB,KACA/uB,EAAAA,EAAAA,IAOI,KANFH,MAAM,aACLS,QAAKW,GAAEf,EAAA8uB,aAAalnB,EAAEhD,WAAYyB,EAAE8nB,WACpCzd,SAAU7P,EAAAkuB,mBAAqB1oB,EAAE8nB,UAClC7sB,MAAM,W,QAEHT,EAAAkuB,mBAAqB1oB,EAAE8nB,UAAY,YAAc,UAAjB,EAAAa,a,WAS/B,WAAdpvB,EAAAA,EAAAA,IAAgB,KAAAqvB,KAGiBjvB,EAAAwtB,aAAa5lB,IAkBJ,iBAlBK,WAA/ChI,EAAAA,EAAAA,IAoBM,MApBNsvB,GAoBM,WAnBJpvB,EAAAA,EAAAA,IAKE,SAJAH,MAAM,cACNqB,KAAK,OACLC,YAAY,iB,yBACHJ,EAAAsuB,qBAAqBvnB,EAAEhD,YAAU7D,G,kBAAjCF,EAAAsuB,qBAAqBvnB,EAAEhD,gBAElC9E,EAAAA,EAAAA,IAKE,SAJAH,MAAM,aACNqB,KAAK,OACLouB,OAAO,kBACNjH,SAAMpnB,GAAEf,EAAAqvB,WAAWznB,EAAEhD,WAAY7D,I,aAEpCjB,EAAAA,EAAAA,IAMS,UALPH,MAAM,aACLS,QAAKW,GAAEf,EAAAsvB,aAAa1nB,GACpB8I,UAAW7P,EAAA0uB,oBAAoB3nB,EAAEhD,aAAe/D,EAAA2uB,qBAAuB5nB,EAAEhD,a,QAEvE/D,EAAA2uB,qBAAuB5nB,EAAEhD,WAAa,aAAe,cAAlB,EAAA6qB,WAAA,oBAOhD3vB,EAAAA,EAAAA,IAOK,YANHA,EAAAA,EAAAA,IAEI,KAFAH,OAAKuB,EAAAA,EAAAA,IAAA,cAA6C,OAA5B0G,EAAEkhB,0B,QACvBlhB,EAAEkhB,uBAAyB,cAAJ,IAE5BhpB,EAAAA,EAAAA,IAEI,KAFAH,OAAKuB,EAAAA,EAAAA,IAAA,cAAuC,OAAtB0G,EAAEohB,oB,QACvBphB,EAAEohB,iBAAmB,cAAJ,MAIxBlpB,EAAAA,EAAAA,IAmBK,KAnBL4vB,GAmBK,EAlBH5vB,EAAAA,EAAAA,IAA6C,UAApCM,QAAKW,GAAEf,EAAA2vB,YAAY/nB,IAAI,OAAI,EAAAgoB,KACpC9vB,EAAAA,EAAAA,IAgBM,OAhBDH,MAAM,cAAeS,QAAKC,EAAA,MAAAA,EAAA,KAAA8P,EAAAA,EAAAA,KAAN,QAAW,Y,EAClCrQ,EAAAA,EAAAA,IAAgF,UAAxEH,MAAM,WAAYS,QAAKW,GAAEf,EAAA6vB,cAAcjoB,EAAEhD,aAAa,YAAS,EAAAkrB,IAE1CjvB,EAAAkvB,gBAAkBnoB,EAAEhD,aAAU,WAA3DhF,EAAAA,EAAAA,IAYM,MAZNowB,GAYM,EAVJlwB,EAAAA,EAAAA,IAAkD,UAAzCM,QAAKW,GAAEf,EAAAiwB,SAASroB,IAAI,eAAY,EAAAsoB,KACzCpwB,EAAAA,EAAAA,IAOS,UANNM,QAAKW,GAAEuT,EAAAtE,QAAQvQ,KAAK,C,wCAA6FmI,EAAEhD,WAAUC,YAAe+C,EAAE/C,gBAIhJ,yBAED,EAAAsrB,KACArwB,EAAAA,EAAAA,IAA+E,UAAvEH,MAAM,SAAUS,QAAKW,GAAEf,EAAAowB,cAAcxoB,IAAI,wBAAqB,EAAAyoB,QAAA,wB,MAMxC,IAA5BrwB,EAAAswB,iBAAiBjsB,SAAM,WAAjCzE,EAAAA,EAAAA,IAIK,KAJL2wB,GAIKlwB,EAAA,MAAAA,EAAA,MAHHP,EAAAA,EAAAA,IAEK,MAFDyE,QAAQ,KAAG,EACbzE,EAAAA,EAAAA,IAAiD,OAA5CH,MAAM,eAAc,wBAAkB,iCAOrDG,EAAAA,EAAAA,IAGM,OAHDH,MAAM,WAAWkY,IAAI,UAAWkT,SAAM1qB,EAAA,MAAAA,EAAA,QAAAC,IAAEN,EAAAwwB,WAAAxwB,EAAAwwB,aAAAlwB,K,EAE3CR,EAAAA,EAAAA,IAAsE,OAAhEuU,OAAKwY,EAAAA,EAAAA,IAAA,CAAA4D,MAAW5vB,EAAA6vB,iBAAmB,KAAH5Y,OAAA,S,0CC9ZrCnY,MAAM,iB,UAIcA,MAAM,S,IAEpBA,MAAM,c,IAINA,MAAM,c,IAIPA,MAAM,e,IAGTA,MAAM,Q,iBAONA,MAAM,kB,+EA9BfgxB,EAAAA,EAAAA,IAEOrc,EAAAsc,OAAA,WAFe/F,KAAM7qB,EAAA6qB,KAAOna,UAAW1Q,EAAA6wB,aAA9C,IAEO,EADL/wB,EAAAA,EAAAA,IAAmE,UAA1D4Q,UAAW1Q,EAAA6wB,WAAazwB,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAEN,EAAA6qB,MAAA7qB,EAAA6qB,QAAAvqB,KAAM,eAAY,EAAAT,OAAA,GAIjDgB,EAAAiwB,OAAI,WAAflxB,EAAAA,EAAAA,IAmCM,O,MAnCWD,MAAM,kBAAmBS,QAAKC,EAAA,KAAAA,EAAA,IAAA8P,EAAAA,EAAAA,KAAA,IAAA7P,IAAON,EAAA+wB,OAAA/wB,EAAA+wB,SAAAzwB,IAAK,Y,EACzDR,EAAAA,EAAAA,IAiCM,MAjCNK,GAiCM,EAhCJL,EAAAA,EAAAA,IAAwC,WAAAC,EAAAA,EAAAA,IAAjCixB,EAAA1vB,OAAS,kBAAJ,GAGDtB,EAAAixB,aAAU,WAArBrxB,EAAAA,EAAAA,IAWM,MAXNgB,GAWM,gBAVJd,EAAAA,EAAAA,IAA4B,cAApB,eAAW,KACnBA,EAAAA,EAAAA,IAGQ,QAHRyB,GAGQ,WAFNzB,EAAAA,EAAAA,IAA8D,SAAvDkB,KAAK,QAAQyL,MAAM,Y,qCAAqB5L,EAAAqwB,YAAWnwB,I,iBAAXF,EAAAqwB,eAAW,qBAAI,yCAGhEpxB,EAAAA,EAAAA,IAGQ,QAHRwM,GAGQ,WAFNxM,EAAAA,EAAAA,IAAwD,SAAjDkB,KAAK,QAAQyL,MAAM,M,qCAAe5L,EAAAqwB,YAAWnwB,I,iBAAXF,EAAAqwB,eAAW,uBAAI,kBAG1DpxB,EAAAA,EAAAA,IAAwE,OAAxEgC,GAAwE,gBAA9ChC,EAAAA,EAAAA,IAAY,SAAT,SAAK,aAAI,KAACC,EAAAA,EAAAA,IAAGC,EAAAmxB,cAAc9sB,QAAM,yBAGhEvE,EAAAA,EAAAA,IAKM,MALNiC,GAKM,gBAJJnC,EAAAA,EAAAA,IAGQ8B,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAHkB3B,EAAAoxB,mBAAiB,CAA5BvN,EAAKrb,M,WAApB5I,EAAAA,EAAAA,IAGQ,SAHsCc,IAAKmjB,EAAInjB,KAAO8H,EAAG7I,MAAM,Y,WACrEG,EAAAA,EAAAA,IAA6D,SAAtDkB,KAAK,W,qCAAoBH,EAAAwwB,SAAQtwB,GAAG0L,MAAOoX,EAAInjB,K,kBAAtBG,EAAAwwB,aAAQ,QAAqB,KAC7DtxB,EAAAA,EAAAA,IAAG8jB,EAAIhI,OAAK,Q,SAIhB/b,EAAAA,EAAAA,IAQM,MARNqC,GAQM,EAPJrC,EAAAA,EAAAA,IAA8C,UAArCM,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAEN,EAAAsxB,WAAAtxB,EAAAsxB,aAAAhxB,KAAW,eAC3BR,EAAAA,EAAAA,IAAwC,UAA/BM,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAEN,EAAAuxB,UAAAvxB,EAAAuxB,YAAAjxB,KAAU,SAAK,eAC/BR,EAAAA,EAAAA,IAA0B,OAArBH,MAAM,UAAQ,WACnBG,EAAAA,EAAAA,IAAsC,UAA7BM,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAEN,EAAA+wB,OAAA/wB,EAAA+wB,SAAAzwB,KAAO,WACvBR,EAAAA,EAAAA,IAES,UAFA4Q,UAAW1Q,EAAAmxB,cAAc9sB,SAAWxD,EAAAwwB,SAAShtB,OAASjE,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAEN,EAAAwxB,WAAAxxB,EAAAwxB,aAAAlxB,IAAW+T,MAAA,8CAAiD,WAElI,EAAAjS,YAAA,mB,gBAUN,IACE1C,KAAM,cACN+xB,MAAO,CACLpmB,KAAM,CAAErK,KAAM+I,MAAO2nB,QAASA,IAAM,IACpCpH,QAAS,CAAEtpB,KAAM+I,MAAO2nB,QAASA,IAAM,MACvCnH,QAAS,CAAEvpB,KAAM,CAAC+I,MAAO6Q,QAASrK,UAAU,GAC5Cka,SAAU,CAAEzpB,KAAM8J,OAAQ4mB,QAAS,IACnChH,UAAW,CAAE1pB,KAAM8J,OAAQ4mB,QAAS,UACpCpwB,MAAO,CAAEN,KAAM8J,OAAQ4mB,QAAS,IAChCC,oBAAqB,CAAE3wB,KAAM+I,MAAO2nB,QAAS,OAE/CpsB,IAAAA,GACE,MAAO,CACLwrB,MAAM,EACNO,SAAU,GACVH,YAAa,YAEjB,EACAlrB,SAAU,CACRorB,iBAAAA,GAEE,OAAIrnB,MAAMwQ,QAAQtU,KAAKskB,SAAiBtkB,KAAKskB,QAC3CtkB,KAAKskB,SAAmC,kBAAjBtkB,KAAKskB,QAA6B3P,OAAOtS,OAAOrC,KAAKskB,UAChF7a,QAAQC,KAAK,4CAA6C1J,KAAKskB,SACxD,GACP,EACA0G,UAAAA,GACI,OAAOlnB,MAAMwQ,QAAQtU,KAAKqkB,UAAYrkB,KAAKqkB,QAAQjmB,OAAS,CAChE,EACAwsB,UAAAA,GACI,OAAQ5qB,KAAKoF,MAAMhH,QAAU,GAAK,IAAM4B,KAAKqkB,SAASjmB,QAAU,GAAK,CACzE,EACA8sB,aAAAA,GACI,MAA6B,QAArBlrB,KAAKirB,aAAyBjrB,KAAKgrB,WAAchrB,KAAKqkB,QAAWrkB,KAAKoF,MAAQ,EAC1F,GAEF4G,MAAO,CACPmf,iBAAAA,CAAkBQ,GACZA,GAASvtB,SAAW4B,KAAKorB,SAAShtB,SACpC4B,KAAKorB,SAAWO,EAAQxrB,KAAI2U,GAAKA,EAAEra,MAEvC,GAEA+H,OAAAA,GACOxC,KAAKmrB,kBAAkB/sB,QAC1BqL,QAAQC,KAAK,6DAEf1J,KAAKorB,SAAYtnB,MAAMwQ,QAAQtU,KAAK0rB,sBAAwB1rB,KAAK0rB,oBAAoBttB,OACjF,IAAI4B,KAAK0rB,qBACT1rB,KAAKmrB,kBAAkBhrB,KAAI2U,GAAKA,EAAEra,KACxC,EACAkI,QAAS,CACPiiB,IAAAA,GAAS5kB,KAAK6qB,MAAO,CAAM,EAC3BC,KAAAA,GAAU9qB,KAAK6qB,MAAO,CAAO,EAC7BQ,SAAAA,GAAcrrB,KAAKorB,SAAWprB,KAAKmrB,kBAAkBhrB,KAAI2U,GAAKA,EAAEra,KAAM,EACtE6wB,QAAAA,GAAatrB,KAAKorB,SAAW,EAAI,EAEjCQ,QAAAA,GACE,GAAoB,qBAATC,GAAsB,OAAOA,GACxC,GAAsB,qBAAX1yB,QAA0BA,OAAO0yB,KAAM,OAAO1yB,OAAO0yB,KAChE,MAAM,IAAI5c,MAAM,4DAClB,EAEA6c,SAAAA,CAAUlO,EAAKrgB,GACb,MAAMwuB,EAAMnO,EAAIoO,OAASpO,EAAIoO,OAAOzuB,GAAOA,IAAMqgB,EAAInjB,KACrD,OAAOmjB,EAAIhC,OAASgC,EAAIhC,OAAOmQ,EAAKxuB,GAAQwuB,GAAO,EACrD,EAEAE,SAAAA,CAAUC,EAAIC,EAAcC,GAC1B,MAAMC,EAASF,EAAahsB,KAAI2U,IAC9B,MAAMwX,GAAaxX,EAAEc,OAAS,IAAIwN,WAAWhlB,OACvCmuB,EAAUH,EAAa9mB,QAAO,CAACknB,EAAGpsB,KACtC,MAAM0B,EAAI1B,EAAE0U,EAAEc,OACR6W,GAAY,MAAL3qB,EAAY,GAAK+C,OAAO/C,IAAI1D,OACzC,OAAOoD,KAAKsJ,IAAI0hB,EAAGC,KAClB,GACH,MAAO,CAAEC,IAAKlrB,KAAKqJ,IAAIrJ,KAAKsJ,IAAI,GAAItJ,KAAKsJ,IAAIwhB,EAAWC,GAAW,GAAI,QAEzEL,EAAG,SAAWG,CAChB,EACAd,SAAAA,GACI,IACA,MAAMM,EAAO7rB,KAAK4rB,WAEZO,EAAensB,KAAKmrB,kBAAkB5qB,QAAOuU,GAAK9U,KAAKorB,SAASjmB,SAAS2P,EAAEra,OACjF,IAAK0xB,EAAa/tB,OAAQ,OAE1B,MAAMiB,EAAOW,KAAKkrB,cAAc/qB,KAAI5C,IAChC,MAAM6E,EAAM,CAAC,EACb,IAAK,MAAMwb,KAAOuO,EAAc/pB,EAAIwb,EAAIhI,OAAS5V,KAAK8rB,UAAUlO,EAAKrgB,GACrE,OAAO6E,KAGL8pB,EAAKL,EAAKc,MAAMC,cAAcvtB,EAAM,CAAEwtB,YAAY,IACxD7sB,KAAKisB,UAAUC,EAAIC,EAAc9sB,GAEjC,MAAMytB,EAAKjB,EAAKc,MAAMI,WACtBlB,EAAKc,MAAMK,kBAAkBF,EAAIZ,EAAIlsB,KAAKykB,WAAa,UAEvD,MAAMwI,EAA8B,QAArBjtB,KAAKirB,YAAwB,MAAQ,YAC9CxxB,EAAOuG,KAAKwkB,UAAY,UAAUyI,MAAU,IAAI/qB,MAAOsb,cAAclgB,MAAM,EAAE,WACnFuuB,EAAKqB,UAAUJ,EAAIrzB,GAEnBuG,KAAK8qB,OACL,CAAE,MAAOlhB,GACTH,QAAQI,MAAMD,GACdtQ,MAAM,4CACN,CACJ,ICtJJ,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,UF2aA,IACEmP,WAAY,CAAE0kB,YAAW,GAAEjQ,cAAaA,GAAAA,GACxCsO,MAAO,CAAEpmB,KAAM,CAAErK,KAAM+I,MAAO2nB,QAASA,IAAM,KAC7CpsB,IAAAA,GACE,IAAI2J,EAAO,KACX,IAAMA,EAAOd,KAAKC,MAAMlP,aAAa6J,QAAQ,eAAekG,MAAQ,IAAM,CAAE,MAAoB,CAChG,MAAO,CACL4Z,YAAsB,UAAT5Z,EACbua,KAAM,EACNM,SAAU,GACVqB,QAAS,OACTvX,SAAS,EACT8c,iBAAkB,EAClB2C,UAAW,KAEX9tB,QAASC,EAAAA,EAAIC,aAEbwH,SAAU,GAEVob,eAAgB,GAChBU,gBAAiB,GAEjBG,OAAQ,GACRC,WAAY,GACZG,WAAY,GACZC,aAAc,GACdW,cAAc,EACdC,eAAe,EACf4F,cAAe,KACflC,iBAAkB,KAElBG,iBAAkB,CAAC,EACnBF,iBAAkB,KAClBqB,qBAAsB,CAAC,EACvBI,oBAAqB,CAAC,EACtBC,mBAAoB,KACpBT,iBAAkB,KAClBuE,UAAW,CAAC,EAGZvL,cAAc,EACdS,UAAU,EACVN,WAAY,CACVrjB,YAAa,GACbf,cAAc,IAAIqE,MAAOsb,cAAclgB,MAAM,EAAE,IAC/C4jB,aAAc,SACdloB,OAAQ,QACRsoB,kBAAkB,EAClBe,UAAU,EACViL,aAAa,GAEfC,eAAgB,CAAC,EAGjB/K,YAAY,EACZQ,SAAS,EACTL,SAAU,CACRhkB,WAAY,KACZC,YAAa,GACbikB,sBAAuB,KACvBE,gBAAiB,KACjBllB,aAAc,GACdqjB,aAAc,SACdloB,OAAQ,SAIVw0B,aAAa,EAEjB,EACAztB,SAAU,CACR8hB,cAAAA,GACI,QAAS7hB,KAAK4P,OAAOiB,MAAMzH,KAC/B,EACAsa,UAAAA,GACE,MAAM3E,EAAQvd,KAAKisB,KAAKztB,KAAKqqB,iBAAiBjsB,OAAS4B,KAAK6jB,WAAa,EACzE,OAAO9E,CACT,EACAqF,aAAAA,GACE,MAAMsJ,GAAS1tB,KAAKujB,KAAO,GAAKvjB,KAAK6jB,SAGrC,OAAO7jB,KAAKmG,eAAe7I,MAAMowB,EAAOA,EAAQ1tB,KAAK6jB,SACvD,EACA1d,cAAAA,GACE,MAAMwnB,EAAuB,QAAjB3tB,KAAKklB,QAAoB,GAAK,EAC1C,MAAO,IAAIllB,KAAKqqB,kBAAkB5pB,MAAK,CAACC,EAAGC,KACzC,MAAMyH,EAAKwlB,GAAOltB,EAAE7C,cACdgwB,EAAKD,GAAOjtB,EAAE9C,cACpB,OAAI0W,MAAMnM,IAAOmM,MAAMsZ,GAAY,EAC/BtZ,MAAMnM,GAAY,EAClBmM,MAAMsZ,IAAa,EACnBzlB,IAAOylB,EAAW,EACfzlB,EAAKylB,EAAKF,GAAOA,IAE5B,EACAxK,cAAAA,GACE,MAAMtiB,EAAMiD,MAAMwQ,QAAQtU,KAAKgH,UAAYhH,KAAKgH,SAAW,GACrDrL,EAAQ,IAAIuE,IAChBW,EACGV,KAAIwB,IAEH,MAAMgD,EAAIhD,GAAG9D,aAAe,IAAIqE,KAAKP,EAAE9D,cAAgB,KACvD,OAAO8G,IAAM4P,MAAM5P,GAAKA,EAAEC,cAAgB,QAE3CrE,QAAO3E,GAAW,OAANA,KAEjB,OAAOkI,MAAMC,KAAKpI,GAAO8E,MAAK,CAACC,EAAGC,IAAMA,EAAID,GAC9C,EACA2pB,gBAAAA,GACE,MAAMxvB,EAAImF,KAAKijB,OAAOhe,cACtB,OAAOjF,KAAKgH,SAASzG,QAAOoB,IAC1B,MAAMmsB,GACHjzB,GACA8G,EAAEhE,YAAcgE,EAAEhE,WAAWsH,cAAcE,SAAStK,IACpD8G,EAAE/C,aAAe+C,EAAE/C,YAAYqG,cAAcE,SAAStK,GAEnDkzB,GACH/tB,KAAKkjB,YACN,IAAIhhB,KAAKP,EAAE9D,cAAc+G,cAAcwe,aAAepjB,KAAKkjB,WAEvD8K,GACHhuB,KAAKsjB,cAAgB3hB,EAAE3I,SAAWgH,KAAKsjB,aAEpC2K,GACHjuB,KAAKqjB,YAAc1hB,EAAEuf,eAAiBlhB,KAAKqjB,WAE9C,OAAOyK,GAAeC,GAAaE,GAAaD,IAEpD,EAQA1L,kBAAAA,GACE,QAAStiB,KAAKutB,eAAevtB,KAAKiiB,WAAWrjB,YAC/C,EACA2lB,SAAAA,GACE,MAAO,CAEL,CAAE9pB,IAAK,aAAcmb,MAAO,cAC5B,CAAEnb,IAAK,cAAemb,MAAO,eAC7B,CAAEnb,IAAK,eAAgBmb,MAAO,gBAC9B,CAAEnb,IAAK,eAAgBmb,MAAO,gBAC9B,CAAEnb,IAAK,SAAUmb,MAAO,UACxB,CAAEnb,IAAK,aAAcmb,MAAO,cAC5B,CAAEnb,IAAK,aAAcmb,MAAO,cAC5B,CAAEnb,IAAK,aAAcmb,MAAO,cAC5B,CAAEnb,IAAK,aAAcmb,MAAO,cAC5B,CAAEnb,IAAK,wBAAyBmb,MAAO,yBACvC,CAAEnb,IAAK,kBAAmBmb,MAAO,mBAErC,GAGFpT,OAAAA,GACExC,KAAKkuB,gBACLluB,KAAKmuB,cACLh1B,OAAO2a,iBAAiB,QAAS9T,KAAKouB,YACtCpuB,KAAKquB,kBAEAruB,KAAKsuB,sBACRtuB,KAAKsuB,oBAAuB1kB,IACrBA,EAAE8e,OAAO6F,QAAQ,kBACpBvuB,KAAK4nB,iBAAmB,OAG5B4G,SAAS1a,iBAAiB,QAAS9T,KAAKsuB,sBAE1CtuB,KAAK2e,WAAU,IAAM3e,KAAKyuB,gBAE1Bt1B,OAAO2a,iBAAiB,SAAU9T,KAAKyuB,aACvCzuB,KAAKotB,UAAY,IAAIsB,gBAAe,IAAM1uB,KAAKyuB,gBAC/C,MAAME,EAAO3uB,KAAK4uB,IAAIC,cAAc,eAChCF,GAAM3uB,KAAKotB,UAAU0B,QAAQH,EACnC,EACA3iB,MAAO,CACL,uBAAyBhM,KAAKquB,iBAAmB,EAEjDU,iBAAkB,CAChBC,WAAW,EACXC,OAAAA,CAAQntB,IACFA,GAAO9B,KAAKiiB,WAAWrjB,cAAeoB,KAAK8hB,eAC7C9hB,KAAKiiB,WAAWrjB,YAAckD,EAElC,GAEFmhB,MAAAA,GAAWjjB,KAAKujB,KAAO,CAAG,EAC1BL,UAAAA,GAAeljB,KAAKujB,KAAO,CAAG,EAC9BD,YAAAA,GAAiBtjB,KAAKujB,KAAO,CAAG,EAChCvc,SAAU,CACRkoB,MAAM,EACND,OAAAA,GAEMjvB,KAAKujB,KAAOvjB,KAAK0jB,aAAY1jB,KAAKujB,KAAOvjB,KAAK0jB,WACpD,GAEFA,UAAAA,CAAW5e,GACL9E,KAAKujB,KAAOze,IAAG9E,KAAKujB,KAAOze,GAC3B9E,KAAKujB,KAAO,IAAGvjB,KAAKujB,KAAO,EACjC,EACA,0BAA0BzhB,GAExB9B,KAAKiiB,WAAWI,SAAkB,aAANvgB,CAC9B,EACA,sBAAsBA,GAEhBA,IAAG9B,KAAKiiB,WAAWX,kBAAmB,EAC5C,GAEFtN,aAAAA,GACE7a,OAAO+a,oBAAoB,QAASlU,KAAKouB,YACzCj1B,OAAO+a,oBAAoB,SAAUlU,KAAKyuB,aACtCzuB,KAAKotB,WAAWptB,KAAKotB,UAAU+B,YACrC,EACAxsB,QAAS,CAEP6gB,OAAAA,GAAYxjB,KAAKujB,KAAO,CAAG,EAC3BE,QAAAA,GAAiBzjB,KAAKujB,KAAO,GAAGvjB,KAAKujB,MAAQ,EAC7CI,QAAAA,GAAiB3jB,KAAKujB,KAAOvjB,KAAK0jB,YAAY1jB,KAAKujB,MAAQ,EAC3DK,MAAAA,GAAW5jB,KAAKujB,KAAOvjB,KAAK0jB,UAAY,EACxCI,cAAAA,GAEE9jB,KAAKujB,KAAO,CACd,EACA0B,cAAAA,GACEjlB,KAAKklB,QAA2B,QAAjBllB,KAAKklB,QAAoB,OAAS,KACnD,EAOA/J,WAAU,GAEVsT,WAAAA,GACE,MAAME,EAAO3uB,KAAK4uB,IAAIC,cAAc,eAC/BF,IACL3uB,KAAKyqB,iBAAmBkE,EAAKS,YACzBpvB,KAAKsV,MAAM+Z,UACbrvB,KAAKsV,MAAM+Z,QAAQC,WAAaX,EAAKW,YAEzC,EAEAvK,aAAAA,CAAcnb,GACR5J,KAAKsV,MAAM+Z,UACbrvB,KAAKsV,MAAM+Z,QAAQC,WAAa1lB,EAAE8e,OAAO4G,WAE7C,EAEA/E,SAAAA,CAAU3gB,GACR,MAAM+kB,EAAO3uB,KAAK4uB,IAAIC,cAAc,eAChCF,IAAMA,EAAKW,WAAa1lB,EAAE8e,OAAO4G,WACvC,EAEA,iBAAMnB,GAGJ,IACE,MAAMp1B,QAAYiK,MAAM,GAAGhD,KAAKV,2BAA4B,CAC1DsD,QAAS,CAAEC,cAAe,UAAU5J,aAAa6J,QAAQ,kBAErDuO,QAAgBtY,EAAImK,OAC1BlD,KAAKoiB,eAAiBte,MAAMwQ,QAAQjD,GAAWA,EAAU,EAC3D,CAAE,MAAOzH,GACPH,QAAQI,MAAMD,GACd5J,KAAKoiB,eAAiB,EACxB,CACA,IACE,MAAMrpB,QAAYiK,MAAM,GAAGhD,KAAKV,4BAA6B,CAC3DsD,QAAS,CAAEC,cAAe,UAAU5J,aAAa6J,QAAQ,kBAErDuO,QAAgBtY,EAAImK,OAC1BlD,KAAK8iB,gBAAkBhf,MAAMwQ,QAAQjD,GAAWA,EAAU,EAC5D,CAAE,MAAOzH,GACPH,QAAQI,MAAMD,GACd5J,KAAK8iB,gBAAkB,EACzB,CACF,EACA,mBAAMoL,GAGJ,IACE,MAAMn1B,QAAYiK,MAAM,GAAGhD,KAAKV,yBAA0B,CACxDsD,QAAS,CAAEC,cAAe,UAAU5J,aAAa6J,QAAQ,kBAErDuO,QAAgBtY,EAAImK,OAC1B,IAAIpK,EAAAA,EAAAA,GAAmBC,GAAM,OAG7BiH,KAAKgH,SAAWlD,MAAMwQ,QAAQjD,GAC1BA,EACCvN,MAAMwQ,QAAQjD,GAASrK,UAAYqK,EAAQrK,SAAW,GAE3DhH,KAAKgH,SAAS1E,SAAQX,IACpBA,EAAE+kB,cACC/kB,EAAEylB,oBACFzlB,EAAE0lB,UACF1lB,EAAEolB,eACFplB,EAAEklB,QACFllB,EAAEslB,SACFtlB,EAAEulB,WAGPlnB,KAAKuvB,8BAA8BvvB,KAAKgH,SAAS7G,KAAIwB,GAAKA,EAAEhD,cAC5DqB,KAAKutB,eAAiBvtB,KAAKgH,SAAS1B,QAAO,CAACC,EAAK5D,KAC/C4D,EAAI5D,EAAE/C,cAAe,EACd2G,IACN,CAAC,EACN,CAAE,MAAOqE,GACPH,QAAQI,MAAMD,GACd5J,KAAKgH,SAAW,EAClB,CACF,EACAqnB,eAAAA,GACE,MAAMxzB,EAAImF,KAAK4P,OAAOiB,MAAMzH,MAC5B,IAAKvO,EAAG,OAGR,MAAMsJ,EAAQqrB,mBAAmB30B,GAEjCmF,KAAKijB,OAAS9e,CAOhB,EACAylB,aAAAA,CAAcvhB,GACZrI,KAAK8pB,cAAgB9pB,KAAK8pB,gBAAkBzhB,EAAK,KAAOA,CAC1D,EACA+lB,UAAAA,GACEpuB,KAAK8pB,cAAgB,IACvB,EAEA9F,gBAAAA,GAEE,MAAMyL,EAAYzvB,KAAK4P,QAAQiB,OAAOzH,OAAS,GAC/CpJ,KAAKiiB,WAAa,CAChBrjB,YAAa6wB,GAAczvB,KAAKoiB,eAAe,IAAIxjB,aAAe,GAClEf,cAAc,IAAIqE,MAAOsb,cAAclgB,MAAM,EAAE,IAC/C4jB,aAAc,SACdloB,OAAQ,QACRsoB,kBAAkB,EAClBe,UAAU,EACViL,aAActtB,KAAKiiB,WAAWI,UAG3BriB,KAAKsiB,qBAAoBtiB,KAAKiiB,WAAWX,kBAAmB,GACjEthB,KAAK8hB,cAAe,CAEtB,EACAC,gBAAAA,GACE/hB,KAAK8hB,cAAe,CACtB,EACAK,oBAAAA,GAEOniB,KAAKsiB,qBAAoBtiB,KAAKiiB,WAAWX,kBAAmB,EACnE,EACA,kBAAMU,GACJ,GAAKhiB,KAAKiiB,WAAWrjB,YAIrB,GAAKoB,KAAK4iB,YAAV,CAII5iB,KAAKiiB,WAAWI,WAClBriB,KAAKiiB,WAAWqL,aAAc,EAC9BttB,KAAKiiB,WAAWX,kBAAmB,GAIrCthB,KAAKuiB,UAAW,EAEhB,IACE,MAAMmN,EACH1vB,KAAKiiB,WAAWX,kBAAoBthB,KAAKsiB,mBACtC,GAAGtiB,KAAKV,kCACR,GAAGU,KAAKV,yBAERvG,QAAYiK,MAAM0sB,EAAU,CAChC7iB,OAAQ,OACRjK,QAAS,CACPC,cAAe,UAAU5J,aAAa6J,QAAQ,eAC9C,eAAgB,oBAElBqJ,KAAMjE,KAAK4E,UAAU,CACnBlO,YAAaoB,KAAKiiB,WAAWrjB,YAC7Bf,aAAcmC,KAAKiiB,WAAWpkB,aAC9BqjB,aAAclhB,KAAKiiB,WAAWf,aAC9BloB,OAAQgH,KAAKiiB,WAAWjpB,OACxBktB,WAAYhe,KAAKC,MAAMlP,aAAa6J,QAAQ,cAAcqB,MAC1DmpB,aAActtB,KAAKiiB,WAAWI,aAIlC,IAAKtpB,EAAIgU,GAAI,CACX,MAAM4iB,QAAY52B,EAAIme,OACtB,MAAM,IAAIjI,MAAM0gB,GAAO,gBACzB,OAGM3vB,KAAKkuB,gBAEXluB,KAAKutB,eAAiBvtB,KAAKgH,SAAS1B,QAAO,CAACC,EAAK5D,KAAO4D,EAAI5D,EAAE/C,cAAe,EAAM2G,IAAM,CAAC,GAC1FvF,KAAK8hB,cAAe,CAEtB,CAAE,MAAOlY,GACPtQ,MAAMsQ,EAAEyF,SAAW,2BACrB,CAAE,QACArP,KAAKuiB,UAAW,CAClB,CA9CA,MAFEjpB,MAAM,yCAJNA,MAAM,yBAqDV,EACAowB,WAAAA,CAAY/nB,GAEV,MAAMpE,EAAMoE,EACZ3B,KAAK+J,QAAQvQ,KAAK,CAChBC,KAAM,0BACNiX,OAAQ,CAAEpB,UAAW/R,EAAIoB,YACzBkS,MAAQ,CAAEzH,MAAO7L,EAAIqB,YAAanF,KAAM8D,EAAII,aAEhD,EAEAqsB,QAAAA,CAASroB,GAEP3B,KAAK2iB,SAAW,CACdhkB,WAAYgD,EAAEhD,WACdC,YAAa+C,EAAE/C,YACfikB,sBAAuBlhB,EAAEkhB,sBACzBE,gBAAiBphB,EAAEohB,gBACnBllB,aAAcmC,KAAK4vB,MAAMjuB,EAAE9D,cAC3BqjB,aAAcvf,EAAEuf,aAChBloB,OAAQ2I,EAAE3I,QAEZgH,KAAKwiB,YAAa,CACpB,EAEAC,cAAAA,GACEziB,KAAKwiB,YAAa,EAClBxiB,KAAKgjB,SAAU,EAEfhjB,KAAK2iB,SAAW,CACdhkB,WAAY,KACZC,YAAa,GACbikB,sBAAuB,KACvBE,gBAAiB,KACjBllB,aAAc,GACdqjB,aAAc,SACdloB,OAAQ,QAEZ,EAEA42B,KAAAA,CAAMjrB,GACJ,IAAKA,EAAG,MAAO,GAEf,MAAMkrB,EAAK,IAAI3tB,KAAKyC,GACpB,OAAI4P,MAAMsb,GAAYhrB,OAAOF,GAAGrH,MAAM,EAAE,IACjCuyB,EAAGrS,cAAclgB,MAAM,EAAE,GAClC,EAEA,gBAAMolB,GACJ,MAAM,WAAE/jB,EAAU,sBAAEkkB,EAAqB,gBAAEE,EAAe,aAAEllB,EAAY,aAAEqjB,EAAY,OAAEloB,GAAWgH,KAAK2iB,SAGxG,GAAKhkB,GAAed,GAAiBqjB,GAAiBloB,EAAtD,CAKAgH,KAAKgjB,SAAU,EACf,IACE,MAAMsD,EAAape,KAAKC,MAAMlP,aAAa6J,QAAQ,cAAcqB,MAE3DkN,EAAU,CACdwR,sBAAuBA,GAAyB,KAChDE,gBAAiBA,GAAmB,KACpCllB,eACAqjB,eACAloB,SACAstB,cAGIvtB,QAAYiK,MAAM,GAAGhD,KAAKV,wBAAwBX,IAAc,CACpEkO,OAAQ,MACRjK,QAAS,CACPC,cAAe,UAAU5J,aAAa6J,QAAQ,eAC9C,eAAgB,oBAElBqJ,KAAMjE,KAAK4E,UAAUuE,KAEvB,IAAKtY,EAAIgU,GAAI,MAAM,IAAIkC,YAAYlW,EAAIme,QAAU,kCAG3ClX,KAAKkuB,gBAGX/d,GAAwBxR,GAExB,IACE,MAAMmxB,QAAchgB,GAAiBnR,EAAY,CAAEoxB,OAAO,IAC1D9f,GAAiBtR,EAAYmxB,EAC/B,CAAE,MAAoB,CAEtB9vB,KAAKwiB,YAAa,CACpB,CAAE,MAAO5Y,GACPtQ,MAAMsQ,EAAEyF,SAAW,2BACrB,CAAE,QACArP,KAAKgjB,SAAU,CACjB,CAzCA,MAFE1pB,MAAM,0BA4CV,EAEA,mBAAM6wB,CAAcxoB,GAClB,MAAM2G,EAAM3G,EAAEhD,WACd,GAAK2J,GAEA8X,QAAQ,mBAAmB9X,SAAW3G,EAAE/C,wDAI7C,IAEE,IAAIoxB,EAAUhwB,KAAK+nB,iBAAiBzf,GACpC,IAAKxE,MAAMwQ,QAAQ0b,GAAU,CAE3B,MAAM5vB,QAAU4C,MAAM,GAAGhD,KAAKV,oBAAoBgJ,YAAe,CAC/D1F,QAAS,CAAEC,cAAe,UAAU5J,aAAa6J,QAAQ,kBAE3DktB,QAAiB5vB,EAAE8C,QAAW,EAChC,CAGA,GAAIY,MAAMwQ,QAAQ0b,IAAYA,EAAQ5xB,OAAQ,CAC5C,MAAM6xB,EAAcD,EAAQ,GAC5B,UACQhtB,MAAM,GAAGhD,KAAKV,mBAAmB2wB,EAAY/H,YAAa,CAC9Drb,OAAQ,SACRjK,QAAS,CAAEC,cAAe,UAAU5J,aAAa6J,QAAQ,iBAE7D,CAAE,MAAO8G,GAAsB,CACjC,CAGA,MAAMsmB,QAAYltB,MAAM,GAAGhD,KAAKV,0BAA0BgJ,IAAO,CAC/DuE,OAAQ,SACRjK,QAAS,CAAEC,cAAe,UAAU5J,aAAa6J,QAAQ,kBAE3D,IAAKotB,EAAInjB,GAAI,CACX,MAAMyU,QAAY0O,EAAIhZ,OACtB,MAAM,IAAIjI,MAAMuS,GAAO,2BACzB,CAMA,GAHAxhB,KAAKgH,SAAWhH,KAAKgH,SAASzG,QAAOhD,GAAOA,EAAIoB,aAAe2J,IAG3DtI,KAAKmwB,QACPnwB,KAAKmwB,QAAQnwB,KAAK+nB,iBAAkBzf,GACpCtI,KAAKmwB,QAAQnwB,KAAKqtB,UAAW/kB,OACxB,CACL,MAAM8nB,EAAK,IAAKpwB,KAAK+nB,yBAA2BqI,EAAG9nB,GAAMtI,KAAK+nB,iBAAmBqI,EACjF,MAAMC,EAAK,IAAKrwB,KAAKqtB,kBAAoBgD,EAAG/nB,GAAMtI,KAAKqtB,UAAYgD,CACrE,CAEIrwB,KAAK4nB,mBAAqBtf,IAAKtI,KAAK4nB,iBAAmB,MACvD5nB,KAAK8pB,gBAAkBxhB,IAAKtI,KAAK8pB,cAAgB,KAIvD,CAAE,MAAOlgB,GACPH,QAAQI,MAAMD,GACdtQ,MAAMsQ,EAAEyF,SAAW,2BACrB,CACF,EAGAkY,YAAAA,CAAa5lB,GACX,MAAM2G,EAAM3G,EAAEhD,WACd,YAA4Bkd,IAAxB7b,KAAKqtB,UAAU/kB,GAA2BtI,KAAKqtB,UAAU/kB,KACpD3G,EAAE2uB,UACb,EAGAC,eAAAA,CAAgBjhB,EAAWyH,GACzB,MAAMyZ,EAAO,IAAKxwB,KAAKqtB,UAAW,CAAC/d,KAAcyH,GACjD/W,KAAKqtB,UAAYmD,EACjBxwB,KAAK2e,WAAU,IAAM3e,KAAKqtB,UAAYmD,GACxC,EAGA,mCAAMjB,CAA8BkB,GAG7B3sB,MAAMwQ,QAAQmc,IAAqC,IAAtBA,EAAWryB,cACvCkF,QAAQC,IAAIktB,EAAWtwB,KAAI8D,UAC/B,IACE,MAAM7D,QAAU4C,MAAM,GAAGhD,KAAKV,iCAAiCgJ,IAAO,CACpE1F,QAAS,CAAEC,cAAe,UAAU5J,aAAa6J,QAAQ,kBAE3D,IAAK1C,EAAE2M,GAAI,MAAM,EACjB,MAAMlM,QAAYT,EAAE8C,OACpBlD,KAAKuwB,gBAAgBjoB,EAAKxE,MAAMwQ,QAAQzT,IAAQA,EAAIzC,OAAS,EAC/D,CAAE,MACA4B,KAAKuwB,gBAAgBjoB,GAAK,EAC5B,KAEJ,EAGAooB,gBAAAA,CAAiBphB,GACftP,KAAKuwB,gBAAgBjhB,GAAW,EAClC,EACAqhB,eAAAA,CAAgBrhB,GACdtP,KAAKuwB,gBAAgBjhB,GAAW,EAClC,EAGAoY,gBAAAA,CAAiBpY,GACftP,KAAK4nB,iBAAoB5nB,KAAK4nB,mBAAqBtY,EAAa,KAAOA,EACnEtP,KAAK4nB,kBACP5nB,KAAK4wB,oBAAoBthB,EAE7B,EAGAshB,mBAAAA,CAAoBthB,GAGdtP,KAAK+nB,iBAAiBzY,KAC1BtP,KAAK6nB,iBAAmBvY,EAExBtM,MAAM,GAAGhD,KAAKV,oBAAoBgQ,YAAqB,CACrD1M,QAAS,CAAEC,cAAe,UAAU5J,aAAa6J,QAAQ,kBAE1DG,MAAK7C,GAAKA,EAAE8C,SACZD,MAAK4tB,IACJ7wB,KAAK8wB,KACD9wB,KAAK8wB,KAAK9wB,KAAK+nB,iBAAkBzY,EAAWxL,MAAMwQ,QAAQuc,GAAQA,EAAO,IACxE7wB,KAAK+nB,iBAAmB,IAAK/nB,KAAK+nB,iBAAkB,CAACzY,GAAYxL,MAAMwQ,QAAQuc,GAAQA,EAAO,OAEpG1tB,OAAM,KACLnD,KAAK8wB,KACD9wB,KAAK8wB,KAAK9wB,KAAK+nB,iBAAkBzY,EAAW,IAC3CtP,KAAK+nB,iBAAmB,IAAK/nB,KAAK+nB,iBAAkB,CAACzY,GAAY,OAEvEyhB,SAAQ,KAAQ/wB,KAAK6nB,iBAAmB,QAC3C,EAGAuB,UAAAA,CAAW9Z,EAAW1F,GACpB,MAAMonB,EAAOpnB,EAAE8e,OAAOuI,OAASrnB,EAAE8e,OAAOuI,MAAM,GAC9C,GAAKD,EAEL,MAAkB,oBAAdA,EAAKj2B,MACPzB,MAAM,kCACNsQ,EAAE8e,OAAOliB,MAAQ,UAIfxG,KAAK8wB,KACP9wB,KAAK8wB,KAAK9wB,KAAKspB,oBAAqBha,EAAW0hB,GAE/ChxB,KAAKspB,oBAAsB,IAAKtpB,KAAKspB,oBAAqB,CAACha,GAAY0hB,GAE3E,EAGA3H,YAAAA,CAAa6H,GACX,MAAM5hB,EAAY4hB,EAAWvyB,WACvBqyB,EAAOhxB,KAAKspB,oBAAoBha,GAGtC,IAAK0hB,EAAM,OAEX,MAAMG,EAAK,IAAIC,SACfD,EAAGE,OAAO,OAAQL,GAClB,MAAM31B,EAAQ2E,KAAKkpB,qBAAqB5Z,IAAc,GAClDjU,GAAO81B,EAAGE,OAAO,QAASh2B,GAE9B2E,KAAKupB,mBAAqBja,EAE1BtM,MAAM,GAAGhD,KAAKV,oBAAoBgQ,kBAA2B,CAC3DzC,OAAQ,OACRjK,QAAS,CAAEC,cAAe,UAAU5J,aAAa6J,QAAQ,gBACzDqJ,KAAMglB,IAEPluB,MAAK7C,GAAKA,EAAE2M,GAAK3M,EAAE8C,OAASI,QAAQguB,OAAOlxB,KAC3C6C,MAAK,KAaJ,GAZAjD,KAAK0wB,iBAAiBphB,GAElBtP,KAAK8wB,MACP9wB,KAAK8wB,KAAK9wB,KAAKkpB,qBAAsB5Z,EAAW,IAChDtP,KAAK8wB,KAAK9wB,KAAKspB,oBAAqBha,EAAW,QAG/CtP,KAAKkpB,qBAAuB,IAAKlpB,KAAKkpB,qBAAsB,CAAC5Z,GAAY,IACzEtP,KAAKspB,oBAAsB,IAAKtpB,KAAKspB,oBAAqB,CAACha,GAAY,OAIrEtP,KAAKmwB,QACPnwB,KAAKmwB,QAAQnwB,KAAK+nB,iBAAkBzY,OAC/B,CACL,MAAMiiB,EAAQ,IAAKvxB,KAAK+nB,yBACjBwJ,EAAMjiB,GACbtP,KAAK+nB,iBAAmBwJ,CAC1B,CACAvxB,KAAK4wB,oBAAoBthB,MAE1BnM,OAAMc,UACL,IAAI0rB,EAAM,gBACV,IAAMA,SAAaziB,EAAIhK,QAAQ2G,OAAS8lB,CAAK,CAC7C,MAAO/lB,GAAKH,QAAQC,KAAK,qCAAsCE,EAAI,CACnEtQ,MAAMq2B,MAEPoB,SAAQ,KAAQ/wB,KAAKupB,mBAAqB,OAC7C,EAGAV,YAAAA,CAAavZ,EAAWkiB,GAGjBpR,QAAQ,yBACbpgB,KAAK8oB,iBAAmB0I,EAExBxuB,MAAM,GAAGhD,KAAKV,mBAAmBkyB,IAAY,CAC3C3kB,OAAQ,SACRjK,QAAS,CAAEC,cAAe,UAAU5J,aAAa6J,QAAQ,kBAE1DG,MAAK7C,GAAKA,EAAE2M,GAAK3M,EAAE8C,OAASI,QAAQguB,OAAOlxB,KAC3C6C,MAAK,KAEJ,MAAM4tB,EAAO7wB,KAAK+nB,iBAAiBzY,IAAc,GAC3CkhB,EAAOK,EAAKtwB,QAAOH,GAAKA,EAAE8nB,YAAcsJ,IAC9CxxB,KAAK2wB,gBAAgBrhB,GACjBtP,KAAK8wB,KACP9wB,KAAK8wB,KAAK9wB,KAAK+nB,iBAAkBzY,EAAWkhB,GAE5CxwB,KAAK+nB,iBAAmB,IAAK/nB,KAAK+nB,iBAAkB,CAACzY,GAAYkhB,MAGpErtB,OAAMc,UACL,IAAI0rB,EAAM,gBACV,IAAMA,SAAaziB,EAAIhK,QAAQ2G,OAAS8lB,CAAK,CAC7C,MAAO/lB,GAAKH,QAAQC,KAAK,qCAAsCE,EAAI,CACnEtQ,MAAMq2B,MAEPoB,SAAQ,KAAQ/wB,KAAK8oB,iBAAmB,QAC3C,IAIJ,SAAS8E,GAAO7W,GACd,MAAsB,kBAARA,EAAmBA,EAAM7U,KAAKiG,MAAM4O,EACpD,CGrqCA,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,U,UCROrd,MAAM,W,IAMJA,MAAM,U,IASJA,MAAM,W,IAQNA,MAAM,QAAQ0U,MAAA,gC,oCAQhB1U,MAAM,W,IACJA,MAAM,e,IACHA,MAAM,W,IACNA,MAAM,Y,IAGNA,MAAM,gB,IACNA,MAAM,iB,IAGT0U,MAAA,0B,oCA0BgC1U,MAAM,U,UACPA,MAAM,U,UACNA,MAAM,U,UACNA,MAAM,U,UACNA,MAAM,U,mBAe7BA,MAAM,Q,IAAaA,MAAM,K,UAIDA,MAAM,U,UAOPA,MAAM,U,IAK7BA,MAAM,Q,IAA+CA,MAAM,K,UAE/BA,MAAM,W,UAEDA,MAAM,c,UAIhBA,MAAM,U,IAC7BA,MAAM,U,qBAK2BA,MAAM,c,UAKhBA,MAAM,U,IAG7BA,MAAM,U,IACHA,MAAM,O,UAEmBA,MAAM,W,UAEDA,MAAM,c,UAKhBA,MAAM,U,UAGHA,MAAM,W,UAEDA,MAAM,c,IAoCxCA,MAAM,U,uEA8BTA,MAAM,iB,UAGFA,MAAM,Y,IAOVA,MAAM,e,UACAA,MAAM,O,IAERA,MAAM,S,IACJA,MAAM,Q,IAA6CA,MAAM,K,IACzDA,MAAM,Q,IAAyDA,MAAM,K,IACrEA,MAAM,Q,IAA+CA,MAAM,K,IAC3DA,MAAM,Q,IAAgDA,MAAM,K,IAC5DA,MAAM,Q,IAA0CA,MAAM,K,IACtDA,MAAM,Q,IAA4CA,MAAM,K,IAIxDA,MAAM,O,eAGJA,MAAM,Q,UAuBHA,MAAM,S,IAGXA,MAAM,O,eAGJA,MAAM,Q,UA2BHA,MAAM,S,IAGXA,MAAM,O,eAGJA,MAAM,Q,IAkERA,MAAM,O,IACN0U,MAAA,0B,UAMK1U,MAAM,S,IAIjBA,MAAM,iB,2GAlXjBC,EAAAA,EAAAA,IA0XM,MA1XNC,GA0XM,gBAzXJC,EAAAA,EAAAA,IAAmC,UAA/B,8BAA0B,KAE9BA,EAAAA,EAAAA,IAAkE,UAAzDM,QAAKC,EAAA,KAAAA,EAAA,GAAAU,GAAEuT,EAAAtE,QAAQvQ,KAAK,eAAeE,MAAM,IAAG,SAGrDG,EAAAA,EAAAA,IAsBM,MAtBNK,GAsBM,WArBJL,EAAAA,EAAAA,IAME,S,qCALSe,EAAAqoB,OAAMnoB,GACdqX,QAAK/X,EAAA,KAAAA,EAAA,OAAAC,IAAEN,EAAA03B,gBAAA13B,EAAA03B,kBAAAp3B,IACRU,KAAK,SACLC,YAAY,4CACZtB,MAAM,U,iBAJGkB,EAAAqoB,WAOXppB,EAAAA,EAAAA,IAMM,MANNc,GAMM,WALJd,EAAAA,EAAAA,IAIS,U,qCAJQe,EAAA0oB,aAAYxoB,I,gBAC3BjB,EAAAA,EAAAA,IAAuC,UAA/B2M,MAAM,OAAM,cAAU,IAC9B3M,EAAAA,EAAAA,IAA0C,UAAlC2M,MAAM,YAAW,YAAQ,IACjC3M,EAAAA,EAAAA,IAA8C,UAAtC2M,MAAM,cAAa,cAAU,iBAHtB5L,EAAA0oB,mBAOnBzpB,EAAAA,EAAAA,IAIM,MAJNyB,GAIM,EAHJzB,EAAAA,EAAAA,IAAuE,UAA9D4Q,SAAc,IAAJ7P,EAAA2oB,MAAY3oB,EAAA+S,QAAUxT,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAEN,EAAA0pB,UAAA1pB,EAAA0pB,YAAAppB,KAAU,OAAI,EAAAgM,KAC9DxM,EAAAA,EAAAA,IAA4B,YAAtB,SAAKC,EAAAA,EAAAA,IAAGc,EAAA2oB,MAAI,IAClB1pB,EAAAA,EAAAA,IAAgH,UAAxGuU,MAAA,sBAA2B3D,SAAU7P,EAAA+S,SAAW/S,EAAAwf,MAAMhc,OAASxD,EAAAipB,SAAW1pB,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAEN,EAAA4pB,UAAA5pB,EAAA4pB,YAAAtpB,KAAU,OAAI,EAAAwB,SAK3GhC,EAAAA,EAAAA,IA2BM,MA3BNiC,GA2BM,EA1BJjC,EAAAA,EAAAA,IAOM,MAPNoC,GAOM,EANJpC,EAAAA,EAAAA,IAAqE,OAArEqC,GAAsB,cAAUpC,EAAAA,EAAAA,IAAGC,EAAA2L,OAAO4Y,SAASoT,UAAQ,IAC3D73B,EAAAA,EAAAA,IAA0E,OAA1EsC,GAAuB,gBAAYrC,EAAAA,EAAAA,IAAGC,EAAA2L,OAAO4Y,SAASqT,YAAU,kBAChE93B,EAAAA,EAAAA,IAA0B,QAApBH,MAAM,OAAM,KAAC,mBACnBG,EAAAA,EAAAA,IAAsC,QAAhCH,MAAM,SAAQ,eAAW,KAC/BG,EAAAA,EAAAA,IAA8D,OAA9DuC,GAA2B,OAAGtC,EAAAA,EAAAA,IAAGC,EAAA2L,OAAOnC,IAAImuB,UAAQ,IACpD73B,EAAAA,EAAAA,IAAiE,OAAjE0C,GAA4B,OAAGzC,EAAAA,EAAAA,IAAGC,EAAA2L,OAAOnC,IAAIouB,YAAU,MAGzD93B,EAAAA,EAAAA,IAgBM,MAhBN2C,GAgBM,EAfJ3C,EAAAA,EAAAA,IAES,UAFDH,MAAM,UAAWS,QAAKC,EAAA,KAAAA,EAAA,GAAAU,GAAEF,EAAAg3B,oBAAsBh3B,EAAAg3B,sB,QACjDh3B,EAAAg3B,mBAAqB,OAAS,QAAS,oBAC5C,IACA/lB,EAAAA,EAAAA,IAWcsY,EAAA,CAVX/e,KAAMrL,EAAA83B,eACNxN,QAASzpB,EAAAwf,MACTkK,QAASvqB,EAAAwqB,UACVC,SAAS,mBACTC,UAAU,mBACVppB,MAAM,8B,CAEKqpB,SAAOC,EAAAA,EAAAA,KAChB,EADoBC,OAAMna,cAAQ,EAClC5Q,EAAAA,EAAAA,IAAgF,UAAvE4Q,SAAUA,EAAWtQ,QAAOyqB,EAAMlrB,MAAM,WAAU,eAAY,EAAA+C,O,0CAO/E5C,EAAAA,EAAAA,IAqIM,OArIDH,MAAM,aACVorB,SAAM1qB,EAAA,KAAAA,EAAA,OAAAC,IAAEN,EAAAgrB,eAAAhrB,EAAAgrB,iBAAA1qB,K,EACPR,EAAAA,EAAAA,IAkIQ,eAjINA,EAAAA,EAAAA,IAYQ,eAXNA,EAAAA,EAAAA,IAUK,0BATHA,EAAAA,EAAAA,IAAa,UAAT,QAAI,IACGe,EAAAg3B,oBAAoD,iBAAlC,WAA7Bj4B,EAAAA,EAAAA,IAAoE,KAApEgD,GAA8C,sBACpC/B,EAAAg3B,qBAAkB,WAA5Bj4B,EAAAA,EAAAA,IAA+D,KAA/DiD,GAA6C,mBAAa,eAChDhC,EAAAg3B,qBAAkB,WAA5Bj4B,EAAAA,EAAAA,IAAsE,KAAtEkD,GAA6C,0BAAoB,eACvDjC,EAAAg3B,qBAAkB,WAA5Bj4B,EAAAA,EAAAA,IAAwE,KAAxEoD,GAA6C,4BAAsB,eACzDnC,EAAAg3B,qBAAkB,WAA5Bj4B,EAAAA,EAAAA,IAAgE,KAAhEqD,GAA6C,oBAAc,8BAE3DnD,EAAAA,EAAAA,IAAsC,MAAlCH,MAAM,UAAS,kBAAc,mBACjCG,EAAAA,EAAAA,IAAwC,MAApCH,MAAM,SAAS0U,MAAA,IAAS,WAAO,SAGvCvU,EAAAA,EAAAA,IAmHQ,6BAlHNF,EAAAA,EAAAA,IAyGK8B,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAxGW3B,EAAA83B,gBAAPt0B,K,WADT5D,EAAAA,EAAAA,IAyGK,MAvGFc,IAAK8C,EAAIqB,YACTzE,QAAKW,GAAEf,EAAA+3B,YAAYv0B,GACpB7D,MAAM,a,EAGNG,EAAAA,EAAAA,IAEK,YADHA,EAAAA,EAAAA,IAA0E,MAA1EsD,GAA0E,EAAxDtD,EAAAA,EAAAA,IAAkD,OAAlDuD,IAAkDtD,EAAAA,EAAAA,IAA/ByD,EAAII,YAAc,KAAJ,OAI1C/C,EAAAg3B,oBAEiB,iBAFC,WAA7Bj4B,EAAAA,EAAAA,IAIK,KAJL8D,GAIK,EAHH5D,EAAAA,EAAAA,IAEO,QAFAH,OAAKuB,EAAAA,EAAAA,IAAA,QAAWsC,EAAIw0B,mBAAqB,EAAI,KAAO,U,QACtDx0B,EAAIw0B,mBAAqB,EAAI,WAAa,cAArB,MAKlBn3B,EAAAg3B,qBAAkB,WAA5Bj4B,EAAAA,EAAAA,IAUK,KAVL+D,GAUK,EATH7D,EAAAA,EAAAA,IAEO,QAFAH,OAAKuB,EAAAA,EAAAA,IAAA,QAAWsC,EAAIy0B,oBAAsB,KAAO,U,QACnDz0B,EAAIy0B,oBAAsB,WAAa,cAAhB,kBAE5Bn4B,EAAAA,EAAAA,IAAI,mCAAAA,EAAAA,EAAAA,IAAI,qBACRA,EAAAA,EAAAA,IAAuH,MAAvHwE,GAAuH,gBAArGxE,EAAAA,EAAAA,IAA8B,QAAxBH,MAAM,KAAI,WAAO,mBAAOG,EAAAA,EAAAA,IAAI,qBAAAA,EAAAA,EAAAA,IAA6D,OAA7D0E,IAA6DzE,EAAAA,EAAAA,IAA1CyD,EAAI00B,uBAAyB,KAAJ,oBAChGp4B,EAAAA,EAAAA,IAAI,oBACO0D,EAAI20B,mBAAgB,WAA/Bv4B,EAAAA,EAAAA,IAA6F,MAA7FkF,IAA6F/E,EAAAA,EAAAA,IAAzCC,EAAAohB,WAAW5d,EAAI20B,mBAAgB,mCACnFr4B,EAAAA,EAAAA,IAAI,oBACOE,EAAAo4B,aAAa50B,EAAG,sBAA3B5D,EAAAA,EAAAA,IAA4E,MAA5EmF,GAAyD,mBAAa,kCAI9DlE,EAAAg3B,qBAAkB,WAA5Bj4B,EAAAA,EAAAA,IAQK,KARLyF,GAQK,EAPHvF,EAAAA,EAAAA,IAMM,MANNkqB,GAMM,CAHSxmB,EAAI60B,iBAAc,WAA/Bz4B,EAAAA,EAAAA,IAA6E,QAAAkrB,IAAA/qB,EAAAA,EAAAA,IAAzCC,EAAAohB,WAAW5d,EAAI60B,iBAAc,mCACjEv4B,EAAAA,EAAAA,IAAI,oBACOE,EAAAo4B,aAAa50B,EAAG,oBAA3B5D,EAAAA,EAAAA,IAA0E,MAA1EqrB,GAAuD,mBAAa,oCAK9DpqB,EAAAg3B,qBAAkB,WAA5Bj4B,EAAAA,EAAAA,IAUK,KAVLwrB,GAUK,EATHtrB,EAAAA,EAAAA,IAAoH,QAA7GH,OAAKuB,EAAAA,EAAAA,IAAA,QAAWsC,EAAI80B,cAAgB,KAAO,U,QAAW90B,EAAI80B,cAAgB,WAAa,cAAhB,kBAC9Ex4B,EAAAA,EAAAA,IAAI,mCAAAA,EAAAA,EAAAA,IAAI,qBACRA,EAAAA,EAAAA,IAMM,MANNurB,GAMM,EALJvrB,EAAAA,EAAAA,IAAuD,OAAvDwrB,IAAuDvrB,EAAAA,EAAAA,IAAlCyD,EAAI+0B,iBAAmB,GAAJ,kBACxCz4B,EAAAA,EAAAA,IAAI,mCAAAA,EAAAA,EAAAA,IAAI,oBACG0D,EAAIg1B,iBAAc,WAA7B54B,EAAAA,EAAAA,IAAyF,MAAzF2rB,IAAyFxrB,EAAAA,EAAAA,IAAvCC,EAAAohB,WAAW5d,EAAIg1B,iBAAc,mCAC/E14B,EAAAA,EAAAA,IAAI,oBACOE,EAAAo4B,aAAa50B,EAAG,oBAA3B5D,EAAAA,EAAAA,IAA0E,MAA1E4rB,GAAuD,mBAAa,oCAK9D3qB,EAAAg3B,qBAAkB,WAA5Bj4B,EAAAA,EAAAA,IAMK,KANL6rB,GAMK,EALH3rB,EAAAA,EAAAA,IAAkH,QAA3GH,OAAKuB,EAAAA,EAAAA,IAAA,QAAWsC,EAAIi1B,aAAe,KAAO,U,QAAWj1B,EAAIi1B,aAAe,WAAa,cAAhB,kBAC5E34B,EAAAA,EAAAA,IAAI,mCAAAA,EAAAA,EAAAA,IAAI,oBACG0D,EAAIk1B,iBAAc,WAA7B94B,EAAAA,EAAAA,IAAyF,MAAzF8rB,IAAyF3rB,EAAAA,EAAAA,IAAvCC,EAAAohB,WAAW5d,EAAIk1B,iBAAc,mCAC/E54B,EAAAA,EAAAA,IAAI,oBACOE,EAAAo4B,aAAa50B,EAAG,oBAA3B5D,EAAAA,EAAAA,IAA0E,MAA1E+rB,GAAuD,mBAAa,mCAoCtE7rB,EAAAA,EAAAA,IAA+C,KAA/C8rB,IAA+C7rB,EAAAA,EAAAA,IAAzByD,EAAIm1B,eAAa,IAGvC74B,EAAAA,EAAAA,IAIK,MAJDH,MAAM,SAAUS,QAAKC,EAAA,KAAAA,EAAA,IAAA8P,EAAAA,EAAAA,KAAN,QAAW,Y,EAC5BrQ,EAAAA,EAAAA,IAA2D,UAAlDM,QAAKW,GAAEf,EAAA44B,YAAYp1B,EAAIqB,cAAc,OAAI,EAAAgnB,KAClD/rB,EAAAA,EAAAA,IAAmE,UAA1DM,QAAKW,GAAEf,EAAA64B,WAAWr1B,EAAIqB,cAAc,gBAAa,EAAAinB,KAC1DhsB,EAAAA,EAAAA,IAA0D,UAAjDM,QAAKW,GAAEf,EAAA+3B,YAAYv0B,IAAM,kBAAe,EAAAuoB,OAAA,S,MAI1ClrB,EAAA+S,SAAgC,IAArB5T,EAAA83B,eAAezzB,QAC0B,iBADpB,WAA3CzE,EAAAA,EAAAA,IAEK,KAAAosB,GAAA3rB,EAAA,MAAAA,EAAA,MADHP,EAAAA,EAAAA,IAAkE,MAA9DyE,QAAQ,IAAI5E,MAAM,SAAQ,mCAA+B,OAGrDkB,EAAA+S,UAAO,WAAjBhU,EAAAA,EAAAA,IAEK,KAAAqsB,GAAA5rB,EAAA,MAAAA,EAAA,MADHP,EAAAA,EAAAA,IAA6C,MAAzCyE,QAAQ,IAAI5E,MAAM,WAAU,YAAQ,iCAMhDG,EAAAA,EAAAA,IAGM,OAHDH,MAAM,WAAWkY,IAAI,UAAWkT,SAAM1qB,EAAA,KAAAA,EAAA,OAAAC,IAAEN,EAAAwwB,WAAAxwB,EAAAwwB,aAAAlwB,K,EAE3CR,EAAAA,EAAAA,IAAsE,OAAhEuU,OAAKwY,EAAAA,EAAAA,IAAA,CAAA4D,MAAW5vB,EAAA6vB,iBAAmB,KAAH5Y,OAAA,S,eAKxChY,EAAAA,EAAAA,IA6KM,OA7KDH,OAAKuB,EAAAA,EAAAA,IAAA,CAAC,SAAQ,CAAA2pB,KAAgBhqB,EAAAi4B,cAAc14B,QAAKC,EAAA,MAAAA,EAAA,KAAA8P,EAAAA,EAAAA,KAAA,IAAA7P,IAAON,EAAA+4B,cAAA/4B,EAAA+4B,gBAAAz4B,IAAY,Y,EACvER,EAAAA,EAAAA,IA2KM,OA3KDH,MAAM,eAAgBS,QAAKC,EAAA,MAAAA,EAAA,KAAA8P,EAAAA,EAAAA,KAAN,QAAW,Y,EACnCrQ,EAAAA,EAAAA,IAQM,MARNosB,GAQM,EAPJpsB,EAAAA,EAAAA,IAKM,2BAJJA,EAAAA,EAAAA,IAA8D,OAAzDH,MAAM,SAAO,EAACG,EAAAA,EAAAA,IAAqC,cAA7B,0BAAoB,IACnBe,EAAAm4B,QAAQ3pB,QAAK,WAAzCzP,EAAAA,EAAAA,IAEM,MAFNwsB,IAEMrsB,EAAAA,EAAAA,IADDc,EAAAm4B,OAAO3pB,MAAMzL,YAAc,aAAc,OAAG7D,EAAAA,EAAAA,IAAGc,EAAAm4B,OAAO3pB,MAAMxK,aAAW,uBAG9E/E,EAAAA,EAAAA,IAAkD,UAA1CH,MAAM,IAAKS,QAAKC,EAAA,MAAAA,EAAA,QAAAC,IAAEN,EAAA+4B,cAAA/4B,EAAA+4B,gBAAAz4B,KAAc,QAG1CR,EAAAA,EAAAA,IAyJM,MAzJNwsB,GAyJM,CAxJuBzrB,EAAAm4B,QAAQ3pB,QAAK,WAAxCzP,EAAAA,EAAAA,IAUU,UAVV4sB,GAUU,gBATR1sB,EAAAA,EAAAA,IAAmB,UAAf,cAAU,KACdA,EAAAA,EAAAA,IAOM,MAPN4sB,GAOM,EANJ5sB,EAAAA,EAAAA,IAAiH,MAAjH8sB,GAAiH,gBAA/F9sB,EAAAA,EAAAA,IAAgC,QAA1BH,MAAM,KAAI,aAAS,KAAOG,EAAAA,EAAAA,IAAyD,OAAzDitB,IAAyDhtB,EAAAA,EAAAA,IAAtCc,EAAAm4B,OAAO3pB,MAAM4pB,UAAY,KAAJ,MAC1Fn5B,EAAAA,EAAAA,IAA8H,MAA9HmtB,GAA8H,gBAA5GntB,EAAAA,EAAAA,IAA4C,QAAtCH,MAAM,KAAI,yBAAqB,KAAOG,EAAAA,EAAAA,IAA0D,OAA1DstB,IAA0DrtB,EAAAA,EAAAA,IAAvCc,EAAAm4B,OAAO3pB,MAAM2E,WAAa,KAAJ,MACvGlU,EAAAA,EAAAA,IAAqH,MAArHytB,GAAqH,gBAAnGztB,EAAAA,EAAAA,IAAkC,QAA5BH,MAAM,KAAI,eAAW,KAAOG,EAAAA,EAAAA,IAA2D,OAA3D2tB,IAA2D1tB,EAAAA,EAAAA,IAAxCc,EAAAm4B,OAAO3pB,MAAMqD,YAAc,KAAJ,MAC9F5S,EAAAA,EAAAA,IAAuH,MAAvH4tB,GAAuH,gBAArG5tB,EAAAA,EAAAA,IAAmC,QAA7BH,MAAM,KAAI,gBAAY,KAAOG,EAAAA,EAAAA,IAA4D,OAA5D8tB,IAA4D7tB,EAAAA,EAAAA,IAAzCc,EAAAm4B,OAAO3pB,MAAM6pB,aAAe,KAAJ,MAChGp5B,EAAAA,EAAAA,IAA8G,MAA9GiuB,GAA8G,gBAA5FjuB,EAAAA,EAAAA,IAA6B,QAAvBH,MAAM,KAAI,UAAM,KAAOG,EAAAA,EAAAA,IAAyD,OAAzDmuB,IAAyDluB,EAAAA,EAAAA,IAAtCc,EAAAm4B,OAAO3pB,MAAM4E,UAAY,KAAJ,MACvFnU,EAAAA,EAAAA,IAA+G,MAA/GouB,GAA+G,gBAA7FpuB,EAAAA,EAAAA,IAA+B,QAAzBH,MAAM,KAAI,YAAQ,KAAOG,EAAAA,EAAAA,IAAwD,OAAxDsuB,IAAwDruB,EAAAA,EAAAA,IAArCc,EAAAm4B,OAAO3pB,MAAM8pB,SAAW,KAAJ,2BAI5Fr5B,EAAAA,EAAAA,IA2BU,UA3BVyuB,GA2BU,EA1BRzuB,EAAAA,EAAAA,IAA+E,UAA3E,0BAAsBC,EAAAA,EAAAA,IAAGc,EAAAm4B,QAAQI,sBAAsB/0B,QAAU,GAAI,IAAC,GAC/DxD,EAAAm4B,QAAQI,sBAAsB/0B,SAAM,WAA/CzE,EAAAA,EAAAA,IAuBM,MAAA8uB,GAAA,EAtBJ5uB,EAAAA,EAAAA,IAqBQ,QArBR+uB,GAqBQ,gBApBN/uB,EAAAA,EAAAA,IASQ,eARNA,EAAAA,EAAAA,IAOK,YANHA,EAAAA,EAAAA,IAAU,UAAN,MACJA,EAAAA,EAAAA,IAAa,UAAT,SACJA,EAAAA,EAAAA,IAAgB,UAAZ,YACJA,EAAAA,EAAAA,IAAiB,UAAb,aACJA,EAAAA,EAAAA,IAAkB,UAAd,cACJA,EAAAA,EAAAA,IAAuB,UAAnB,sBAAc,KAGtBA,EAAAA,EAAAA,IASQ,6BARNF,EAAAA,EAAAA,IAOK8B,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAPgBd,EAAAm4B,OAAOI,sBAAoB,CAApCC,EAAG7wB,M,WAAf5I,EAAAA,EAAAA,IAOK,MAP8Cc,IAAK24B,EAAGC,OAAS9wB,G,EAClE1I,EAAAA,EAAAA,IAAkB,WAAAC,EAAAA,EAAAA,IAAXyI,EAAC,OACR1I,EAAAA,EAAAA,IAA4B,WAAAC,EAAAA,EAAAA,IAArBs5B,EAAG9X,MAAQ,IAAJ,IACdzhB,EAAAA,EAAAA,IAA+B,WAAAC,EAAAA,EAAAA,IAAxBs5B,EAAGE,SAAW,IAAJ,IACjBz5B,EAAAA,EAAAA,IAAgC,WAAAC,EAAAA,EAAAA,IAAzBs5B,EAAG5lB,UAAY,IAAJ,IAClB3T,EAAAA,EAAAA,IAAiC,WAAAC,EAAAA,EAAAA,IAA1Bs5B,EAAGrlB,WAAa,IAAJ,IACnBlU,EAAAA,EAAAA,IAAsC,WAAAC,EAAAA,EAAAA,IAA/Bs5B,EAAGG,gBAAkB,IAAJ,Q,0BAKhC55B,EAAAA,EAAAA,IAAwD,MAAxDovB,GAA0B,gCAG5BlvB,EAAAA,EAAAA,IA+BU,UA/BVmvB,GA+BU,EA9BRnvB,EAAAA,EAAAA,IAAmE,UAA/D,oBAAgBC,EAAAA,EAAAA,IAAGc,EAAAm4B,QAAQS,gBAAgBp1B,QAAU,GAAI,IAAC,GACnDxD,EAAAm4B,QAAQS,gBAAgBp1B,SAAM,WAAzCzE,EAAAA,EAAAA,IA2BM,MAAAsvB,GAAA,EA1BJpvB,EAAAA,EAAAA,IAyBQ,QAzBR45B,GAyBQ,gBAxBN55B,EAAAA,EAAAA,IAWQ,eAVNA,EAAAA,EAAAA,IASK,YARHA,EAAAA,EAAAA,IAAU,UAAN,MACJA,EAAAA,EAAAA,IAAqB,UAAjB,iBACJA,EAAAA,EAAAA,IAAa,UAAT,SACJA,EAAAA,EAAAA,IAAY,UAAR,QACJA,EAAAA,EAAAA,IAAsB,UAAlB,kBACJA,EAAAA,EAAAA,IAAY,UAAR,QACJA,EAAAA,EAAAA,IAAqB,UAAjB,iBACJA,EAAAA,EAAAA,IAAgC,UAA5B,+BAAuB,KAG/BA,EAAAA,EAAAA,IAWQ,6BAVNF,EAAAA,EAAAA,IASK8B,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IATgBd,EAAAm4B,OAAOS,gBAAc,CAA9BE,EAAGnxB,M,WAAf5I,EAAAA,EAAAA,IASK,MATwCc,IAAKi5B,EAAGC,OAASpxB,G,EAC5D1I,EAAAA,EAAAA,IAAkB,WAAAC,EAAAA,EAAAA,IAAXyI,EAAC,OACR1I,EAAAA,EAAAA,IAA8B,WAAAC,EAAAA,EAAAA,IAAvB45B,EAAGE,cAAY,IACtB/5B,EAAAA,EAAAA,IAAqC,WAAAC,EAAAA,EAAAA,IAA9B45B,EAAGG,eAAiB,IAAJ,IACvBh6B,EAAAA,EAAAA,IAA2B,WAAAC,EAAAA,EAAAA,IAApB45B,EAAGI,KAAO,IAAJ,IACbj6B,EAAAA,EAAAA,IAAoC,WAAAC,EAAAA,EAAAA,IAA7B45B,EAAGK,cAAgB,IAAJ,IACtBl6B,EAAAA,EAAAA,IAA+B,WAAAC,EAAAA,EAAAA,IAAxB45B,EAAGM,SAAW,IAAJ,IACjBn6B,EAAAA,EAAAA,IAAqC,WAAAC,EAAAA,EAAAA,IAA9B45B,EAAGO,cAAgB,KAAJ,IACtBp6B,EAAAA,EAAAA,IAAiD,WAAAC,EAAAA,EAAAA,IAA1C45B,EAAGQ,0BAA4B,KAAJ,Q,0BAK1Cv6B,EAAAA,EAAAA,IAAkD,MAAlDw6B,GAA0B,0BAG5Bt6B,EAAAA,EAAAA,IA6EU,UA7EV2vB,GA6EU,gBA5ER3vB,EAAAA,EAAAA,IAA+B,UAA3B,0BAAsB,IACfe,EAAAm4B,QAAQqB,yBAAsB,WAAzCz6B,EAAAA,EAAAA,IAyEM,MAAA8vB,GAAA,EAxEJ5vB,EAAAA,EAAAA,IAiEQ,QAjER8vB,GAiEQ,gBAhEN9vB,EAAAA,EAAAA,IAKQ,eAJNA,EAAAA,EAAAA,IAGK,YAFHA,EAAAA,EAAAA,IAAgB,UAAZ,YACJA,EAAAA,EAAAA,IAAiB,UAAb,gBAAQ,KAGhBA,EAAAA,EAAAA,IAyDQ,eAxDNA,EAAAA,EAAAA,IAGK,0BAFHA,EAAAA,EAAAA,IAAsB,UAAlB,iBAAa,KACjBA,EAAAA,EAAAA,IAA8D,WAAAC,EAAAA,EAAAA,IAAvDC,EAAAs6B,GAAGz5B,EAAAm4B,OAAOqB,uBAAuBE,gBAAa,MAEvDz6B,EAAAA,EAAAA,IAGK,0BAFHA,EAAAA,EAAAA,IAAY,UAAR,OAAG,KACPA,EAAAA,EAAAA,IAAoE,WAAAC,EAAAA,EAAAA,IAA7DC,EAAAs6B,GAAGz5B,EAAAm4B,OAAOqB,uBAAuBG,sBAAmB,MAE7D16B,EAAAA,EAAAA,IAGK,0BAFHA,EAAAA,EAAAA,IAAiB,UAAb,YAAQ,KACZA,EAAAA,EAAAA,IAAyD,WAAAC,EAAAA,EAAAA,IAAlDC,EAAAs6B,GAAGz5B,EAAAm4B,OAAOqB,uBAAuBI,WAAQ,MAElD36B,EAAAA,EAAAA,IAGK,0BAFHA,EAAAA,EAAAA,IAAe,UAAX,UAAM,KACVA,EAAAA,EAAAA,IAAuD,WAAAC,EAAAA,EAAAA,IAAhDC,EAAAs6B,GAAGz5B,EAAAm4B,OAAOqB,uBAAuBra,SAAM,MAEhDlgB,EAAAA,EAAAA,IAGK,0BAFHA,EAAAA,EAAAA,IAAe,UAAX,UAAM,KACVA,EAAAA,EAAAA,IAA+D,WAAAC,EAAAA,EAAAA,IAAxDC,EAAAs6B,GAAGz5B,EAAAm4B,OAAOqB,uBAAuBK,iBAAc,MAExD56B,EAAAA,EAAAA,IAGK,0BAFHA,EAAAA,EAAAA,IAAgB,UAAZ,WAAO,KACXA,EAAAA,EAAAA,IAAwD,WAAAC,EAAAA,EAAAA,IAAjDC,EAAAs6B,GAAGz5B,EAAAm4B,OAAOqB,uBAAuBM,UAAO,MAEjD76B,EAAAA,EAAAA,IAGK,0BAFHA,EAAAA,EAAAA,IAAe,UAAX,UAAM,KACVA,EAAAA,EAAAA,IAAuD,WAAAC,EAAAA,EAAAA,IAAhDC,EAAAs6B,GAAGz5B,EAAAm4B,OAAOqB,uBAAuBO,SAAM,MAEhD96B,EAAAA,EAAAA,IAGK,0BAFHA,EAAAA,EAAAA,IAAe,UAAX,UAAM,KACVA,EAAAA,EAAAA,IAAuD,WAAAC,EAAAA,EAAAA,IAAhDC,EAAAs6B,GAAGz5B,EAAAm4B,OAAOqB,uBAAuBQ,SAAM,MAEhD/6B,EAAAA,EAAAA,IAGK,0BAFHA,EAAAA,EAAAA,IAAW,UAAP,MAAE,KACNA,EAAAA,EAAAA,IAA6D,WAAAC,EAAAA,EAAAA,IAAtDC,EAAAs6B,GAAGz5B,EAAAm4B,OAAOqB,uBAAuBS,eAAY,MAEtDh7B,EAAAA,EAAAA,IAGK,0BAFHA,EAAAA,EAAAA,IAAiB,UAAb,YAAQ,KACZA,EAAAA,EAAAA,IAAyD,WAAAC,EAAAA,EAAAA,IAAlDC,EAAAs6B,GAAGz5B,EAAAm4B,OAAOqB,uBAAuBU,WAAQ,MAElDj7B,EAAAA,EAAAA,IAGK,0BAFHA,EAAAA,EAAAA,IAAwB,UAApB,mBAAe,KACnBA,EAAAA,EAAAA,IAAgE,WAAAC,EAAAA,EAAAA,IAAzDC,EAAAs6B,GAAGz5B,EAAAm4B,OAAOqB,uBAAuBW,kBAAe,MAEzDl7B,EAAAA,EAAAA,IAGK,0BAFHA,EAAAA,EAAAA,IAAgB,UAAZ,WAAO,KACXA,EAAAA,EAAAA,IAAmE,WAAAC,EAAAA,EAAAA,IAA5DC,EAAAs6B,GAAGz5B,EAAAm4B,OAAOqB,uBAAuBY,qBAAkB,MAE5Dn7B,EAAAA,EAAAA,IAGK,0BAFHA,EAAAA,EAAAA,IAAc,UAAV,SAAK,KACTA,EAAAA,EAAAA,IAA2D,WAAAC,EAAAA,EAAAA,IAApDC,EAAAs6B,GAAGz5B,EAAAm4B,OAAOqB,uBAAuBa,aAAU,MAEpDp7B,EAAAA,EAAAA,IAGK,0BAFHA,EAAAA,EAAAA,IAA0B,UAAtB,qBAAiB,KACrBA,EAAAA,EAAAA,IAAkE,WAAAC,EAAAA,EAAAA,IAA3DC,EAAAs6B,GAAGz5B,EAAAm4B,OAAOqB,uBAAuBc,oBAAiB,UAI/Dr7B,EAAAA,EAAAA,IAKM,MALNgwB,GAKM,EAJJhwB,EAAAA,EAAAA,IAGI,IAHJkwB,GAGI,gBAFFlwB,EAAAA,EAAAA,IAAe,SAAZ,YAAQ,mBACXA,EAAAA,EAAAA,IAAI,sCAAGe,EAAAm4B,OAAOqB,uBAAuBe,SAAO,uBAIlDx7B,EAAAA,EAAAA,IAA0D,MAA1DswB,GAA0B,oCAI9BpwB,EAAAA,EAAAA,IAIM,MAJNqwB,GAIM,EAHJrwB,EAAAA,EAAAA,IAAsG,UAA7FM,QAAKC,EAAA,MAAAA,EAAA,IAAAU,GAAEf,EAAA44B,YAAY/3B,EAAAm4B,QAAQ3pB,OAAOxK,cAAe6L,UAAW7P,EAAAm4B,QAAQ3pB,OAAO,YAAS,EAAAghB,KAC7FvwB,EAAAA,EAAAA,IAAyG,UAAhGM,QAAKC,EAAA,MAAAA,EAAA,IAAAU,GAAEf,EAAA64B,WAAWh4B,EAAAm4B,QAAQ3pB,OAAOxK,cAAe6L,UAAW7P,EAAAm4B,QAAQ3pB,OAAO,gBAAa,EAAAkhB,KAChGzwB,EAAAA,EAAAA,IAA0D,UAAlDH,MAAM,QAASS,QAAKC,EAAA,MAAAA,EAAA,QAAAC,IAAEN,EAAA+4B,cAAA/4B,EAAA+4B,gBAAAz4B,KAAc,cAAK,I,CAc3D,QACEZ,KAAM,yBACNgP,WAAY,CAAE0kB,YAAWA,IACzB9tB,IAAAA,GACE,MAAO,CACLsO,SAAS,EACT8c,iBAAkB,EAClB2C,UAAW,KAGX9tB,QAASC,EAAAA,EAAIC,aAEb4a,MAAO,GACP6I,OAAQ,GACRM,KAAM,EACNM,SAAU,GACVP,aAAc,MACdsO,oBAAoB,EAGpB9H,cAAe,KAGf+I,YAAY,EACZE,OAAQ,KAGRnvB,EAAG,KAEP,EACApB,OAAAA,GACExC,KAAKo1B,eAcLp1B,KAAK2e,WAAU,IAAM3e,KAAKyuB,gBAE1Bt1B,OAAO2a,iBAAiB,SAAU9T,KAAKyuB,aACvCzuB,KAAKotB,UAAY,IAAIsB,gBAAe,IAAM1uB,KAAKyuB,gBAC/C,MAAME,EAAO3uB,KAAK4uB,IAAIC,cAAc,eAChCF,GAAM3uB,KAAKotB,UAAU0B,QAAQH,EACnC,EACA3a,aAAAA,GAGE7a,OAAO+a,oBAAoB,SAAUlU,KAAKyuB,aACtCzuB,KAAKotB,WAAWptB,KAAKotB,UAAU+B,YACrC,EACApvB,SAAU,CACR6iB,WAAAA,GACE,MAAMjZ,EAAiB1Q,aAAa6J,QAAQ,aAC5C,GAAI6G,EACF,IACE,MAAM1B,EAAWC,KAAKC,MAAMwB,GAC5B,MAAyB,UAAlB1B,EAASe,IAClB,CAAE,MAAOY,GAEP,OADAH,QAAQI,MAAM,6CAA8CD,IACrD,CACT,CAEF,OAAO,CACT,EACAioB,cAAAA,GACE,MAAMwD,EAAMvxB,MAAMwQ,QAAQtU,KAAKoa,OAASpa,KAAKoa,MAAQ,GAC/Cvf,GAAKmF,KAAKijB,QAAU,IAAIhe,cAG9B,IAAI7C,EAAMizB,EAAI90B,QAAOH,IACnB,MAAMk1B,EAAM,GAAGl1B,EAAEzC,YAAc,MAAMyC,EAAExB,aAAe,MAAMwB,EAAE4yB,UAAY,KAAK/tB,cAC/E,OAAQpK,GAAKy6B,EAAInwB,SAAStK,MAO5B,MAH0B,QAAtBmF,KAAKsjB,eACPlhB,EAAMA,EAAI7B,QAAOH,GAAKJ,KAAKu1B,UAAUn1B,KAAOJ,KAAKsjB,gBAE5ClhB,CACT,EACAsD,MAAAA,GACE,MAAMnC,EAAM,CAAEmuB,SAAU,EAAGC,WAAY,GACjCrT,EAAW,CAAEoT,SAAU,EAAGC,WAAY,GAG5C,IAAK,MAAMvxB,KAAM0D,MAAMwQ,QAAQtU,KAAKoa,OAASpa,KAAKoa,MAAQ,GAAK,CAC7D,MAAMzY,EAAI3B,KAAKu1B,UAAUn1B,GACzBmD,EAAI5B,IAAM4B,EAAI5B,IAAM,GAAK,CAC3B,CAGA,IAAK,MAAMvB,KAAKJ,KAAK6xB,eAAgB,CACnC,MAAMlwB,EAAI3B,KAAKu1B,UAAUn1B,GACzBke,EAAS3c,IAAM2c,EAAS3c,IAAM,GAAK,CACrC,CACA,MAAO,CAAE4B,MAAK+a,WAChB,EAEAiG,SAAAA,GAEE,MAAO,CACL,CAAE9pB,IAAK,aAAemb,MAAO,QAC7B,CAAEnb,IAAK,cAAemb,MAAO,SAC7B,CAAEnb,IAAK,WAAemb,MAAO,YAC7B,CAAEnb,IAAK,YAAemb,MAAO,wBAC7B,CAAEnb,IAAK,aAAcmb,MAAO,cAE5B,CAAEnb,IAAK,sBAAuBmb,MAAO,sBAAuBgG,OAAQ9Z,GAAKA,EAAI,MAAQ,MACrF,CAAErH,IAAK,gBAAuBmb,MAAO,oBAAuBgG,OAAQ9Z,GAAKA,EAAI,MAAQ,MACrF,CAAErH,IAAK,eAAuBmb,MAAO,0BAA2BgG,OAAQ9Z,GAAKA,EAAI,MAAQ,MAEzF,CAAErH,IAAK,YAAmBmb,MAAO,wBACjC,CAAEnb,IAAK,kBAAmBmb,MAAO,wBAEjC,CAAEnb,IAAK,mBAAoBmb,MAAO,mBAAoBgG,OAAS9Z,GAAM9B,KAAKw1B,cAAc1zB,IAAMA,GAAK,IACnG,CAAErH,IAAK,iBAAoBmb,MAAO,0BAA2BgG,OAAS9Z,GAAM9B,KAAKw1B,cAAc1zB,IAAMA,GAAK,IAC1G,CAAErH,IAAK,iBAAoBmb,MAAO,oBAAqBgG,OAAS9Z,GAAM9B,KAAKw1B,cAAc1zB,IAAMA,GAAK,IACpG,CAAErH,IAAK,iBAAoBmb,MAAO,4BAA6BgG,OAAS9Z,GAAM9B,KAAKw1B,cAAc1zB,IAAMA,GAAK,IAE5G,CAAErH,IAAK,SAAUmb,MAAO,iBAAkBoW,OAASzuB,GAAQyC,KAAKu1B,YAAYh4B,IAAQ,IACpF,CAAE9C,IAAK,oBAAqBmb,MAAO,SAEvC,GAEFjT,QAAS,CACPwY,WAAU,GAEVsT,WAAAA,GACE,MAAME,EAAO3uB,KAAK4uB,IAAIC,cAAc,eAC/BF,IACL3uB,KAAKyqB,iBAAmBkE,EAAKS,YACzBpvB,KAAKsV,MAAM+Z,UACbrvB,KAAKsV,MAAM+Z,QAAQC,WAAaX,EAAKW,YAEzC,EAEAvK,aAAAA,CAAcnb,GACR5J,KAAKsV,MAAM+Z,UACbrvB,KAAKsV,MAAM+Z,QAAQC,WAAa1lB,EAAE8e,OAAO4G,WAE7C,EAEA/E,SAAAA,CAAU3gB,GACR,MAAM+kB,EAAO3uB,KAAK4uB,IAAIC,cAAc,eAChCF,IAAMA,EAAKW,WAAa1lB,EAAE8e,OAAO4G,WACvC,EAEA8F,YAAAA,GAEEp1B,KAAK2N,SAAU,EACf,MAAM+C,EAAS,IAAI+kB,gBAAgB,CACjC56B,EAAGmF,KAAKijB,QAAU,GAClBM,KAAM1e,OAAO7E,KAAKujB,MAClBmS,UAAW7wB,OAAO7E,KAAK6jB,YAGzB7gB,MAAM,GAAGhD,KAAKV,qCAAqCoR,EAAO0S,aAAc,CACtExgB,QAAS,CACPC,cAAe,UAAU5J,aAAa6J,QAAQ,eAC9C,eAAgB,sBAGnBG,MAAKlK,IACJ,KAAID,EAAAA,EAAAA,GAAmBC,GAEvB,OAAOA,EAAImK,UAEZD,MAAK5D,IACJW,KAAKoa,MAAQtW,MAAMwQ,QAAQjV,GAAQA,EAAQyE,MAAMwQ,QAAQjV,EAAK+a,OAAS/a,EAAK+a,MAAQ,MAErFjX,OAAM,KAAQnD,KAAKoa,MAAQ,MAC3B2W,SAAQ,KACP/wB,KAAK2N,SAAU,EACf3N,KAAK2e,WAAU,IAAM3e,KAAKyuB,kBAE9B,EACAgD,cAAAA,GACEjZ,aAAaxY,KAAK4D,GAClB5D,KAAK4D,EAAIqJ,YAAW,KAClBjN,KAAKujB,KAAO,EACZvjB,KAAKo1B,iBACJ,IACL,EACAzR,QAAAA,GAAa3jB,KAAKujB,OAAQvjB,KAAKo1B,cAAgB,EAC/C3R,QAAAA,GAAiBzjB,KAAKujB,KAAO,IAAKvjB,KAAKujB,OAAQvjB,KAAKo1B,eAAkB,EAYtEjD,YAAAA,CAAa50B,EAAK9C,GAEhB,MAAM0F,EAAM,CACViJ,MAAO7L,EAAI20B,iBACXyD,IAAOp4B,EAAI60B,eACXwD,IAAOr4B,EAAIg1B,eACXsD,IAAOt4B,EAAIk1B,gBAEPxrB,EAAQ,IAAI/E,KAAK/B,EAAI1F,IACrB0M,EAAQ,IAAIjF,KAAK3E,EAAIu4B,kBAC3B,OAAO7uB,EAAM8uB,iBAAmB5uB,EAAM4uB,gBAAkB9uB,EAAM+uB,aAAe7uB,EAAM6uB,YAAc/uB,EAAMgvB,eAAiB9uB,EAAM8uB,YAChI,EAEAV,SAAAA,CAAUn1B,GACR,MAAM81B,EAAU91B,GAAG4xB,oBAAsB,EAAI,EACvCmE,EAAU/1B,GAAGiyB,cAAgB,EAAI,EACjC+D,EAAUh2B,GAAGoyB,aAAe,EAAI,EAEhCd,EAAYwE,GAAWC,GAASC,EACtC,OAAO1E,EAAW,WAAa,YACjC,EAYA8D,WAAAA,CAAY1zB,GACV,IAAKA,EAAG,MAAO,GACf,MAAM6C,EAAI,IAAIzC,KAAKJ,GACnB,GAAIyS,MAAM5P,GAAI,OAAO7C,EACrB,MAAMkU,EAAU,CAAEsF,KAAM,UAAWC,MAAO,OAAQC,IAAK,UAAWC,KAAM,UAAWC,OAAQ,WAC3F,OAAO/W,EAAE0xB,eAAe,UAAWrgB,GAAS5R,QAAQ,UAAW,MACjE,EACAiwB,EAAAA,CAAGvyB,GAAK,OAAc,IAANA,GAAoB,IAANA,GAAiB,MAANA,GAAmB,MAANA,GAAmB,MAANA,EAAa,MAAQ,IAAM,EAM9FgwB,WAAAA,CAAYv0B,GAEVyC,KAAK8pB,cAAgB,KACrB9pB,KAAK6yB,YAAa,EAClB7yB,KAAK+yB,OAAS,KAEd,MAAM3hB,EAAWD,mBAAmB5T,EAAIqB,YAAYwF,QAAQ,MAAO,QACnEpB,MAAM,GAAGhD,KAAKV,mCAAmC8R,IAAY,CAC3DxO,QAAS,CACPC,cAAe,UAAU5J,aAAa6J,QAAQ,eAC9C,eAAgB,sBAGjBG,MAAK7C,GAAKA,EAAE8C,SACZD,MAAKoO,IAAarR,KAAK+yB,OAAS1hB,GAAW,CAAC,KAC5ClO,OAAM,QACX,EACA2vB,YAAAA,GACE9yB,KAAK6yB,YAAa,EAClB7yB,KAAK+yB,OAAS,KACd/yB,KAAK8pB,cAAgB,IACvB,EACA8I,UAAAA,CAAWpjB,GAET,GADAxP,KAAK8pB,cAAgB,MAChBta,EAAY,OACjB,MAAM3U,EAAIsW,mBAAmB3B,GACxBxP,KAAK4iB,YAGR5iB,KAAK+J,QAAQvQ,KAAK,gCAAgCqB,KAFlDmF,KAAK+J,QAAQvQ,KAAK,iCAAiCqB,IAIvD,EACA83B,WAAAA,CAAYnjB,GAEV,GADAxP,KAAK8pB,cAAgB,MAChBta,EAAY,OACjB,MAAM3U,EAAIsW,mBAAmB3B,GAC7B/F,QAAQmD,IAAI,cAAe/R,GAC3BmF,KAAK+J,QAAQvQ,KAAK,sBAAsBqB,IAC1C,IC5pBJ,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,U,0ICPIhB,EAAAA,EAAAA,IAAqB,UAAjB,gBAAY,KAEhBA,EAAAA,EAAAA,IAAkF,UAAzEM,QAAKC,EAAA,KAAAA,EAAA,GAAAU,GAAEuT,EAAAtE,QAAQvQ,KAAK,yBAAwB,wBAE1CoB,EAAA0S,OAAI,WAAf3T,EAAAA,EAAAA,IAuCI,MAAAC,GAAA,CAtCkB,WAATgB,EAAAoO,OAAI,WAAfrP,EAAAA,EAAAA,IAKI,MAAAO,GAAA,cAJJL,EAAAA,EAAAA,IAAuB,UAAnB,kBAAc,KAClBA,EAAAA,EAAAA,IAA6D,uBAA1DA,EAAAA,EAAAA,IAAuB,cAAf,UAAM,aAAS,KAACC,EAAAA,EAAAA,IAAGc,EAAA0S,KAAKuB,cAAgB,KAAJ,MAC/ChV,EAAAA,EAAAA,IAA2D,uBAAxDA,EAAAA,EAAAA,IAAsB,cAAd,SAAK,aAAS,KAACC,EAAAA,EAAAA,IAAGc,EAAA0S,KAAKyB,aAAe,KAAJ,MAC7ClV,EAAAA,EAAAA,IAAgE,uBAA7DA,EAAAA,EAAAA,IAA8B,cAAtB,iBAAa,aAAS,KAACC,EAAAA,EAAAA,IAAGc,EAAA0S,KAAKU,UAAY,KAAJ,QAG3B,UAATpT,EAAAoO,OAAI,WAApBrP,EAAAA,EAAAA,IAsBM,MAAAgB,GAAA,gBArBJd,EAAAA,EAAAA,IAAsB,UAAlB,iBAAa,KACjBA,EAAAA,EAAAA,IAA6C,uBAA1CA,EAAAA,EAAAA,IAAsB,cAAd,SAAK,aAAS,KAACC,EAAAA,EAAAA,IAAGc,EAAA0S,KAAKtE,MAAI,MACtCnP,EAAAA,EAAAA,IAAuD,uBAApDA,EAAAA,EAAAA,IAA2B,cAAnB,cAAU,aAAS,KAACC,EAAAA,EAAAA,IAAGc,EAAA0S,KAAKgpB,WAAS,MAChDz8B,EAAAA,EAAAA,IAAqD,uBAAlDA,EAAAA,EAAAA,IAAuB,cAAf,UAAM,aAAS,KAACC,EAAAA,EAAAA,IAAGc,EAAA0S,KAAK1O,aAAW,MAC9C/E,EAAAA,EAAAA,IAA0D,uBAAvDA,EAAAA,EAAAA,IAAsB,cAAd,SAAK,aAAS,KAACC,EAAAA,EAAAA,IAAGc,EAAA0S,KAAK3P,YAAc,KAAJ,MAC5C9D,EAAAA,EAAAA,IAAgE,uBAA7DA,EAAAA,EAAAA,IAA4B,cAApB,eAAW,aAAS,KAACC,EAAAA,EAAAA,IAAGc,EAAA0S,KAAK8Y,YAAc,KAAJ,MAClDvsB,EAAAA,EAAAA,IAAkE,yBAA/DA,EAAAA,EAAAA,IAA8B,cAAtB,iBAAa,aAAS,KAACC,EAAAA,EAAAA,IAAGc,EAAA0S,KAAKkZ,YAAc,KAAJ,MACpD3sB,EAAAA,EAAAA,IAAwE,yBAArEA,EAAAA,EAAAA,IAAgC,cAAxB,mBAAe,aAAS,KAACC,EAAAA,EAAAA,IAAGc,EAAA0S,KAAKipB,gBAAkB,KAAJ,MAC1D18B,EAAAA,EAAAA,IAAkD,yBAA/CA,EAAAA,EAAAA,IAAqB,cAAb,QAAI,aAAS,KAACC,EAAAA,EAAAA,IAAGc,EAAA0S,KAAKwmB,KAAO,KAAJ,MACpCj6B,EAAAA,EAAAA,IAAsE,yBAAnEA,EAAAA,EAAAA,IAA+B,cAAvB,kBAAc,aAAS,KAACC,EAAAA,EAAAA,IAAGc,EAAA0S,KAAKkpB,eAAiB,KAAJ,MACxD38B,EAAAA,EAAAA,IAAqE,yBAAlEA,EAAAA,EAAAA,IAA+B,cAAvB,kBAAc,aAAS,KAACC,EAAAA,EAAAA,IAAGc,EAAA0S,KAAKymB,cAAgB,KAAJ,MACvDl6B,EAAAA,EAAAA,IAAkD,yBAA/CA,EAAAA,EAAAA,IAAqB,cAAb,QAAI,aAAS,KAACC,EAAAA,EAAAA,IAAGc,EAAA0S,KAAKmpB,KAAO,KAAJ,MACpC58B,EAAAA,EAAAA,IAAkE,yBAA/DA,EAAAA,EAAAA,IAA6B,cAArB,gBAAY,aAAS,KAACC,EAAAA,EAAAA,IAAGc,EAAA0S,KAAKopB,aAAe,KAAJ,MACpD78B,EAAAA,EAAAA,IAAkE,yBAA/DA,EAAAA,EAAAA,IAA6B,cAArB,gBAAY,aAAS,KAACC,EAAAA,EAAAA,IAAGc,EAAA0S,KAAK2lB,aAAe,KAAJ,MACpDp5B,EAAAA,EAAAA,IAA8D,yBAA3DA,EAAAA,EAAAA,IAA2B,cAAnB,cAAU,aAAS,KAACC,EAAAA,EAAAA,IAAGc,EAAA0S,KAAKS,WAAa,KAAJ,MAChDlU,EAAAA,EAAAA,IAA4D,yBAAzDA,EAAAA,EAAAA,IAA0B,cAAlB,aAAS,aAAS,KAACC,EAAAA,EAAAA,IAAGc,EAAA0S,KAAK0lB,UAAY,KAAJ,MAC9Cn5B,EAAAA,EAAAA,IAA4D,yBAAzDA,EAAAA,EAAAA,IAA0B,cAAlB,aAAS,aAAS,KAACC,EAAAA,EAAAA,IAAGc,EAAA0S,KAAKU,UAAY,KAAJ,MAC9CnU,EAAAA,EAAAA,IAA0D,yBAAvDA,EAAAA,EAAAA,IAAyB,cAAjB,YAAQ,aAAS,KAACC,EAAAA,EAAAA,IAAGc,EAAA0S,KAAK4lB,SAAW,KAAJ,MAC5Cr5B,EAAAA,EAAAA,IAAwF,yBAArFA,EAAAA,EAAAA,IAAuC,cAA/B,0BAAsB,aAAS,KAACC,EAAAA,EAAAA,IAAGc,EAAA0S,KAAK2kB,uBAAyB,OAAJ,MACxEp4B,EAAAA,EAAAA,IAA4E,yBAAzEA,EAAAA,EAAAA,IAAiC,cAAzB,oBAAgB,aAAS,KAACC,EAAAA,EAAAA,IAAGc,EAAA0S,KAAKqpB,iBAAmB,OAAJ,MAC5D98B,EAAAA,EAAAA,IAAiF,yBAA9EA,EAAAA,EAAAA,IAAwC,cAAhC,2BAAuB,aAAS,KAACC,EAAAA,EAAAA,IAAGc,EAAA0S,KAAKspB,wBAAsB,QAGnD,UAATh8B,EAAAoO,OAAI,WAApBrP,EAAAA,EAAAA,IAMQ,MAAA2B,GAAA,gBALNzB,EAAAA,EAAAA,IAAsB,UAAlB,iBAAa,KACjBA,EAAAA,EAAAA,IAA4D,yBAAzDA,EAAAA,EAAAA,IAAuB,cAAf,UAAM,aAAS,KAACC,EAAAA,EAAAA,IAAGc,EAAA0S,KAAKwB,aAAe,KAAJ,MAC9CjV,EAAAA,EAAAA,IAA0D,yBAAvDA,EAAAA,EAAAA,IAAsB,cAAd,SAAK,aAAS,KAACC,EAAAA,EAAAA,IAAGc,EAAA0S,KAAK0B,YAAc,KAAJ,MAC5CnV,EAAAA,EAAAA,IAAgE,yBAA7DA,EAAAA,EAAAA,IAA4B,cAApB,eAAW,aAAS,KAACC,EAAAA,EAAAA,IAAGc,EAAA0S,KAAKb,YAAc,KAAJ,MAClD5S,EAAAA,EAAAA,IAA4D,yBAAzDA,EAAAA,EAAAA,IAA0B,cAAlB,aAAS,aAAS,KAACC,EAAAA,EAAAA,IAAGc,EAAA0S,KAAKU,UAAY,KAAJ,wCAGlDrU,EAAAA,EAAAA,IAEM,MAAA0M,GAAAjM,EAAA,MAAAA,EAAA,MADFP,EAAAA,EAAAA,IAA2B,SAAxB,wBAAoB,W,CAO7B,QACEwF,IAAAA,GACE,MAAO,CACLC,QAASC,EAAAA,EAAIC,aACb8N,KAAM,KACNtE,KAAM,GAEV,EACAxG,OAAAA,GACE,MAAM2B,EAASnE,KAAK4P,OAAOc,OAAOvM,MAAOC,QAAQ,MAAO,OACxDpE,KAAK4hB,cAAczd,EACrB,EACAxB,QAAS,CACP,mBAAMif,CAAczd,GAClB,IACE,MAAMod,QAAiBve,MAAM,GAAGhD,KAAKV,2BAA2B6E,IAAS,CACrE0I,OAAQ,MACRjK,QAAS,CACL,cAAiB,UAAU3J,aAAa6J,QAAQ,eAChD,eAAgB,sBAIlBzD,QAAakiB,EAASre,OACxBqe,EAASxU,IACX/M,KAAKsN,KAAOjO,EACZW,KAAKgJ,KAAO3J,EAAK2J,OACRlQ,EAAAA,EAAAA,GAAmByoB,IAG5BjoB,MAAM,6BAA+B+F,EAAKwK,MAE9C,CAAE,MAAOA,GACPJ,QAAQI,MAAM,SAAUA,GACxBvQ,MAAM,2BACR,CACF,ICrFJ,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,SAAS,MAEpE,U,UCAWI,MAAM,U,IAgCFA,MAAM,a,IACJA,MAAM,S,IAKNA,MAAM,S,IAUNA,MAAM,S,IAQNA,MAAM,S,IAWNA,MAAM,S,IAKNA,MAAM,S,IAKNA,MAAM,S,IAKNA,MAAM,S,IAKNA,MAAM,S,IAKNA,MAAM,S,IAkBNA,MAAM,S,IAKNA,MAAM,S,IAKNA,MAAM,gB,IAKNA,MAAM,S,IAKNA,MAAM,S,IAKNA,MAAM,S,IAKNA,MAAM,S,IAKNA,MAAM,gB,IAURA,MAAM,iB,6FAjKnBC,EAAAA,EAAAA,IA4KM,2BA3KJE,EAAAA,EAAAA,IAAmC,UAA/B,8BAA0B,KAE9BA,EAAAA,EAAAA,IAA2D,UAAnDH,MAAM,aAAcS,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAEN,EAAA88B,WAAA98B,EAAA88B,aAAAx8B,KAAW,SAG9CR,EAAAA,EAAAA,IAuBQ,QAvBRD,GAuBQ,EAtBNC,EAAAA,EAAAA,IAqBQ,eApBNA,EAAAA,EAAAA,IAA8E,0BAA1EA,EAAAA,EAAAA,IAA0B,YAAtBA,EAAAA,EAAAA,IAAiB,SAAd,gBAAU,+BAAUA,EAAAA,EAAAA,IAA0C,WAAAC,EAAAA,EAAAA,IAAnCc,EAAAk8B,UAAUn5B,YAAc,KAAJ,MAC1D9D,EAAAA,EAAAA,IAA2E,0BAAvEA,EAAAA,EAAAA,IAAsB,YAAlBA,EAAAA,EAAAA,IAAa,SAAV,YAAM,+BAAUA,EAAAA,EAAAA,IAA2C,WAAAC,EAAAA,EAAAA,IAApCc,EAAAk8B,UAAUl4B,aAAe,KAAJ,MACvD/E,EAAAA,EAAAA,IAAgG,0BAA5FA,EAAAA,EAAAA,IAAgC,YAA5BA,EAAAA,EAAAA,IAAuB,SAApB,sBAAgB,+BAAUA,EAAAA,EAAAA,IAAsD,WAAAC,EAAAA,EAAAA,IAA/CC,EAAAohB,WAAWvgB,EAAAk8B,UAAUtQ,aAAe,KAAL,MAC3E3sB,EAAAA,EAAAA,IAA6K,0BAAzKA,EAAAA,EAAAA,IAA+B,YAA3BA,EAAAA,EAAAA,IAAsB,SAAnB,qBAAe,+BAAUA,EAAAA,EAAAA,IAAoI,WAAAC,EAAAA,EAAAA,IAA7Hc,EAAAk8B,UAAUP,eAAiB37B,EAAAk8B,UAAUP,eAAehoB,OAAO,GAAGC,cAAgB5T,EAAAk8B,UAAUP,eAAej5B,MAAM,GAAK,KAAN,MACvJzD,EAAAA,EAAAA,IAAuH,0BAAnHA,EAAAA,EAAAA,IAAuB,YAAnBA,EAAAA,EAAAA,IAAc,SAAX,aAAO,+BAAUA,EAAAA,EAAAA,IAAsF,WAAAC,EAAAA,EAAAA,IAA7D,MAAlBc,EAAAk8B,UAAUhD,IAAc,OAA2B,MAAlBl5B,EAAAk8B,UAAUhD,IAAc,SAAW,KAAtB,MACjFj6B,EAAAA,EAAAA,IAAsG,0BAAlGA,EAAAA,EAAAA,IAA8B,YAA1BA,EAAAA,EAAAA,IAAqB,SAAlB,oBAAc,+BAAUA,EAAAA,EAAAA,IAA8D,WAAAC,EAAAA,EAAAA,IAAvDC,EAAAkhB,gBAAgBrgB,EAAAk8B,UAAUN,gBAAkB,KAAL,MACjF38B,EAAAA,EAAAA,IAAmF,0BAA/EA,EAAAA,EAAAA,IAA6B,YAAzBA,EAAAA,EAAAA,IAAoB,SAAjB,mBAAa,+BAAUA,EAAAA,EAAAA,IAA4C,WAAAC,EAAAA,EAAAA,IAArCc,EAAAk8B,UAAU/C,cAAgB,KAAJ,MAC/Dl6B,EAAAA,EAAAA,IAAiE,0BAA7DA,EAAAA,EAAAA,IAAoB,YAAhBA,EAAAA,EAAAA,IAAW,SAAR,UAAI,+BAAUA,EAAAA,EAAAA,IAAmC,WAAAC,EAAAA,EAAAA,IAA5Bc,EAAAk8B,UAAUL,KAAO,KAAJ,MAC7C58B,EAAAA,EAAAA,IAAiF,0BAA7EA,EAAAA,EAAAA,IAA4B,YAAxBA,EAAAA,EAAAA,IAAmB,SAAhB,kBAAY,+BAAUA,EAAAA,EAAAA,IAA2C,WAAAC,EAAAA,EAAAA,IAApCc,EAAAk8B,UAAUJ,aAAe,KAAJ,MAC7D78B,EAAAA,EAAAA,IAAiF,0BAA7EA,EAAAA,EAAAA,IAA4B,YAAxBA,EAAAA,EAAAA,IAAmB,SAAhB,kBAAY,+BAAUA,EAAAA,EAAAA,IAA2C,WAAAC,EAAAA,EAAAA,IAApCc,EAAAk8B,UAAU7D,aAAe,KAAJ,MAC7Dp5B,EAAAA,EAAAA,IAAwF,0BAApFA,EAAAA,EAAAA,IAAqC,YAAjCA,EAAAA,EAAAA,IAA4B,SAAzB,2BAAqB,+BAAUA,EAAAA,EAAAA,IAAyC,WAAAC,EAAAA,EAAAA,IAAlCc,EAAAk8B,UAAU/oB,WAAa,KAAJ,MACpElU,EAAAA,EAAAA,IAA+E,0BAA3EA,EAAAA,EAAAA,IAA2B,YAAvBA,EAAAA,EAAAA,IAAkB,SAAf,iBAAW,+BAAUA,EAAAA,EAAAA,IAA0C,WAAAC,EAAAA,EAAAA,IAAnCc,EAAAk8B,UAAUrqB,YAAc,KAAJ,MAC3D5S,EAAAA,EAAAA,IAA2E,0BAAvEA,EAAAA,EAAAA,IAAyB,YAArBA,EAAAA,EAAAA,IAAgB,SAAb,eAAS,+BAAUA,EAAAA,EAAAA,IAAwC,WAAAC,EAAAA,EAAAA,IAAjCc,EAAAk8B,UAAU9D,UAAY,KAAJ,MACvDn5B,EAAAA,EAAAA,IAA2E,0BAAvEA,EAAAA,EAAAA,IAAyB,YAArBA,EAAAA,EAAAA,IAAgB,SAAb,eAAS,+BAAUA,EAAAA,EAAAA,IAAwC,WAAAC,EAAAA,EAAAA,IAAjCc,EAAAk8B,UAAU9oB,UAAY,KAAJ,MACvDnU,EAAAA,EAAAA,IAAyE,0BAArEA,EAAAA,EAAAA,IAAwB,YAApBA,EAAAA,EAAAA,IAAe,SAAZ,cAAQ,+BAAUA,EAAAA,EAAAA,IAAuC,WAAAC,EAAAA,EAAAA,IAAhCc,EAAAk8B,UAAU5D,SAAW,KAAJ,MACrDr5B,EAAAA,EAAAA,IAAqG,0BAAjGA,EAAAA,EAAAA,IAAsC,YAAlCA,EAAAA,EAAAA,IAA6B,SAA1B,4BAAsB,+BAAUA,EAAAA,EAAAA,IAAqD,WAAAC,EAAAA,EAAAA,IAA9Cc,EAAAk8B,UAAU7E,uBAAyB,KAAJ,MACjFp4B,EAAAA,EAAAA,IAA2F,0BAAvFA,EAAAA,EAAAA,IAAkC,YAA9BA,EAAAA,EAAAA,IAAyB,SAAtB,wBAAkB,+BAAUA,EAAAA,EAAAA,IAA+C,WAAAC,EAAAA,EAAAA,IAAxCc,EAAAk8B,UAAUH,iBAAmB,KAAJ,MACvE98B,EAAAA,EAAAA,IAAuG,0BAAnGA,EAAAA,EAAAA,IAAuC,YAAnCA,EAAAA,EAAAA,IAA8B,SAA3B,6BAAuB,+BAAUA,EAAAA,EAAAA,IAAsD,WAAAC,EAAAA,EAAAA,IAA/Cc,EAAAk8B,UAAUF,wBAA0B,KAAJ,MACnF/8B,EAAAA,EAAAA,IAAoI,0BAAhIA,EAAAA,EAAAA,IAAkD,YAA9CA,EAAAA,EAAAA,IAAyC,SAAtC,wCAAkC,+BAAUA,EAAAA,EAAAA,IAAwE,WAAAC,EAAAA,EAAAA,IAAjEC,EAAAkhB,gBAAgBrgB,EAAAk8B,UAAUC,0BAA4B,KAAL,MAC/Gl9B,EAAAA,EAAAA,IAA0H,0BAAtHA,EAAAA,EAAAA,IAAwC,YAApCA,EAAAA,EAAAA,IAA+B,SAA5B,8BAAwB,+BAAUA,EAAAA,EAAAA,IAAwE,WAAAC,EAAAA,EAAAA,IAAjEC,EAAAkhB,gBAAgBrgB,EAAAk8B,UAAUE,0BAA4B,KAAL,SAO9Fp8B,EAAAq8B,cAAW,WAAtBt9B,EAAAA,EAAAA,IAwIM,O,MAxIkBD,MAAM,gBAAiBS,QAAKC,EAAA,MAAAA,EAAA,QAAAC,IAAEN,EAAAm9B,YAAAn9B,EAAAm9B,cAAA78B,K,EACpDR,EAAAA,EAAAA,IAsIM,OAtIDH,MAAM,gBAAiBS,QAAKC,EAAA,MAAAA,EAAA,KAAA8P,EAAAA,EAAAA,KAAN,QAAW,Y,gBACpCrQ,EAAAA,EAAAA,IAAwC,UAApC,mCAA+B,KACnCA,EAAAA,EAAAA,IAmIO,QAnIAoQ,SAAM7P,EAAA,MAAAA,EAAA,KAAA8P,EAAAA,EAAAA,KAAA,IAAA7P,IAAUN,EAAAo9B,iBAAAp9B,EAAAo9B,mBAAA98B,IAAe,e,EACpCR,EAAAA,EAAAA,IAyHM,MAzHNK,GAyHM,EAxHJL,EAAAA,EAAAA,IAGM,MAHNc,GAGM,gBAFJd,EAAAA,EAAAA,IAAwB,aAAjB,aAAS,cAChBA,EAAAA,EAAAA,IAA8D,SAAvDkB,KAAK,O,qCAAgBH,EAAAw8B,WAAWz5B,WAAU7C,GAAEwP,SAAA,I,iBAAvB1P,EAAAw8B,WAAWz5B,iBAGzC9D,EAAAA,EAAAA,IAQM,MARNyB,GAQM,gBAPJzB,EAAAA,EAAAA,IAA6B,aAAtB,kBAAc,cACrBA,EAAAA,EAAAA,IAKS,UALDuU,MAAA,uB,qCAAmCxT,EAAAw8B,WAAWb,eAAcz7B,I,gBAClEjB,EAAAA,EAAAA,IAAsC,UAA9B2M,MAAM,UAAS,UAAM,IAC7B3M,EAAAA,EAAAA,IAAwC,UAAhC2M,MAAM,WAAU,WAAO,IAC/B3M,EAAAA,EAAAA,IAA0C,UAAlC2M,MAAM,YAAW,YAAQ,iBAHQ5L,EAAAw8B,WAAWb,qBAQxD18B,EAAAA,EAAAA,IAMM,MANNwM,GAMM,gBALJxM,EAAAA,EAAAA,IAAqB,aAAd,UAAM,cACbA,EAAAA,EAAAA,IAGS,UAHDuU,MAAA,uB,qCAAmCxT,EAAAw8B,WAAWtD,IAAGh5B,I,gBACvDjB,EAAAA,EAAAA,IAA+B,UAAvB2M,MAAM,KAAI,QAAI,IACtB3M,EAAAA,EAAAA,IAAiC,UAAzB2M,MAAM,KAAI,UAAM,iBAFiB5L,EAAAw8B,WAAWtD,UAMxDj6B,EAAAA,EAAAA,IASM,MATNgC,GASM,gBARJhC,EAAAA,EAAAA,IAA4B,aAArB,iBAAa,KACpBgS,EAAAA,EAAAA,IAME8O,EAAA,C,WALW/f,EAAAw8B,WAAWZ,c,qCAAX57B,EAAAw8B,WAAWZ,cAAa17B,GAChC,WAAQ,IAAMoH,KACd,aAAU,WAAaA,MAAO0C,eAC/B,gBACC,sBAAoB,G,kDAI3B/K,EAAAA,EAAAA,IAGM,MAHNiC,GAGM,gBAFJjC,EAAAA,EAAAA,IAA2B,aAApB,gBAAY,cACnBA,EAAAA,EAAAA,IAAyF,SAAlFkB,KAAK,S,qCAAyBH,EAAAw8B,WAAWrD,aAAYj5B,GAAGqX,QAAK/X,EAAA,KAAAA,EAAA,OAAAC,IAAEN,EAAAs9B,iBAAAt9B,EAAAs9B,mBAAAh9B,K,iBAAjCO,EAAAw8B,WAAWrD,kBAAY,GAA/B1hB,QAAR,SAGvBxY,EAAAA,EAAAA,IAGM,MAHNoC,GAGM,gBAFJpC,EAAAA,EAAAA,IAAkB,aAAX,OAAG,cACVA,EAAAA,EAAAA,IAAuD,SAAhDkB,KAAK,S,qCAAyBH,EAAAw8B,WAAWX,IAAG37B,I,iBAAdF,EAAAw8B,WAAWX,SAAG,GAAtBpkB,QAAR,SAGvBxY,EAAAA,EAAAA,IAGM,MAHNqC,GAGM,gBAFJrC,EAAAA,EAAAA,IAA8E,uBAAvE,mBAAcA,EAAAA,EAAAA,IAAiD,SAA1CH,MAAM,WAAU,wBAAkB,cAC9DG,EAAAA,EAAAA,IAA6E,SAAtEkB,KAAK,O,qCAAgBH,EAAAw8B,WAAWV,YAAW57B,GAAEw8B,QAAQ,gB,iBAAhC18B,EAAAw8B,WAAWV,kBAGzC78B,EAAAA,EAAAA,IAGM,MAHNsC,GAGM,gBAFJtC,EAAAA,EAAAA,IAA0B,aAAnB,eAAW,cAClBA,EAAAA,EAAAA,IAAsD,SAA/CkB,KAAK,O,qCAAgBH,EAAAw8B,WAAWnE,YAAWn4B,I,iBAAtBF,EAAAw8B,WAAWnE,kBAGzCp5B,EAAAA,EAAAA,IAGM,MAHNuC,GAGM,gBAFJvC,EAAAA,EAAAA,IAAmC,aAA5B,wBAAoB,cAC3BA,EAAAA,EAAAA,IAAoD,SAA7CkB,KAAK,O,uCAAgBH,EAAAw8B,WAAWrpB,UAASjT,I,iBAApBF,EAAAw8B,WAAWrpB,gBAGzClU,EAAAA,EAAAA,IAgBM,MAhBN0C,GAgBM,gBAfJ1C,EAAAA,EAAAA,IAAyB,aAAlB,cAAU,cACjBA,EAAAA,EAAAA,IAaS,UAbDuU,MAAA,uB,uCAAmCxT,EAAAw8B,WAAW3qB,WAAU3R,GAAEwP,SAAA,I,yqBAAvB1P,EAAAw8B,WAAW3qB,iBAgBxD5S,EAAAA,EAAAA,IAGM,MAHN2C,GAGM,gBAFJ3C,EAAAA,EAAAA,IAAuB,aAAhB,YAAQ,cACfA,EAAAA,EAAAA,IAAmD,SAA5CkB,KAAK,O,uCAAgBH,EAAAw8B,WAAWpE,SAAQl4B,I,iBAAnBF,EAAAw8B,WAAWpE,eAGzCn5B,EAAAA,EAAAA,IAGM,MAHN4C,GAGM,gBAFJ5C,EAAAA,EAAAA,IAAuB,aAAhB,YAAQ,cACfA,EAAAA,EAAAA,IAAmD,SAA5CkB,KAAK,O,uCAAgBH,EAAAw8B,WAAWppB,SAAQlT,I,iBAAnBF,EAAAw8B,WAAWppB,eAGzCnU,EAAAA,EAAAA,IAGM,MAHN8C,GAGM,gBAFJ9C,EAAAA,EAAAA,IAAsB,aAAf,WAAO,cACdA,EAAAA,EAAAA,IAAkD,SAA3CkB,KAAK,O,uCAAgBH,EAAAw8B,WAAWlE,QAAOp4B,I,iBAAlBF,EAAAw8B,WAAWlE,cAGzCr5B,EAAAA,EAAAA,IAGM,MAHN+C,GAGM,gBAFJ/C,EAAAA,EAAAA,IAAoC,aAA7B,yBAAqB,cAC5BA,EAAAA,EAAAA,IAA0F,SAAnFkB,KAAK,O,uCAAgBH,EAAAw8B,WAAWnF,sBAAqBn3B,GAAE+S,SAAA,GAASnU,MAAM,Y,iBAAjDkB,EAAAw8B,WAAWnF,4BAGzCp4B,EAAAA,EAAAA,IAGM,MAHNgD,GAGM,gBAFJhD,EAAAA,EAAAA,IAAgC,aAAzB,qBAAiB,cACxBA,EAAAA,EAAAA,IAAoF,SAA7EkB,KAAK,O,uCAAgBH,EAAAw8B,WAAWT,gBAAe77B,GAAE+S,SAAA,GAASnU,MAAM,Y,iBAA3CkB,EAAAw8B,WAAWT,sBAGzC98B,EAAAA,EAAAA,IAGM,MAHNkD,GAGM,gBAFJlD,EAAAA,EAAAA,IAAgD,aAAzC,qCAAiC,cACxCA,EAAAA,EAAAA,IAA4F,SAArFkB,KAAK,O,uCAAgBH,EAAAw8B,WAAWL,wBAAuBj8B,GAAE+S,SAAA,GAASnU,MAAM,Y,iBAAnDkB,EAAAw8B,WAAWL,8BAGzCl9B,EAAAA,EAAAA,IAGM,MAHNmD,GAGM,gBAFJnD,EAAAA,EAAAA,IAAsC,aAA/B,2BAAuB,cAC9BA,EAAAA,EAAAA,IAA4F,SAArFkB,KAAK,O,uCAAgBH,EAAAw8B,WAAWJ,wBAAuBl8B,GAAE+S,SAAA,GAASnU,MAAM,Y,iBAAnDkB,EAAAw8B,WAAWJ,8BAGzCn9B,EAAAA,EAAAA,IAOM,MAPNoD,GAOM,gBANJpD,EAAAA,EAAAA,IAAqC,aAA9B,0BAAsB,cAC7BA,EAAAA,EAAAA,IAIS,UAJDuU,MAAA,uB,uCAAmCxT,EAAAw8B,WAAWR,uBAAsB97B,GAAEwP,SAAA,I,gBAC5EzQ,EAAAA,EAAAA,IAAsD,UAA9C2M,MAAM,kBAAiB,kBAAc,IAC7C3M,EAAAA,EAAAA,IAAwF,UAAhF2M,MAAM,mCAAkC,mCAA+B,iBAFtC5L,EAAAw8B,WAAWR,+BAQ1D/8B,EAAAA,EAAAA,IAKM,MALNsD,GAKM,EAJJtD,EAAAA,EAAAA,IAES,UAFDkB,KAAK,SAASrB,MAAM,aAAc+Q,UAAW1Q,EAAA4nB,gBAAgB,iBAErE,EAAAvkB,KACAvD,EAAAA,EAAAA,IAA4E,UAApEkB,KAAK,SAASrB,MAAM,aAAcS,QAAKC,EAAA,MAAAA,EAAA,QAAAC,IAAEN,EAAAm9B,YAAAn9B,EAAAm9B,cAAA78B,KAAY,aAAM,0B,CAiB/E,QACEoO,WAAY,CAAEyU,cAAaA,GAAAA,GAC3BzjB,KAAM,kBACN4F,IAAAA,GACE,MAAO,CACLC,QAASC,EAAAA,EAAIC,aACby3B,aAAa,EACbH,UAAW,CACTR,UAAW,GACX13B,YAAa,GACbjB,WAAY,GACZ6oB,WAAY,GACZ+P,eAAgB,GAChBzC,IAAK,GACL0C,cAAe,KACfzC,aAAc,KACd0C,IAAK,KACLC,YAAa,GACbzD,YAAa,GACbllB,UAAW,GACXtB,WAAY,GACZumB,SAAU,GACVhlB,SAAU,GACVklB,QAAS,GACTjB,sBAAuB,GACvB0E,gBAAiB,GACjBC,uBAAwB,GACxBG,wBAAyB,GACzBC,wBAAyB,IAE3BO,kBAAmB,KACnBH,WAAY,CAAC,EAEjB,EACAr3B,SAAU,CAERy3B,aAAAA,GACE,IAAKx3B,KAAKu3B,kBAAmB,OAAO,EACpC,MAAME,EAAS,CACb,aAAa,iBAAiB,MAAM,gBAAgB,eAAe,MACnE,cAAc,cAAc,YAAY,aAAa,WAAW,WAAW,UAC3E,wBAAwB,kBAAkB,0BAE5C,OAAOA,EAAO3xB,MAAK4xB,GAAK13B,KAAK82B,UAAUY,KAAO13B,KAAKu3B,kBAAkBG,IACvE,EAEA/V,cAAAA,GACE,IAAK3hB,KAAKu3B,kBAAmB,OAAO,EACpC,MAAME,EAAS,CACb,aAAa,iBAAiB,MAAM,gBAAgB,eAAe,MACnE,cAAc,cAAc,YAAY,aAAa,WAAW,WAAW,UAC3E,wBAAwB,kBAAkB,0BAE5C,OAAOA,EAAO3xB,MAAK4xB,GAAK13B,KAAKo3B,WAAWM,KAAO13B,KAAKu3B,kBAAkBG,IACxE,GAsCFl1B,OAAAA,GACExC,KAAK23B,gBACP,EACAh1B,QAAS,CACPsY,gBAAe,GAAEE,WAAU,GAC3Bwc,cAAAA,GACE,MAAM1vB,EAAWhP,aAAa6J,QAAQ,aACtC,IAAKmF,EAAU,OAEf,MAAM2vB,EAAmB53B,KAAK4P,OAAOc,OAAOlB,YAActH,KAAKC,MAAMlP,aAAa6J,QAAQ,cAAcqB,OAAS,GAC3GyK,EAAgBgpB,EAAiBxzB,QAAQ,MAAO,OACtDpB,MAAM,GAAGhD,KAAKV,sBAAsB6R,mBAAmBvC,KAAkB,CACvE/B,OAAQ,MACRjK,QAAS,CACPC,cAAe,UAAU5J,aAAa6J,QAAQ,eAC9C,eAAgB,sBAGnBG,MAAKlK,IACJ,KAAID,EAAAA,EAAAA,GAAmBC,GAEvB,OAAOA,EAAImK,UAEZD,MAAK5D,IACJW,KAAK82B,UAAYz3B,GAAQ,CAAC,EAE1BW,KAAKu3B,kBAAoBrvB,KAAKC,MAAMD,KAAK4E,UAAU9M,KAAK82B,eAEzD3zB,OAAM+J,IACLzD,QAAQI,MAAM,6BAA8BqD,GAC5C5T,MAAM,iCAEV,EAEAu9B,SAAAA,GACE72B,KAAKo3B,WAAalvB,KAAKC,MAAMD,KAAK4E,UAAU9M,KAAK82B,YACjD92B,KAAKi3B,aAAc,CACrB,EACAC,UAAAA,GACEl3B,KAAKi3B,aAAc,EAEnBj3B,KAAKo3B,WAAalvB,KAAKC,MAAMD,KAAK4E,UAAU9M,KAAK82B,WACnD,EAGAO,eAAAA,GACE,MAAMz7B,EAAImJ,OAAO/E,KAAKo3B,WAAWrD,cACjC,GAAIn4B,GAAKA,EAAI,KAAM,CACjB,MAAMi8B,EAAM,IAAI31B,KACVu0B,EAAMoB,EAAIjzB,cAAgBhJ,EAEhCoE,KAAKo3B,WAAWX,IAAMA,CACxB,CACF,EAEAU,eAAAA,GAEE,MAAMvoB,GAAiB5O,KAAKo3B,WAAWx4B,aAAeoB,KAAK82B,UAAUl4B,aAAe,IACjFwF,QAAQ,MAAO,OAElBpB,MAAM,GAAGhD,KAAKV,2BAA2BsP,IAAiB,CACxD/B,OAAQ,OACRjK,QAAS,CACPC,cAAe,UAAU5J,aAAa6J,QAAQ,eAC9C,eAAgB,oBAElBqJ,KAAMjE,KAAK4E,UAAU9M,KAAKo3B,cAE3Bn0B,MAAKlK,GAAOA,EAAImK,SAChBD,MAAK,KACJ3J,MAAM,sCACN0G,KAAKi3B,aAAc,EAEnBj3B,KAAK23B,oBAENx0B,OAAM+J,IACLzD,QAAQI,MAAM,6BAA8BqD,GAC5C5T,MAAM,4BAEV,IC3VJ,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,U,UCekByB,KAAK,U,oFAvBrBpB,EAAAA,EAAAA,IAqEM,2BApEJE,EAAAA,EAAAA,IAA6B,UAAzB,wBAAoB,IAGbe,EAAAq8B,cAAW,WAAtBt9B,EAAAA,EAAAA,IAuBM,O,MAvBkBD,MAAM,yBAA0BS,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAEN,EAAAm9B,YAAAn9B,EAAAm9B,cAAA78B,K,EAC7DR,EAAAA,EAAAA,IAqBM,OArBDH,MAAM,yBAA0BS,QAAKC,EAAA,KAAAA,EAAA,IAAA8P,EAAAA,EAAAA,KAAN,QAAW,Y,EAC7CrQ,EAAAA,EAAAA,IAA4F,WAAAC,EAAAA,EAAAA,IAArFc,EAAAk9B,eAAiB,4BAA8B,gCAAjC,IACrBj+B,EAAAA,EAAAA,IAkBO,QAlBAoQ,SAAM7P,EAAA,KAAAA,EAAA,IAAA8P,EAAAA,EAAAA,KAAA,IAAA7P,IAAUN,EAAAg+B,aAAAh+B,EAAAg+B,eAAA19B,IAAW,e,gBAChCR,EAAAA,EAAAA,IAA+B,SAAxBuQ,IAAI,QAAO,SAAK,cACvBvQ,EAAAA,EAAAA,IAA4D,SAArDkB,KAAK,S,qCAAkBH,EAAAo9B,aAAa1c,KAAIxgB,GAAEwP,SAAA,I,iBAAnB1P,EAAAo9B,aAAa1c,QAAI,eAAazhB,EAAAA,EAAAA,IAAI,mCAEhEA,EAAAA,EAAAA,IAAqC,SAA9BuQ,IAAI,WAAU,YAAQ,cAC7BvQ,EAAAA,EAAAA,IAA6D,SAAtDkB,KAAK,O,qCAAgBH,EAAAo9B,aAAa1E,QAAOx4B,GAAEwP,SAAA,I,iBAAtB1P,EAAAo9B,aAAa1E,WAAO,eAAaz5B,EAAAA,EAAAA,IAAI,mCAEjEA,EAAAA,EAAAA,IAAuC,SAAhCuQ,IAAI,YAAW,aAAS,cAC/BvQ,EAAAA,EAAAA,IAA8D,SAAvDkB,KAAK,O,qCAAgBH,EAAAo9B,aAAaxqB,SAAQ1S,GAAEwP,SAAA,I,iBAAvB1P,EAAAo9B,aAAaxqB,YAAQ,eAAa3T,EAAAA,EAAAA,IAAI,mCAElEA,EAAAA,EAAAA,IAAyC,SAAlCuQ,IAAI,aAAY,cAAU,cACjCvQ,EAAAA,EAAAA,IAA+D,SAAxDkB,KAAK,O,qCAAgBH,EAAAo9B,aAAajqB,UAASjT,GAAEwP,SAAA,I,iBAAxB1P,EAAAo9B,aAAajqB,aAAS,eAAalU,EAAAA,EAAAA,IAAI,mCAEnEA,EAAAA,EAAAA,IAAmD,SAA5CuQ,IAAI,kBAAiB,mBAAe,cAC3CvQ,EAAAA,EAAAA,IAAoE,SAA7DkB,KAAK,O,qCAAgBH,EAAAo9B,aAAazE,eAAcz4B,GAAEwP,SAAA,I,iBAA7B1P,EAAAo9B,aAAazE,kBAAc,eAAa15B,EAAAA,EAAAA,IAAI,qBAExEA,EAAAA,EAAAA,IAAkF,SAAlFD,IAAkFE,EAAAA,EAAAA,IAAzDc,EAAAk9B,eAAiB,eAAiB,aAApB,IACvCj+B,EAAAA,EAAAA,IAAyD,UAAjDkB,KAAK,SAAUZ,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAEN,EAAAm9B,YAAAn9B,EAAAm9B,cAAA78B,KAAY,WAAM,0BAKtDR,EAAAA,EAAAA,IAqCM,aApCJA,EAAAA,EAAAA,IAkCQ,6BAjCNA,EAAAA,EAAAA,IAUQ,eATNA,EAAAA,EAAAA,IAQK,YAPHA,EAAAA,EAAAA,IAAU,UAAN,MACJA,EAAAA,EAAAA,IAAa,UAAT,SACJA,EAAAA,EAAAA,IAAgB,UAAZ,YACJA,EAAAA,EAAAA,IAAiB,UAAb,aACJA,EAAAA,EAAAA,IAAkB,UAAd,cACJA,EAAAA,EAAAA,IAAuB,UAAnB,mBACJA,EAAAA,EAAAA,IAAgB,UAAZ,eAAO,KAGfA,EAAAA,EAAAA,IAqBQ,cAnBKe,EAAAq9B,oBAAoB75B,QACgC,iBAD1B,WAArCzE,EAAAA,EAAAA,IAEK,KAAAO,GAAAE,EAAA,MAAAA,EAAA,MADHP,EAAAA,EAAAA,IAAkE,MAA9DyE,QAAQ,IAAI5E,MAAM,SAAQ,mCAA+B,OAG/CkB,EAAAq9B,oBAAoB75B,SAAM,aACxCzE,EAAAA,EAAAA,IAWK8B,EAAAA,GAAA,CAAAhB,IAAA,IAAAiB,EAAAA,EAAAA,IAX0Bd,EAAAq9B,qBAAmB,CAAtCC,EAASC,M,WAArBx+B,EAAAA,EAAAA,IAWK,MAXgDc,IAAK09B,GAAK,EAC7Dt+B,EAAAA,EAAAA,IAAwB,WAAAC,EAAAA,EAAAA,IAAjBq+B,EAAQ,GAAH,IACZt+B,EAAAA,EAAAA,IAAkC,WAAAC,EAAAA,EAAAA,IAA3Bo+B,EAAQ5c,MAAQ,KAAJ,IACnBzhB,EAAAA,EAAAA,IAAqC,WAAAC,EAAAA,EAAAA,IAA9Bo+B,EAAQ5E,SAAW,KAAJ,IACtBz5B,EAAAA,EAAAA,IAAsC,WAAAC,EAAAA,EAAAA,IAA/Bo+B,EAAQ1qB,UAAY,KAAJ,IACvB3T,EAAAA,EAAAA,IAAuC,WAAAC,EAAAA,EAAAA,IAAhCo+B,EAAQnqB,WAAa,KAAJ,IACxBlU,EAAAA,EAAAA,IAA4C,WAAAC,EAAAA,EAAAA,IAArCo+B,EAAQ3E,gBAAkB,KAAJ,IAC7B15B,EAAAA,EAAAA,IAGK,YAFHA,EAAAA,EAAAA,IAAqD,UAA5CM,QAAKW,GAAEf,EAAAq+B,cAAcF,IAAU,OAAI,EAAAv9B,KAC5Cd,EAAAA,EAAAA,IAAsE,UAA9DH,MAAM,SAAUS,QAAKW,GAAEf,EAAAs+B,cAAcH,IAAU,SAAM,EAAA58B,W,2BAOvEzB,EAAAA,EAAAA,IAAoD,UAA3CM,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAEN,EAAAu+B,cAAAv+B,EAAAu+B,gBAAAj+B,KAAc,oB,CAUpC,QACEgF,IAAAA,GACE,MAAO,CACLC,QAASC,EAAAA,EAAIC,aACby4B,oBAAqB,GACrBhB,aAAa,EACba,eAAgB,KAEhBE,aAAc,CACZ1c,KAAM,KACNgY,QAAS,GACT9lB,SAAU,GACVO,UAAW,GACXwlB,eAAgB,IAGtB,EAEA/wB,OAAAA,GACExC,KAAKu4B,0BACP,EAEA51B,QAAS,CACP41B,wBAAAA,GACE,MAAMtwB,EAAWhP,aAAa6J,QAAQ,aACtC,IAAKmF,EAAU,OACf,MAAM2vB,EAAmB53B,KAAK4P,OAAOc,OAAOlB,YAActH,KAAKC,MAAMlP,aAAa6J,QAAQ,cAAcqB,OAAS,GAC3GyK,EAAgBgpB,EAAiBxzB,QAAQ,MAAO,OAEtDpB,MAAM,GAAGhD,KAAKV,gCAAgCsP,IAAiB,CAC7DhM,QAAS,CAAEC,cAAe,UAAU5J,aAAa6J,QAAQ,kBAExDG,MAAKlK,IACJ,KAAID,EAAAA,EAAAA,GAAmBC,GAEvB,OAAOA,EAAImK,UAEZD,MAAK5D,IACJW,KAAKi4B,oBAAsB54B,KAG5B8D,OAAM+J,IACLzD,QAAQI,MAAMqD,GACdlN,KAAKi4B,oBAAsB,KAEjC,EAGAK,YAAAA,GACEt4B,KAAK83B,eAAiB,KACtB93B,KAAKg4B,aAAe,CAAE1c,KAAM,KAAMgY,QAAS,GAAI9lB,SAAU,GAAIO,UAAW,GAAIwlB,eAAgB,IAC5FvzB,KAAKi3B,aAAc,CACrB,EAGAmB,aAAAA,CAAcF,GACZl4B,KAAK83B,eAAiBI,EACtBl4B,KAAKg4B,aAAe,IAAKE,GACzBl4B,KAAKi3B,aAAc,CACrB,EAEAC,UAAAA,GACEl3B,KAAKi3B,aAAc,EACnBj3B,KAAK83B,eAAiB,KACtB93B,KAAKg4B,aAAe,CAAE1c,KAAM,KAAMgY,QAAS,GAAI9lB,SAAU,GAAIO,UAAW,GAAIwlB,eAAgB,GAC9F,EAGAwE,WAAAA,GACE,MAAM9vB,EAAWhP,aAAa6J,QAAQ,aAChCuK,EAAQpU,aAAa6J,QAAQ,aACnC,IAAKmF,IAAaoF,EAAO,OAAO/T,MAAM,sBAEtC,MAAMs+B,EAAmB53B,KAAK4P,OAAOc,OAAOlB,YAActH,KAAKC,MAAMlP,aAAa6J,QAAQ,cAAcqB,OAAS,GAE3GqL,EAAaooB,EAGbvmB,EAAU,CACdzS,YAAa4Q,EACb8L,KAAMtb,KAAKg4B,aAAa1c,KACxBgY,QAAStzB,KAAKg4B,aAAa1E,QAC3B9lB,SAAUxN,KAAKg4B,aAAaxqB,SAC5BO,UAAW/N,KAAKg4B,aAAajqB,UAC7BwlB,eAAgBvzB,KAAKg4B,aAAazE,gBAGpC,GAAIvzB,KAAK83B,eAAgB,CAEvB,MAAMra,EAAM,GAAGzd,KAAKV,qCAAqCU,KAAK83B,eAAezE,QAC7ErwB,MAAMya,EAAK,CACT5Q,OAAQ,MACRjK,QAAS,CACPC,cAAe,UAAUwK,IACzB,eAAgB,oBAElBlB,KAAMjE,KAAK4E,UAAUuE,KAEpBpO,MAAKlK,GAAOA,EAAImK,SAChBD,MAAK,KAEJ,MAAMk1B,EAAQn4B,KAAKi4B,oBAAoBO,WAAUC,GAAKA,EAAEpF,QAAUrzB,KAAK83B,eAAezE,SACvE,IAAX8E,GAAcn4B,KAAKi4B,oBAAoBS,OAAOP,EAAO,EAAG,IAAK9mB,EAASgiB,MAAOrzB,KAAK83B,eAAezE,QACrGrzB,KAAKk3B,gBAEN/zB,OAAM+J,GAAOzD,QAAQI,MAAMqD,IAChC,MAEElK,MAAM,GAAGhD,KAAKV,mCAAoC,CAChDuN,OAAQ,OACRjK,QAAS,CACPC,cAAe,UAAUwK,IACzB,eAAgB,oBAElBlB,KAAMjE,KAAK4E,UAAUuE,KAEpBpO,MAAKlK,GAAOA,EAAImK,SAChBD,MAAK,KACJjD,KAAKk3B,aACLl3B,KAAKu4B,8BAENp1B,OAAM+J,GAAOzD,QAAQI,MAAMqD,IAElC,EAEAmrB,aAAAA,CAAcH,GACZ,MAAMS,EAAcx/B,OAAOinB,QAAQ,iDAC9BuY,GAEL31B,MAAM,GAAGhD,KAAKV,uCAAuC44B,EAAQ7E,QAAS,CACpExmB,OAAQ,SACRjK,QAAS,CAAEC,cAAe,UAAU5J,aAAa6J,QAAQ,kBAExDG,MAAK,KACJ3J,MAAM,gCACN0G,KAAKi4B,oBAAsBj4B,KAAKi4B,oBAAoB13B,QAAOk4B,GAAKA,EAAEpF,QAAU6E,EAAQ7E,WAErFlwB,OAAM+J,GAAOzD,QAAQI,MAAMqD,IAChC,IC/MJ,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,U,UCgCkBnS,KAAK,U,kCA2HdrB,MAAM,cAAc0U,MAAA,uB,IAgBlBA,MAAA,kB,IACE1U,MAAM,iB,IA2CNA,MAAM,gBAAgB0U,MAAA,wB,IAwCxB1U,MAAM,W,2CAvQfC,EAAAA,EAAAA,IA+QM,2BA9QJE,EAAAA,EAAAA,IAAuB,UAAnB,kBAAc,IAGPe,EAAAg+B,oBAAiB,WAA5Bj/B,EAAAA,EAAAA,IAwCM,O,MAxCwBD,MAAM,yBAA0BS,QAAKC,EAAA,MAAAA,EAAA,QAAAC,IAAEN,EAAA8+B,kBAAA9+B,EAAA8+B,oBAAAx+B,K,EACnER,EAAAA,EAAAA,IAsCM,OAtCDH,MAAM,yBAA0BS,QAAKC,EAAA,KAAAA,EAAA,IAAA8P,EAAAA,EAAAA,KAAN,QAAW,Y,EAC7CrQ,EAAAA,EAAAA,IAAyE,WAAAC,EAAAA,EAAAA,IAAlEc,EAAAk+B,cAAgB,qBAAuB,qBAA1B,IACpBj/B,EAAAA,EAAAA,IAmCO,QAnCAoQ,SAAM7P,EAAA,KAAAA,EAAA,IAAA8P,EAAAA,EAAAA,KAAA,IAAA7P,IAAUN,EAAAg/B,mBAAAh/B,EAAAg/B,qBAAA1+B,IAAiB,e,gBACtCR,EAAAA,EAAAA,IAA4B,aAArB,iBAAa,cACpBA,EAAAA,EAAAA,IAOS,U,qCAPQe,EAAAo+B,YAAYpF,aAAY94B,GAAEwP,SAAA,I,gXAA1B1P,EAAAo+B,YAAYpF,gBAAY,eAOhC/5B,EAAAA,EAAAA,IAAI,mCAAAA,EAAAA,EAAAA,IAAI,mCAEjBA,EAAAA,EAAAA,IAA6B,aAAtB,kBAAc,cACrBA,EAAAA,EAAAA,IAAkE,SAA3DkB,KAAK,O,qCAAgBH,EAAAo+B,YAAYnF,cAAa/4B,GAAEwP,SAAA,I,iBAA3B1P,EAAAo+B,YAAYnF,iBAAa,eAAah6B,EAAAA,EAAAA,IAAI,mCAEtEA,EAAAA,EAAAA,IAAmB,aAAZ,QAAI,cACXA,EAAAA,EAAAA,IAGS,U,qCAHQe,EAAAo+B,YAAYlF,IAAGh5B,I,gBAC9BjB,EAAAA,EAAAA,IAA4B,UAApB2M,MAAM,KAAI,KAAC,IACnB3M,EAAAA,EAAAA,IAA4B,UAApB2M,MAAM,KAAI,KAAC,iBAFJ5L,EAAAo+B,YAAYlF,OAAG,eAGvBj6B,EAAAA,EAAAA,IAAI,mCAAAA,EAAAA,EAAAA,IAAI,mCAEjBA,EAAAA,EAAAA,IAA6B,aAAtB,kBAAc,cACrBA,EAAAA,EAAAA,IAA0D,SAAnDkB,KAAK,S,qCAAkBH,EAAAo+B,YAAYjF,aAAYj5B,I,iBAAxBF,EAAAo+B,YAAYjF,gBAAY,eAAIl6B,EAAAA,EAAAA,IAAI,mCAE9DA,EAAAA,EAAAA,IAAuB,aAAhB,YAAQ,cAEfA,EAAAA,EAAAA,IAAiG,SAA1FkB,KAAK,S,qCAAkBH,EAAAo+B,YAAYhF,QAAOl5B,GAAE+S,SAAA,GAASO,MAAA,gC,iBAA9BxT,EAAAo+B,YAAYhF,WAAO,eAAgDn6B,EAAAA,EAAAA,IAAI,mCAErGA,EAAAA,EAAAA,IAA4B,aAArB,iBAAa,cACpBA,EAAAA,EAAAA,IAA0D,SAAnDkB,KAAK,S,qCAAkBH,EAAAo+B,YAAY/E,aAAYn5B,I,iBAAxBF,EAAAo+B,YAAY/E,gBAAY,eAAIp6B,EAAAA,EAAAA,IAAI,mCAE9DA,EAAAA,EAAAA,IAA0C,aAAnC,+BAA2B,cAClCA,EAAAA,EAAAA,IAAoE,SAA7DkB,KAAK,O,qCAAgBH,EAAAo+B,YAAY9E,yBAAwBp5B,I,iBAApCF,EAAAo+B,YAAY9E,4BAAwB,eAAIr6B,EAAAA,EAAAA,IAAI,qBAExEA,EAAAA,EAAAA,IAAkF,SAAlFD,IAAkFE,EAAAA,EAAAA,IAAzDc,EAAAk+B,cAAgB,eAAiB,cAApB,IACtCj/B,EAAAA,EAAAA,IAA+D,UAAvDkB,KAAK,SAAUZ,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAEN,EAAA8+B,kBAAA9+B,EAAA8+B,oBAAAx+B,KAAkB,WAAM,yBAMjDO,EAAAq+B,qBAAkB,WAA7Bt/B,EAAAA,EAAAA,IAiFM,O,MAjFyBD,MAAM,yBAA0BS,QAAKC,EAAA,MAAAA,EAAA,QAAAC,IAAEN,EAAAm/B,mBAAAn/B,EAAAm/B,qBAAA7+B,K,EACpER,EAAAA,EAAAA,IA+EM,OA/EDH,MAAM,yBAA0BS,QAAKC,EAAA,MAAAA,EAAA,KAAA8P,EAAAA,EAAAA,KAAN,QAAW,WAACkE,MAAA,2C,gBAC9CvU,EAAAA,EAAAA,IAA4B,UAAxB,uBAAmB,KACvBA,EAAAA,EAAAA,IA4EO,QA5EAoQ,SAAM7P,EAAA,MAAAA,EAAA,KAAA8P,EAAAA,EAAAA,KAAA,IAAA7P,IAAUN,EAAAo/B,oBAAAp/B,EAAAo/B,sBAAA9+B,IAAkB,e,EACvCR,EAAAA,EAAAA,IAuEQ,eAtENA,EAAAA,EAAAA,IAqEQ,eApENA,EAAAA,EAAAA,IAGK,0BAFHA,EAAAA,EAAAA,IAAqC,YAAjCA,EAAAA,EAAAA,IAA4B,aAArB,mBAAa,KACxBA,EAAAA,EAAAA,IAAwF,qBAApFA,EAAAA,EAAAA,IAA+E,SAAxEkB,KAAK,WAAWrB,MAAM,W,uCAAoBkB,EAAAw+B,aAAa9E,cAAax5B,I,iBAA1BF,EAAAw+B,aAAa9E,sBAEpEz6B,EAAAA,EAAAA,IAGK,0BAFHA,EAAAA,EAAAA,IAA2C,YAAvCA,EAAAA,EAAAA,IAAkC,aAA3B,yBAAmB,KAC9BA,EAAAA,EAAAA,IAA8F,qBAA1FA,EAAAA,EAAAA,IAAqF,SAA9EkB,KAAK,WAAWrB,MAAM,W,uCAAoBkB,EAAAw+B,aAAa7E,oBAAmBz5B,I,iBAAhCF,EAAAw+B,aAAa7E,4BAEpE16B,EAAAA,EAAAA,IAGK,0BAFHA,EAAAA,EAAAA,IAA8B,YAA1BA,EAAAA,EAAAA,IAAqB,aAAd,YAAM,KACjBA,EAAAA,EAAAA,IAAiF,qBAA7EA,EAAAA,EAAAA,IAAwE,SAAjEkB,KAAK,WAAWrB,MAAM,W,uCAAoBkB,EAAAw+B,aAAarf,OAAMjf,I,iBAAnBF,EAAAw+B,aAAarf,eAEpElgB,EAAAA,EAAAA,IAGK,0BAFHA,EAAAA,EAAAA,IAA8B,YAA1BA,EAAAA,EAAAA,IAAqB,aAAd,YAAM,KACjBA,EAAAA,EAAAA,IAAiF,qBAA7EA,EAAAA,EAAAA,IAAwE,SAAjEkB,KAAK,WAAWrB,MAAM,W,uCAAoBkB,EAAAw+B,aAAaC,OAAMv+B,I,iBAAnBF,EAAAw+B,aAAaC,eAEpEx/B,EAAAA,EAAAA,IAGK,0BAFHA,EAAAA,EAAAA,IAAgC,YAA5BA,EAAAA,EAAAA,IAAuB,aAAhB,cAAQ,KACnBA,EAAAA,EAAAA,IAAmF,qBAA/EA,EAAAA,EAAAA,IAA0E,SAAnEkB,KAAK,WAAWrB,MAAM,W,uCAAoBkB,EAAAw+B,aAAa5E,SAAQ15B,I,iBAArBF,EAAAw+B,aAAa5E,iBAEpE36B,EAAAA,EAAAA,IAGK,0BAFHA,EAAAA,EAAAA,IAAsC,YAAlCA,EAAAA,EAAAA,IAA6B,aAAtB,oBAAc,KACzBA,EAAAA,EAAAA,IAAyF,qBAArFA,EAAAA,EAAAA,IAAgF,SAAzEkB,KAAK,WAAWrB,MAAM,W,uCAAoBkB,EAAAw+B,aAAa3E,eAAc35B,I,iBAA3BF,EAAAw+B,aAAa3E,uBAEpE56B,EAAAA,EAAAA,IAGK,0BAFHA,EAAAA,EAAAA,IAA+B,YAA3BA,EAAAA,EAAAA,IAAsB,aAAf,aAAO,KAClBA,EAAAA,EAAAA,IAAkF,qBAA9EA,EAAAA,EAAAA,IAAyE,SAAlEkB,KAAK,WAAWrB,MAAM,W,uCAAoBkB,EAAAw+B,aAAa1E,QAAO55B,I,iBAApBF,EAAAw+B,aAAa1E,gBAEpE76B,EAAAA,EAAAA,IAGK,0BAFHA,EAAAA,EAAAA,IAA8B,YAA1BA,EAAAA,EAAAA,IAAqB,aAAd,YAAM,KACjBA,EAAAA,EAAAA,IAAiF,qBAA7EA,EAAAA,EAAAA,IAAwE,SAAjEkB,KAAK,WAAWrB,MAAM,W,uCAAoBkB,EAAAw+B,aAAazE,OAAM75B,I,iBAAnBF,EAAAw+B,aAAazE,eAEpE96B,EAAAA,EAAAA,IAGK,0BAFHA,EAAAA,EAAAA,IAA8B,YAA1BA,EAAAA,EAAAA,IAAqB,aAAd,YAAM,KACjBA,EAAAA,EAAAA,IAAiF,qBAA7EA,EAAAA,EAAAA,IAAwE,SAAjEkB,KAAK,WAAWrB,MAAM,W,uCAAoBkB,EAAAw+B,aAAaxE,OAAM95B,I,iBAAnBF,EAAAw+B,aAAaxE,eAEpE/6B,EAAAA,EAAAA,IAGK,0BAFHA,EAAAA,EAAAA,IAAoC,YAAhCA,EAAAA,EAAAA,IAA2B,aAApB,kBAAY,KACvBA,EAAAA,EAAAA,IAAuF,qBAAnFA,EAAAA,EAAAA,IAA8E,SAAvEkB,KAAK,WAAWrB,MAAM,W,uCAAoBkB,EAAAw+B,aAAavE,aAAY/5B,I,iBAAzBF,EAAAw+B,aAAavE,qBAEpEh7B,EAAAA,EAAAA,IAGK,0BAFHA,EAAAA,EAAAA,IAAgC,YAA5BA,EAAAA,EAAAA,IAAuB,aAAhB,cAAQ,KACnBA,EAAAA,EAAAA,IAAmF,qBAA/EA,EAAAA,EAAAA,IAA0E,SAAnEkB,KAAK,WAAWrB,MAAM,W,uCAAoBkB,EAAAw+B,aAAatE,SAAQh6B,I,iBAArBF,EAAAw+B,aAAatE,iBAEpEj7B,EAAAA,EAAAA,IAGK,0BAFHA,EAAAA,EAAAA,IAAuC,YAAnCA,EAAAA,EAAAA,IAA8B,aAAvB,qBAAe,KAC1BA,EAAAA,EAAAA,IAA0F,qBAAtFA,EAAAA,EAAAA,IAAiF,SAA1EkB,KAAK,WAAWrB,MAAM,W,uCAAoBkB,EAAAw+B,aAAarE,gBAAej6B,I,iBAA5BF,EAAAw+B,aAAarE,wBAEpEl7B,EAAAA,EAAAA,IAGK,0BAFHA,EAAAA,EAAAA,IAA0C,YAAtCA,EAAAA,EAAAA,IAAiC,aAA1B,wBAAkB,KAC7BA,EAAAA,EAAAA,IAA6F,qBAAzFA,EAAAA,EAAAA,IAAoF,SAA7EkB,KAAK,WAAWrB,MAAM,W,uCAAoBkB,EAAAw+B,aAAapE,mBAAkBl6B,I,iBAA/BF,EAAAw+B,aAAapE,2BAEpEn7B,EAAAA,EAAAA,IAGK,0BAFHA,EAAAA,EAAAA,IAAkC,YAA9BA,EAAAA,EAAAA,IAAyB,aAAlB,gBAAU,KACrBA,EAAAA,EAAAA,IAAqF,qBAAjFA,EAAAA,EAAAA,IAA4E,SAArEkB,KAAK,WAAWrB,MAAM,W,uCAAoBkB,EAAAw+B,aAAanE,WAAUn6B,I,iBAAvBF,EAAAw+B,aAAanE,mBAEpEp7B,EAAAA,EAAAA,IAGK,0BAFHA,EAAAA,EAAAA,IAAyC,YAArCA,EAAAA,EAAAA,IAAgC,aAAzB,uBAAiB,KAC5BA,EAAAA,EAAAA,IAA4F,qBAAxFA,EAAAA,EAAAA,IAAmF,SAA5EkB,KAAK,WAAWrB,MAAM,W,uCAAoBkB,EAAAw+B,aAAalE,kBAAiBp6B,I,iBAA9BF,EAAAw+B,aAAalE,0BAEpEr7B,EAAAA,EAAAA,IAGK,0BAFHA,EAAAA,EAAAA,IAAyC,YAArCA,EAAAA,EAAAA,IAAgC,aAAzB,uBAAiB,KAC5BA,EAAAA,EAAAA,IAAqF,qBAAjFA,EAAAA,EAAAA,IAA4E,SAArEkB,KAAK,WAAWrB,MAAM,W,uCAAoBkB,EAAAw+B,aAAaE,WAAUx+B,I,iBAAvBF,EAAAw+B,aAAaE,mBAEpEz/B,EAAAA,EAAAA,IAGK,0BAFHA,EAAAA,EAAAA,IAAgC,YAA5BA,EAAAA,EAAAA,IAAuB,aAAhB,cAAQ,KACnBA,EAAAA,EAAAA,IAAiG,qBAA7FA,EAAAA,EAAAA,IAAwF,Y,uCAArEe,EAAAw+B,aAAajE,QAAOr6B,GAAEsT,MAAA,+B,iBAAtBxT,EAAAw+B,aAAajE,mBAAO,eAKjDt7B,EAAAA,EAAAA,IAAgD,UAAxCkB,KAAK,UAAS,qBAAiB,KACvClB,EAAAA,EAAAA,IAAgE,UAAxDkB,KAAK,SAAUZ,QAAKC,EAAA,MAAAA,EAAA,QAAAC,IAAEN,EAAAm/B,mBAAAn/B,EAAAm/B,qBAAA7+B,KAAmB,WAAM,0BAM7DR,EAAAA,EAAAA,IA4BQ,6BA3BNA,EAAAA,EAAAA,IAWQ,eAVNA,EAAAA,EAAAA,IASK,YARHA,EAAAA,EAAAA,IAAqB,UAAjB,iBACJA,EAAAA,EAAAA,IAAsB,UAAlB,kBACJA,EAAAA,EAAAA,IAAY,UAAR,QACJA,EAAAA,EAAAA,IAAsB,UAAlB,kBACJA,EAAAA,EAAAA,IAAY,UAAR,QACJA,EAAAA,EAAAA,IAAqB,UAAjB,iBACJA,EAAAA,EAAAA,IAAmC,UAA/B,+BACJA,EAAAA,EAAAA,IAAgB,UAAZ,eAAO,KAGfA,EAAAA,EAAAA,IAcQ,6BAbNF,EAAAA,EAAAA,IAYK8B,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAZiBd,EAAA2+B,eAAXrB,K,WAAXv+B,EAAAA,EAAAA,IAYK,MAZiCc,IAAKy9B,EAAQvE,O,EACjD95B,EAAAA,EAAAA,IAA2F,WAAAC,EAAAA,EAAAA,IAApFo+B,EAAQtE,aAAarlB,OAAO,GAAGC,cAAgB0pB,EAAQtE,aAAat2B,MAAM,IAAD,IAChFzD,EAAAA,EAAAA,IAA0C,WAAAC,EAAAA,EAAAA,IAAnCo+B,EAAQrE,eAAiB,IAAJ,IAC5Bh6B,EAAAA,EAAAA,IAAgC,WAAAC,EAAAA,EAAAA,IAAzBo+B,EAAQpE,KAAO,IAAJ,IAClBj6B,EAAAA,EAAAA,IAAyC,WAAAC,EAAAA,EAAAA,IAAlCo+B,EAAQnE,cAAgB,IAAJ,IAC3Bl6B,EAAAA,EAAAA,IAAoC,WAAAC,EAAAA,EAAAA,IAA7Bo+B,EAAQlE,SAAW,IAAJ,IACtBn6B,EAAAA,EAAAA,IAAyC,WAAAC,EAAAA,EAAAA,IAAlCo+B,EAAQjE,cAAgB,IAAJ,IAC3Bp6B,EAAAA,EAAAA,IAAqD,WAAAC,EAAAA,EAAAA,IAA9Co+B,EAAQhE,0BAA4B,IAAJ,IACvCr6B,EAAAA,EAAAA,IAGK,YAFHA,EAAAA,EAAAA,IAA2D,UAAlDM,QAAKW,GAAEf,EAAAy/B,oBAAoBtB,IAAU,OAAI,EAAAh+B,KAClDL,EAAAA,EAAAA,IAA2E,UAAnEH,MAAM,SAAUS,QAAKW,GAAEf,EAAA0/B,mBAAmBvB,IAAU,SAAM,EAAAv9B,W,WAK1Ed,EAAAA,EAAAA,IAA8D,UAArDM,QAAKC,EAAA,MAAAA,EAAA,QAAAC,IAAEN,EAAA2/B,oBAAA3/B,EAAA2/B,sBAAAr/B,KAAoB,sBAGpCR,EAAAA,EAAAA,IAwGM,MAxGNyB,GAwGM,gBAvGJzB,EAAAA,EAAAA,IAA+B,UAA3B,0BAAsB,KAe1BA,EAAAA,EAAAA,IAkFM,MAlFNwM,GAkFM,EAjFNxM,EAAAA,EAAAA,IAyCQ,QAzCRgC,GAyCQ,gBAxCNhC,EAAAA,EAAAA,IAKQ,eAJNA,EAAAA,EAAAA,IAGK,YAFHA,EAAAA,EAAAA,IAAgB,UAAZ,YACJA,EAAAA,EAAAA,IAAe,UAAX,cAAM,KAGdA,EAAAA,EAAAA,IAiCQ,eAhCNA,EAAAA,EAAAA,IAGK,0BAFHA,EAAAA,EAAAA,IAAsB,UAAlB,iBAAa,KACjBA,EAAAA,EAAAA,IAAsJ,YAAlJA,EAAAA,EAAAA,IAA6I,QAAtIuU,OAAKwY,EAAAA,EAAAA,IAAA,CAAAjQ,MAAW/b,EAAA++B,qBAAqBrF,cAAgB,MAAQ,Y,QAAc15B,EAAA++B,qBAAqBrF,cAAgB,MAAQ,MAAX,QAE1Hz6B,EAAAA,EAAAA,IAGK,0BAFHA,EAAAA,EAAAA,IAA4B,UAAxB,uBAAmB,KACvBA,EAAAA,EAAAA,IAAkK,YAA9JA,EAAAA,EAAAA,IAAyJ,QAAlJuU,OAAKwY,EAAAA,EAAAA,IAAA,CAAAjQ,MAAW/b,EAAA++B,qBAAqBpF,oBAAsB,MAAQ,Y,QAAc35B,EAAA++B,qBAAqBpF,oBAAsB,MAAQ,MAAX,QAEtI16B,EAAAA,EAAAA,IAGK,0BAFHA,EAAAA,EAAAA,IAAe,UAAX,UAAM,KACVA,EAAAA,EAAAA,IAAwI,YAApIA,EAAAA,EAAAA,IAA+H,QAAxHuU,OAAKwY,EAAAA,EAAAA,IAAA,CAAAjQ,MAAW/b,EAAA++B,qBAAqB5f,OAAS,MAAQ,Y,QAAcnf,EAAA++B,qBAAqB5f,OAAS,MAAQ,MAAX,QAE5GlgB,EAAAA,EAAAA,IAGK,0BAFHA,EAAAA,EAAAA,IAAe,UAAX,UAAM,KACVA,EAAAA,EAAAA,IAAwI,YAApIA,EAAAA,EAAAA,IAA+H,QAAxHuU,OAAKwY,EAAAA,EAAAA,IAAA,CAAAjQ,MAAW/b,EAAA++B,qBAAqBN,OAAS,MAAQ,Y,QAAcz+B,EAAA++B,qBAAqBN,OAAS,MAAQ,MAAX,QAE5Gx/B,EAAAA,EAAAA,IAGK,0BAFHA,EAAAA,EAAAA,IAAiB,UAAb,YAAQ,KACZA,EAAAA,EAAAA,IAA4I,YAAxIA,EAAAA,EAAAA,IAAmI,QAA5HuU,OAAKwY,EAAAA,EAAAA,IAAA,CAAAjQ,MAAW/b,EAAA++B,qBAAqBnF,SAAW,MAAQ,Y,QAAc55B,EAAA++B,qBAAqBnF,SAAW,MAAQ,MAAX,QAEhH36B,EAAAA,EAAAA,IAGK,0BAFHA,EAAAA,EAAAA,IAAuB,UAAnB,kBAAc,KAClBA,EAAAA,EAAAA,IAAwJ,YAApJA,EAAAA,EAAAA,IAA+I,QAAxIuU,OAAKwY,EAAAA,EAAAA,IAAA,CAAAjQ,MAAW/b,EAAA++B,qBAAqBlF,eAAiB,MAAQ,Y,QAAc75B,EAAA++B,qBAAqBlF,eAAiB,MAAQ,MAAX,QAE5H56B,EAAAA,EAAAA,IAGK,0BAFHA,EAAAA,EAAAA,IAAgB,UAAZ,WAAO,KACXA,EAAAA,EAAAA,IAA0I,YAAtIA,EAAAA,EAAAA,IAAiI,QAA1HuU,OAAKwY,EAAAA,EAAAA,IAAA,CAAAjQ,MAAW/b,EAAA++B,qBAAqBjF,QAAU,MAAQ,Y,QAAc95B,EAAA++B,qBAAqBjF,QAAU,MAAQ,MAAX,QAE9G76B,EAAAA,EAAAA,IAGK,0BAFHA,EAAAA,EAAAA,IAAe,UAAX,UAAM,KACVA,EAAAA,EAAAA,IAAwI,YAApIA,EAAAA,EAAAA,IAA+H,QAAxHuU,OAAKwY,EAAAA,EAAAA,IAAA,CAAAjQ,MAAW/b,EAAA++B,qBAAqBhF,OAAS,MAAQ,Y,QAAc/5B,EAAA++B,qBAAqBhF,OAAS,MAAQ,MAAX,YAKhH96B,EAAAA,EAAAA,IAqCQ,QArCRiC,GAqCQ,gBApCNjC,EAAAA,EAAAA,IAKQ,eAJNA,EAAAA,EAAAA,IAGK,YAFHA,EAAAA,EAAAA,IAAgB,UAAZ,YACJA,EAAAA,EAAAA,IAAe,UAAX,cAAM,KAGdA,EAAAA,EAAAA,IA6BQ,eA5BNA,EAAAA,EAAAA,IAGK,0BAFHA,EAAAA,EAAAA,IAAe,UAAX,UAAM,KACVA,EAAAA,EAAAA,IAAwI,YAApIA,EAAAA,EAAAA,IAA+H,QAAxHuU,OAAKwY,EAAAA,EAAAA,IAAA,CAAAjQ,MAAW/b,EAAA++B,qBAAqB/E,OAAS,MAAQ,Y,QAAch6B,EAAA++B,qBAAqB/E,OAAS,MAAQ,MAAX,QAE5G/6B,EAAAA,EAAAA,IAGK,0BAFHA,EAAAA,EAAAA,IAAqB,UAAjB,gBAAY,KAChBA,EAAAA,EAAAA,IAAoJ,YAAhJA,EAAAA,EAAAA,IAA2I,QAApIuU,OAAKwY,EAAAA,EAAAA,IAAA,CAAAjQ,MAAW/b,EAAA++B,qBAAqB9E,aAAe,MAAQ,Y,QAAcj6B,EAAA++B,qBAAqB9E,aAAe,MAAQ,MAAX,QAExHh7B,EAAAA,EAAAA,IAGK,0BAFHA,EAAAA,EAAAA,IAAiB,UAAb,YAAQ,KACZA,EAAAA,EAAAA,IAA4I,YAAxIA,EAAAA,EAAAA,IAAmI,QAA5HuU,OAAKwY,EAAAA,EAAAA,IAAA,CAAAjQ,MAAW/b,EAAA++B,qBAAqB7E,SAAW,MAAQ,Y,QAAcl6B,EAAA++B,qBAAqB7E,SAAW,MAAQ,MAAX,QAEhHj7B,EAAAA,EAAAA,IAGK,0BAFHA,EAAAA,EAAAA,IAAqC,UAAjC,gCAA4B,KAChCA,EAAAA,EAAAA,IAAgK,YAA5JA,EAAAA,EAAAA,IAAuJ,QAAhJuU,OAAKwY,EAAAA,EAAAA,IAAA,CAAAjQ,MAAW/b,EAAA++B,qBAAqB3E,mBAAqB,MAAQ,Y,QAAcp6B,EAAA++B,qBAAqB3E,mBAAqB,MAAQ,MAAX,QAEpIn7B,EAAAA,EAAAA,IAGK,0BAFHA,EAAAA,EAAAA,IAAmB,UAAf,cAAU,KACdA,EAAAA,EAAAA,IAAgJ,YAA5IA,EAAAA,EAAAA,IAAuI,QAAhIuU,OAAKwY,EAAAA,EAAAA,IAAA,CAAAjQ,MAAW/b,EAAA++B,qBAAqB1E,WAAa,MAAQ,Y,QAAcr6B,EAAA++B,qBAAqB1E,WAAa,MAAQ,MAAX,QAEpHp7B,EAAAA,EAAAA,IAGK,0BAFHA,EAAAA,EAAAA,IAA0B,UAAtB,qBAAiB,KACrBA,EAAAA,EAAAA,IAA8J,YAA1JA,EAAAA,EAAAA,IAAqJ,QAA9IuU,OAAKwY,EAAAA,EAAAA,IAAA,CAAAjQ,MAAW/b,EAAA++B,qBAAqBzE,kBAAoB,MAAQ,Y,QAAct6B,EAAA++B,qBAAqBzE,kBAAoB,MAAQ,MAAX,QAElIr7B,EAAAA,EAAAA,IAGK,0BAFHA,EAAAA,EAAAA,IAAiC,YAA7BA,EAAAA,EAAAA,IAAwB,SAArB,uBAAiB,KACxBA,EAAAA,EAAAA,IAAgJ,YAA5IA,EAAAA,EAAAA,IAAuI,QAAhIuU,OAAKwY,EAAAA,EAAAA,IAAA,CAAAjQ,MAAW/b,EAAA++B,qBAAqBL,WAAa,QAAU,U,QAAY1+B,EAAA++B,qBAAqBL,WAAa,MAAQ,MAAX,cAMxHz/B,EAAAA,EAAAA,IAGM,MAHNoC,GAGM,gBAFJpC,EAAAA,EAAAA,IAAyB,cAAjB,YAAQ,6CAAUA,EAAAA,EAAAA,IAA2C,eAApCA,EAAAA,EAAAA,IAA4B,SAAzB,2BAAqB,KACzDA,EAAAA,EAAAA,IAAgD,UAAAC,EAAAA,EAAAA,IAA1Cc,EAAA++B,qBAAqBxE,SAAW,KAAJ,QAItCt7B,EAAAA,EAAAA,IAA8D,UAArDM,QAAKC,EAAA,MAAAA,EAAA,QAAAC,IAAEN,EAAA6/B,kBAAA7/B,EAAA6/B,oBAAAv/B,KAAkB,wB,CAQtC,QACEgF,IAAAA,GACE,MAAO,CACLC,QAASC,EAAAA,EAAIC,aACb+5B,cAAe,GACfI,qBAAsB,GAEtB9wB,UAAU,EAGV+vB,mBAAmB,EACnBE,cAAe,KACfE,YAAa,CACXpF,aAAc,GACdC,cAAe,GACfC,IAAK,GACLC,aAAc,KACdC,QAAS,KACTC,aAAc,KACdC,yBAA0B,IAI5B+E,oBAAoB,EACpBG,aAAc,CAAC,EAEnB,EAEA52B,OAAAA,GACExC,KAAK65B,qBACL75B,KAAK85B,oBACP,EAEAn3B,QAAS,CAEPk3B,kBAAAA,GACE,MAAM5xB,EAAWhP,aAAa6J,QAAQ,aACtC,IAAKmF,EAAU,OAEf,MAAM2vB,EAAmB53B,KAAK4P,OAAOc,OAAOlB,YAActH,KAAKC,MAAMlP,aAAa6J,QAAQ,cAAcqB,OAAS,GAC3GyK,EAAgBgpB,EAAiBxzB,QAAQ,MAAO,OAEtDpB,MAAM,GAAGhD,KAAKV,0BAA0BsP,IAAiB,CACvDhM,QAAS,CACPC,cAAe,UAAU5J,aAAa6J,QAAQ,kBAG/CG,MAAKlK,IACJ,KAAID,EAAAA,EAAAA,GAAmBC,GAEvB,OAAOA,EAAImK,UAEZD,MAAK5D,IACJW,KAAKu5B,cAAgBl6B,EAAKm0B,kBAG3BrwB,OAAM+J,GAAOzD,QAAQI,MAAMqD,IAChC,EAEA6sB,MAAAA,CAAOj4B,GACL,IAAU,IAANA,IAAoB,IAANA,EAAa,OAAOA,EACtC,GAAS,MAALA,EAAW,OAAO,EACtB,GAAiB,kBAANA,EAAgB,OAAa,IAANA,EAClC,GAAiB,kBAANA,EAAgB,CACzB,MAAMH,EAAIG,EAAEoD,OAAOD,cACnB,MAAa,MAANtD,GAAmB,SAANA,GAAsB,MAANA,GAAmB,QAANA,CACnD,CACA,QAASG,CACX,EACAg4B,kBAAAA,GACE,MAAM7xB,EAAWhP,aAAa6J,QAAQ,aACtC,IAAKmF,EAAU,OAEf,MAAM2vB,EAAmB53B,KAAK4P,OAAOc,OAAOlB,YAActH,KAAKC,MAAMlP,aAAa6J,QAAQ,cAAcqB,OAAS,GAC3GyK,EAAgBgpB,EAAiBxzB,QAAQ,MAAO,OAEtDpB,MAAM,GAAGhD,KAAKV,kCAAkCsP,IAAiB,CAC/DhM,QAAS,CACPC,cAAe,UAAU5J,aAAa6J,QAAQ,kBAG/CG,MAAKlK,IACJ,KAAID,EAAAA,EAAAA,GAAmBC,GAEvB,OAAOA,EAAImK,UAEZD,MAAK5D,IAKJ,MAAM26B,EAAUl2B,MAAMwQ,QAAQjV,GAAQA,EAAK,IAAM,CAAC,EAAIA,EACtDsV,OAAOC,KAAKolB,GAAS13B,SAAQ7H,IACf,gBAARA,GAAiC,eAARA,GAAgC,eAARA,GAAgC,YAARA,IAC3Eu/B,EAAQv/B,GAAOuF,KAAK+5B,OAAOC,EAAQv/B,QAIvCuF,KAAK25B,qBAAuBK,KAW7B72B,OAAM+J,GAAOzD,QAAQI,MAAMqD,IAChC,EAGAwsB,kBAAAA,GACE15B,KAAK84B,cAAgB,KACrB94B,KAAKg5B,YAAc,CACjBpF,aAAc,GAAIC,cAAe,GAAIC,IAAK,GAAIC,aAAc,KAC5DC,QAAS,KAAMC,aAAc,KAAMC,yBAA0B,IAE/Dl0B,KAAK44B,mBAAoB,CAC3B,EACAY,mBAAAA,CAAoBtB,GAClBl4B,KAAK84B,cAAgBZ,EACrBl4B,KAAKg5B,YAAc,IAAKd,GACxBl4B,KAAK44B,mBAAoB,CAE3B,EACAC,gBAAAA,GACE74B,KAAK44B,mBAAoB,EACzB54B,KAAK84B,cAAgB,IACvB,EACAC,iBAAAA,GAEE,MAAM9wB,EAAWhP,aAAa6J,QAAQ,aAEtC,IAAKmF,EAAU,OAEf,MAAM2vB,EAAmB53B,KAAK4P,OAAOc,OAAOlB,YAActH,KAAKC,MAAMlP,aAAa6J,QAAQ,cAAcqB,OAAS,GAC3GqL,EAAaooB,EACbvmB,EAAU,CACdzS,YAAa4Q,KAEbxP,KAAKg5B,aAGHh5B,KAAK84B,cAEP91B,MAAM,GAAGhD,KAAKV,+BAA+BU,KAAK84B,cAAcnF,QAAS,CACvE9mB,OAAQ,MACRjK,QAAS,CACPC,cAAe,UAAU5J,aAAa6J,QAAQ,eAC9C,eAAgB,oBAElBqJ,KAAMjE,KAAK4E,UAAUuE,KAEpBpO,MAAKlK,GAAOA,EAAImK,SAChBD,MAAK,KAEJjD,KAAK64B,mBACL74B,KAAK65B,wBAEN12B,OAAM+J,GAAOzD,QAAQI,MAAMqD,KAG9BlK,MAAM,GAAGhD,KAAKV,6BAA8B,CAC1CuN,OAAQ,OACRjK,QAAS,CACPC,cAAe,UAAU5J,aAAa6J,QAAQ,eAC9C,eAAgB,oBAElBqJ,KAAMjE,KAAK4E,UAAUuE,KAEpBpO,MAAKlK,GAAOA,EAAImK,SAChBD,MAAK,KACJjD,KAAK64B,mBACL74B,KAAK65B,wBAEN12B,OAAM+J,GAAOzD,QAAQI,MAAMqD,IAElC,EAEAusB,kBAAAA,CAAmBvB,GACjB,MAAM+B,EAAY9gC,OAAOinB,QAAQ,gDAC5B6Z,GACLj3B,MAAM,GAAGhD,KAAKV,iCAAiC44B,EAAQvE,QAAS,CAC9D9mB,OAAQ,SACRjK,QAAS,CAAEC,cAAe,UAAU5J,aAAa6J,QAAQ,kBAExDG,MAAK,KACJjD,KAAKu5B,cAAgBv5B,KAAKu5B,cAAch5B,QAAOm3B,GAAKA,EAAE/D,QAAUuE,EAAQvE,WAEzExwB,OAAM+J,GAAOzD,QAAQI,MAAMqD,IAChC,EAGA0sB,gBAAAA,GACE,MAAMM,EAAiB,CACrB5F,eAAe,EACfC,qBAAqB,EACrBxa,QAAQ,EACRsf,QAAQ,EACR7E,UAAU,EACVC,gBAAgB,EAChBC,SAAS,EACTC,QAAQ,EACRC,QAAQ,EACRC,cAAc,EACdC,UAAU,EACVC,iBAAiB,EACjBC,oBAAoB,EACpBC,YAAY,EACZC,mBAAmB,EACnBoE,YAAY,EACZnE,QAAS,IAIXn1B,KAAKo5B,aAAe,IACfc,KACAhyB,KAAKC,MAAMD,KAAK4E,UAAU9M,KAAK25B,wBAEpC35B,KAAKi5B,oBAAqB,CAC5B,EAEAC,iBAAAA,GACEl5B,KAAKi5B,oBAAqB,CAC5B,EAEAE,kBAAAA,GACE,MAAMlxB,EAAWhP,aAAa6J,QAAQ,aACtC,IAAKmF,EAAU,OAGf,MAAM2vB,EAAmB53B,KAAK4P,OAAOc,OAAOlB,YAActH,KAAKC,MAAMlP,aAAa6J,QAAQ,cAAcqB,OAAS,GAC3GqL,EAAaooB,EAGbvmB,EAAU,CACdzS,YAAa4Q,EACb8kB,cAAet0B,KAAKo5B,aAAa9E,gBAAiB,EAClDC,oBAAqBv0B,KAAKo5B,aAAa7E,sBAAuB,EAC9Dxa,OAAQ/Z,KAAKo5B,aAAarf,SAAU,EACpCsf,OAAQr5B,KAAKo5B,aAAaC,SAAU,EACpC7E,SAAUx0B,KAAKo5B,aAAa5E,WAAY,EACxCC,eAAgBz0B,KAAKo5B,aAAa3E,iBAAkB,EACpDC,QAAS10B,KAAKo5B,aAAa1E,UAAW,EACtCC,OAAQ30B,KAAKo5B,aAAazE,SAAU,EACpCC,OAAQ50B,KAAKo5B,aAAaxE,SAAU,EACpCC,aAAc70B,KAAKo5B,aAAavE,eAAgB,EAChDC,SAAU90B,KAAKo5B,aAAatE,WAAY,EACxCC,gBAAiB/0B,KAAKo5B,aAAarE,kBAAmB,EACtDC,mBAAoBh1B,KAAKo5B,aAAapE,qBAAsB,EAC5DC,WAAYj1B,KAAKo5B,aAAanE,aAAc,EAC5CC,kBAAmBl1B,KAAKo5B,aAAalE,oBAAqB,EAC1DoE,WAAYt5B,KAAKo5B,aAAaE,aAAc,EAC5CnE,QAASn1B,KAAKo5B,aAAajE,SAAW,IAGlCvmB,EAAgBY,EAAWpL,QAAQ,MAAO,OAEhDpB,MAAM,GAAGhD,KAAKV,uCAAuCsP,IAAiB,CACpE/B,OAAQ,MACRjK,QAAS,CACPC,cAAe,UAAU5J,aAAa6J,QAAQ,eAC9C,eAAgB,oBAElBqJ,KAAMjE,KAAK4E,UAAUuE,KAEpBpO,MAAKlK,GAAOA,EAAImK,SAChBD,MAAK,KACJjD,KAAK25B,qBAAuB,IAAKtoB,GACjCrR,KAAKk5B,oBACLl5B,KAAK65B,qBACL75B,KAAK85B,wBAEN32B,OAAM+J,GAAOzD,QAAQI,MAAMqD,IAChC,EAEAitB,kBAAAA,CAAmB1/B,GACjB,OAAOA,EAAI2J,QAAQ,KAAM,KAAKA,QAAQ,SAAS1F,GAAKA,EAAE8P,eACxD,GAGFxC,MAAO,CACL,2BAA2BouB,GACzB,MAAMC,GAAc,IAAIn4B,MAAO0C,cAC/B5E,KAAKg5B,YAAYhF,QAAUoG,EAAUC,EAAcD,EAAU,IAC/D,EACA,2BAA2BE,GACvB,MAAMC,EAAoB,CAAC,SAAU,WAC/BC,EAAsB,CAAC,SAAU,UAEnCD,EAAkBp1B,SAASm1B,GAC3Bt6B,KAAKg5B,YAAYlF,IAAM,IAChB0G,EAAoBr1B,SAASm1B,GACpCt6B,KAAKg5B,YAAYlF,IAAM,IAGvB9zB,KAAKg5B,YAAYlF,IAAM,EAE/B,EACA,0BAA0B2G,GACpBA,GAAYz6B,KAAK06B,cAEnB16B,KAAK06B,eAAep4B,SAAQwY,IACN,sBAAdA,EAAMrgB,KAA6C,YAAdqgB,EAAMrgB,MAC3CuF,KAAKo5B,aAAate,EAAMrgB,MAAO,MAG9BuF,KAAK06B,eAEd16B,KAAK06B,eAAep4B,SAAQwY,IACN,sBAAdA,EAAMrgB,KAA6C,YAAdqgB,EAAMrgB,KAAqBuF,KAAKo5B,aAAate,EAAMrgB,OACxFuF,KAAKo5B,aAAauB,mBAAoB,KAKlD,IC7kBJ,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,U,UCPOjhC,MAAM,S,IAIJA,MAAM,Y,2CAJbC,EAAAA,EAAAA,IAYM,MAZNC,GAYM,cAXJC,EAAAA,EAAAA,IAAmB,UAAf,cAAU,KACdA,EAAAA,EAAAA,IAAmG,UAA1FM,QAAKC,EAAA,KAAAA,EAAA,GAAAU,GAAEuT,EAAAtE,QAAQvQ,KAAK,eAAe4U,MAAA,0BAA6B,sBAEzEvU,EAAAA,EAAAA,IAGM,MAHNK,GAGM,EAFJL,EAAAA,EAAAA,IAAyF,UAAhFH,OAAKuB,EAAAA,EAAAA,IAAA,CAAAC,OAAe,cAAJmT,EAAAiD,OAAsBnX,QAAKC,EAAA,KAAAA,EAAA,GAAAU,GAAEuT,EAAAiD,KAAI,cAAc,WAAQ,IAChFzX,EAAAA,EAAAA,IAAiF,UAAxEH,OAAKuB,EAAAA,EAAAA,IAAA,CAAAC,OAAe,WAAJmT,EAAAiD,OAAmBnX,QAAKC,EAAA,KAAAA,EAAA,GAAAU,GAAEuT,EAAAiD,KAAI,WAAW,SAAM,kBAG1E/W,EAAAA,EAAAA,IAEagX,EAAAA,GAAA,mBADXhX,EAAAA,EAAAA,KAA8BqgC,EAAAA,EAAAA,IAAd7gC,EAAA8gC,gBAAW,Q,WCX1BnhC,MAAM,oB,UAGJA,MAAM,e,iBAYNA,MAAM,Q,IACJA,MAAM,Q,IAEDkY,IAAI,YAAYC,OAAO,O,IAG5BnY,MAAM,Q,IAEDkY,IAAI,WAAWC,OAAO,O,IAG3BnY,MAAM,Q,IAEDkY,IAAI,cAAcC,OAAO,O,IAG9BnY,MAAM,a,IAEDkY,IAAI,eAAeC,OAAO,O,2CAjCxClY,EAAAA,EAAAA,IAoCM,MApCNC,GAoCM,cAnCJC,EAAAA,EAAAA,IAA0B,UAAtB,qBAAiB,IAEUe,EAAAoM,SAAS5I,SAAM,WAA9CzE,EAAAA,EAAAA,IAUM,MAVNO,GAUM,cATJL,EAAAA,EAAAA,IAAkC,QAA5BH,MAAM,QAAO,YAAQ,mBAC3BC,EAAAA,EAAAA,IAOO8B,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IANOd,EAAAoM,UAALrF,K,WADThI,EAAAA,EAAAA,IAOO,QALJc,IAAKkH,EAAEhD,WACRjF,MAAM,eACL2B,MAAOtB,EAAAqM,QAAQzE,EAAE9D,gB,YAEXqE,KAAKP,EAAE9D,cAAc+G,eAAW,EAAAjK,O,0BAI3Cd,EAAAA,EAAAA,IAoBM,MApBNyB,GAoBM,EAnBJzB,EAAAA,EAAAA,IAGM,MAHNwM,GAGM,cAFJxM,EAAAA,EAAAA,IAAuC,OAAlCH,MAAM,cAAa,aAAS,KACjCG,EAAAA,EAAAA,IAA8C,SAA9CgC,GAA8C,aAGhDhC,EAAAA,EAAAA,IAGM,MAHNiC,GAGM,cAFJjC,EAAAA,EAAAA,IAAkD,OAA7CH,MAAM,cAAa,wBAAoB,KAC5CG,EAAAA,EAAAA,IAA6C,SAA7CoC,GAA6C,aAG/CpC,EAAAA,EAAAA,IAGM,MAHNqC,GAGM,cAFJrC,EAAAA,EAAAA,IAAyC,OAApCH,MAAM,cAAa,eAAW,KACnCG,EAAAA,EAAAA,IAAgD,SAAhDsC,GAAgD,aAGlDtC,EAAAA,EAAAA,IAGM,MAHNuC,GAGM,cAFJvC,EAAAA,EAAAA,IAAkF,OAA7EH,MAAM,cAAa,wDAAoD,KAC5EG,EAAAA,EAAAA,IAAiD,SAAjD0C,GAAiD,e,CAUzDiW,GAAAA,GAAMrI,SAASsI,GAAAA,GAAgBC,GAAAA,GAAeC,GAAAA,GAAaC,GAAAA,GAAYC,GAAAA,GAAcC,GAAAA,GAAaC,GAAAA,GAAeC,GAAAA,GAASC,GAAAA,GAAQC,GAAAA,GAAQC,GAAAA,IAE1I,QACE1Z,KAAM,kBACN4F,IAAAA,GACE,MAAO,CACLC,QAASC,EAAAA,EAAIC,aACbwH,SAAU,GACVnH,OAAQ,GACRC,KAAM,GACNyT,OAAQ,CACNvV,IAAK,KACLwV,GAAI,KACJC,MAAO,KACPC,OAAQ,MAGd,EACA,aAAMlR,SACExC,KAAKyC,WACXzC,KAAK6T,kBACL1a,OAAO2a,iBAAiB,SAAU9T,KAAK+T,aACzC,EACAC,aAAAA,GACEhU,KAAKiU,gBACL9a,OAAO+a,oBAAoB,SAAUlU,KAAK+T,aAC5C,EACApR,QAAS,CACPyD,OAAAA,CAAQzB,GAAK,OAAO,IAAIzC,KAAKyC,GAAGqD,oBAAsB,EAEtD,cAAMvF,GACJ,MAAMwF,EAAWC,KAAKC,MAAMlP,aAAa6J,QAAQ,cACjD,IAAKmF,EAAU,OACf,MAAM/D,EAAW+D,EAAS9D,MAAMC,QAAQ,MAAO,OACzCxB,EAAU,CAAEC,cAAe,UAAU5J,aAAa6J,QAAQ,iBAEzDkE,EAAUnH,EAAQC,SAAcwD,QAAQC,IAAI,CACjDP,MAAM,GAAGhD,KAAKV,kCAAkC4E,IAAY,CAAEtB,YAAWK,MAAKlK,IAC5E,KAAID,EAAAA,EAAAA,GAAmBC,GAEvB,OAAOA,EAAImK,UAEbF,MAAM,GAAGhD,KAAKV,wBAAwB4E,IAAY,CAAEtB,YAAWK,MAAK7C,GAAKA,EAAE8C,SAC3EF,MAAM,GAAGhD,KAAKV,sBAAsB4E,8CAAsD,CAAEtB,YAAWK,MAAK7C,GAAKA,EAAE8C,WAIrHlD,KAAKgH,UAAYA,GAAY,IAAIvG,MAAK,CAACC,EAAGC,IAAM,IAAIuB,KAAKxB,EAAE7C,cAAgB,IAAIqE,KAAKvB,EAAE9C,gBACtFmC,KAAKH,QAAUA,GAAU,IAAIY,MAAK,CAACC,EAAGC,IAAM,IAAIuB,KAAKxB,EAAE7C,cAAgB,IAAIqE,KAAKvB,EAAE9C,gBAClFmC,KAAKF,MAAQA,GAAQ,IAAIW,MAAK,CAACC,EAAGC,IAAM,IAAIuB,KAAKxB,EAAE7C,cAAgB,IAAIqE,KAAKvB,EAAE9C,eAChF,EAGAoW,aAAAA,GACEU,OAAOC,KAAK5U,KAAKuT,QAAQjR,SAAQP,IAC3B/B,KAAKuT,OAAOxR,KAAM/B,KAAKuT,OAAOxR,GAAG8S,UAAW7U,KAAKuT,OAAOxR,GAAK,QAErE,EACAgS,YAAAA,GACEY,OAAOtS,OAAOrC,KAAKuT,QAAQjR,SAAQwS,GAAKA,GAAKA,EAAEC,UACjD,EAEAlB,eAAAA,GACE7T,KAAKiU,gBACLjU,KAAKgV,YACLhV,KAAKiV,WACLjV,KAAKkV,cACLlV,KAAKmV,cACP,EAGAH,SAAAA,GACE,MAAMK,EAAMrV,KAAKsV,MAAMC,WAAWC,WAAW,MAAO,IAAKH,EAAK,OAC9D,MAAMI,EAASzV,KAAKH,OAAOM,KAAI2B,GAAK,IAAII,KAAKJ,EAAEjE,cAAc+G,gBACvDvF,EAAOW,KAAKH,OAAOM,KAAI2B,GAAKA,EAAE9D,KAAO,OAE3CgC,KAAKuT,OAAOvV,IAAM,IAAIwU,GAAAA,GAAM6C,EAAK,CAC/Bta,KAAM,OACNsE,KAAM,CACJoW,SACAE,SAAU,CAAC,CACTC,MAAO,MACPvW,OACAwW,QAAS,GACTC,MAAM,EACNC,YAAa,KAGjBC,QAAS,CACPC,YAAY,EACZC,QAAS,CACPC,OAAQ,CAAEC,SAAS,GACnBC,QAAS,CAAE/E,KAAM,QAASgF,WAAW,IAEvCU,OAAQ,CACNpb,EAAG,CAAEqb,aAAa,EAAO5b,MAAO,CAAE+a,SAAS,EAAMc,KAAM,QACvD9T,EAAG,CAAE/H,MAAO,CAAE+a,SAAS,EAAMc,KAAM,sBAI3C,EAGAjC,QAAAA,GACE,MAAMI,EAAMrV,KAAKsV,MAAM6B,UAAU3B,WAAW,MAAO,IAAKH,EAAK,OAC7D,MAAMI,EAASzV,KAAKH,OAAOM,KAAI2B,GAAK,IAAII,KAAKJ,EAAEjE,cAAc+G,gBACvDwS,EAAMpX,KAAKH,OAAOM,KAAI2B,GAAKA,EAAE7D,QAAU,OACvCqZ,EAAMtX,KAAKH,OAAOM,KAAI2B,GAAKA,EAAE5D,QAAU,OAE7C8B,KAAKuT,OAAOC,GAAK,IAAIhB,GAAAA,GAAM6C,EAAK,CAC9Bta,KAAM,OACNsE,KAAM,CACJoW,SACAE,SAAU,CACR,CAAEC,MAAO,WAAYvW,KAAM+X,EAAKvB,QAAS,GAAKE,YAAa,GAC3D,CAAEH,MAAO,YAAavW,KAAMiY,EAAKzB,QAAS,GAAKE,YAAa,KAGhEC,QAAS,CACPC,YAAY,EACZC,QAAS,CACPC,OAAQ,CAAEC,SAAS,GACnBC,QAAS,CAAE/E,KAAM,QAASgF,WAAW,IAEvCU,OAAQ,CACNpb,EAAG,CAAEqb,aAAa,EAAO5b,MAAO,CAAE+a,SAAS,EAAMc,KAAM,SACvD9T,EAAG,CAAE/H,MAAO,CAAE+a,SAAS,EAAMc,KAAM,sBAI3C,EAGAhC,WAAAA,GACE,MAAMG,EAAMrV,KAAKsV,MAAMqC,aAAanC,WAAW,MAAO,IAAKH,EAAK,OAChE,MAAMI,EAASzV,KAAKH,OAAOM,KAAI2B,GAAK,IAAII,KAAKJ,EAAEjE,cAAc+G,gBACvD6O,EAAQzT,KAAKH,OAAOM,KAAI2B,GAAKA,EAAE3D,WAAa,OAElD6B,KAAKuT,OAAOE,MAAQ,IAAIjB,GAAAA,GAAM6C,EAAK,CACjCta,KAAM,OACNsE,KAAM,CACJoW,SACAE,SAAU,CAAC,CAAEC,MAAO,cAAevW,KAAMoU,EAAOoC,QAAS,GAAKE,YAAa,KAE7EC,QAAS,CACPC,YAAY,EACZC,QAAS,CAAEC,OAAQ,CAAEC,SAAS,IAC9BY,OAAQ,CACNpb,EAAG,CAAEqb,aAAa,EAAO5b,MAAO,CAAE+a,SAAS,EAAMc,KAAM,QACvD9T,EAAG,CAAE/H,MAAO,CAAE+a,SAAS,EAAMc,KAAM,sBAI3C,EAGA/B,YAAAA,GACE,MAAME,EAAMrV,KAAKsV,MAAMuC,cAAcrC,WAAW,MAAO,IAAKH,EAAK,OAGjE,MAAMI,EAASzV,KAAKF,KAAKK,KAAI2B,GAAK,IAAII,KAAKJ,EAAEjE,cAAc+G,gBAErDk2B,EAAmB96B,KAAKF,KAAKK,KAAI5C,IACrC,MAAMgL,EAAO,CACXhL,EAAIwB,YAAc,WAClBxB,EAAIyB,cAAgB,WACpBzB,EAAI0B,YAAc,YAEpB,MAAO,CACLkC,OAAQoH,EAAKhI,QAAOuB,GAAW,WAANA,IAAgB1D,OACzCtB,SAAUyL,EAAKhI,QAAOuB,GAAW,aAANA,IAAkB1D,OAC7CgD,QAASmH,EAAKhI,QAAOuB,GAAW,aAANA,IAAkB1D,WAI1C+C,EAAS25B,EAAiB36B,KAAIiD,GAAKA,EAAEjC,SACrCrE,EAAWg+B,EAAiB36B,KAAIiD,GAAKA,EAAEtG,WACvCsE,EAAU05B,EAAiB36B,KAAIiD,GAAKA,EAAEhC,UAE5CpB,KAAKuT,OAAOG,OAAS,IAAIlB,GAAAA,GAAM6C,EAAK,CAClCta,KAAM,MACNsE,KAAM,CACJoW,SACAE,SAAU,CACR,CAAEC,MAAO,SAAYvW,KAAM8B,EAAUiX,MAAO,SAAUZ,gBAAiB,WACvE,CAAE5B,MAAO,WAAYvW,KAAMvC,EAAUsb,MAAO,SAAUZ,gBAAiB,WACvE,CAAE5B,MAAO,WAAYvW,KAAM+B,EAAUgX,MAAO,SAAUZ,gBAAiB,aAG3ExB,QAAS,CACPC,YAAY,EACZC,QAAS,CAAEC,OAAQ,CAAEC,SAAS,IAC9BY,OAAQ,CACN5T,EAAG,CAAEiV,SAAS,EAAMhd,MAAO,CAAE+a,SAAS,EAAMc,KAAM,mBAClDtb,EAAG,CAAEyc,SAAS,EAAMpB,aAAa,EAAMqB,MAAO,CAAEC,SAAU,GAAKld,MAAO,CAAE+a,SAAS,EAAMc,KAAM,sBAIrG,IC3OJ,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,UFYA,IACEzd,KAAM,gBACN4F,KAAMA,KAAA,CAASiS,KAAM,cACrBvR,SAAU,CACR86B,WAAAA,GACE,MAAqB,cAAd76B,KAAKsR,KAAuB3I,GAAqBoyB,EAC1D,IGtBJ,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,SAAS,MAEpE,U,UCNOrhC,MAAM,Q,IAGJA,MAAM,W,iBAwBNA,MAAM,oB,0BAUC0U,MAAA,yC,IAEG1U,MAAM,iBAAiB0U,MAAA,c,IAgBvB1U,MAAM,kB,yBAeyCA,MAAM,S,UACzCA,MAAM,e,IAERA,MAAM,Q,IAEJA,MAAM,O,UAQbA,MAAM,e,8EAuCfA,MAAM,Y,2CA1HnBC,EAAAA,EAAAA,IA6IM,MA7INC,GA6IM,gBA5IJC,EAAAA,EAAAA,IAA4B,UAAxB,uBAAmB,KAEvBA,EAAAA,EAAAA,IAsBM,MAtBNK,GAsBM,WArBJL,EAAAA,EAAAA,IAGS,U,qCAHQwU,EAAAiN,KAAIxgB,I,cACnBjB,EAAAA,EAAAA,IAAmC,UAA3B2M,MAAM,IAAG,aAAS,mBAC1B7M,EAAAA,EAAAA,IAAuE8B,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAAnD3B,EAAA4B,OAALC,K,WAAfjC,EAAAA,EAAAA,IAAuE,UAA3Cc,IAAKmB,EAAI4K,MAAO3B,OAAOjJ,K,QAAOA,GAAC,EAAAjB,O,mBAF5C0T,EAAAiN,SAAI,SAKrBzhB,EAAAA,EAAAA,IAOS,U,qCAPQwU,EAAAtT,KAAID,I,iZAAJuT,EAAAtT,SAAI,SASrBlB,EAAAA,EAAAA,IAKS,U,qCALQwU,EAAArV,OAAM8B,I,gBACrBjB,EAAAA,EAAAA,IAAoC,UAA5B2M,MAAM,IAAG,cAAU,IAC3B3M,EAAAA,EAAAA,IAAoC,UAA5B2M,MAAM,SAAQ,SAAK,IAC3B3M,EAAAA,EAAAA,IAA4C,UAApC2M,MAAM,aAAY,aAAS,IACnC3M,EAAAA,EAAAA,IAAsC,UAA9B2M,MAAM,UAAS,UAAM,iBAJd6H,EAAArV,aASnBa,EAAAA,EAAAA,IAiHM,MAjHNyB,GAiHM,EAhHJzB,EAAAA,EAAAA,IA2FQ,eA1FNA,EAAAA,EAAAA,IAiBQ,eAhBNA,EAAAA,EAAAA,IAeK,YAdHA,EAAAA,EAAAA,IAIK,MAJAM,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAEN,EAAAkrB,gBAAAlrB,EAAAkrB,kBAAA5qB,IAAgB+T,MAAA,wC,wBAAyC,WAE3C,QAAZC,EAAA6W,UAAO,WAAnBvrB,EAAAA,EAAAA,IAAuC,OAAA0M,GAAR,QAAC,WAChC1M,EAAAA,EAAAA,IAAqB,OAAAkC,GAAR,QAAC,eAEhBhC,EAAAA,EAAAA,IAAa,UAAT,QAAI,KACRA,EAAAA,EAAAA,IAKK,KALLiC,GAKK,wBAL2C,cAE9CjC,EAAAA,EAAAA,IAEM,MAFNoC,GAEM,EADJpC,EAAAA,EAAAA,IAAqD,QAA/CH,MAAM,YAAaS,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAEN,EAAAihC,YAAAjhC,EAAAihC,cAAA3gC,KAAY,UAAE,eAGlDR,EAAAA,EAAAA,IAAe,UAAX,UAAM,mBACVA,EAAAA,EAAAA,IAAgB,UAAZ,WAAO,SAGfA,EAAAA,EAAAA,IAuEQ,6BAtENF,EAAAA,EAAAA,IAiEK8B,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAjEW3B,EAAAoM,gBAALxE,K,WAAXhI,EAAAA,EAAAA,IAiEK,MAjE4Bc,IAAKkH,EAAEhD,Y,EACtC9E,EAAAA,EAAAA,IAAyC,WAAAC,EAAAA,EAAAA,IAAlCC,EAAAohB,WAAWxZ,EAAE9D,eAAY,IAChChE,EAAAA,EAAAA,IAA6B,WAAAC,EAAAA,EAAAA,IAAtB6H,EAAEuf,cAAY,IACrBrnB,EAAAA,EAAAA,IAAmE,YAA/DA,EAAAA,EAAAA,IAA0D,QAApDH,OAAKuB,EAAAA,EAAAA,IAAA,CAAC,OAAe0G,EAAE3I,W,QAAW2I,EAAE3I,QAAM,MAGpDa,EAAAA,EAAAA,IAgCK,MAhCDH,MAAM,eAAgBS,QAAKC,EAAA,KAAAA,EAAA,IAAA8P,EAAAA,EAAAA,KAAN,QAAW,Y,EAClCrQ,EAAAA,EAAAA,IA8BM,MA9BNqC,GA8BM,EA7BamS,EAAA0Z,iBAAiBpmB,EAAEhD,aAAe,IAAIP,SAAM,WAA7DzE,EAAAA,EAAAA,IAwBW8B,EAAAA,GAAA,CAAAhB,IAAA,KAvBTZ,EAAAA,EAAAA,IAMS,UALPH,MAAM,qBACLS,SAAK+P,EAAAA,EAAAA,KAAApP,GAAOf,EAAA2tB,iBAAiB/lB,EAAEhD,aAAU,UAC1CyP,MAAA,sBACD,eAED,EAAAjS,IAIQkS,EAAAuZ,mBAAqBjmB,EAAEhD,aAAU,WAFzChF,EAAAA,EAAAA,IAcM,O,MAbJD,MAAM,YAELS,QAAKC,EAAA,KAAAA,EAAA,IAAA8P,EAAAA,EAAAA,KAAN,QAAW,Y,CAEAmE,EAAAwZ,mBAAqBlmB,EAAEhD,aAAU,WAA5ChF,EAAAA,EAAAA,IAA0E,MAA1EyC,GAA4D,eAAQ,WACpEzC,EAAAA,EAAAA,IAOK,KAPL4C,GAOK,gBANH5C,EAAAA,EAAAA,IAKK8B,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IALW2S,EAAA0Z,iBAAiBpmB,EAAEhD,aAAxByB,K,WAAXzG,EAAAA,EAAAA,IAKK,MAL4Cc,IAAK2F,EAAE8nB,W,EACtDruB,EAAAA,EAAAA,IAGM,MAHN2C,GAGM,EAFJ3C,EAAAA,EAAAA,IAAuD,eAAAC,EAAAA,EAAAA,IAA5CsG,EAAE/E,OAAStB,EAAAkhC,SAAS76B,EAAEgoB,YAAS,IAC1CvuB,EAAAA,EAAAA,IAA4E,MAA5E4C,IAA4E3C,EAAAA,EAAAA,IAAxDC,EAAAmhC,GAAG96B,EAAEmoB,YAAa,OAAGzuB,EAAAA,EAAAA,IAAGC,EAAAohC,SAAS/6B,EAAEooB,cAAW,U,+CAQ1E7uB,EAAAA,EAAAA,IAAqC,OAArCgD,GAA0B,cAKhC9C,EAAAA,EAAAA,IAwBK,YAvBHA,EAAAA,EAAAA,IAES,UAFDH,MAAM,MAAO+Q,UAAW9I,EAAE+kB,cAAgBvsB,QAAKW,GAAEuT,EAAAtE,QAAQvQ,KAAK,kBAAkBmI,EAAEhD,gB,QACpFgD,EAAE+kB,cAA6B,OAAb,YAAH,EAAA9pB,MAAA,aAGrBjD,EAAAA,EAAAA,IAQI8B,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAPU2S,EAAA0Z,iBAAiBpmB,EAAEhD,aAAxByB,K,WADTzG,EAAAA,EAAAA,IAQI,KAP2Cc,IAAK2F,EAAE8nB,UACnDza,KAAI,QAAUnO,mBAAmBc,EAAE8nB,qBACpCQ,OAAO,SAASC,IAAI,WAAWjvB,OAAKuB,EAAAA,EAAAA,IAAA,CAAC,eAAc,CAAAwP,SACmB,KAAjD4D,EAAA0Z,iBAAiBpmB,EAAEhD,aAAe,IAAIP,UAC1DjE,QAAKW,GAAoD,KAAjDuT,EAAA0Z,iBAAiBpmB,EAAEhD,aAAe,IAAIP,QAAgBtD,EAAOsgC,kBACvE,oBAED,GAAAv+B,O,OAEAhD,EAAAA,EAAAA,IAOS,UAPDH,MAAM,MACXS,QAAKW,GAAEuT,EAAAtE,QAAQvQ,KAAK,C,wCAAuFmI,EAAEhD,WAAUC,YAAe+C,EAAE/C,gBAI1I,iBAED,EAAA7B,W,MAKOhD,EAAAukB,SAASlgB,QACwB,iBADlB,WAA1BzE,EAAAA,EAAAA,IAEK,KAAAqD,GAAA5C,EAAA,MAAAA,EAAA,MADHP,EAAAA,EAAAA,IAA+C,MAA3CyE,QAAQ,IAAI5E,MAAM,SAAQ,gBAAY,wBAIhDa,EAAAA,EAAAA,IAmBW8gC,EAAAA,GAAA,CAnBDtvB,GAAG,QAAM,CACNsC,EAAAxF,WAAQ,WAAnBlP,EAAAA,EAAAA,IAiBM,O,MAjBeD,MAAM,eAAgBS,QAAKC,EAAA,KAAAA,EAAA,IAAA8P,EAAAA,EAAAA,KAAA,IAAA7P,IAAON,EAAAuhC,WAAAvhC,EAAAuhC,aAAAjhC,IAAS,Y,EAC9DR,EAAAA,EAAAA,IAeM,MAfNoD,GAeM,gBAdJpD,EAAAA,EAAAA,IAA6B,UAAzB,wBAAoB,mBACxBA,EAAAA,EAAAA,IAAqE,SAAlE,kEAA8D,mBACjEA,EAAAA,EAAAA,IAUK,MAVDuU,MAAA,kEAAkE,EACpEvU,EAAAA,EAAAA,IAEK,YADHA,EAAAA,EAAAA,IAAmB,SAAhB,iBAAY,QAAI,UAAKA,EAAAA,EAAAA,IAAa,SAAV,WAAM,QAAI,2BAEvCA,EAAAA,EAAAA,IAEK,YADHA,EAAAA,EAAAA,IAAiB,SAAd,eAAU,QAAI,eAAUA,EAAAA,EAAAA,IAAa,SAAV,WAAM,QAAI,2BAE1CA,EAAAA,EAAAA,IAEK,YADHA,EAAAA,EAAAA,IAAc,SAAX,YAAO,QAAI,kBAAaA,EAAAA,EAAAA,IAAgB,SAAb,cAAS,QAAI,kBAC7C,KAEFA,EAAAA,EAAAA,IAA0C,UAAjCM,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAEN,EAAAuhC,WAAAvhC,EAAAuhC,aAAAjhC,KAAW,gBAAM,qB,CAa7C,QACEgF,KAAMA,KAAA,CACJC,QAASC,EAAAA,EAAIC,aACbqJ,UAAU,EACV7B,SAAU,GACVsU,KAAM,GACNtiB,OAAQ,GACR+B,KAAM,GACNmqB,QAAS,OAET0C,iBAAkB,KAClBC,iBAAkB,KAClBE,iBAAkB,CAAC,EACnBsF,UAAW,CAAC,IAEdttB,SAAU,CACRpE,KAAAA,GACE,MAAMwG,EAAM,IAAIjC,IACdF,KAAKgH,SACF7G,KAAIwB,IACH,MAAMgD,EAAI,IAAIzC,KAAKP,EAAE9D,cACrB,OAAO0W,MAAM5P,GAAK,KAAOA,EAAEC,iBAE5BrE,OAAOC,UAEZ,MAAO,IAAI2B,GAAK1B,MAAK,CAACC,EAAGC,IAAMA,EAAID,GACrC,EACA4d,QAAAA,GACE,OAAOte,KAAKgH,SAASzG,QAAOoB,IAC1B,MAAM45B,GAAOv7B,KAAKsb,MAAQ,IAAIpZ,KAAKP,EAAE9D,cAAc+G,cAAcwe,aAAepjB,KAAKsb,KAC/EkgB,GAAQx7B,KAAKhH,QAAU2I,EAAE3I,SAAWgH,KAAKhH,OACzCyiC,GAAOz7B,KAAKjF,MAAQ4G,EAAEuf,eAAiBlhB,KAAKjF,KAClD,OAAOwgC,GAAOC,GAAQC,IAE1B,EACAt1B,cAAAA,GACE,MAAMwnB,EAAuB,QAAjB3tB,KAAKklB,QAAoB,GAAK,EAC1C,MAAO,IAAIllB,KAAKse,UAAU7d,MAAK,CAACC,EAAGC,KACjC,MAAMyH,EAAKpI,KAAK4tB,OAAOltB,EAAE7C,cACnBgwB,EAAK7tB,KAAK4tB,OAAOjtB,EAAE9C,cACzB,OAAIuK,IAAOylB,EAAW,EACfzlB,EAAKylB,EAAKF,GAAOA,IAE5B,GAEFnrB,OAAAA,GACExC,KAAK07B,YAGL17B,KAAK27B,YAAe/xB,IACbA,EAAE8e,OAAO6F,QAAQ,kBACpBvuB,KAAK4nB,iBAAmB,OAG5B4G,SAAS1a,iBAAiB,QAAS9T,KAAK27B,YAC1C,EACA3nB,aAAAA,GACEwa,SAASta,oBAAoB,QAASlU,KAAK27B,YAC7C,EACAh5B,QAAS,CACPq4B,UAAAA,GAAeh7B,KAAK6I,UAAY7I,KAAK6I,QAAU,EAC/CyyB,SAAAA,GAAct7B,KAAK6I,UAAW,CAAO,EACrC+kB,MAAAA,CAAOjpB,GACL,MAAMf,EAAI,IAAI1B,KAAKyC,GAAGuC,UACtB,OAAOnC,OAAOC,SAASpB,GAAKA,GAAKg4B,GACnC,EACA,eAAMF,GAEJ,MAAMpuB,EAAOpF,KAAKC,MAAMlP,aAAa6J,QAAQ,cAAgB,MAC7D,IAAKwK,GAAMnJ,MAAO,OAClB,MAAMqL,EAAalC,EAAKnJ,MAAMC,QAAQ,MAAO,OAEvChE,QAAU4C,MAAM,GAAGhD,KAAKV,4BAA4BkQ,IAAc,CACtE5M,QAAS,CAAEC,cAAe,UAAU5J,aAAa6J,QAAQ,kBAErDzD,QAAae,EAAE8C,OACrB,IAAIpK,EAAAA,EAAAA,GAAmBsH,GAAI,OAC3BJ,KAAKgH,SAAWlD,MAAMwQ,QAAQjV,GAAQA,EAAQA,EAAK2H,UAAY,GAC/DhH,KAAKgH,SAAS1E,SAAQX,IACpBA,EAAE+kB,cACC/kB,EAAEylB,oBACFzlB,EAAE0lB,UACF1lB,EAAEolB,eACFplB,EAAEklB,QACFllB,EAAEslB,SACFtlB,EAAEulB,WAGP,MAAM2U,EAAW77B,KAAKgH,SAAS7G,KAAIwB,GAAK3B,KAAK4wB,oBAAoBjvB,EAAEhD,oBAC7D2E,QAAQC,IAAIs4B,EACpB,EAIA1gB,WAAU,GACVggB,QAAAA,CAASW,GACP,MAAMn3B,EAAI,IAAIzC,KAAK45B,GACnB,OAAOvnB,MAAM5P,GAAK,GAAKA,EAAE0xB,gBAC3B,EACA6E,EAAAA,CAAGa,GACD,MAAMj3B,EAAIC,OAAOg3B,GAAS,GAC1B,MAAO,GAAGv6B,KAAKC,MAAMqD,EAAI,UAC3B,EACAm2B,QAAAA,CAASxhC,EAAO,IACd,OAAOA,EAAK2E,OAAS,GAAK,GAAG3E,EAAK6D,MAAM,EAAG,OAAS7D,CACtD,EACAwrB,cAAAA,GACEjlB,KAAKklB,QAA2B,QAAjBllB,KAAKklB,QAAoB,OAAS,KACnD,EAGAqC,YAAAA,CAAa5lB,GACX,MAAM2G,EAAM3G,EAAEhD,WACd,YAA4Bkd,IAAxB7b,KAAKqtB,UAAU/kB,GAA2BtI,KAAKqtB,UAAU/kB,KAEpD3G,EAAE2uB,UACb,EACAC,eAAAA,CAAgBjhB,EAAWyH,GACzB/W,KAAKqtB,UAAY,IAAKrtB,KAAKqtB,UAAW,CAAC/d,KAAcyH,EACvD,EAGA2Q,gBAAAA,CAAiBpY,GACftP,KAAK4nB,iBACH5nB,KAAK4nB,mBAAqBtY,EAAY,KAAOA,EAC3CtP,KAAK4nB,kBACP5nB,KAAK4wB,oBAAoBthB,EAE7B,EAEAshB,mBAAAA,CAAoBthB,GACdtP,KAAK+nB,iBAAiBzY,KAC1BtP,KAAK6nB,iBAAmBvY,EAGxBtM,MAAM,GAAGhD,KAAKV,oBAAoBgQ,YAAqB,CACrD1M,QAAS,CAAEC,cAAe,UAAU5J,aAAa6J,QAAQ,kBAExDG,MAAK7C,GAAKA,EAAE8C,SACZD,MAAK4tB,IACJ,MAAMhwB,EAAMiD,MAAMwQ,QAAQuc,GAAQA,EAAO,GACzC7wB,KAAK+nB,iBAAmB,IAAK/nB,KAAK+nB,iBAAkB,CAACzY,GAAYzO,GACjEb,KAAKuwB,gBAAgBjhB,EAAWzO,EAAIzC,OAAS,MAE9C+E,OAAM,KACLnD,KAAK+nB,iBAAmB,IAAK/nB,KAAK+nB,iBAAkB,CAACzY,GAAY,IACjEtP,KAAKuwB,gBAAgBjhB,GAAW,MAEjCyhB,SAAQ,KACP/wB,KAAK6nB,iBAAmB,QAE9B,ICtSJ,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,U,UCCiBnuB,MAAM,gB,IAEAA,MAAM,kB,+BAkBpBA,MAAM,e,IAEJ0U,MAAA,4B,IAEI1U,MAAM,a,IAiBNA,MAAM,a,IAiBNA,MAAM,a,IAqBVA,MAAM,UAAU0U,MAAA,8C,2DAxFzBzU,EAAAA,EAAAA,IAgGM,2BA/FJE,EAAAA,EAAAA,IAAwB,UAApB,mBAAe,iBAGnBU,EAAAA,EAAAA,IAqBW8gC,EAAAA,GAAA,CArBDtvB,GAAG,QAAM,CACNnR,EAAAq8B,cAAW,WAAtBt9B,EAAAA,EAAAA,IAmBM,O,MAnBkBD,MAAM,gBAAiBS,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAEN,EAAAm9B,YAAAn9B,EAAAm9B,cAAA78B,K,EACpDR,EAAAA,EAAAA,IAiBM,OAjBDH,MAAM,gBAAiBS,QAAKC,EAAA,KAAAA,EAAA,IAAA8P,EAAAA,EAAAA,KAAN,QAAW,Y,cACpCrQ,EAAAA,EAAAA,IAA6B,UAAzB,wBAAoB,KACxBA,EAAAA,EAAAA,IAcO,QAdAoQ,SAAM7P,EAAA,KAAAA,EAAA,IAAA8P,EAAAA,EAAAA,KAAA,IAAA7P,IAAUN,EAAAiiC,sBAAAjiC,EAAAiiC,wBAAA3hC,IAAoB,e,EACzCR,EAAAA,EAAAA,IAOM,MAPND,GAOM,gBANJD,EAAAA,EAAAA,IAKM8B,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IALed,EAAA8/B,eAAT5f,K,WAAZnhB,EAAAA,EAAAA,IAKM,OAL+Bc,IAAKqgB,EAAMrgB,IAAKf,MAAM,gB,EACzDG,EAAAA,EAAAA,IAGQ,QAHRK,GAGQ,WAFNL,EAAAA,EAAAA,IAAkE,SAA3DkB,KAAK,W,yBAAoBH,EAAAqhC,oBAAoBnhB,EAAMrgB,KAAGK,G,kBAA7BF,EAAAqhC,oBAAoBnhB,EAAMrgB,SAAG,QAAK,KAClEX,EAAAA,EAAAA,IAAGghB,EAAMlF,OAAK,U,qBAKpB/b,EAAAA,EAAAA,IAAwB,aAAjB,aAAS,cAChBA,EAAAA,EAAAA,IAA8G,Y,qCAA3Fe,EAAAqhC,oBAAoBC,0BAAyBphC,GAAEsT,MAAA,+B,iBAA/CxT,EAAAqhC,oBAAoBC,6BAAyB,aAA8CriC,EAAAA,EAAAA,IAAI,iCAClHA,EAAAA,EAAAA,IAA2C,UAAnCkB,KAAK,UAAS,gBAAY,KAClClB,EAAAA,EAAAA,IAAyD,UAAjDkB,KAAK,SAAUZ,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAEN,EAAAm9B,YAAAn9B,EAAAm9B,cAAA78B,KAAY,WAAM,6BAQxDR,EAAAA,EAAAA,IA+DM,MA/DNyB,GA+DM,EA7DJzB,EAAAA,EAAAA,IAuDM,MAvDNwM,GAuDM,EArDJxM,EAAAA,EAAAA,IAeQ,QAfRgC,GAeQ,gBAdNhC,EAAAA,EAAAA,IAKQ,eAJNA,EAAAA,EAAAA,IAGK,YAFHA,EAAAA,EAAAA,IAA0B,UAAtB,sBACJA,EAAAA,EAAAA,IAAe,UAAX,cAAM,KAGdA,EAAAA,EAAAA,IAOQ,6BANNF,EAAAA,EAAAA,IAKK8B,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IALed,EAAA8/B,cAAcp9B,MAAM,EAAG1C,EAAA8/B,cAAct8B,OAAM,IAApD0c,K,WAAXnhB,EAAAA,EAAAA,IAKK,MALgEc,IAAKqgB,EAAMrgB,K,EAC9EZ,EAAAA,EAAAA,IAA0B,WAAAC,EAAAA,EAAAA,IAAnBghB,EAAMlF,OAAK,IAClB/b,EAAAA,EAAAA,IAEK,MAFAuU,OAAKwY,EAAAA,EAAAA,IAAA,CAAAjQ,MAAW/b,EAAAuhC,eAAerhB,EAAMrgB,KAAO,MAAQ,Y,QACpDG,EAAAuhC,eAAerhB,EAAMrgB,KAAO,MAAQ,MAAZ,Q,WAMnCZ,EAAAA,EAAAA,IAeQ,QAfRiC,GAeQ,gBAdNjC,EAAAA,EAAAA,IAKQ,eAJNA,EAAAA,EAAAA,IAGK,YAFHA,EAAAA,EAAAA,IAA0B,UAAtB,sBACJA,EAAAA,EAAAA,IAAe,UAAX,cAAM,KAGdA,EAAAA,EAAAA,IAOQ,6BANNF,EAAAA,EAAAA,IAKK8B,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IALed,EAAA8/B,cAAcp9B,MAAM1C,EAAA8/B,cAAct8B,OAAM,EAAKxD,EAAA8/B,cAAct8B,OAAM,MAA1E0c,K,WAAXnhB,EAAAA,EAAAA,IAKK,MALyFc,IAAKqgB,EAAMrgB,K,EACvGZ,EAAAA,EAAAA,IAA0B,WAAAC,EAAAA,EAAAA,IAAnBghB,EAAMlF,OAAK,IAClB/b,EAAAA,EAAAA,IAEK,MAFAuU,OAAKwY,EAAAA,EAAAA,IAAA,CAAAjQ,MAAW/b,EAAAuhC,eAAerhB,EAAMrgB,KAAO,MAAQ,Y,QACpDG,EAAAuhC,eAAerhB,EAAMrgB,KAAO,MAAQ,MAAZ,Q,WAMnCZ,EAAAA,EAAAA,IAiBQ,QAjBRoC,GAiBQ,gBAhBNpC,EAAAA,EAAAA,IAKQ,eAJNA,EAAAA,EAAAA,IAGK,YAFHA,EAAAA,EAAAA,IAA0B,UAAtB,sBACJA,EAAAA,EAAAA,IAAe,UAAX,cAAM,KAGdA,EAAAA,EAAAA,IASQ,6BARNF,EAAAA,EAAAA,IAOK8B,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAPed,EAAA8/B,cAAcp9B,MAAO1C,EAAA8/B,cAAct8B,OAAM,MAAlD0c,K,WAAXnhB,EAAAA,EAAAA,IAOK,MAPiEc,IAAKqgB,EAAMrgB,K,EAC/EZ,EAAAA,EAAAA,IAEK,MAFAuU,OAAKwY,EAAAA,EAAAA,IAAA,CAAAwV,WAAgC,sBAAhBthB,EAAMlF,MAAgC,OAAS,O,SACpEkF,EAAMlF,MAAgCkF,EAAMlF,QAAmB,IAEpE/b,EAAAA,EAAAA,IAEK,MAFAuU,OAAKwY,EAAAA,EAAAA,IAAA,CAAAjQ,MAAyB,sBAAdmE,EAAMrgB,IAA+BG,EAAAuhC,eAAerhB,EAAMrgB,KAAO,QAAU,MAAUG,EAAAuhC,eAAerhB,EAAMrgB,KAAO,MAAQ,Y,QACzIG,EAAAuhC,eAAerhB,EAAMrgB,KAAO,MAAQ,MAAZ,Q,aAQrCZ,EAAAA,EAAAA,IAGM,MAHNqC,GAGM,gBAFJrC,EAAAA,EAAAA,IAAkC,cAA1B,qBAAiB,6CAAUA,EAAAA,EAAAA,IAA2C,eAApCA,EAAAA,EAAAA,IAA4B,SAAzB,2BAAqB,KAClEA,EAAAA,EAAAA,IAAqD,UAAAC,EAAAA,EAAAA,IAA/Cc,EAAAuhC,eAAeD,2BAAyB,QAIlDriC,EAAAA,EAAAA,IAA4G,UAAnG4Q,UAAW1Q,EAAAsiC,YAAY,QAAS3iC,MAAM,aAAcS,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAEN,EAAA88B,WAAA98B,EAAA88B,aAAAx8B,KAAW,uBAAoB,EAAA8B,K,CC9FhG,MAAMmgC,GAAQ3nB,OAAO4nB,OAAO,CAAEC,MAAM,QAASC,OAAO,SAAUC,MAAM,UAC9DC,GAAShoB,OAAO4nB,OAAO,CAAEK,MAAM,QAASC,UAAU,YAAaC,OAAO,WAI5E,SAASC,GAAW/zB,EAAMhQ,EAAQgkC,GACvC,OAAIh0B,IAASszB,GAAMI,MAEb1jC,IAAW2jC,GAAOG,QAAsB,SAAXE,GAAgC,kBAAXA,EAIpDh0B,IAASszB,GAAME,MACF,SAAXQ,GACAhkC,IAAW2jC,GAAOC,OAAqB,SAAXI,EAI9Bh0B,IAASszB,GAAMG,SACF,SAAXO,GACAhkC,IAAW2jC,GAAOG,SAAsB,SAAXE,GAAgC,kBAAXA,GAM1D,CD8EA,QACEC,OAAQ,CACNzsB,qBAAsB,CAAEzM,KAAM,uBAAwB0nB,QAASA,IAAM,IAAM,MAC3Enb,qBAAsB,CAAEvM,KAAM,uBAAwB0nB,QAASA,IAAMxnB,cAEvE5E,IAAAA,GACE,MAAO,CACLC,QAASC,EAAAA,EAAIC,aACb28B,eAAgB,CAAC,EACjBF,oBAAqB,CAAC,EACtBhF,aAAa,EAEbyD,cAAe,CACb,CAAEjgC,IAAK,qBAAsBmb,MAAO,sBACpC,CAAEnb,IAAK,kBAAmBmb,MAAO,mBACjC,CAAEnb,IAAK,oBAAqBmb,MAAO,uBACnC,CAAEnb,IAAK,aAAcmb,MAAO,cAC5B,CAAEnb,IAAK,eAAgBmb,MAAO,gBAC9B,CAAEnb,IAAK,SAAUmb,MAAO,UACxB,CAAEnb,IAAK,WAAYmb,MAAO,YAC1B,CAAEnb,IAAK,iBAAkBmb,MAAO,kBAChC,CAAEnb,IAAK,eAAgBmb,MAAO,gBAC9B,CAAEnb,IAAK,0BAA2Bmb,MAAO,2BACzC,CAAEnb,IAAK,kBAAmBmb,MAAO,mBACjC,CAAEnb,IAAK,4BAA6Bmb,MAAO,6BAC3C,CAAEnb,IAAK,oBAAqBmb,MAAO,uBACnC,CAAEnb,IAAK,iBAAkBmb,MAAO,kBAChC,CAAEnb,IAAK,WAAYmb,MAAO,YAC1B,CAAEnb,IAAK,uBAAwBmb,MAAO,wBACtC,CAAEnb,IAAK,sBAAuBmb,MAAO,uBACrC,CAAEnb,IAAK,0BAA2Bmb,MAAO,6BACzC,CAAEnb,IAAK,oBAAqBmb,MAAO,uBACnC,CAAEnb,IAAK,yBAA0Bmb,MAAO,4BACxC,CAAEnb,IAAK,uBAAwBmb,MAAO,wBACtC,CAAEnb,IAAK,oBAAqBmb,MAAO,uBACnC,CAAEnb,IAAK,uBAAwBmb,MAAO,wBACtC,CAAEnb,IAAK,UAAWmb,MAAO,WACzB,CAAEnb,IAAK,iBAAkBmb,MAAO,kBAChC,CAAEnb,IAAK,sBAAuBmb,MAAO,yBACrC,CAAEnb,IAAK,mBAAoBmb,MAAO,sBAClC,CAAEnb,IAAK,YAAamb,MAAO,aAC3B,CAAEnb,IAAK,iBAAkBmb,MAAO,kBAChC,CAAEnb,IAAK,qBAAsBmb,MAAO,0BACpC,CAAEnb,IAAK,qBAAsBmb,MAAO,wBACpC,CAAEnb,IAAK,kBAAmBmb,MAAO,mBACjC,CAAEnb,IAAK,MAAOmb,MAAO,OACrB,CAAEnb,IAAK,eAAgBmb,MAAO,gBAC9B,CAAEnb,IAAK,oBAAqBmb,MAAO,sBAGzC,EACApT,OAAAA,GACExC,KAAKk9B,qBACP,EACAn9B,SAAU,CAER0Q,aAAAA,GACE,OAAOzQ,KAAKwQ,qBAAuBxQ,KAAKwQ,uBAAyB,IACnE,EACA2sB,aAAAA,GACE,OAAOn9B,KAAKyQ,eAAezX,QAAU,OACvC,GAEF2J,QAAS,CAEP05B,WAAAA,CAAYW,GACV,IAAIh0B,EAAO,KACX,IACEA,EAAOd,KAAKC,MAAMlP,aAAa6J,QAAQ,eAAekG,MAAQ,OAChE,CAAE,MAAOY,GAAiB,CAC1B,OAAOmzB,GAAW/zB,EAAMhJ,KAAKm9B,cAAeH,EAC9C,EACAI,eAAAA,GACE,MAAMC,EAAO,CAAC,EAGd,OAFAr9B,KAAK06B,cAAcp4B,SAAQo1B,IAAO2F,EAAK3F,EAAEj9B,MAAO,KAChD4iC,EAAKnB,0BAA4B,GAC1BmB,CACT,EACAH,mBAAAA,GAIE,MAAMI,EAAiBt9B,KAAK4P,OAAOc,OAAOpB,WAAa,GAEvDtM,MAAM,GAAGhD,KAAKV,2BAA2Bg+B,IAAkB,CACzD16B,QAAS,CAAEC,cAAe,UAAU5J,aAAa6J,QAAQ,kBAExDG,MAAKlK,IACJ,KAAID,EAAAA,EAAAA,GAAmBC,GAEvB,OAAOA,EAAImK,UAEZD,MAAK8oB,IACJ,MAAM1sB,EAAOyE,MAAMwQ,QAAQyX,GAAQA,EAAI,IAAM,CAAC,EAAKA,EAG7CwR,EAAav9B,KAAKo9B,kBAGxBp9B,KAAK06B,cAAcp4B,SAAQo1B,IACzB,MAAM51B,EAAIzC,EAAKq4B,EAAEj9B,KACP,MAANqH,EAAWy7B,EAAW7F,EAAEj9B,MAAO,EACpB,MAANqH,EAAWy7B,EAAW7F,EAAEj9B,MAAO,EAElB,mBAANqH,IAAiBy7B,EAAW7F,EAAEj9B,KAAOqH,MAGvDy7B,EAAWrB,0BACT78B,EAAK68B,2BAA6B,GAEpCl8B,KAAKm8B,eAAiBoB,KAGvBp6B,OAAM+J,GAAOzD,QAAQI,MAAMqD,IAChC,EAEA2pB,SAAAA,GAEE72B,KAAKi8B,oBAAsB,IAAKj8B,KAAKm8B,gBACrCn8B,KAAKi3B,aAAc,EAGnBzI,SAASriB,KAAKiC,MAAMovB,SAAW,QACjC,EACAtG,UAAAA,GACEl3B,KAAKi3B,aAAc,EACnBzI,SAASriB,KAAKiC,MAAMovB,SAAW,EACjC,EAEAxB,oBAAAA,GACE,MAAM/zB,EAAWhP,aAAa6J,QAAQ,aAGhCw6B,EAAiBt9B,KAAK4P,OAAOc,OAAOpB,WAAa,GAGjD+B,EAAU,CAAC,EACjBrR,KAAK06B,cAAcp4B,SAAQwY,IACzBzJ,EAAQyJ,EAAMrgB,KAAOuF,KAAKi8B,oBAAoBnhB,EAAMrgB,KAAO,IAAM,OAEnE4W,EAAQzS,YAAcsJ,KAAKC,MAAMF,GAAU9D,MAC3CkN,EAAQ6qB,0BACNl8B,KAAKi8B,oBAAoBC,2BAA6B,GAExDl5B,MAAM,GAAGhD,KAAKV,gCAAgCg+B,IAAkB,CAC9DzwB,OAAQ,MACRjK,QAAS,CACPC,cAAe,UAAU5J,aAAa6J,QAAQ,eAC9C,eAAgB,oBAElBqJ,KAAMjE,KAAK4E,UAAUuE,KAEpBpO,MAAKlK,GAAOA,EAAImK,SAChBD,MAAK,KACJjD,KAAKi3B,aAAc,EACnBzI,SAASriB,KAAKiC,MAAMovB,SAAW,GAC/Bx9B,KAAKk9B,yBAEN/5B,OAAM+J,GAAOzD,QAAQI,MAAMqD,IAChC,GAEFlB,MAAO,CACL,wCAAwCyxB,GAChCA,GAEAz9B,KAAK06B,cAAcp4B,SAAQwY,IACL,sBAAdA,EAAMrgB,KAA6C,8BAAdqgB,EAAMrgB,MAC/CuF,KAAKi8B,oBAAoBnhB,EAAMrgB,MAAO,KAYlD,IErRJ,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,U,iJCiGSf,MAAM,iB,gDAWJA,MAAM,UAAU0U,MAAA,wB,mHApHzBzU,EAAAA,EAAAA,IA4IM,2BA3IJE,EAAAA,EAAAA,IAAkB,UAAd,aAAS,iBAGbU,EAAAA,EAAAA,IAkGW8gC,EAAAA,GAAA,CAlGDtvB,GAAG,QAAM,CACNnR,EAAAq8B,cAAW,WAAtBt9B,EAAAA,EAAAA,IAgGM,O,MAhGkBD,MAAM,gBAAiBS,QAAKC,EAAA,MAAAA,EAAA,QAAAC,IAAEN,EAAAm9B,YAAAn9B,EAAAm9B,cAAA78B,K,EACpDR,EAAAA,EAAAA,IA8FM,OA9FDH,MAAM,gBAAiBS,QAAKC,EAAA,MAAAA,EAAA,KAAA8P,EAAAA,EAAAA,KAAN,QAAW,Y,gBACpCrQ,EAAAA,EAAAA,IAAuB,UAAnB,kBAAc,KAClBA,EAAAA,EAAAA,IA2FO,QA3FAoQ,SAAM7P,EAAA,MAAAA,EAAA,KAAA8P,EAAAA,EAAAA,KAAA,IAAA7P,IAAUN,EAAA2jC,iBAAA3jC,EAAA2jC,mBAAArjC,IAAe,e,gBAEpCR,EAAAA,EAAAA,IAA6B,aAAtB,kBAAc,cACrBA,EAAAA,EAAAA,IAIS,U,qCAJQe,EAAA+iC,eAAeC,cAAa9iC,I,gBAC3CjB,EAAAA,EAAAA,IAAkD,UAA1C2M,MAAM,gBAAe,gBAAY,IACzC3M,EAAAA,EAAAA,IAA4C,UAApC2M,MAAM,aAAY,aAAS,IACnC3M,EAAAA,EAAAA,IAAsD,UAA9C2M,MAAM,kBAAiB,kBAAc,iBAH9B5L,EAAA+iC,eAAeC,iBAAa,eAIpC/jC,EAAAA,EAAAA,IAAI,mCAEbA,EAAAA,EAAAA,IAA4B,aAArB,iBAAa,cACpBA,EAAAA,EAAAA,IAEkE,SAF3DkB,KAAK,S,qCAAyBH,EAAA+iC,eAAeE,aAAY/iC,GAC3D2P,SAA2C,iBAAjC7P,EAAA+iC,eAAeC,cACzBtzB,SAA2C,iBAAjC1P,EAAA+iC,eAAeC,e,kBAFOhjC,EAAA+iC,eAAeE,kBAAY,GAAnCxrB,QAAR,MAA4C,eAECxY,EAAAA,EAAAA,IAAI,mCAEtEA,EAAAA,EAAAA,IAAqC,aAA9B,0BAAsB,cAC7BA,EAAAA,EAAAA,IAEkE,SAF3DkB,KAAK,SAASiX,KAAK,O,qCAAuBpX,EAAA+iC,eAAeG,iBAAgBhjC,GAC3E2P,SAA2C,iBAAjC7P,EAAA+iC,eAAeC,cACzBtzB,SAA2C,iBAAjC1P,EAAA+iC,eAAeC,e,kBAFmBhjC,EAAA+iC,eAAeG,sBAAgB,GAAvCzrB,QAAR,MAAgD,eAEfxY,EAAAA,EAAAA,IAAI,qBAEtEA,EAAAA,EAAAA,IAcM,2BAbNA,EAAAA,EAAAA,IAA4B,aAArB,iBAAa,KAIpBgS,EAAAA,EAAAA,IAQE8O,EAAA,C,WAPa/f,EAAA+iC,eAAeI,a,qCAAfnjC,EAAA+iC,eAAeI,aAAYjjC,GACnC,WAAQ,IAAMoH,KACd,aAAU,WAAaA,MAAO0C,eAC/B,gBACC,sBAAoB,EACpB6F,SAA2C,iBAAjC7P,EAAA+iC,eAAeC,eAAqE,mBAAjChjC,EAAA+iC,eAAeC,cAC5EtzB,SAA2C,cAAjC1P,EAAA+iC,eAAeC,e,sFAGhC/jC,EAAAA,EAAAA,IAAI,mCAGJA,EAAAA,EAAAA,IAAoC,aAA7B,yBAAqB,cAC5BA,EAAAA,EAAAA,IAGS,U,qCAHQe,EAAA+iC,eAAeK,cAAaljC,I,gBAC3CjB,EAAAA,EAAAA,IAA8B,UAAtB2M,MAAM,KAAI,OAAG,IACrB3M,EAAAA,EAAAA,IAA6B,UAArB2M,MAAM,KAAI,MAAE,iBAFL5L,EAAA+iC,eAAeK,iBAAa,eAGpCnkC,EAAAA,EAAAA,IAAI,mCAGbA,EAAAA,EAAAA,IAIQ,uBAJD,uCACLA,EAAAA,EAAAA,IAEY,eAFLA,EAAAA,EAAAA,IAEH,SAFM,8GAEV,mBACMA,EAAAA,EAAAA,IAAI,8BACZA,EAAAA,EAAAA,IAEyD,SAFlDkB,KAAK,S,qCAAyBH,EAAA+iC,eAAeM,eAAcnjC,GAC3D2P,SAA2C,MAAjC7P,EAAA+iC,eAAeK,cACzB1zB,SAA2C,MAAjC1P,EAAA+iC,eAAeK,e,kBAFKpjC,EAAA+iC,eAAeM,oBAAc,GAArC5rB,QAAR,MAA8C,eAEVxY,EAAAA,EAAAA,IAAI,mCAG7DA,EAAAA,EAAAA,IAEQ,aAFD,2HAEP,cACAA,EAAAA,EAAAA,IAGS,U,qCAHQe,EAAA+iC,eAAeO,wBAAuBpjC,I,gBACrDjB,EAAAA,EAAAA,IAA8B,UAAtB2M,MAAM,KAAI,OAAG,IACrB3M,EAAAA,EAAAA,IAA6B,UAArB2M,MAAM,KAAI,MAAE,iBAFL5L,EAAA+iC,eAAeO,2BAAuB,eAG9CrkC,EAAAA,EAAAA,IAAI,mCAEbA,EAAAA,EAAAA,IAA0E,uBAAnE,cAASA,EAAAA,EAAAA,IAAkD,eAA3CA,EAAAA,EAAAA,IAAmC,SAAhC,oCAA4B,cACtDA,EAAAA,EAAAA,IAA0D,Y,qCAAvCe,EAAA+iC,eAAeQ,YAAWrjC,I,iBAA1BF,EAAA+iC,eAAeQ,eAAW,eAAatkC,EAAAA,EAAAA,IAAI,mCAE9DA,EAAAA,EAAAA,IAGQ,uBAHD,2BAELA,EAAAA,EAAAA,IAA4E,eAArEA,EAAAA,EAAAA,IAA6D,SAA1D,8DAAsD,mBAElEA,EAAAA,EAAAA,IAOI,SAPD,gdAOH,cACAA,EAAAA,EAAAA,IAAsE,SAA/DkB,KAAK,W,qCAAoBH,EAAA+iC,eAAeS,oBAAmBtjC,I,iBAAlCF,EAAA+iC,eAAeS,uBAAmB,eAAIvkC,EAAAA,EAAAA,IAAI,mCAE1EA,EAAAA,EAAAA,IAAmC,aAA5B,wBAAoB,cAC3BA,EAAAA,EAAAA,IAEuD,SAFhDkB,KAAK,O,qCAAgBH,EAAA+iC,eAAeU,oBAAmBvjC,GACvD2P,UAAW7P,EAAA+iC,eAAeS,oBAC1B9zB,SAAU1P,EAAA+iC,eAAeS,qB,kBAFJxjC,EAAA+iC,eAAeU,uBAAmB,eAEPxkC,EAAAA,EAAAA,IAAI,mCAE3DA,EAAAA,EAAAA,IAAmC,aAA5B,wBAAoB,cAC3BA,EAAAA,EAAAA,IAEuD,SAFhDkB,KAAK,O,uCAAgBH,EAAA+iC,eAAeW,oBAAmBxjC,GACvD2P,UAAW7P,EAAA+iC,eAAeS,oBAC1B9zB,SAAU1P,EAAA+iC,eAAeS,qB,kBAFJxjC,EAAA+iC,eAAeW,uBAAmB,eAEPzkC,EAAAA,EAAAA,IAAI,mCAE3DA,EAAAA,EAAAA,IAA2C,UAAnCkB,KAAK,UAAS,gBAAY,KAClClB,EAAAA,EAAAA,IAAyD,UAAjDkB,KAAK,SAAUZ,QAAKC,EAAA,MAAAA,EAAA,QAAAC,IAAEN,EAAAm9B,YAAAn9B,EAAAm9B,cAAA78B,KAAY,WAAM,6BAOxDR,EAAAA,EAAAA,IAeM,MAfNgC,GAeM,EAdJhC,EAAAA,EAAAA,IAAmK,2BAA9JA,EAAAA,EAAAA,IAA+B,cAAvB,kBAAc,aAAS,KAACC,EAAAA,EAAAA,IAAGc,EAAA2jC,UAAUX,cAAgBhjC,EAAA2jC,UAAUX,cAAcrvB,OAAO,GAAGC,cAAgB5T,EAAA2jC,UAAUX,cAActgC,MAAM,GAAK,KAAN,KAC1G,iBAA5B1C,EAAA2jC,UAAUX,gBAAa,WAAlCjkC,EAAAA,EAAAA,IAA+H,MAAAmC,GAAA,gBAAxEjC,EAAAA,EAAAA,IAA8B,cAAtB,iBAAa,aAAS,KAACC,EAAAA,EAAAA,IAAGc,EAAA2jC,UAAUV,cAAgB,KAAJ,sBACxE,mBAA5BjjC,EAAA2jC,UAAUX,gBAAa,WAAlCjkC,EAAAA,EAAAA,IAA0I,MAAAsC,GAAA,gBAAjFpC,EAAAA,EAAAA,IAAmC,cAA3B,sBAAkB,aAAS,KAACC,EAAAA,EAAAA,IAAGc,EAAA2jC,UAAUT,kBAAoB,KAAJ,sBACnF,cAA5BljC,EAAA2jC,UAAUX,gBAAa,WAAlCjkC,EAAAA,EAAAA,IAA4H,MAAAuC,GAAA,gBAAxErC,EAAAA,EAAAA,IAA8B,cAAtB,iBAAa,aAAS,KAACC,EAAAA,EAAAA,IAAGc,EAAA2jC,UAAUR,cAAgB,KAAJ,qCAC1GlkC,EAAAA,EAAAA,IAAI,qBACNA,EAAAA,EAAAA,IAA+F,2BAA1FA,EAAAA,EAAAA,IAA+B,cAAvB,kBAAc,aAAS,KAACC,EAAAA,EAAAA,IAA+B,MAA5Bc,EAAA2jC,UAAUP,cAAwB,MAAQ,MAAnB,KACxB,MAA5BpjC,EAAA2jC,UAAUP,gBAAa,WAAlCrkC,EAAAA,EAAAA,IAAyH,MAAAwC,GAAA,gBAA7EtC,EAAAA,EAAAA,IAAiC,cAAzB,oBAAgB,aAAS,KAACC,EAAAA,EAAAA,IAAGc,EAAA2jC,UAAUN,gBAAkB,KAAJ,qCACvGpkC,EAAAA,EAAAA,IAAI,qBACNA,EAAAA,EAAAA,IAA4G,2BAAvGA,EAAAA,EAAAA,IAAkC,cAA1B,qBAAiB,aAAS,KAACC,EAAAA,EAAAA,IAAyC,MAAtCc,EAAA2jC,UAAUL,wBAAkC,MAAQ,MAAnB,MAE5ErkC,EAAAA,EAAAA,IAGM,MAHNuC,GAGM,gBAFJvC,EAAAA,EAAAA,IAA0B,cAAlB,aAAS,6CAAUA,EAAAA,EAAAA,IAA2C,eAApCA,EAAAA,EAAAA,IAA4B,SAAzB,2BAAqB,KAC1DA,EAAAA,EAAAA,IAA2C,UAAAC,EAAAA,EAAAA,IAApCc,EAAA2jC,UAAUJ,aAAe,KAAJ,sBAIhCtkC,EAAAA,EAAAA,IAAI,mCACJA,EAAAA,EAAAA,IASM,aATDA,EAAAA,EAAAA,IAA8B,cAAtB,kBACXA,EAAAA,EAAAA,IAOI,SAPD,kdAOH,mBAEAA,EAAAA,EAAAA,IAAI,qBACNA,EAAAA,EAAAA,IAAsH,2BAAjHA,EAAAA,EAAAA,IAAqC,cAA7B,wBAAoB,aAAS,KAACC,EAAAA,EAAAA,IAAGc,EAAA2jC,UAAUH,oBAAsB,mBAAqB,YAAxB,KAChExjC,EAAA2jC,UAAUH,sBAAmB,WAAxCzkC,EAAAA,EAAAA,IAAiH,MAAA4C,GAAA,gBAAvE1C,EAAAA,EAAAA,IAAsB,cAAd,SAAK,aAAS,KAACC,EAAAA,EAAAA,IAAGc,EAAA2jC,UAAUF,qBAAuB,KAAJ,sBACtFzjC,EAAA2jC,UAAUH,sBAAmB,WAAxCzkC,EAAAA,EAAAA,IAAkI,MAAA6C,GAAA,gBAAxF3C,EAAAA,EAAAA,IAAsB,cAAd,SAAK,aAAS,KAACC,EAAAA,EAAAA,IAAGC,EAAAkhB,gBAAgBrgB,EAAA2jC,UAAUD,sBAAwB,KAAL,uBAEjHzkC,EAAAA,EAAAA,IAAsG,UAA7F4Q,UAAW1Q,EAAAsiC,YAAY,QAAS3iC,MAAM,aAAcS,QAAKC,EAAA,MAAAA,EAAA,QAAAC,IAAEN,EAAA88B,WAAA98B,EAAA88B,aAAAx8B,KAAW,iBAAc,EAAAoC,K,CAYjG,QACEgM,WAAY,CAAEyU,cAAaA,GAAAA,GAC3B+f,OAAQ,CACNzsB,qBAAsB,CAAEzM,KAAM,uBAAwB0nB,QAASA,IAAM,IAAM,MAC3Enb,qBAAsB,CAAEvM,KAAM,uBAAwB0nB,QAASA,IAAMxnB,cAEvE5E,IAAAA,GACE,MAAO,CACLC,QAASC,EAAAA,EAAIC,aACb++B,UAAW,CAAC,EACZZ,eAAgB,CAAC,EACjB1G,aAAa,EAEjB,EACAz0B,OAAAA,GACExC,KAAKw+B,gBACP,EACAz+B,SAAU,CAER0Q,aAAAA,GACE,OAAOzQ,KAAKwQ,qBAAuBxQ,KAAKwQ,uBAAyB,IACnE,EACA2sB,aAAAA,GACE,OAAOn9B,KAAKyQ,eAAezX,QAAU,OACvC,GAEF2J,QAAS,CACPsY,gBAAe,GAEfohB,WAAAA,CAAYW,GACV,IAAIh0B,EAAO,KACX,IACEA,EAAOd,KAAKC,MAAMlP,aAAa6J,QAAQ,eAAekG,MAAQ,OAChE,CAAE,MAAOY,GAAiB,CAC1B,OAAOmzB,GAAW/zB,EAAMhJ,KAAKm9B,cAAeH,EAC9C,EAEAjD,MAAAA,CAAOj4B,GACL,IAAU,IAANA,IAAoB,IAANA,EAAa,OAAOA,EACtC,GAAS,MAALA,EAAW,OAAO,EACtB,GAAiB,kBAANA,EAAgB,OAAa,IAANA,EAClC,GAAiB,kBAANA,EAAgB,CACzB,MAAMH,EAAIG,EAAEoD,OAAOD,cACnB,MAAa,MAANtD,GAAmB,SAANA,GAAsB,MAANA,GAAmB,QAANA,CACnD,CACA,QAASG,CACX,EACA08B,cAAAA,GACE,MAAMlB,EAAiBt9B,KAAK4P,OAAOc,OAAOpB,WAAa,GACvDtM,MAAM,GAAGhD,KAAKV,qBAAqBg+B,IAAkB,CACnD16B,QAAS,CAAEC,cAAe,UAAU5J,aAAa6J,QAAQ,kBAE1DG,MAAKlK,IACJ,KAAID,EAAAA,EAAAA,GAAmBC,GAEvB,OAAOA,EAAImK,UAEZD,MAAK5D,IACJ,MAAMo/B,EAAgB36B,MAAMwQ,QAAQjV,GAAQA,EAAK,IAAM,CAAC,EAAIA,EAC5Do/B,EAAcL,oBAAsBp+B,KAAK+5B,OAAO0E,EAAcL,qBAE9Dp+B,KAAKu+B,UAAYE,KAGlBt7B,OAAM+J,GAAOzD,QAAQI,MAAMqD,IAC9B,EAEA2pB,SAAAA,GACE72B,KAAK29B,eAAiB,IACjB39B,KAAKu+B,UACRH,oBAAqBp+B,KAAK+5B,OAAO/5B,KAAKu+B,UAAUH,sBAElDp+B,KAAKi3B,aAAc,CACrB,EACAC,UAAAA,GAAel3B,KAAKi3B,aAAc,CAAO,EAEzCyG,eAAAA,GACE,MAAMJ,EAAiBt9B,KAAK4P,OAAOc,OAAOpB,WAAa,GACjD+B,EAAU,IAAKrR,KAAK29B,gBAEI,iBAA1BtsB,EAAQusB,eACVvsB,EAAQwsB,aAAe,KACvBxsB,EAAQysB,iBAAmB,KAC3BzsB,EAAQ0sB,aAAe,MACY,mBAA1B1sB,EAAQusB,gBACjBvsB,EAAQ0sB,aAAe,MAGK,MAA1B1sB,EAAQ2sB,gBAAuB3sB,EAAQ4sB,eAAiB,MAEvD5sB,EAAQ+sB,sBACX/sB,EAAQgtB,oBAAsB,GAC9BhtB,EAAQitB,oBAAsB,MAGhCjtB,EAAQ+sB,oBAAsBp+B,KAAK+5B,OAAO1oB,EAAQ+sB,qBAAuB,EAAI,EAC7E/sB,EAAQiV,WAAape,KAAKC,MAAMlP,aAAa6J,QAAQ,eAAeqB,OAAS,KAE7EnB,MAAM,GAAGhD,KAAKV,0BAA0Bg+B,IAAkB,CACxDzwB,OAAQ,MACRjK,QAAS,CACP,eAAgB,mBAChBC,cAAe,UAAU5J,aAAa6J,QAAQ,gBAEhDqJ,KAAMjE,KAAK4E,UAAUuE,KAEtBpO,MAAKlK,GAAOA,EAAImK,SAChBD,MAAK,KACJjD,KAAKi3B,aAAc,EACnBj3B,KAAKw+B,oBAENr7B,OAAM+J,GAAOzD,QAAQI,MAAMqD,IAC9B,IChQJ,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,U,UCDaxT,MAAM,YAAY0U,MAAA,gC,IAyBtBA,MAAA,kE,IAEI1U,MAAM,a,IA+BNA,MAAM,a,IA4BNA,MAAM,a,IAMH4E,QAAQ,K,oBASf8P,MAAA,4B,IAEI1U,MAAM,a,IAyBNA,MAAM,a,oBAmCJA,MAAM,iB,IACJA,MAAM,iB,IAINA,MAAM,iB,IAINA,MAAM,iB,iBAINA,MAAM,iB,IAINA,MAAM,iB,IAINA,MAAM,iB,IAINA,MAAM,iB,IAcNA,MAAM,iB,IAMNA,MAAM,iB,IAMNA,MAAM,iB,IAMNA,MAAM,iB,IAMNA,MAAM,iB,IAgBRA,MAAM,iB,4GAzPnBC,EAAAA,EAAAA,IA0QM,2BAzQJE,EAAAA,EAAAA,IAA6B,UAAzB,wBAAoB,mBAGxBA,EAAAA,EAAAA,IAAwB,UAApB,mBAAe,KAEnBA,EAAAA,EAAAA,IAwBM,aAvBJA,EAAAA,EAAAA,IAsBQ,QAtBRD,GAsBQ,gBArBNC,EAAAA,EAAAA,IASQ,eARNA,EAAAA,EAAAA,IAOK,YANHA,EAAAA,EAAAA,IAAoB,UAAhB,gBACJA,EAAAA,EAAAA,IAAmB,UAAf,eACJA,EAAAA,EAAAA,IAAY,UAAR,QACJA,EAAAA,EAAAA,IAAqB,UAAjB,iBACJA,EAAAA,EAAAA,IAAoB,UAAhB,gBACJA,EAAAA,EAAAA,IAAoB,UAAhB,mBAAW,KAGnBA,EAAAA,EAAAA,IAUQ,eATNA,EAAAA,EAAAA,IAOK,YANHA,EAAAA,EAAAA,IAA4C,WAAAC,EAAAA,EAAAA,IAArCc,EAAA8jC,aAAa5gC,WAAa,KAAJ,IAC7BjE,EAAAA,EAAAA,IAA2C,WAAAC,EAAAA,EAAAA,IAApCc,EAAA8jC,aAAa3gC,UAAY,KAAJ,IAC5BlE,EAAAA,EAAAA,IAAsC,WAAAC,EAAAA,EAAAA,IAA/Bc,EAAA8jC,aAAa1gC,KAAO,KAAJ,IACvBnE,EAAAA,EAAAA,IAA0E,WAAAC,EAAAA,EAAAA,IAAnEc,EAAA8jC,aAAazgC,QAAU,KAAM,KAACnE,EAAAA,EAAAA,IAAGc,EAAA8jC,aAAaxgC,QAAU,KAAJ,IAC3DrE,EAAAA,EAAAA,IAA4C,WAAAC,EAAAA,EAAAA,IAArCc,EAAA8jC,aAAavgC,WAAa,KAAJ,IAC7BtE,EAAAA,EAAAA,IAA8C,WAAAC,EAAAA,EAAAA,IAAvCc,EAAA8jC,aAAaC,aAAe,KAAJ,YAOvC9kC,EAAAA,EAAAA,IAuEM,MAvENK,GAuEM,EArEJL,EAAAA,EAAAA,IA6BQ,QA7BRc,GA6BQ,gBA5BNd,EAAAA,EAAAA,IAUQ,eATNA,EAAAA,EAAAA,IAEK,YADHA,EAAAA,EAAAA,IAAmC,MAA/ByE,QAAQ,KAAI,qBAElBzE,EAAAA,EAAAA,IAKK,YAJHA,EAAAA,EAAAA,IAAS,OACTA,EAAAA,EAAAA,IAAU,UAAN,MACJA,EAAAA,EAAAA,IAAU,UAAN,MACJA,EAAAA,EAAAA,IAAa,UAAT,YAAI,KAGZA,EAAAA,EAAAA,IAgBY,eAfVA,EAAAA,EAAAA,IAMK,0BALHA,EAAAA,EAAAA,IAAoB,UAAhB,eAAW,KACfA,EAAAA,EAAAA,IAAgD,WAAAC,EAAAA,EAAAA,IAAzCc,EAAA8jC,aAAaE,eAAiB,KAAJ,IACjC/kC,EAAAA,EAAAA,IAAgD,WAAAC,EAAAA,EAAAA,IAAzCc,EAAA8jC,aAAaG,eAAiB,KAAJ,IACjChlC,EAAAA,EAAAA,IAAgD,WAAAC,EAAAA,EAAAA,IAAzCc,EAAA8jC,aAAaI,eAAiB,KAAJ,MAGnCjlC,EAAAA,EAAAA,IAMK,0BALHA,EAAAA,EAAAA,IAAkB,UAAd,aAAS,KACbA,EAAAA,EAAAA,IAA8C,WAAAC,EAAAA,EAAAA,IAAvCc,EAAA8jC,aAAaK,aAAe,KAAJ,IAC/BllC,EAAAA,EAAAA,IAA8C,WAAAC,EAAAA,EAAAA,IAAvCc,EAAA8jC,aAAaM,aAAe,KAAJ,IAC/BnlC,EAAAA,EAAAA,IAA8C,WAAAC,EAAAA,EAAAA,IAAvCc,EAAA8jC,aAAaO,aAAe,KAAJ,UAOrCplC,EAAAA,EAAAA,IA2BQ,QA3BRyB,GA2BQ,gBA1BNzB,EAAAA,EAAAA,IAUQ,eATNA,EAAAA,EAAAA,IAEK,YADHA,EAAAA,EAAAA,IAAgC,MAA5ByE,QAAQ,KAAI,kBAElBzE,EAAAA,EAAAA,IAKK,YAJHA,EAAAA,EAAAA,IAAS,OACTA,EAAAA,EAAAA,IAAU,UAAN,MACJA,EAAAA,EAAAA,IAAU,UAAN,MACJA,EAAAA,EAAAA,IAAa,UAAT,YAAI,KAGZA,EAAAA,EAAAA,IAcQ,eAbNA,EAAAA,EAAAA,IAKK,0BAJHA,EAAAA,EAAAA,IAAoB,UAAhB,eAAW,KACfA,EAAAA,EAAAA,IAAgD,WAAAC,EAAAA,EAAAA,IAAzCc,EAAA8jC,aAAaQ,eAAiB,KAAJ,IACjCrlC,EAAAA,EAAAA,IAAgD,WAAAC,EAAAA,EAAAA,IAAzCc,EAAA8jC,aAAaS,eAAiB,KAAJ,IACjCtlC,EAAAA,EAAAA,IAAgD,WAAAC,EAAAA,EAAAA,IAAzCc,EAAA8jC,aAAaU,eAAiB,KAAJ,MAEnCvlC,EAAAA,EAAAA,IAKK,0BAJHA,EAAAA,EAAAA,IAAkB,UAAd,aAAS,KACbA,EAAAA,EAAAA,IAA8C,WAAAC,EAAAA,EAAAA,IAAvCc,EAAA8jC,aAAaW,aAAe,KAAJ,IAC/BxlC,EAAAA,EAAAA,IAA8C,WAAAC,EAAAA,EAAAA,IAAvCc,EAAA8jC,aAAaY,aAAe,KAAJ,IAC/BzlC,EAAAA,EAAAA,IAA8C,WAAAC,EAAAA,EAAAA,IAAvCc,EAAA8jC,aAAaa,aAAe,KAAJ,UAKrC1lC,EAAAA,EAAAA,IASQ,QATRwM,GASQ,EARNxM,EAAAA,EAAAA,IAOQ,6BANNA,EAAAA,EAAAA,IAEK,YADHA,EAAAA,EAAAA,IAAkC,MAA9ByE,QAAQ,KAAI,mBAAa,KAE/BzE,EAAAA,EAAAA,IAEK,YADHA,EAAAA,EAAAA,IAA4D,KAA5DgC,IAA4D/B,EAAAA,EAAAA,IAAzCc,EAAA8jC,aAAac,eAAiB,KAAJ,YAKrD3lC,EAAAA,EAAAA,IAA4G,UAAnG4Q,UAAW1Q,EAAAsiC,YAAY,QAAS3iC,MAAM,aAAcS,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAEN,EAAA88B,WAAA98B,EAAA88B,aAAAx8B,KAAW,uBAAoB,EAAAyB,IAAA,eAGnGjC,EAAAA,EAAAA,IAAgC,UAA5B,2BAAuB,KAC3BA,EAAAA,EAAAA,IAoDM,MApDNoC,GAoDM,EAlDJpC,EAAAA,EAAAA,IAuBQ,QAvBRqC,GAuBQ,gBAtBNrC,EAAAA,EAAAA,IAMQ,eALNA,EAAAA,EAAAA,IAIK,YAHHA,EAAAA,EAAAA,IAAoB,UAAhB,gBACJA,EAAAA,EAAAA,IAAe,UAAX,WACJA,EAAAA,EAAAA,IAAgB,UAAZ,eAAO,KAGfA,EAAAA,EAAAA,IAcQ,6BAbNF,EAAAA,EAAAA,IAYK8B,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAZed,EAAA6kC,iBAAiBniC,MAAM,EAAG1C,EAAA6kC,iBAAiBrhC,OAAS,IAA7D0c,K,WAAXnhB,EAAAA,EAAAA,IAYK,MAZwEc,IAAKqgB,EAAMrgB,K,EACtFZ,EAAAA,EAAAA,IAA2C,YAAvCA,EAAAA,EAAAA,IAAkC,eAAAC,EAAAA,EAAAA,IAAvBghB,EAAMlF,OAAK,MAC1B/b,EAAAA,EAAAA,IAMK,MANAuU,OAAKwY,EAAAA,EAAAA,IAAA,CAAAjQ,MAAkD,aAAvB/b,EAAA8kC,cAAc5kB,EAAMrgB,KAAG,MAAkE,WAAvBG,EAAA8kC,cAAc5kB,EAAMrgB,KAAG,QAAkE,iBAAvBG,EAAA8kC,cAAc5kB,EAAMrgB,KAAG,c,QAK3LG,EAAA8kC,cAAc5kB,EAAMrgB,MAAQ,KAAL,IAE5BZ,EAAAA,EAAAA,IAEK,WAAAC,EAAAA,EAAAA,IADAc,EAAA8kC,cAAc5kB,EAAMrgB,IAAM,yBAA2B,KAA9B,Q,WAMlCZ,EAAAA,EAAAA,IAuBQ,QAvBRsC,GAuBQ,gBAtBNtC,EAAAA,EAAAA,IAMQ,eALNA,EAAAA,EAAAA,IAIK,YAHHA,EAAAA,EAAAA,IAAoB,UAAhB,gBACJA,EAAAA,EAAAA,IAAe,UAAX,WACJA,EAAAA,EAAAA,IAAgB,UAAZ,eAAO,KAGfA,EAAAA,EAAAA,IAcQ,6BAbNF,EAAAA,EAAAA,IAYK8B,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAZed,EAAA6kC,iBAAiBniC,MAAM1C,EAAA6kC,iBAAiBrhC,OAAS,IAA1D0c,K,WAAXnhB,EAAAA,EAAAA,IAYK,MAZqEc,IAAKqgB,EAAMrgB,K,EACnFZ,EAAAA,EAAAA,IAA2C,YAAvCA,EAAAA,EAAAA,IAAkC,eAAAC,EAAAA,EAAAA,IAAvBghB,EAAMlF,OAAK,MAC1B/b,EAAAA,EAAAA,IAMK,MANAuU,OAAKwY,EAAAA,EAAAA,IAAA,CAAAjQ,MAAkD,aAAvB/b,EAAA8kC,cAAc5kB,EAAMrgB,KAAG,MAAkE,WAAvBG,EAAA8kC,cAAc5kB,EAAMrgB,KAAG,QAAkE,iBAAvBG,EAAA8kC,cAAc5kB,EAAMrgB,KAAG,c,QAK3LG,EAAA8kC,cAAc5kB,EAAMrgB,MAAQ,KAAL,IAE5BZ,EAAAA,EAAAA,IAEK,WAAAC,EAAAA,EAAAA,IADAc,EAAA8kC,cAAc5kB,EAAMrgB,IAAM,yBAA2B,KAA9B,Q,aAOpCZ,EAAAA,EAAAA,IAA0G,UAAjG4Q,UAAW1Q,EAAAsiC,YAAY,QAAS3iC,MAAM,aAAcS,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAEN,EAAA4lC,YAAA5lC,EAAA4lC,cAAAtlC,KAAY,oBAAiB,EAAA+B,IAKtFxB,EAAAq8B,cAAW,WAAtBt9B,EAAAA,EAAAA,IA4EM,O,MA5EkBD,MAAM,gBAAiBS,QAAKC,EAAA,MAAAA,EAAA,QAAAC,IAAEN,EAAAm9B,YAAAn9B,EAAAm9B,cAAA78B,K,EACpDR,EAAAA,EAAAA,IA0EM,OA1EDH,MAAM,gBAAiBS,QAAKC,EAAA,MAAAA,EAAA,KAAA8P,EAAAA,EAAAA,KAAN,QAAW,WAACkE,MAAA,2C,gBACrCvU,EAAAA,EAAAA,IAA6B,UAAzB,wBAAoB,KACxBA,EAAAA,EAAAA,IAuEO,QAvEAoQ,SAAM7P,EAAA,MAAAA,EAAA,KAAA8P,EAAAA,EAAAA,KAAA,IAAA7P,IAAUN,EAAA6lC,oBAAA7lC,EAAA6lC,sBAAAvlC,IAAkB,e,EACvCR,EAAAA,EAAAA,IAmEM,MAnEN0C,GAmEM,EAlEJ1C,EAAAA,EAAAA,IAGM,MAHN2C,GAGM,gBAFJ3C,EAAAA,EAAAA,IAA2B,aAApB,gBAAY,cACnBA,EAAAA,EAAAA,IAAqG,SAA9FkB,KAAK,SAASiX,KAAK,M,qCAAsBpX,EAAAilC,kBAAkB/hC,UAAShD,GAAGqX,QAAK/X,EAAA,KAAAA,EAAA,OAAAC,IAAEN,EAAA+lC,cAAA/lC,EAAA+lC,gBAAAzlC,K,iBAArCO,EAAAilC,kBAAkB/hC,eAAS,GAAnCuU,QAAR,SAElCxY,EAAAA,EAAAA,IAGM,MAHN4C,GAGM,gBAFJ5C,EAAAA,EAAAA,IAA0B,aAAnB,eAAW,cAClBA,EAAAA,EAAAA,IAAqG,SAA9FkB,KAAK,SAASiX,KAAK,O,qCAAuBpX,EAAAilC,kBAAkB9hC,SAAQjD,GAAGqX,QAAK/X,EAAA,KAAAA,EAAA,OAAAC,IAAEN,EAAA+lC,cAAA/lC,EAAA+lC,gBAAAzlC,K,iBAApCO,EAAAilC,kBAAkB9hC,cAAQ,GAAlCsU,QAAR,SAEnCxY,EAAAA,EAAAA,IAGM,MAHN8C,GAGM,gBAFJ9C,EAAAA,EAAAA,IAAmB,aAAZ,QAAI,KACXA,EAAAA,EAAAA,IAA+D,SAAxDkB,KAAK,SAAUyL,MAAO5L,EAAAilC,kBAAkB7hC,IAAK6P,SAAA,I,cAEtDhU,EAAAA,EAAAA,IAGM,MAHNgD,GAGM,gBAFJhD,EAAAA,EAAAA,IAA2B,aAApB,gBAAY,cACnBA,EAAAA,EAAAA,IAA0D,SAAnDkB,KAAK,S,qCAAkBH,EAAAilC,kBAAkB5hC,OAAMnD,I,iBAAxBF,EAAAilC,kBAAkB5hC,aAElDpE,EAAAA,EAAAA,IAGM,MAHNkD,GAGM,gBAFJlD,EAAAA,EAAAA,IAA4B,aAArB,iBAAa,cACpBA,EAAAA,EAAAA,IAA0D,SAAnDkB,KAAK,S,qCAAkBH,EAAAilC,kBAAkB3hC,OAAMpD,I,iBAAxBF,EAAAilC,kBAAkB3hC,aAElDrE,EAAAA,EAAAA,IAGM,MAHNmD,GAGM,gBAFJnD,EAAAA,EAAAA,IAA2B,aAApB,gBAAY,cACnBA,EAAAA,EAAAA,IAA6D,SAAtDkB,KAAK,S,qCAAkBH,EAAAilC,kBAAkB1hC,UAASrD,I,iBAA3BF,EAAAilC,kBAAkB1hC,gBAElDtE,EAAAA,EAAAA,IAaM,MAbNoD,GAaM,gBAZJpD,EAAAA,EAAAA,IAA2B,aAApB,gBAAY,cACnBA,EAAAA,EAAAA,IAUS,U,qCAVQe,EAAAilC,kBAAkBlB,YAAW7jC,I,gBAC5CjB,EAAAA,EAAAA,IAAmB,cAAX,MAAE,IACVA,EAAAA,EAAAA,IAAmB,cAAX,MAAE,IACVA,EAAAA,EAAAA,IAAmB,cAAX,MAAE,IACVA,EAAAA,EAAAA,IAAmB,cAAX,MAAE,IACVA,EAAAA,EAAAA,IAAoB,cAAZ,OAAG,IACXA,EAAAA,EAAAA,IAAoB,cAAZ,OAAG,IACXA,EAAAA,EAAAA,IAAmB,cAAX,MAAE,IACVA,EAAAA,EAAAA,IAAmB,cAAX,MAAE,IACVA,EAAAA,EAAAA,IAAwB,cAAhB,WAAO,iBATAe,EAAAilC,kBAAkBlB,kBAYrC9kC,EAAAA,EAAAA,IAKM,MALNsD,GAKM,gBAJJtD,EAAAA,EAAAA,IAAsC,aAA/B,2BAAuB,cAC9BA,EAAAA,EAAAA,IAA+E,SAAxEkB,KAAK,OAAOC,YAAY,I,uCAAaJ,EAAAilC,kBAAkBjB,cAAa9jC,I,iBAA/BF,EAAAilC,kBAAkBjB,kBAAa,SAC3E/kC,EAAAA,EAAAA,IAA+E,SAAxEkB,KAAK,OAAOC,YAAY,I,uCAAaJ,EAAAilC,kBAAkBhB,cAAa/jC,I,iBAA/BF,EAAAilC,kBAAkBhB,kBAAa,SAC3EhlC,EAAAA,EAAAA,IAA+E,SAAxEkB,KAAK,OAAOC,YAAY,I,uCAAaJ,EAAAilC,kBAAkBf,cAAahkC,I,iBAA/BF,EAAAilC,kBAAkBf,oBAEhEjlC,EAAAA,EAAAA,IAKM,MALNuD,GAKM,gBAJJvD,EAAAA,EAAAA,IAAgD,aAAzC,qCAAiC,cACxCA,EAAAA,EAAAA,IAA6E,SAAtEkB,KAAK,OAAOC,YAAY,I,uCAAaJ,EAAAilC,kBAAkBd,YAAWjkC,I,iBAA7BF,EAAAilC,kBAAkBd,gBAAW,SACzEllC,EAAAA,EAAAA,IAA6E,SAAtEkB,KAAK,OAAOC,YAAY,I,uCAAaJ,EAAAilC,kBAAkBb,YAAWlkC,I,iBAA7BF,EAAAilC,kBAAkBb,gBAAW,SACzEnlC,EAAAA,EAAAA,IAA6E,SAAtEkB,KAAK,OAAOC,YAAY,I,uCAAaJ,EAAAilC,kBAAkBZ,YAAWnkC,I,iBAA7BF,EAAAilC,kBAAkBZ,kBAEhEplC,EAAAA,EAAAA,IAKM,MALN4D,GAKM,gBAJJ5D,EAAAA,EAAAA,IAAmC,aAA5B,wBAAoB,cAC3BA,EAAAA,EAAAA,IAA+E,SAAxEkB,KAAK,OAAOC,YAAY,I,uCAAaJ,EAAAilC,kBAAkBX,cAAapkC,I,iBAA/BF,EAAAilC,kBAAkBX,kBAAa,SAC3ErlC,EAAAA,EAAAA,IAA+E,SAAxEkB,KAAK,OAAOC,YAAY,I,uCAAaJ,EAAAilC,kBAAkBV,cAAarkC,I,iBAA/BF,EAAAilC,kBAAkBV,kBAAa,SAC3EtlC,EAAAA,EAAAA,IAA+E,SAAxEkB,KAAK,OAAOC,YAAY,I,uCAAaJ,EAAAilC,kBAAkBT,cAAatkC,I,iBAA/BF,EAAAilC,kBAAkBT,oBAEhEvlC,EAAAA,EAAAA,IAKM,MALN6D,GAKM,gBAJJ7D,EAAAA,EAAAA,IAA6C,aAAtC,kCAA8B,cACrCA,EAAAA,EAAAA,IAA6E,SAAtEkB,KAAK,OAAOC,YAAY,I,uCAAaJ,EAAAilC,kBAAkBR,YAAWvkC,I,iBAA7BF,EAAAilC,kBAAkBR,gBAAW,SACzExlC,EAAAA,EAAAA,IAA6E,SAAtEkB,KAAK,OAAOC,YAAY,I,uCAAaJ,EAAAilC,kBAAkBP,YAAWxkC,I,iBAA7BF,EAAAilC,kBAAkBP,gBAAW,SACzEzlC,EAAAA,EAAAA,IAA6E,SAAtEkB,KAAK,OAAOC,YAAY,I,uCAAaJ,EAAAilC,kBAAkBN,YAAWzkC,I,iBAA7BF,EAAAilC,kBAAkBN,kBAEhE1lC,EAAAA,EAAAA,IAGM,MAHNwE,GAGM,gBAFJxE,EAAAA,EAAAA,IAA6B,aAAtB,kBAAc,cACrBA,EAAAA,EAAAA,IAA+D,SAAxDkB,KAAK,O,uCAAgBH,EAAAilC,kBAAkBL,cAAa1kC,I,iBAA/BF,EAAAilC,kBAAkBL,qBAAa,eAG/D3lC,EAAAA,EAAAA,IAA2C,UAAnCkB,KAAK,UAAS,gBAAY,KAClClB,EAAAA,EAAAA,IAAyD,UAAjDkB,KAAK,SAAUZ,QAAKC,EAAA,MAAAA,EAAA,QAAAC,IAAEN,EAAAm9B,YAAAn9B,EAAAm9B,cAAA78B,KAAY,WAAM,yBAM3CO,EAAAmlC,eAAY,WAAvBpmC,EAAAA,EAAAA,IAmBM,O,MAnBmBD,MAAM,gBAAiBS,QAAKC,EAAA,MAAAA,EAAA,QAAAC,IAAEN,EAAAimC,aAAAjmC,EAAAimC,eAAA3lC,K,EACrDR,EAAAA,EAAAA,IAiBM,OAjBDH,MAAM,gBAAiBS,QAAKC,EAAA,MAAAA,EAAA,KAAA8P,EAAAA,EAAAA,KAAN,QAAW,WAACkE,MAAA,2C,gBACrCvU,EAAAA,EAAAA,IAA8B,UAA1B,yBAAqB,KACzBA,EAAAA,EAAAA,IAcO,QAdAoQ,SAAM7P,EAAA,MAAAA,EAAA,KAAA8P,EAAAA,EAAAA,KAAA,IAAA7P,IAAUN,EAAAkmC,qBAAAlmC,EAAAkmC,uBAAA5lC,IAAmB,e,EACxCR,EAAAA,EAAAA,IAUM,MAVN0E,GAUM,gBATJ5E,EAAAA,EAAAA,IAQM8B,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IARed,EAAA6kC,kBAAT3kB,K,WAAZnhB,EAAAA,EAAAA,IAQM,OARkCc,IAAKqgB,EAAMrgB,IAAKf,MAAM,iB,EAC5DG,EAAAA,EAAAA,IAAiC,cAAAC,EAAAA,EAAAA,IAAvBghB,EAAMlF,OAAQ,IAAC,aACzB/b,EAAAA,EAAAA,IAIS,U,yBAJQe,EAAAslC,mBAAmBplB,EAAMrgB,KAAGK,G,gBAC3CjB,EAAAA,EAAAA,IAAuB,cAAf,UAAM,IACdA,EAAAA,EAAAA,IAAyB,cAAjB,YAAQ,IAChBA,EAAAA,EAAAA,IAA6B,cAArB,gBAAY,kBAHLe,EAAAslC,mBAAmBplB,EAAMrgB,SAAG,SAK7CZ,EAAAA,EAAAA,IAAoN,Y,yBAAjMe,EAAAslC,mBAAmBplB,EAAMrgB,IAAM,wBAAHK,EAA4BE,YAAY,wBAAwBoT,MAAA,6BAAkC3D,SAA4C,aAAlC7P,EAAAslC,mBAAmBplB,EAAMrgB,M,kBAAjKG,EAAAslC,mBAAmBplB,EAAMrgB,IAAM,gC,uBAGtDZ,EAAAA,EAAAA,IAA2C,UAAnCkB,KAAK,UAAS,gBAAY,KAClClB,EAAAA,EAAAA,IAA0D,UAAlDkB,KAAK,SAAUZ,QAAKC,EAAA,MAAAA,EAAA,QAAAC,IAAEN,EAAAimC,aAAAjmC,EAAAimC,eAAA3lC,KAAa,WAAM,0B,CAa3D,QACE4iC,OAAQ,CACNzsB,qBAAsB,CAAEzM,KAAM,uBAAwB0nB,QAASA,IAAM,IAAM,MAC3Enb,qBAAsB,CAAEvM,KAAM,uBAAwB0nB,QAASA,IAAMxnB,cAEvE5E,IAAAA,GACE,MAAO,CACLC,QAASC,EAAAA,EAAIC,aACbk/B,aAAc,CAAC,EACfgB,cAAe,CAAC,EAChBzI,aAAa,EACb8I,cAAc,EACdF,kBAAmB,CAAC,EACpBK,mBAAoB,CAAC,EACrBT,iBAAkB,CAChB,CAAEhlC,IAAK,OAAQmb,MAAO,QACtB,CAAEnb,IAAK,OAAQmb,MAAO,QACtB,CAAEnb,IAAK,iBAAkBmb,MAAO,kBAChC,CAAEnb,IAAK,UAAWmb,MAAO,WACzB,CAAEnb,IAAK,mBAAoBmb,MAAO,oBAClC,CAAEnb,IAAK,qBAAsBmb,MAAO,wBACpC,CAAEnb,IAAK,mBAAoBmb,MAAO,oBAClC,CAAEnb,IAAK,kBAAmBmb,MAAO,mBACjC,CAAEnb,IAAK,UAAWmb,MAAO,WACzB,CAAEnb,IAAK,QAASmb,MAAO,SACvB,CAAEnb,IAAK,sBAAuBmb,MAAO,uBACrC,CAAEnb,IAAK,mBAAoBmb,MAAO,oBAClC,CAAEnb,IAAK,UAAWmb,MAAO,WACzB,CAAEnb,IAAK,kBAAmBmb,MAAO,mBACjC,CAAEnb,IAAK,YAAamb,MAAO,aAC3B,CAAEnb,IAAK,qBAAsBmb,MAAO,sBACpC,CAAEnb,IAAK,cAAemb,MAAO,eAC7B,CAAEnb,IAAK,cAAemb,MAAO,eAC7B,CAAEnb,IAAK,QAASmb,MAAO,SACvB,CAAEnb,IAAK,OAAQmb,MAAO,QACtB,CAAEnb,IAAK,cAAemb,MAAO,eAC7B,CAAEnb,IAAK,eAAgBmb,MAAO,gBAC9B,CAAEnb,IAAK,cAAemb,MAAO,gBAGnC,EACApT,OAAAA,GACExC,KAAKmgC,oBACLngC,KAAKogC,oBACP,EACArgC,SAAU,CACR0Q,aAAAA,GACE,OAAOzQ,KAAKwQ,qBAAuBxQ,KAAKwQ,uBAAyB,IACnE,EACA2sB,aAAAA,GACE,OAAOn9B,KAAKyQ,eAAezX,QAAU,OACvC,GAEF2J,QAAS,CAEP05B,WAAAA,CAAYW,GACV,IAAIh0B,EAAO,KACX,IACEA,EAAOd,KAAKC,MAAMlP,aAAa6J,QAAQ,eAAekG,MAAQ,OAChE,CAAE,MAAOY,GAAiB,CAC1B,OAAOmzB,GAAW/zB,EAAMhJ,KAAKm9B,cAAeH,EAC9C,EAEA8C,YAAAA,GACO9/B,KAAK6/B,oBAAmB7/B,KAAK6/B,kBAAoB,CAAC,GACvD,MAAMQ,EAAIC,WAAWtgC,KAAK6/B,kBAAkB/hC,WACtC26B,EAAI6H,WAAWtgC,KAAK6/B,kBAAkB9hC,UACxCgH,OAAOC,SAASq7B,IAAMt7B,OAAOC,SAASyzB,IAAMA,EAAI,EAClDz4B,KAAK6/B,kBAAkB7hC,MAAQqiC,GAAK5H,EAAIA,IAAI/wB,QAAQ,GAEpD1H,KAAK6/B,kBAAkB7hC,IAAM,IAEjC,EAEAmiC,iBAAAA,GAEE,MAAM7C,EAAiBt9B,KAAK4P,OAAOc,OAAOpB,WAAa,GACvDtM,MAAM,GAAGhD,KAAKV,0BAA0Bg+B,IAAkB,CACxD16B,QAAS,CAAEC,cAAe,UAAU5J,aAAa6J,QAAQ,kBAExDG,MAAKlK,IACJ,KAAID,EAAAA,EAAAA,GAAmBC,GAEvB,OAAOA,EAAImK,UAEZD,MAAK5D,IACFW,KAAK0+B,aAAe56B,MAAMwQ,QAAQjV,GAAQA,EAAK,IAAM,CAAC,EAAIA,KAG7D8D,OAAM+J,GAAOzD,QAAQI,MAAMqD,IAEhC,EACAkzB,kBAAAA,GAEE,MAAM9C,EAAiBt9B,KAAK4P,OAAOc,OAAOpB,WAAa,GACvDtM,MAAM,GAAGhD,KAAKV,4BAA4Bg+B,IAAkB,CAC1D16B,QAAS,CAAEC,cAAe,UAAU5J,aAAa6J,QAAQ,kBAE1DG,MAAKlK,IACJ,KAAID,EAAAA,EAAAA,GAAmBC,GAEvB,OAAOA,EAAImK,UAEZD,MAAK5D,IACFW,KAAK0/B,cAAgB57B,MAAMwQ,QAAQjV,GAAQA,EAAK,IAAM,CAAC,EAAIA,KAG9D8D,OAAM+J,GAAOzD,QAAQI,MAAMqD,IAE9B,EACA2pB,SAAAA,GACE,MAAM0J,EAAW,CACfziC,UAAW,KAAMC,SAAU,KAAMC,IAAK,KACtCC,OAAQ,KAAMC,OAAQ,KAAMC,UAAW,KACvCwgC,YAAa,UACbC,cAAe,KAAMC,cAAe,KAAMC,cAAe,KACzDC,YAAa,KAAQC,YAAa,KAAQC,YAAa,KACvDC,cAAe,KAAMC,cAAe,KAAMC,cAAe,KACzDC,YAAa,KAAQC,YAAa,KAAQC,YAAa,KACvDC,cAAe,MAEjBx/B,KAAK6/B,kBAAoB,IAAKU,KAAcvgC,KAAK0+B,cAAgB,CAAC,GAClE1+B,KAAK8/B,eACL9/B,KAAKi3B,aAAc,CACrB,EACAC,UAAAA,GACEl3B,KAAKi3B,aAAc,CACrB,EACA0I,UAAAA,GACE3/B,KAAKkgC,mBAAqB,IAAKlgC,KAAK0/B,eACpC1/B,KAAK+/B,cAAe,CACtB,EACAC,WAAAA,GACEhgC,KAAK+/B,cAAe,CACtB,EACAH,kBAAAA,GACE,MAAMtZ,EAAape,KAAKC,MAAMlP,aAAa6J,QAAQ,cAAcqB,MAC3Dm5B,EAAiBt9B,KAAK4P,OAAOc,OAAOpB,WAAa,GACvDtM,MAAM,GAAGhD,KAAKV,+BAA+Bg+B,IAAkB,CAC7DzwB,OAAQ,MACRjK,QAAS,CACPC,cAAe,UAAU5J,aAAa6J,QAAQ,eAC9C,eAAgB,oBAElBqJ,KAAMjE,KAAK4E,UAAU,IAChB9M,KAAK6/B,kBACRvZ,iBAGDrjB,MAAKlK,GAAOA,EAAImK,SAChBD,MAAK,KACJjD,KAAKmgC,oBACLngC,KAAKk3B,gBAEN/zB,OAAM+J,GAAOzD,QAAQI,MAAMqD,IAChC,EACA+yB,mBAAAA,GACE,MAAM3Z,EAAape,KAAKC,MAAMlP,aAAa6J,QAAQ,cAAcqB,MAC3Dm5B,EAAiBt9B,KAAK4P,OAAOc,OAAOpB,WAAa,GACvDtM,MAAM,GAAGhD,KAAKV,iCAAiCg+B,IAAkB,CAC/DzwB,OAAQ,MACRjK,QAAS,CACPC,cAAe,UAAU5J,aAAa6J,QAAQ,eAC9C,eAAgB,oBAElBqJ,KAAMjE,KAAK4E,UAAU,IAChB9M,KAAKkgC,mBACR5Z,iBAGDrjB,MAAKlK,GAAOA,EAAImK,SAChBD,MAAK,KACJjD,KAAKogC,qBACLpgC,KAAKggC,iBAEN78B,OAAM+J,GAAOzD,QAAQI,MAAMqD,IAChC,IC5bJ,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,U,UCFQxT,MAAM,gB,oBAIHA,MAAM,a,IAyBTA,MAAM,eAAe0U,MAAA,uB,oBAKpB1U,MAAM,kB,IAIFA,MAAM,Y,IAuBT0U,MAAA,uB,IACG1U,MAAM,a,0HAiDDA,MAAM,e,mDAWfA,MAAM,qB,IAGHA,MAAM,S,IAIVA,MAAM,eAAe0U,MAAA,uB,oBAIlB1U,MAAM,a,IA0BRA,MAAM,W,IAYAA,MAAM,W,IAEAA,MAAM,O,0DAUZ0U,MAAA,sB,IAaAA,MAAA,uB,IAKCA,MAAA,uB,IACC1U,MAAM,Y,IAEFA,MAAM,O,2EAWZ0U,MAAA,uB,IAaA1U,MAAM,W,IAEAA,MAAM,O,0DAUZA,MAAM,Q,IAKN0U,MAAA,sB,2CA3PbzU,EAAAA,EAAAA,IAmQM,2BAlQJE,EAAAA,EAAAA,IAAuB,UAAnB,kBAAc,KAKlBA,EAAAA,EAAAA,IAGK,KAHLD,GAGK,wBAHoB,8BAEvBC,EAAAA,EAAAA,IAAsH,UAA7G4Q,UAAW1Q,EAAAsiC,YAAY,QAAS3iC,MAAM,aAAcS,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAEN,EAAAymC,cAAAzmC,EAAAymC,gBAAAnmC,KAAc,8BAA2B,EAAAH,OAE/GL,EAAAA,EAAAA,IAsBQ,QAtBRc,GAsBQ,gBArBNd,EAAAA,EAAAA,IAMQ,eALNA,EAAAA,EAAAA,IAIK,YAHHA,EAAAA,EAAAA,IAAgC,MAA5BuU,MAAA,eAAmB,SACvBvU,EAAAA,EAAAA,IAAkC,MAA9BuU,MAAA,eAAmB,WACvBvU,EAAAA,EAAAA,IAAmC,UAA/B,kCAA0B,KAGlCA,EAAAA,EAAAA,IAaQ,6BAZNF,EAAAA,EAAAA,IAWK8B,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAXad,EAAA6lC,aAAPljC,K,WAAX5D,EAAAA,EAAAA,IAWK,MAX2Bc,IAAK8C,EAAI9C,K,EACvCZ,EAAAA,EAAAA,IAAwB,WAAAC,EAAAA,EAAAA,IAAjByD,EAAIqY,OAAK,IAChB/b,EAAAA,EAAAA,IAOK,YANHA,EAAAA,EAAAA,IAKO,QALAuU,OAAKwY,EAAAA,EAAAA,IAAA,CAAAjQ,MAAsD,aAA5B/b,EAAA8lC,eAAenjC,EAAIojC,WAAS,MAAuE,WAA5B/lC,EAAA8lC,eAAenjC,EAAIojC,WAAS,mB,QAIpI/lC,EAAA8lC,eAAenjC,EAAIojC,YAAc,KAAL,MAGnC9mC,EAAAA,EAAAA,IAAoD,WAAAC,EAAAA,EAAAA,IAA7Cc,EAAA8lC,eAAenjC,EAAIqjC,aAAe,KAAL,Q,WAM1C/mC,EAAAA,EAAAA,IAGK,KAHLyB,GAGK,wBAH8C,0BAEjDzB,EAAAA,EAAAA,IAA+G,UAAtG4Q,UAAW1Q,EAAAsiC,YAAY,QAAS3iC,MAAM,aAAcS,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAEN,EAAA8mC,cAAA9mC,EAAA8mC,gBAAAxmC,KAAc,uBAAoB,EAAAgM,OAGxGxM,EAAAA,EAAAA,IAeM,MAfNgC,GAeM,EAdJhC,EAAAA,EAAAA,IAAgG,QAA1FH,MAAM,YAAY0U,MAAA,wBAA6BjU,QAAKC,EAAA,KAAAA,EAAA,GAAAU,GAAEF,EAAAiO,UAAY7I,KAAK6I,WAAU,MAE5EjO,EAAAiO,WAAQ,WAAnBlP,EAAAA,EAAAA,IAWM,O,MAXeD,MAAM,eAAgBS,QAAKC,EAAA,KAAAA,EAAA,IAAA8P,EAAAA,EAAAA,KAAApP,GAAOF,EAAAiO,UAAW,GAAH,Y,EAC7DhP,EAAAA,EAAAA,IASM,MATNiC,GASM,yaADJjC,EAAAA,EAAAA,IAA+F,UAAvFuU,MAAA,0CAA+CjU,QAAKC,EAAA,KAAAA,EAAA,GAAAU,GAAEF,EAAAiO,UAAW,IAAO,gBAAM,gCAc5FlP,EAAAA,EAAAA,IA2DM8B,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IA3Dad,EAAAkmC,eAAPC,K,WAAZpnC,EAAAA,EAAAA,IA2DM,OA3D6Bc,IAAKsmC,GAAG,EACzClnC,EAAAA,EAAAA,IAAwD,KAAxDoC,IAAwDnC,EAAAA,EAAAA,IAAvBC,EAAAinC,WAAWD,IAAG,IAC/ClnC,EAAAA,EAAAA,IAwDQ,QAxDRqC,GAwDQ,gBAvDNrC,EAAAA,EAAAA,IASQ,eARNA,EAAAA,EAAAA,IAOK,YANHA,EAAAA,EAAAA,IAAgC,MAA5BuU,MAAA,eAAmB,SACvBvU,EAAAA,EAAAA,IAAkC,MAA9BuU,MAAA,eAAmB,WACvBvU,EAAAA,EAAAA,IAAwC,MAApCuU,MAAA,eAAmB,iBACvBvU,EAAAA,EAAAA,IAAkC,MAA9BuU,MAAA,eAAmB,WACvBvU,EAAAA,EAAAA,IAAe,UAAX,WACJA,EAAAA,EAAAA,IAAqC,MAAjCuU,MAAA,iBAAsB,cAAM,KAGpCvU,EAAAA,EAAAA,IA4CQ,6BA3CNF,EAAAA,EAAAA,IA0CK8B,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IA1Ccd,EAAAqmC,UAAUF,IAAlBxmB,K,WAAX5gB,EAAAA,EAAAA,IA0CK,MA1C+Bc,IAAK8f,EAAK9f,K,EAC5CZ,EAAAA,EAAAA,IAAwB,WAAAC,EAAAA,EAAAA,IAAjBygB,EAAK2mB,MAAI,IAChBrnC,EAAAA,EAAAA,IAAwB,WAAAC,EAAAA,EAAAA,IAAjBygB,EAAK4mB,MAAI,IAChBtnC,EAAAA,EAAAA,IAAoC,MAAhCunC,UAAQ7mB,EAAK8mB,OAAS,K,WAGVzmC,EAAA0mC,aAAe/mB,EAAK9f,MAAG,WAAvCd,EAAAA,EAAAA,IAaW8B,EAAAA,GAAA,CAAAhB,IAAA,KAZTZ,EAAAA,EAAAA,IAOK,YANHA,EAAAA,EAAAA,IAKO,QALAuU,OAAKwY,EAAAA,EAAAA,IAAA,CAAAjQ,MAA6D,aAA7B/b,EAAA2mC,kBAAiB,GAAIhnB,EAAK9f,cAAG,MAAqF,WAA7BG,EAAA2mC,kBAAiB,GAAIhnB,EAAK9f,cAAG,mB,QAIzJG,EAAA2mC,kBAAkB,GAAGhnB,EAAK9f,eAAiB,YAAd,MAGpCZ,EAAAA,EAAAA,IAA6D,WAAAC,EAAAA,EAAAA,IAAtDc,EAAA2mC,kBAAkB,GAAGhnB,EAAK9f,eAAiB,KAAd,IACpCZ,EAAAA,EAAAA,IAEK,YADHA,EAAAA,EAAAA,IAAuG,UAA9F4Q,UAAW1Q,EAAAsiC,YAAY,QAAS3iC,MAAM,WAAYS,QAAKW,GAAEf,EAAAynC,aAAajnB,EAAK9f,MAAM,OAAI,EAAA2B,OAAA,kBAKlGzC,EAAAA,EAAAA,IAmBW8B,EAAAA,GAAA,CAAAhB,IAAA,KAlBTZ,EAAAA,EAAAA,IAMK,qBALHA,EAAAA,EAAAA,IAIS,U,yBAJQe,EAAA6mC,YAAY,GAAGlnB,EAAK9f,cAAGK,EAAaonB,SAAMpnB,GAAEf,EAAA2nC,UAAUnnB,EAAK9f,M,gBAC1EZ,EAAAA,EAAAA,IAAyB,cAAjB,YAAQ,IAChBA,EAAAA,EAAAA,IAAuB,cAAf,UAAM,IACdA,EAAAA,EAAAA,IAAyB,cAAjB,YAAQ,mBAHDe,EAAA6mC,YAAY,GAAGlnB,EAAK9f,oBAMvCZ,EAAAA,EAAAA,IAMK,qBALHA,EAAAA,EAAAA,IAIY,Y,yBAHDe,EAAA6mC,YAAY,GAAGlnB,EAAK9f,cAAGK,EAC/BqX,QAAKrX,GAAEf,EAAA2nC,UAAUnnB,EAAK9f,KACvBO,YAAY,qB,mBAFHJ,EAAA6mC,YAAY,GAAGlnB,EAAK9f,oBAKjCZ,EAAAA,EAAAA,IAGK,KAHL4C,GAGK,EAFH5C,EAAAA,EAAAA,IAA8G,UAAtGH,MAAM,mBAAoB+Q,UAAW1Q,EAAA4nC,WAAWpnB,EAAK9f,KAAON,QAAKW,GAAEf,EAAA6nC,WAAWrnB,EAAK9f,MAAM,OAAI,EAAAkC,KACrG9C,EAAAA,EAAAA,IAAyE,UAAjEH,MAAM,WAAYS,QAAKW,GAAEf,EAAA8nC,cAActnB,EAAK9f,MAAM,SAAM,EAAAmC,OAAA,U,qBASvChC,EAAAknC,UAAUlgC,OAAI,WAAnDjI,EAAAA,EAAAA,IAIM,MAJNkD,GAIM,EAHJhD,EAAAA,EAAAA,IAA6D,UAArDH,MAAM,UAAWS,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAEN,EAAAgoC,YAAAhoC,EAAAgoC,cAAA1nC,KAAY,aAC5CR,EAAAA,EAAAA,IAA6C,UAApCM,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAEN,EAAAioC,cAAAjoC,EAAAioC,gBAAA3nC,KAAc,WAC9BR,EAAAA,EAAAA,IAAiE,OAAjEkD,IAAiEjD,EAAAA,EAAAA,IAA1Cc,EAAAknC,UAAUlgC,MAAO,qBAAkB,uBAI5D/H,EAAAA,EAAAA,IAGK,KAHLmD,GAGK,wBAH8C,uBAEjDnD,EAAAA,EAAAA,IAA2G,UAAlG4Q,UAAW1Q,EAAAsiC,YAAY,QAAS3iC,MAAM,aAAcS,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAEN,EAAAkoC,eAAAloC,EAAAkoC,iBAAA5nC,KAAe,kBAAe,EAAA4C,OAEpGpD,EAAAA,EAAAA,IAwBQ,QAxBRsD,GAwBQ,gBAvBNtD,EAAAA,EAAAA,IAMQ,eALNA,EAAAA,EAAAA,IAIK,YAHHA,EAAAA,EAAAA,IAAgC,MAA5BuU,MAAA,eAAmB,SACvBvU,EAAAA,EAAAA,IAAkC,MAA9BuU,MAAA,eAAmB,WACvBvU,EAAAA,EAAAA,IAAe,UAAX,cAAM,KAGdA,EAAAA,EAAAA,IAeQ,6BAdNF,EAAAA,EAAAA,IAaK8B,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAbWd,EAAAsnC,WAALt+B,K,WAAXjK,EAAAA,EAAAA,IAaK,MAbuBc,IAAKmJ,EAAEnJ,K,EACjCZ,EAAAA,EAAAA,IAAsB,WAAAC,EAAAA,EAAAA,IAAf8J,EAAEgS,OAAK,IACd/b,EAAAA,EAAAA,IASK,YARHA,EAAAA,EAAAA,IAOO,QANNuU,OAAKwY,EAAAA,EAAAA,IAAA,CAAAjQ,MAAkD,aAAvB/b,EAAA8lC,eAAc,GAAI98B,EAAEnJ,cAAG,QAA6E,iBAAvBG,EAAA8lC,eAAc,GAAI98B,EAAEnJ,cAAG,MAA+E,aAAvBG,EAAA8lC,eAAc,GAAI98B,EAAEnJ,cAAG,c,QAK/MG,EAAA8lC,eAAe,GAAG98B,EAAEnJ,eAAiB,YAAd,MAG9BZ,EAAAA,EAAAA,IAAuD,WAAAC,EAAAA,EAAAA,IAAhDc,EAAA8lC,eAAe,GAAG98B,EAAEnJ,eAAiB,KAAd,Q,WAKpCZ,EAAAA,EAAAA,IAGM,MAHNuD,GAGM,gBAFJvD,EAAAA,EAAAA,IAA6C,cAArC,gCAA4B,6CAAUA,EAAAA,EAAAA,IAA2C,eAApCA,EAAAA,EAAAA,IAA4B,SAAzB,2BAAqB,KAC7EA,EAAAA,EAAAA,IAAqH,YAAAC,EAAAA,EAAAA,IAA5Gc,EAAA8lC,eAAeyB,aAAevnC,EAAA8lC,eAAeyB,YAAYj9B,OAAUtK,EAAA8lC,eAAeyB,YAAc,KAAH,KAM7FvnC,EAAAwnC,iBAAc,WAAzBzoC,EAAAA,EAAAA,IAsBM,O,MAtBqBD,MAAM,gBAAiBS,QAAKC,EAAA,MAAAA,EAAA,QAAAC,IAAEN,EAAAsoC,eAAAtoC,EAAAsoC,iBAAAhoC,K,EACvDR,EAAAA,EAAAA,IAoBM,OApBDH,MAAM,gBAAiBS,QAAKC,EAAA,MAAAA,EAAA,KAAA8P,EAAAA,EAAAA,KAAN,QAAW,WAACkE,MAAA,2C,gBACrCvU,EAAAA,EAAAA,IAAoC,UAAhC,+BAA2B,KAC/BA,EAAAA,EAAAA,IAiBO,QAjBAoQ,SAAM7P,EAAA,KAAAA,EAAA,IAAA8P,EAAAA,EAAAA,KAAA,IAAA7P,IAAUN,EAAAuoC,eAAAvoC,EAAAuoC,iBAAAjoC,IAAa,e,EAClCR,EAAAA,EAAAA,IAUM,MAVN4D,GAUM,gBATJ9D,EAAAA,EAAAA,IAQM8B,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IARad,EAAA6lC,aAAPljC,K,WAAZ5D,EAAAA,EAAAA,IAQM,OAR2Bc,IAAK8C,EAAI9C,IAAKf,MAAM,Q,EACnDG,EAAAA,EAAAA,IAA0C,QAA1C6D,IAA0C5D,EAAAA,EAAAA,IAApByD,EAAIqY,OAAK,aAC/B/b,EAAAA,EAAAA,IAIS,U,yBAJQe,EAAA2nC,aAAahlC,EAAIojC,WAAS7lC,G,gBACzCjB,EAAAA,EAAAA,IAAgC,UAAvB2M,MAAO,MAAM,KAAC,IACvB3M,EAAAA,EAAAA,IAAuB,cAAf,UAAM,IACdA,EAAAA,EAAAA,IAAyB,cAAjB,YAAQ,kBAHDe,EAAA2nC,aAAahlC,EAAIojC,eAAS,SAK3C9mC,EAAAA,EAAAA,IAAqG,Y,yBAAlFe,EAAA2nC,aAAahlC,EAAIqjC,YAAU9lC,EAAGE,YAAY,8B,kBAA1CJ,EAAA2nC,aAAahlC,EAAIqjC,oB,SAIxC/mC,EAAAA,EAAAA,IAGM,MAHNgF,GAGM,gBAFJhF,EAAAA,EAAAA,IAA2C,UAAnCkB,KAAK,UAAS,gBAAY,KAClClB,EAAAA,EAAAA,IAA4D,UAApDkB,KAAK,SAAUZ,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAEN,EAAAsoC,eAAAtoC,EAAAsoC,iBAAAhoC,KAAe,aAAM,yBAOhDO,EAAA4nC,iBAAc,WAAzB7oC,EAAAA,EAAAA,IA6BM,O,MA7BqBD,MAAM,gBAAiBS,QAAKC,EAAA,MAAAA,EAAA,QAAAC,IAAEN,EAAA0oC,eAAA1oC,EAAA0oC,iBAAApoC,K,EACvDR,EAAAA,EAAAA,IA2BM,OA3BDH,MAAM,gBAAiBS,QAAKC,EAAA,MAAAA,EAAA,KAAA8P,EAAAA,EAAAA,KAAN,QAAW,WAACkE,MAAA,2C,gBACrCvU,EAAAA,EAAAA,IAAoC,UAAhC,+BAA2B,KAC/BA,EAAAA,EAAAA,IAwBO,QAxBAoQ,SAAM7P,EAAA,MAAAA,EAAA,KAAA8P,EAAAA,EAAAA,KAAA,IAAA7P,IAAUN,EAAA2oC,WAAA3oC,EAAA2oC,aAAAroC,IAAS,e,EAC9BR,EAAAA,EAAAA,IAGM,MAHNiF,GAGM,gBAFJjF,EAAAA,EAAAA,IAA2C,UAAnCkB,KAAK,UAAS,gBAAY,KAClClB,EAAAA,EAAAA,IAA4D,UAApDkB,KAAK,SAAUZ,QAAKC,EAAA,MAAAA,EAAA,QAAAC,IAAEN,EAAA0oC,eAAA1oC,EAAA0oC,iBAAApoC,KAAe,cAAM,aAErDV,EAAAA,EAAAA,IAcM8B,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAdad,EAAAkmC,eAAPC,K,WAAZpnC,EAAAA,EAAAA,IAcM,OAd6Bc,IAAKsmC,GAAG,EACzClnC,EAAAA,EAAAA,IAAuD,KAAvDuF,IAAuDtF,EAAAA,EAAAA,IAAvBC,EAAAinC,WAAWD,IAAG,IAC9ClnC,EAAAA,EAAAA,IAWM,MAXNkqB,GAWM,gBAVJpqB,EAAAA,EAAAA,IASM8B,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAT+Bd,EAAAqmC,UAAUF,IAAlBxmB,K,WAA7B5gB,EAAAA,EAAAA,IASM,OATDD,MAAM,WAA2Ce,IAAK8f,EAAK9f,K,EAC9DZ,EAAAA,EAAAA,IAAwD,MAAxDgrB,IAAwD/qB,EAAAA,EAAAA,IAApCygB,EAAK2mB,MAAO,MAAEpnC,EAAAA,EAAAA,IAAGygB,EAAK4mB,MAAO,IAAC,IAClDtnC,EAAAA,EAAAA,IAAyD,OAApDH,MAAM,QAAQ0nC,UAAQ7mB,EAAK8mB,OAAS,K,qBACzCxnC,EAAAA,EAAAA,IAIS,U,yBAJQe,EAAA+nC,SAAS,GAAGpoB,EAAK9f,cAAGK,G,gBACnCjB,EAAAA,EAAAA,IAAyB,cAAjB,YAAQ,IAChBA,EAAAA,EAAAA,IAAuB,cAAf,UAAM,IACdA,EAAAA,EAAAA,IAAyB,cAAjB,YAAQ,kBAHDe,EAAA+nC,SAAS,GAAGpoB,EAAK9f,kBAAG,SAKrCZ,EAAAA,EAAAA,IAA8F,Y,yBAA3Ee,EAAA+nC,SAAS,GAAGpoB,EAAK9f,cAAGK,EAAYE,YAAY,qB,kBAA5CJ,EAAA+nC,SAAS,GAAGpoB,EAAK9f,sB,oBAI1CZ,EAAAA,EAAAA,IAGM,MAHNwrB,GAGM,gBAFJxrB,EAAAA,EAAAA,IAA2C,UAAnCkB,KAAK,UAAS,gBAAY,KAClClB,EAAAA,EAAAA,IAA4D,UAApDkB,KAAK,SAAUZ,QAAKC,EAAA,MAAAA,EAAA,QAAAC,IAAEN,EAAA0oC,eAAA1oC,EAAA0oC,iBAAApoC,KAAe,aAAM,yBAOhDO,EAAAgoC,kBAAe,WAA1BjpC,EAAAA,EAAAA,IA2BM,O,MA3BsBD,MAAM,gBAAiBS,QAAKC,EAAA,MAAAA,EAAA,QAAAC,IAAEN,EAAA8oC,gBAAA9oC,EAAA8oC,kBAAAxoC,K,EACxDR,EAAAA,EAAAA,IAyBM,OAzBDH,MAAM,gBAAiBS,QAAKC,EAAA,MAAAA,EAAA,KAAA8P,EAAAA,EAAAA,KAAN,QAAW,WAACkE,MAAA,2C,gBACrCvU,EAAAA,EAAAA,IAA2C,UAAvC,sCAAkC,KACtCA,EAAAA,EAAAA,IAsBO,QAtBAoQ,SAAM7P,EAAA,MAAAA,EAAA,KAAA8P,EAAAA,EAAAA,KAAA,IAAA7P,IAAUN,EAAA+oC,YAAA/oC,EAAA+oC,cAAAzoC,IAAU,e,EAC/BR,EAAAA,EAAAA,IAUM,MAVNyrB,GAUM,gBATJ3rB,EAAAA,EAAAA,IAQM8B,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IARWd,EAAAsnC,WAALt+B,K,WAAZjK,EAAAA,EAAAA,IAQM,OARuBc,IAAKmJ,EAAEnJ,IAAKf,MAAM,Q,EAC7CG,EAAAA,EAAAA,IAA+C,QAA/C0rB,IAA+CzrB,EAAAA,EAAAA,IAAzB8J,EAAEgS,OAAQ,UAAO,aACvC/b,EAAAA,EAAAA,IAIS,U,yBAJQe,EAAAmoC,UAAU,GAAGn/B,EAAEnJ,cAAGK,G,gBACjCjB,EAAAA,EAAAA,IAAyB,cAAjB,YAAQ,IAChBA,EAAAA,EAAAA,IAAyB,cAAjB,YAAQ,IAChBA,EAAAA,EAAAA,IAA6B,cAArB,gBAAY,kBAHLe,EAAAmoC,UAAU,GAAGn/B,EAAEnJ,kBAAG,SAKnCZ,EAAAA,EAAAA,IAAiF,Y,yBAA9De,EAAAmoC,UAAU,GAAGn/B,EAAEnJ,cAAGK,EAAYE,YAAY,U,kBAA1CJ,EAAAmoC,UAAU,GAAGn/B,EAAEnJ,sB,SAItCZ,EAAAA,EAAAA,IAGM,MAHN6rB,GAGM,gBAFJ7rB,EAAAA,EAAAA,IAAsD,SAA/CH,MAAM,OAAM,+BAA2B,cAC9CG,EAAAA,EAAAA,IAAwF,Y,uCAArEe,EAAAmoC,UAAUZ,YAAWrnC,GAAEE,YAAY,wB,iBAAnCJ,EAAAmoC,UAAUZ,kBAG/BtoC,EAAAA,EAAAA,IAGM,MAHN8rB,GAGM,gBAFJ9rB,EAAAA,EAAAA,IAA2C,UAAnCkB,KAAK,UAAS,gBAAY,KAClClB,EAAAA,EAAAA,IAA6D,UAArDkB,KAAK,SAAUZ,QAAKC,EAAA,MAAAA,EAAA,QAAAC,IAAEN,EAAA8oC,gBAAA9oC,EAAA8oC,kBAAAxoC,KAAgB,aAAM,0B,CAchE,QACE4iC,OAAQ,CACNzsB,qBAAsB,CAAEzM,KAAM,uBAAwB0nB,QAASA,IAAM,IAAM,MAC3Enb,qBAAsB,CAAEvM,KAAM,uBAAwB0nB,QAASA,IAAMxnB,cAEvE5E,IAAAA,GACE,MAAO,CACLC,QAASC,EAAAA,EAAIC,aACbqJ,UAAU,EAEV63B,eAAgB,CAAC,EACjBa,kBAAmB,CAAC,EAGpBa,gBAAgB,EAChBI,gBAAgB,EAChBI,iBAAiB,EAGjBL,aAAc,CAAC,EACfI,SAAU,CAAC,EACXI,UAAW,CAAC,EAGZtB,YAAa,CAAC,EACduB,YAAa,CAAC,EACdlB,UAAW,IAAI5hC,IACfohC,WAAY,KAGZb,YAAa,CACX,CAAEhmC,IAAK,aAAcmb,MAAO,aAAc+qB,UAAW,oBAAqBC,WAAY,sBACtF,CAAEnmC,IAAK,aAAcmb,MAAO,aAAc+qB,UAAW,oBAAqBC,WAAY,sBACtF,CAAEnmC,IAAK,aAAcmb,MAAO,cAAe+qB,UAAW,oBAAqBC,WAAY,sBACvF,CAAEnmC,IAAK,qBAAsBmb,MAAO,qBAAsB+qB,UAAW,4BAA6BC,WAAY,+BAIhHE,cAAe,CAAC,cAAc,UAAU,SAAS,eAAe,QAAQ,QAAQ,YAAY,aAAa,YACzGG,UAAW,CACTgC,YAAa,CACX,CAAExoC,IAAK,KAAUymC,KAAM,cAAwBC,KAAM,KAASE,MAAO,gBACrE,CAAE5mC,IAAK,MAAUymC,KAAM,MAAwBC,KAAM,MAASE,MAAO,yBACrE,CAAE5mC,IAAK,MAAUymC,KAAM,MAAwBC,KAAM,MAASE,MAAO,eACrE,CAAE5mC,IAAK,MAAUymC,KAAM,MAAwBC,KAAM,MAASE,MAAO,cACrE,CAAE5mC,IAAK,MAAUymC,KAAM,MAAwBC,KAAM,MAASE,MAAO,cACrE,CAAE5mC,IAAK,OAAUymC,KAAM,OAAwBC,KAAM,OAASE,MAAO,iBACrE,CAAE5mC,IAAK,MAAUymC,KAAM,MAAwBC,KAAM,MAASE,MAAO,UACrE,CAAE5mC,IAAK,MAAUymC,KAAM,mBAAwBC,KAAM,MAASE,MAAO,mBACrE,CAAE5mC,IAAK,OAAUymC,KAAM,cAAwBC,KAAM,OAASE,MAAO,sBACrE,CAAE5mC,IAAK,MAAUymC,KAAM,cAAwBC,KAAM,MAASE,MAAO,sBACrE,CAAE5mC,IAAK,MAAUymC,KAAM,YAAwBC,KAAM,MAASE,MAAO,oBACrE,CAAE5mC,IAAK,MAAUymC,KAAM,cAAwBC,KAAM,MAASE,MAAO,oBACrE,CAAE5mC,IAAK,MAAUymC,KAAM,YAAwBC,KAAM,MAASE,MAAO,oBACrE,CAAE5mC,IAAK,OAAUymC,KAAM,YAAwBC,KAAM,OAASE,MAAO,sBACrE,CAAE5mC,IAAK,MAAUymC,KAAM,MAAwBC,KAAM,MAASE,MAAO,gBACrE,CAAE5mC,IAAK,MAAUymC,KAAM,qBAAwBC,KAAM,MAASE,MAAO,KAEvEtkB,QAAS,CACP,CAAEtiB,IAAK,MAAUymC,KAAM,UAAwBC,KAAM,MAASE,MAAO,sBACrE,CAAE5mC,IAAK,MAAUymC,KAAM,SAAwBC,KAAM,MAASE,MAAO,wBAEvE3tB,OAAQ,CACN,CAAEjZ,IAAK,QAAUymC,KAAM,oBAAwBC,KAAM,QAASE,MAAO,kBACrE,CAAE5mC,IAAK,KAAUymC,KAAM,eAAwBC,KAAM,KAASE,MAAO,mBACrE,CAAE5mC,IAAK,MAAUymC,KAAM,kBAAwBC,KAAM,MAASE,MAAO,mBACrE,CAAE5mC,IAAK,MAAUymC,KAAM,kBAAwBC,KAAM,MAASE,MAAO,mBAEvE6B,aAAc,CACZ,CAAEzoC,IAAK,KAAUymC,KAAM,SAAwBC,KAAM,KAASE,MAAO,oBACrE,CAAE5mC,IAAK,IAAUymC,KAAM,YAAwBC,KAAM,IAASE,MAAO,oBACrE,CAAE5mC,IAAK,KAAUymC,KAAM,WAAwBC,KAAM,KAASE,MAAO,oBAEvEpkB,MAAO,CACL,CAAExiB,IAAK,KAAUymC,KAAM,OAAwBC,KAAM,KAASE,MAAO,oBACrE,CAAE5mC,IAAK,QAAUymC,KAAM,aAAwBC,KAAM,QAASE,MAAO,mBACrE,CAAE5mC,IAAK,KAAUymC,KAAM,YAAwBC,KAAM,KAASE,MAAO,oBACrE,CAAE5mC,IAAK,KAAUymC,KAAM,UAAwBC,KAAM,KAASE,MAAO,sBACrE,CAAE5mC,IAAK,MAAUymC,KAAM,oBAAwBC,KAAM,MAASE,MAAO,sBACrE,CAAE5mC,IAAK,MAAUymC,KAAM,YAAwBC,KAAM,MAASE,MAAO,uBAEvEvkB,MAAO,CACL,CAAEriB,IAAK,QAAUymC,KAAM,gBAAwBC,KAAM,QAASE,MAAO,gBACrE,CAAE5mC,IAAK,MAAUymC,KAAM,UAAwBC,KAAM,MAASE,MAAO,gBACrE,CAAE5mC,IAAK,MAAUymC,KAAM,WAAwBC,KAAM,MAASE,MAAO,gBACrE,CAAE5mC,IAAK,MAAUymC,KAAM,yBAA0BC,KAAM,MAAOE,MAAO,aACrE,CAAE5mC,IAAK,OAAUymC,KAAM,uBAAwBC,KAAM,OAASE,MAAO,gBACrE,CAAE5mC,IAAK,OAAUymC,KAAM,kBAAwBC,KAAM,OAASE,MAAO,iBACrE,CAAE5mC,IAAK,MAAUymC,KAAM,6BAA8BC,KAAM,MAAOE,MAAO,cACzE,CAAE5mC,IAAK,MAAUymC,KAAM,yBAA0BC,KAAM,MAAOE,MAAO,cACrE,CAAE5mC,IAAK,MAAUymC,KAAM,uBAAwBC,KAAM,MAASE,MAAO,eAEvE8B,UAAW,CACT,CAAE1oC,IAAK,QAAUymC,KAAM,UAAwBC,KAAM,QAASE,MAAO,YACrE,CAAE5mC,IAAK,MAAUymC,KAAM,KAAwBC,KAAM,MAASE,MAAO,UACrE,CAAE5mC,IAAK,OAAUymC,KAAM,UAAwBC,KAAM,OAASE,MAAO,YACrE,CAAE5mC,IAAK,OAAUymC,KAAM,UAAwBC,KAAM,OAASE,MAAO,YACrE,CAAE5mC,IAAK,MAAUymC,KAAM,mBAAwBC,KAAM,MAASE,MAAO,iBACrE,CAAE5mC,IAAK,OAAUymC,KAAM,QAAwBC,KAAM,OAASE,MAAO,aAEvE+B,WAAY,CACV,CAAE3oC,IAAK,OAAUymC,KAAM,aAAwBC,KAAM,OAASE,MAAO,mBACrE,CAAE5mC,IAAK,OAAUymC,KAAM,eAAwBC,KAAM,OAASE,MAAO,mBACrE,CAAE5mC,IAAK,SAAUymC,KAAM,mBAAwBC,KAAM,SAASE,MAAO,YACrE,CAAE5mC,IAAK,MAAUymC,KAAM,mBAAwBC,KAAM,MAASE,MAAO,aAEvEgC,SAAU,CACR,CAAE5oC,IAAK,OAAUymC,KAAM,OAAwBC,KAAM,OAASE,MAAO,gBACrE,CAAE5mC,IAAK,QAAUymC,KAAM,wBAAwBC,KAAM,QAASE,MAAO,gBACrE,CAAE5mC,IAAK,QAAUymC,KAAM,yBAA0BC,KAAM,QAASE,MAAO,UACvE,CAAE5mC,IAAK,MAAUymC,KAAM,yBAA0BC,KAAM,MAAOE,MAAO,MAKzEa,UAAW,CACT,CAAEznC,IAAK,UAAWmb,MAAO,WACzB,CAAEnb,IAAK,eAAgBmb,MAAO,gBAC9B,CAAEnb,IAAK,cAAemb,MAAO,eAC7B,CAAEnb,IAAK,OAAQmb,MAAO,QACtB,CAAEnb,IAAK,iBAAkBmb,MAAO,mBAGtC,EACA7V,SAAU,CAER0Q,aAAAA,GACE,OAAOzQ,KAAKwQ,qBAAuBxQ,KAAKwQ,uBAAyB,IACnE,EACA2sB,aAAAA,GACE,OAAOn9B,KAAKyQ,eAAezX,QAAU,OACvC,GAEFwJ,OAAAA,GACExC,KAAKsjC,sBACLtjC,KAAKujC,yBAAyBtgC,MAAK,KACjCjD,KAAKwjC,mBAET,EAEA7gC,QAAS,CAEP05B,WAAAA,CAAYW,GACV,IAAIh0B,EAAO,KACX,IACEA,EAAOd,KAAKC,MAAMlP,aAAa6J,QAAQ,eAAekG,MAAQ,OAChE,CAAE,MAAOY,GAAiB,CAC1B,OAAOmzB,GAAW/zB,EAAMhJ,KAAKm9B,cAAeH,EAC9C,EACAgE,UAAAA,CAAWj/B,GACT,MAAM0hC,EAAI,CACRR,YAAa,cAAelmB,QAAS,UAAWrJ,OAAQ,SACxDwvB,aAAc,eAAgBjmB,MAAO,iBAAkBH,MAAO,iBAC9DqmB,UAAW,yBAA0BC,WAAY,0BAA2BC,SAAU,YAExF,OAAOI,EAAE1hC,IAAMA,CACjB,EAGA,yBAAMuhC,GAEJ,MAAMhG,EAAiBt9B,KAAK4P,OAAOc,OAAOpB,WAAa,GACvD,OAAOtM,MAAM,GAAGhD,KAAKV,0BAA0Bg+B,IAAkB,CAC/D16B,QAAS,CAAEC,cAAe,UAAU5J,aAAa6J,QAAQ,kBAE1DG,MAAKlK,IACJ,KAAID,EAAAA,EAAAA,GAAmBC,GAEvB,OAAOA,EAAImK,UAEZD,MAAK0B,IACJ3E,KAAK0gC,eAAiB58B,MAAMwQ,QAAQ3P,GAAMA,EAAE,IAAM,CAAC,EAAKA,KAGzDxB,OAAM+J,GAAOzD,QAAQI,MAAMqD,IAC9B,EACA,4BAAMq2B,GAEJ,MAAMjG,EAAiBt9B,KAAK4P,OAAOc,OAAOpB,WAAa,GACvD,OAAOtM,MAAM,GAAGhD,KAAKV,8BAA8Bg+B,IAAkB,CACnE16B,QAAS,CAAEC,cAAe,UAAU5J,aAAa6J,QAAQ,kBAExDG,MAAKlK,IACJ,KAAID,EAAAA,EAAAA,GAAmBC,GAEvB,OAAOA,EAAImK,UAEZD,MAAK0B,IACJ3E,KAAKuhC,kBAAoBz9B,MAAMwQ,QAAQ3P,GAAMA,EAAE,IAAM,CAAC,EAAKA,KAG5DxB,OAAM+J,GAAOzD,QAAQI,MAAMqD,IAChC,EAEAs2B,cAAAA,GACE,MAAME,EAAO,CAAC,EACd/uB,OAAOtS,OAAOrC,KAAKihC,WAAW0C,OAAOrhC,SAAQiY,IAC3CmpB,EAAK,GAAGnpB,EAAK9f,cAAgBuF,KAAKuhC,oBAAoB,GAAGhnB,EAAK9f,eAAiB,WAC/EipC,EAAK,GAAGnpB,EAAK9f,cAAgBuF,KAAKuhC,oBAAoB,GAAGhnB,EAAK9f,eAAiB,QAEjFuF,KAAKyhC,YAAc,IAAKiC,GACxB1jC,KAAKgjC,YAAc96B,KAAKC,MAAMD,KAAK4E,UAAU42B,IAC7C1jC,KAAK8hC,UAAU5oC,QACf8G,KAAKshC,WAAa,IACpB,EACAI,SAAAA,CAAUkC,GACR,MAAMC,EAAS,GAAGD,WACZE,EAAS,GAAGF,WACZG,EACJ/jC,KAAKyhC,YAAYoC,KAAY7jC,KAAKgjC,YAAYa,KAC7C7jC,KAAKyhC,YAAYqC,IAAW,OAAS9jC,KAAKgjC,YAAYc,IAAW,IAChEC,EAAO/jC,KAAK8hC,UAAUr8B,IAAIm+B,GACzB5jC,KAAK8hC,UAAU1xB,OAAOwzB,EAC7B,EACAjC,UAAAA,CAAWiC,GACT,OAAO5jC,KAAK8hC,UAAU9xB,IAAI4zB,EAC5B,EACApC,YAAAA,CAAaoC,GAEX5jC,KAAKyhC,YAAY,GAAGmC,YAAoB5jC,KAAKuhC,oBAAoB,GAAGqC,aAAqB,WACzF5jC,KAAKyhC,YAAY,GAAGmC,YAAoB5jC,KAAKuhC,oBAAoB,GAAGqC,aAAqB,KAEzF5jC,KAAKgjC,YAAY,GAAGY,YAAoB5jC,KAAKyhC,YAAY,GAAGmC,YAC5D5jC,KAAKgjC,YAAY,GAAGY,YAAoB5jC,KAAKyhC,YAAY,GAAGmC,YAC5D5jC,KAAK8hC,UAAU1xB,OAAOwzB,GACtB5jC,KAAKshC,WAAasC,CACpB,EACA/B,aAAAA,CAAc+B,GAEZ5jC,KAAKyhC,YAAY,GAAGmC,YAAoB5jC,KAAKgjC,YAAY,GAAGY,YAC5D5jC,KAAKyhC,YAAY,GAAGmC,YAAoB5jC,KAAKgjC,YAAY,GAAGY,YAC5D5jC,KAAK8hC,UAAU1xB,OAAOwzB,GAClB5jC,KAAKshC,aAAesC,IAAS5jC,KAAKshC,WAAa,KACrD,EAGAM,UAAAA,CAAWgC,GACT,MAAMvyB,EAAU,IAAKrR,KAAKuhC,mBAE1BlwB,EAAQ,GAAGuyB,YAAoB5jC,KAAKyhC,YAAY,GAAGmC,YACnDvyB,EAAQ,GAAGuyB,YAAoB5jC,KAAKyhC,YAAY,GAAGmC,YACnDvyB,EAAQiV,WAAape,KAAKC,MAAMlP,aAAa6J,QAAQ,cAAcqB,MAGnE,MAAMm5B,EAAiBt9B,KAAK4P,OAAOc,OAAOpB,WAAa,GACvDtM,MAAM,GAAGhD,KAAKV,mCAAmCg+B,IAAkB,CACjEzwB,OAAQ,MACRjK,QAAS,CACPC,cAAe,UAAU5J,aAAa6J,QAAQ,eAC9C,eAAgB,oBAElBqJ,KAAMjE,KAAK4E,UAAUuE,KAEtBpO,MAAK7C,GAAKA,EAAE8C,SACZD,MAAK,KACJjD,KAAKuhC,kBAAoBlwB,EAEzBrR,KAAKgjC,YAAY,GAAGY,YAAoB5jC,KAAKyhC,YAAY,GAAGmC,YAC5D5jC,KAAKgjC,YAAY,GAAGY,YAAoB5jC,KAAKyhC,YAAY,GAAGmC,YAC5D5jC,KAAK8hC,UAAU1xB,OAAOwzB,GAClB5jC,KAAKshC,aAAesC,IAAS5jC,KAAKshC,WAAa,MACnDthC,KAAKujC,4BAENpgC,OAAM+J,GAAOzD,QAAQI,MAAMqD,IAC9B,EACA60B,UAAAA,GACE,MAAM1wB,EAAU,IAAKrR,KAAKuhC,qBAAsBvhC,KAAKyhC,aACrDpwB,EAAQiV,WAAape,KAAKC,MAAMlP,aAAa6J,QAAQ,cAAcqB,MAEnE,MAAMm5B,EAAiBt9B,KAAK4P,OAAOc,OAAOpB,WAAa,GACvDtM,MAAM,GAAGhD,KAAKV,mCAAmCg+B,IAAkB,CACjEzwB,OAAQ,MACRjK,QAAS,CACPC,cAAe,UAAU5J,aAAa6J,QAAQ,eAC9C,eAAgB,oBAElBqJ,KAAMjE,KAAK4E,UAAUuE,KAEtBpO,MAAK7C,GAAKA,EAAE8C,SACZD,MAAK,KACJjD,KAAKuhC,kBAAoBlwB,EACzBrR,KAAKwjC,oBAENrgC,OAAM+J,GAAOzD,QAAQI,MAAMqD,IAC9B,EACA80B,YAAAA,GACEhiC,KAAKyhC,YAAcv5B,KAAKC,MAAMD,KAAK4E,UAAU9M,KAAKgjC,cAClDhjC,KAAK8hC,UAAU5oC,QACf8G,KAAKshC,WAAa,IACpB,EAGAd,YAAAA,GACE,MAAMx+B,EAAMhC,KAAK0gC,gBAAkB,CAAC,EAC9BgD,EAAO,CAAC,EACd1jC,KAAKygC,YAAYn+B,SAAQ/E,IACvBmmC,EAAKnmC,EAAIojC,WAAc3+B,EAAIzE,EAAIojC,YAAe,KAC9C+C,EAAKnmC,EAAIqjC,YAAc5+B,EAAIzE,EAAIqjC,aAAe,QAGhD5gC,KAAKuiC,aAAemB,EACpB1jC,KAAKoiC,gBAAiB,CACxB,EACAC,aAAAA,GAAkBriC,KAAKoiC,gBAAiB,EAAOpiC,KAAKsjC,qBAAuB,EAC3EhB,aAAAA,GAEE,MAAMhF,EAAiBt9B,KAAK4P,OAAOc,OAAOpB,WAAa,GACjDF,EAAS,IAAMpP,KAAK0gC,gBAAkB,CAAC,KAAO1gC,KAAKuiC,cACzDnzB,EAAOkX,WAAape,KAAKC,MAAMlP,aAAa6J,QAAQ,cAAcqB,MAClEnB,MAAM,GAAGhD,KAAKV,+BAA+Bg+B,IAAkB,CAC7DzwB,OAAQ,MACRjK,QAAS,CAAEC,cAAe,UAAU5J,aAAa6J,QAAQ,eAAgB,eAAgB,oBACzFqJ,KAAMjE,KAAK4E,UAAUsC,KAEpBnM,MAAK7C,GAAKA,EAAE8C,SACZD,MAAK,KAAQjD,KAAKsjC,sBAAuBtjC,KAAKqiC,mBAC9Cl/B,OAAM+J,GAAOzD,QAAQI,MAAMqD,IAChC,EAEA2zB,YAAAA,GACE,MAAMN,EAAW,CAAC,EAClB5rB,OAAOtS,OAAOrC,KAAKihC,WAAW0C,OAAOrhC,SAAQiY,IAC3CgmB,EAAS,GAAGhmB,EAAK9f,cAAgB,WACjC8lC,EAAS,GAAGhmB,EAAK9f,cAAgB,QAEnCuF,KAAK2iC,SAAW,IAAKpC,KAAcvgC,KAAKuhC,mBAAqB,CAAC,GAC9DvhC,KAAK2iC,SAASrc,WAAape,KAAKC,MAAMlP,aAAa6J,QAAQ,cAAcqB,MACzEnE,KAAKwiC,gBAAiB,CACxB,EACAC,aAAAA,GAAkBziC,KAAKwiC,gBAAiB,EAAOxiC,KAAKujC,wBAA0B,EAC9Eb,SAAAA,GAEE,MAAMpF,EAAiBt9B,KAAK4P,OAAOc,OAAOpB,WAAa,GACvDtM,MAAM,GAAGhD,KAAKV,mCAAmCg+B,IAAkB,CACjEzwB,OAAQ,MACRjK,QAAS,CAAEC,cAAe,UAAU5J,aAAa6J,QAAQ,eAAgB,eAAgB,oBACzFqJ,KAAMjE,KAAK4E,UAAU9M,KAAK2iC,YAEzB1/B,MAAK7C,GAAKA,EAAE8C,SACZD,MAAK,KACJjD,KAAKujC,yBAAyBtgC,MAAK,IAAMjD,KAAKwjC,mBAC9CxjC,KAAKyiC,mBAENt/B,OAAM+J,GAAOzD,QAAQI,MAAMqD,IAChC,EAEA+0B,aAAAA,GACE,MAAMjgC,EAAMhC,KAAK0gC,gBAAkB,CAAC,EAC9BgD,EAAO,CAAC,EACd1jC,KAAKkiC,UAAU5/B,SAAQsB,IACrB8/B,EAAK,GAAG9/B,EAAEnJ,cAAgBuH,EAAI,GAAG4B,EAAEnJ,eAAiB,WACpDipC,EAAK,GAAG9/B,EAAEnJ,cAAgBuH,EAAI,GAAG4B,EAAEnJ,eAAiB,QAEtDipC,EAAKvB,YAAcngC,EAAImgC,aAAe,KACtCniC,KAAK+iC,UAAYW,EACjB1jC,KAAK4iC,iBAAkB,CACzB,EACAC,cAAAA,GAAmB7iC,KAAK4iC,iBAAkB,EAAO5iC,KAAKsjC,qBAAuB,EAC7ER,UAAAA,GAEE,MAAMxF,EAAiBt9B,KAAK4P,OAAOc,OAAOpB,WAAa,GACjDF,EAAS,IAAMpP,KAAK0gC,gBAAkB,CAAC,KAAO1gC,KAAK+iC,WACzD3zB,EAAOkX,WAAape,KAAKC,MAAMlP,aAAa6J,QAAQ,cAAcqB,MAElEnB,MAAM,GAAGhD,KAAKV,+BAA+Bg+B,IAAkB,CAC7DzwB,OAAQ,MACRjK,QAAS,CAAEC,cAAe,UAAU5J,aAAa6J,QAAQ,eAAgB,eAAgB,oBACzFqJ,KAAMjE,KAAK4E,UAAUsC,KAEpBnM,MAAK7C,GAAKA,EAAE8C,SACZD,MAAK,KAAQjD,KAAKsjC,sBAAuBtjC,KAAK6iC,oBAC9C1/B,OAAM+J,GAAOzD,QAAQI,MAAMqD,IAChC,ICznBJ,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,SAAS,MAEpE,U,uFCRIvT,EAAAA,EAAAA,IAwCM,2BAvCFE,EAAAA,EAAAA,IAA2B,UAAvB,sBAAkB,IAEXe,EAAAopC,YAAS,WAApBrqC,EAAAA,EAAAA,IAwBM,MAAAC,GAAA,EAvBFC,EAAAA,EAAAA,IAsBO,QAtBAoQ,SAAM7P,EAAA,KAAAA,EAAA,IAAA8P,EAAAA,EAAAA,KAAA,IAAA7P,IAAUN,EAAAkqC,kBAAAlqC,EAAAkqC,oBAAA5pC,IAAgB,e,EACnCR,EAAAA,EAAAA,IAGM,yBAFFA,EAAAA,EAAAA,IAAsC,SAA/BuQ,IAAI,eAAc,SAAK,cAC9BvQ,EAAAA,EAAAA,IAA+D,SAAxDkB,KAAK,O,qCAAgBH,EAAAspC,WAAWn1B,YAAWjU,GAAEwP,SAAA,I,iBAAxB1P,EAAAspC,WAAWn1B,kBAE3ClV,EAAAA,EAAAA,IAGM,yBAFFA,EAAAA,EAAAA,IAAmD,SAA5CuQ,IAAI,gBAAe,qBAAiB,cAC3CvQ,EAAAA,EAAAA,IAAqH,SAA9GkB,KAAK,O,qCAAgBH,EAAAspC,WAAWr1B,aAAY/T,GAAE+S,SAAA,GAASO,MAAA,kD,iBAAlCxT,EAAAspC,WAAWr1B,mBAS3ChV,EAAAA,EAAAA,IAGM,yBAFFA,EAAAA,EAAAA,IAAuC,SAAhCuQ,IAAI,YAAW,aAAS,cAC/BvQ,EAAAA,EAAAA,IAA4D,SAArDkB,KAAK,O,qCAAgBH,EAAAspC,WAAWl2B,SAAQlT,GAAEwP,SAAA,I,iBAArB1P,EAAAspC,WAAWl2B,eAE3CnU,EAAAA,EAAAA,IAAsE,UAA9DkB,KAAK,SAAU0P,UAAW1Q,EAAAy9B,eAAe,eAAY,EAAAt9B,KAC7DL,EAAAA,EAAAA,IAAyD,UAAjDkB,KAAK,SAAUZ,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAEN,EAAAoqC,YAAApqC,EAAAoqC,cAAA9pC,KAAY,WAAM,oBAIxDV,EAAAA,EAAAA,IAUM,MAAAgB,GAAA,EATFd,EAAAA,EAAAA,IAMQ,eALJA,EAAAA,EAAAA,IAIQ,eAHJA,EAAAA,EAAAA,IAAoE,0BAAhEA,EAAAA,EAAAA,IAAqB,YAAjBA,EAAAA,EAAAA,IAAY,SAAT,WAAK,+BAAUA,EAAAA,EAAAA,IAAqC,WAAAC,EAAAA,EAAAA,IAA9Bc,EAAAspC,WAAWn1B,aAAW,MACvDlV,EAAAA,EAAAA,IAAsE,0BAAlEA,EAAAA,EAAAA,IAAsB,YAAlBA,EAAAA,EAAAA,IAAa,SAAV,YAAM,+BAAUA,EAAAA,EAAAA,IAAsC,WAAAC,EAAAA,EAAAA,IAA/Bc,EAAAspC,WAAWr1B,cAAY,MACzDhV,EAAAA,EAAAA,IAAqE,0BAAjEA,EAAAA,EAAAA,IAAyB,YAArBA,EAAAA,EAAAA,IAAgB,SAAb,eAAS,+BAAUA,EAAAA,EAAAA,IAAkC,WAAAC,EAAAA,EAAAA,IAA3Bc,EAAAspC,WAAWl2B,UAAQ,UAGhEnU,EAAAA,EAAAA,IAA6C,UAApCM,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAEN,EAAAqqC,gBAAArqC,EAAAqqC,kBAAA/pC,KAAgB,SAChCR,EAAAA,EAAAA,IAAoF,UAA3EM,QAAKC,EAAA,KAAAA,EAAA,GAAAU,GAAEuT,EAAAtE,QAAQvQ,KAAK,eAAe4U,MAAA,wBAA2B,Y,CAQnF,QACI/O,IAAAA,GACI,MAAO,CACHC,QAASC,EAAAA,EAAIC,aACbwkC,WAAW,EACXE,WAAY,CACRG,WAAY,GACZx1B,aAAc,GACdE,YAAa,GACbf,SAAU,IAEds2B,mBAAoB,KAE5B,EACA9hC,OAAAA,GACIxC,KAAKukC,iBACT,EACAxkC,SAAU,CACNy3B,aAAAA,GACI,IAAKx3B,KAAKskC,mBAAoB,OAAO,EAErC,MAAM7M,EAAS,CACX,cACA,YAEJ,OAAOA,EAAO3xB,MAAKgV,GAAS9a,KAAKkkC,WAAWppB,KAAW9a,KAAKskC,mBAAmBxpB,IACnF,GAEJnY,QAAS,CACL4hC,eAAAA,GACI,MAAMt8B,EAAWhP,aAAa6J,QAAQ,aAEtC,IAAKmF,EAAU,OACf,MAAMu8B,EAAct8B,KAAKC,MAAMF,GAAU9D,MAAMC,QAAQ,MAAO,OAE9DpB,MAAM,GAAGhD,KAAKV,uBAAuB6R,mBAAmBqzB,KAAgB,CACpE33B,OAAQ,MACRjK,QAAS,CACL,cAAiB,UAAU3J,aAAa6J,QAAQ,eAChD,eAAgB,sBAGnBG,MAAKlK,GAAOA,EAAImK,SAChBD,MAAK5D,IACFW,KAAKkkC,WAAa7kC,EAElBW,KAAKskC,mBAAqBp8B,KAAKC,MAAMD,KAAK4E,UAAUzN,OAEvD8D,OAAM+J,IACHzD,QAAQI,MAAM,SAAUqD,GACxB5T,MAAM,kCAElB,EACA8qC,cAAAA,GACIpkC,KAAKgkC,WAAY,CACrB,EACAG,UAAAA,GACInkC,KAAKgkC,WAAY,EACjBhkC,KAAKukC,iBACT,EACAN,gBAAAA,GACI,MAAMh8B,EAAWhP,aAAa6J,QAAQ,aAEtC,IAAKmF,EAAU,OACf,MAAMu8B,EAAct8B,KAAKC,MAAMF,GAAU9D,MAAMC,QAAQ,MAAO,OAE9DpB,MAAM,GAAGhD,KAAKV,4BAA4B6R,mBAAmBqzB,KAAgB,CACzE33B,OAAQ,OACRjK,QAAS,CACL,cAAiB,UAAU3J,aAAa6J,QAAQ,eAChD,eAAgB,oBAEpBqJ,KAAMjE,KAAK4E,UAAU9M,KAAKkkC,cAEzBjhC,MAAKlK,IACF,KAAID,EAAAA,EAAAA,GAAmBC,GAEvB,OAAOA,EAAImK,UAEdD,MAAK,KACFjD,KAAKgkC,WAAY,EACjB1qC,MAAM,sCACN0G,KAAKukC,qBAERphC,OAAM+J,IACHzD,QAAQI,MAAM,8BAA+BqD,GAC7C5T,MAAM,4BAElB,IClIR,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,SAAS,MAEpE,UC8BA,MAAMmrC,GAAS,CAEb,CAAEC,KAAM,IAAKjrC,KAAM,QAASkrC,UAAWC,IACvC,CAAEF,KAAM,YAAajrC,KAAM,WAAYkrC,UAAWE,IAGlD,CACIH,KAAM,WACNjrC,KAAM,UACNkrC,UAAWG,IAGf,CACEJ,KAAM,aACNjrC,KAAM,YACNkrC,UAAWI,GACXC,KAAM,CAAEC,cAAc,IAIxB,CAAEP,KAAM,sBAAuBC,UAAWO,GAAaF,KAAM,CAAEC,cAAc,EAAMj8B,KAAM,UACzF,CAAE07B,KAAM,0BAA2BC,UAAWQ,GAAU3Z,OAAO,EAAMwZ,KAAM,CAAEC,cAAc,EAAMj8B,KAAM,UACvG,CAAE07B,KAAM,uBAAwBC,UAAWS,GAAcJ,KAAM,CAAEC,cAAc,EAAMj8B,KAAM,UAC3F,CAAE07B,KAAM,2BAA4BC,UAAWU,GAAU7Z,OAAO,EAAMwZ,KAAM,CAAEC,cAAc,EAAMj8B,KAAM,UACxG,CAAE07B,KAAM,yBAA0BC,UAAWW,GAAgBN,KAAM,CAAEC,cAAc,EAAMj8B,KAAM,UAC/F,CAAE07B,KAAM,kCAAmCC,UAAWY,GAAwBP,KAAM,CAAEC,cAAc,EAAMj8B,KAAM,UAEhH,CAAE07B,KAAM,qCAAsCC,UAAWa,GAAeR,KAAM,CAAEC,cAAc,EAAMj8B,KAAM,UAO1G,CAAE07B,KAAM,wBAAyBC,UAAWc,GAAeT,KAAM,CAAEC,cAAc,EAAMj8B,KAAM,UAE7F,CAAE07B,KAAM,qBAAsBC,UAAWe,GAAYV,KAAM,CAAEC,cAAc,EAAMj8B,KAAM,UAOvF,CAAE07B,KAAM,sBAAuBC,UAAWgB,GAAkBX,KAAM,CAAEC,cAAc,EAAMj8B,KAAM,WAC9F,CAAE07B,KAAM,mCAAoCC,UAAWY,GAAwBP,KAAM,CAAEC,cAAc,EAAMj8B,KAAM,WAGjH,CACE07B,KAAM,sBACNkB,MAAO,CAAC,4BAA6B,8BACrCjB,UAAWkB,GACXb,KAAM,CAAEC,cAAc,EAAMa,aAAc,CAAC,QAAS,YAEtD,CACEpB,KAAM,mBACNkB,MAAO,CAAC,yBAA0B,2BAClCjB,UAAWW,GACXN,KAAM,CAAEC,cAAc,EAAMa,aAAc,CAAC,QAAS,YAEtD,CACEpB,KAAM,4BACNkB,MAAO,CAAC,qBAAsB,iCAAkC,mCAChEjB,UAAWoB,GACXC,SAAU,CACR,CAAEtB,KAAM,GAAIuB,SAAU,CAAExsC,KAAM,kBAC9B,CAAEirC,KAAM,aAAajrC,KAAM,gBAAgBkrC,UAAWuB,IACtD,CAAExB,KAAM,cAAejrC,KAAM,iBAAkBkrC,UAAWwB,IAC1D,CAAEzB,KAAM,cAAejrC,KAAM,iBAAiBkrC,UAAWyB,KAE3DpB,KAAM,CAAEC,cAAc,EAAMa,aAAc,CAAC,QAAS,QAAS,YAE/D,CACIpB,KAAM,sBACNkB,MAAO,CAAC,4BAA6B,4BAA6B,8BAClEjB,UAAW0B,GACXL,SAAU,CACR,CAAEtB,KAAM,GAAIuB,SAAU,CAAExsC,KAAM,4BAC9B,CAAEirC,KAAM,kBAAkBjrC,KAAM,0BAA0BkrC,UAAW2B,IACrE,CAAE5B,KAAM,WAAkBjrC,KAAM,mBAAyBkrC,UAAW4B,IACpE,CAAE7B,KAAM,iBAAkBjrC,KAAM,yBAAyBkrC,UAAW6B,IACpE,CAAE9B,KAAM,YAAkBjrC,KAAM,oBAAyBkrC,UAAW8B,KAEtEzB,KAAM,CAAEC,cAAc,EAAMa,aAAc,CAAC,QAAS,SAAU,WAElE,CACEpB,KAAM,kBACNjrC,KAAM,iBACNkrC,UAAWA,IAAM,8BACjBK,KAAM,CAAEC,cAAc,EAAMa,aAAc,CAAC,QAAS,SAAU,WAEhE,CAAEpB,KAAM,kBAAmBC,UAAWa,KAGlCjsC,IAASmtC,EAAAA,EAAAA,IAAa,CAC1BxO,SAASyO,EAAAA,EAAAA,MACTlC,YAIFlrC,GAAOqtC,YAAW,CAAC76B,EAAIhI,EAAMysB,KAC3B,MAAMqW,IAAoB5tC,aAAa6J,QAAQ,aACzC6G,EAAiB1Q,aAAa6J,QAAQ,aAC5C,IAAIiG,EAAW,KAEf,GAAIY,EACF,IACEZ,EAAWb,KAAKC,MAAMwB,GAAgBX,MAAQ,IAChD,CAAE,MAAOY,GAIP,OAHAH,QAAQI,MAAM,6CAA8CD,GAC5D3Q,aAAa6Q,WAAW,aACxB7Q,aAAa6Q,WAAW,aACjB0mB,EAAK,CAAE/2B,KAAM,SACtB,CAQF,GAAIsS,EAAGi5B,KAAKC,aAAc,CACxB,IAAK4B,EACH,OAAOrW,EAAK,CAAE/2B,KAAM,UAItB,GAAIsS,EAAGi5B,KAAKh8B,MAAQD,IAAagD,EAAGi5B,KAAKh8B,MAAqB,UAAbD,EAE/C,OADAzP,MAAM,qDAAqDyS,EAAGi5B,KAAKh8B,4BAC5DwnB,EAAK,CAAE/2B,KAAM,cAItB,GAAIqK,MAAMwQ,QAAQvI,EAAGi5B,KAAKc,gBAAkB/5B,EAAGi5B,KAAKc,aAAa3gC,SAAS4D,GAIxE,OADAzP,MAAM,gEACCk3B,EAAK,CAAE/2B,KAAM,aAGxB,CAEA+2B,OAGF,S,+4ICpLOnoB,GAAG,O,GASC3O,MAAM,gB,GACHA,MAAM,mB,GAOXA,MAAM,kB,GACFA,MAAM,kB,sJAlBjBC,EAAAA,EAAAA,IA8CM,MA9CNC,EA8CM,EA7CJC,EAAAA,EAAAA,IAcS,4BAbPA,EAAAA,EAAAA,IAMM,OANDH,MAAM,eAAa,EACtBG,EAAAA,EAAAA,IAA2D,OAAtDw7B,IAAAyR,EAAwBC,IAAI,WAAWrtC,MAAM,UAClDG,EAAAA,EAAAA,IAGM,OAHDH,MAAM,uBAAqB,EAC9BG,EAAAA,EAAAA,IAAe,UAAX,WACJA,EAAAA,EAAAA,IAAyF,QAAnFH,MAAM,eAAc,gEAAwD,KAGtFG,EAAAA,EAAAA,IAKM,MALNK,EAKM,EAJJL,EAAAA,EAAAA,IAEO,OAFPc,EAEO,CADmBC,EAAAosC,aAAepsC,EAAAosC,YAAY7iC,QAAK,WAAtD5J,EAAAA,EAAAA,IAA8E0sC,EAAA,C,MAArB35B,KAAM1S,EAAAosC,a,oCAEpDpsC,EAAAssC,mBAA2E,iBAA1D,WAAhCvtC,EAAAA,EAAAA,IAAmG,U,MAAjED,MAAM,cAAeS,QAAKC,EAAA,KAAAA,EAAA,GAAAU,GAAEuT,EAAAtE,QAAQvQ,KAAK,cAAa,YAAE,SAI9FK,EAAAA,EAAAA,IAaM,MAbNyB,EAaM,EAZFzB,EAAAA,EAAAA,IAWM,MAXNwM,EAWM,cAVFxM,EAAAA,EAAAA,IAMI,KANDH,MAAM,mBAAiB,EACtBG,EAAAA,EAAAA,IAAsC,cAA9B,0BACRA,EAAAA,EAAAA,IAAI,qKAEJA,EAAAA,EAAAA,IAAI,yCAAqBA,EAAAA,EAAAA,IAA4B,SAAzB,0BAAqB,QAAI,eAAUA,EAAAA,EAAAA,IAA2B,SAAxB,yBAAoB,QAAI,mBAC1FA,EAAAA,EAAAA,IAAI,kDACR,KACAA,EAAAA,EAAAA,IAES,UAFAM,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAEN,EAAAotC,eAAAptC,EAAAotC,iBAAA9sC,IAAeX,MAAM,cAAc0U,MAAA,2HAA6H,uBAEhL,YAX4BxT,EAAAssC,qBAgB9BntC,EAAAqtC,aAAU,WADhB7sC,EAAAA,EAAAA,IAGE8sC,EAAA,CADD5sC,IAAK4T,EAAAuB,OAAOC,a,gBAGbhW,EAAAA,EAAAA,IAOO,QAPDH,MAAM,iBACP0U,OAAKwY,EAAAA,EAAAA,IAAEhsB,EAAAosC,YAAc,GAAH,yL,EAIrBn7B,EAAAA,EAAAA,IAAe8D,IACf9D,EAAAA,EAAAA,IAAey7B,IAAA,I,2ECnCnB3tC,EAAAA,EAAAA,IAMQ,aALJE,EAAAA,EAAAA,IAIK,0BAHHF,EAAAA,EAAAA,IAEK8B,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAFc3B,EAAAwtC,MAARhtB,K,WAAX5gB,EAAAA,EAAAA,IAEK,MAFqBc,IAAK8f,EAAK9gB,M,EAClCoS,EAAAA,EAAAA,IAA2DC,EAAA,CAA7CC,GAAIwO,EAAKitB,O,mBAAO,IAAe,mBAAZjtB,EAAK9gB,MAAI,M,iCAOpD,OACEA,KAAM,SAEN4F,IAAAA,GACE,MAAO,CAELuJ,gBAAiB,KACjB6+B,UAAW,CACTt+B,OAAQ,CACN,CAAE1P,KAAM,MAAO+tC,MAAO,cACtB,CAAE/tC,KAAM,qBAAsB+tC,MAAO,uBACrC,CAAE/tC,KAAM,oBAAqB+tC,MAAO,oCACpC,CAAE/tC,KAAM,4BAA6B+tC,MAAO,2BAC5C,CAAE/tC,KAAM,YAAa+tC,MAAO,+BAE9Bp+B,MAAO,CACL,CAAE3P,KAAM,MAAO+tC,MAAO,cACtB,CAAE/tC,KAAM,gBAAiB+tC,MAAO,sBAShC,CAAE/tC,KAAM,mBAAoB+tC,MAAO,sBACnC,CAAE/tC,KAAM,YAAa+tC,MAAO,0BAE9Bn+B,MAAO,CACL,CAAE5P,KAAM,MAAO+tC,MAAO,cACtB,CAAE/tC,KAAM,eAAgB+tC,MAAO,uBAC/B,CAAE/tC,KAAM,oBAAqB+tC,MAAO,mCACpC,CAAE/tC,KAAM,kBAAmB+tC,MAAO,0BAClC,CAAE/tC,KAAM,YAAa+tC,MAAO,8BAE9Bl+B,WAAY,CACV,CAAE7P,KAAM,MAAO+tC,MAAO,gBAI9B,EAEAznC,SAAU,CACRwnC,IAAAA,GACE,MAAMG,EAAWzuC,aAAa6J,QAAQ,aACtC,IAAK4kC,EAAU,MAAO,GAEtB,IACE,MAAM1+B,EAAOd,KAAKC,MAAMu/B,IAAW1+B,KACnC,OAAOhJ,KAAKynC,UAAUz+B,IAAS,EACjC,CAAE,MAAO2+B,GACP,MAAO,EACT,CACF,I,UClEJ,MAAM3hC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAAS,GAAQ,CAAC,YAAY,qBAEzF,Q,mBCFWtM,MAAM,U,GAGNA,MAAM,W,aAEJA,MAAM,Q,GACNA,MAAM,S,GACNA,MAAM,Q,GAENA,MAAM,W,0CAfjBC,EAAAA,EAAAA,IAwBM,aAtBJE,EAAAA,EAAAA,IAAiE,OAA3Dw7B,IAAKz6B,EAAAgtC,IAAKluC,MAAM,SAASqtC,IAAI,OAAQ5sC,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAEN,EAAA8tC,aAAA9tC,EAAA8tC,eAAAxtC,K,WAGlDR,EAAAA,EAAAA,IAeM,OAfDH,OAAKuB,EAAAA,EAAAA,IAAA,CAAC,UAAS,CAAA2pB,KAAiBhqB,EAAAktC,UAAU9+B,KAAK,SAAS,aAAW,OAAO,aAAW,a,EACxFnP,EAAAA,EAAAA,IAEM,MAFNK,EAEM,EADJL,EAAAA,EAAAA,IAA6E,QAAvEH,MAAM,QAASS,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAEN,EAAAguC,cAAAhuC,EAAAguC,gBAAA1tC,IAAc,aAAW,iBAAgB,QAEvER,EAAAA,EAAAA,IAUM,MAVNc,EAUM,EATJd,EAAAA,EAAAA,IAAyD,OAAnDw7B,IAAKz6B,EAAAgtC,IAAKluC,MAAM,eAAeqtC,IAAI,e,WACzCltC,EAAAA,EAAAA,IAAgD,MAAhDwM,GAAgDvM,EAAAA,EAAAA,IAA3Bc,EAAAotC,UAAU/+B,UAAQ,IACvCpP,EAAAA,EAAAA,IAA8C,MAA9CgC,GAA8C/B,EAAAA,EAAAA,IAAxBc,EAAAotC,UAAU7jC,OAAK,IACrCtK,EAAAA,EAAAA,IAA6C,MAA7CiC,EAAkB,KAAChC,EAAAA,EAAAA,IAAGC,EAAA+T,eAAgB,IAAC,IAEvCjU,EAAAA,EAAAA,IAGM,MAHNoC,EAGM,EAFJpC,EAAAA,EAAAA,IAA0E,UAAjEM,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAEN,EAAAkuC,aAAAluC,EAAAkuC,eAAA5tC,IAAaX,MAAM,gBAAe,oBAClDG,EAAAA,EAAAA,IAAyD,UAAhDM,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAEN,EAAAO,QAAAP,EAAAO,UAAAD,IAAQX,MAAM,UAAS,kBAAS,GAM3CkB,EAAAktC,SAAM,WAAjBnuC,EAAAA,EAAAA,IAA+D,O,MAA5CD,MAAM,UAAWS,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAEN,EAAAguC,cAAAhuC,EAAAguC,gBAAA1tC,Q,iBAK/C,OACEZ,KAAM,iBACN4F,IAAAA,GACE,MAAO,CACLyoC,QAAQ,EACRF,IAAK,sEACLI,UAAW,CAAE/+B,SAAU,GAAI9E,MAAO,GAAI6E,KAAM,IAEhD,EACAxG,OAAAA,GACE,MAAMyF,EAAWC,KAAKC,MAAMlP,aAAa6J,QAAQ,cAC7CmF,IAAUjI,KAAKgoC,UAAY//B,GAG/B9O,OAAO2a,iBAAiB,UAAW9T,KAAKkoC,WAGxCloC,KAAKmoC,QAAUnoC,KAAKooC,OAAO,mBAAmB,KACxCpoC,KAAK8nC,QAAQ9nC,KAAK+nC,iBAE1B,EACA/zB,aAAAA,GACE7a,OAAO+a,oBAAoB,UAAWlU,KAAKkoC,WACvCloC,KAAKmoC,SAASnoC,KAAKmoC,UACvBnoC,KAAKqoC,cACP,EACAtoC,SAAU,CACR+N,aAAAA,GACE,IAAK9N,KAAKgoC,UAAUh/B,KAAM,MAAO,eACjC,MAAMs/B,EAAU,CAAEj/B,MAAO,QAASF,OAAQ,SAAUC,MAAO,SAC3D,OAAOk/B,EAAQtoC,KAAKgoC,UAAUh/B,OAAUhJ,KAAKgoC,UAAUh/B,KAAK,IAAIwF,cAAgBxO,KAAKgoC,UAAUh/B,KAAK1L,MAAM,EAC5G,GAEFqF,QAAS,CACPulC,SAAAA,CAAUt+B,GACM,WAAVA,EAAEnP,KAAoBuF,KAAK8nC,QAAQ9nC,KAAK+nC,cAC9C,EACAQ,UAAAA,GAEE/Z,SAASriB,KAAKiC,MAAMovB,SAAW,QACjC,EACA6K,YAAAA,GACE7Z,SAASriB,KAAKiC,MAAMovB,SAAW,EACjC,EACAqK,WAAAA,GACE7nC,KAAK8nC,QAAS,EACd9nC,KAAKuoC,YACP,EACAR,YAAAA,GACE/nC,KAAK8nC,QAAS,EACd9nC,KAAKqoC,cACP,EACAJ,WAAAA,GACEjoC,KAAK+J,QAAQvQ,KAAK,YAClBwG,KAAK+nC,cACP,EACAztC,MAAAA,GACE0F,KAAK+nC,eACL9uC,aAAa6Q,WAAW,aACxB7Q,aAAa6Q,WAAW,aACxB3Q,OAAOC,cAAc,IAAIC,MAAM,gBAC/B2G,KAAK+J,QAAQvQ,KAAK,IACpB,ICpFJ,MAAM,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAAS,GAAQ,CAAC,YAAY,qBAEzF,Q,oDCREG,EAAAA,EAAAA,IAOS,UALPD,MAAM,aACLS,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAEN,EAAAyuC,OAAAzuC,EAAAyuC,SAAAnuC,IACR,aAAW,iBACZ,MAED,aANUO,EAAA6tC,U,CAUZ,OACEhvC,KAAM,cACN4F,IAAAA,GACE,MAAO,CAAEopC,SAAS,EAAOC,MAAO,KAClC,EACAlmC,OAAAA,GAEE,MAAMsiB,EAAWA,KACX9kB,KAAK0oC,QACT1oC,KAAK0oC,MAAQzuB,uBAAsB,KACjCja,KAAKyoC,QAAUtvC,OAAOwvC,QAAU,IAChC3oC,KAAK0oC,MAAQ,UAGjB1oC,KAAK4oC,UAAY9jB,EACjB3rB,OAAO2a,iBAAiB,SAAUgR,EAAU,CAAE+jB,SAAS,GACzD,EACA70B,aAAAA,GACE7a,OAAO+a,oBAAoB,SAAUlU,KAAK4oC,WACtC5oC,KAAK0oC,OAAOI,qBAAqB9oC,KAAK0oC,MAC5C,EACA/lC,QAAS,CACP6lC,KAAAA,GACE,MAAMO,EAAiB5vC,OAAO6vC,WAAW,oCAAoCC,QAC7E9vC,OAAO+vC,SAAS,CAAEzlC,IAAK,EAAG0lC,SAAUJ,EAAiB,OAAS,UAChE,IC9BJ,MAAM,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAAS,GAAQ,CAAC,YAAY,qBAEzF,QN8CA,GACItgC,WAAY,CACR2gC,eAAc,EACdC,OAAM,EACNC,YAAWA,GAEfjqC,IAAAA,GACI,MAAO,CAGH2nC,YAAa,KACbE,mBAAmB,EAE3B,EACA1kC,OAAAA,GAEIxC,KAAKupC,WACLpwC,OAAO2a,iBAAiB,cAAe9T,KAAKwpC,cAC5CrwC,OAAO2a,iBAAiB,aAAc9T,KAAKupC,SAC/C,EACAv1B,aAAAA,GACI7a,OAAO+a,oBAAoB,cAAelU,KAAKwpC,cAC/CrwC,OAAO+a,oBAAoB,aAAclU,KAAKupC,SAClD,EACAxpC,SAAU,CAINqnC,UAAAA,GAEI,MAA4B,WAArBpnC,KAAK4P,OAAO80B,IACvB,GAEJ/hC,QAAS,CACLwkC,aAAAA,GACInnC,KAAKknC,mBAAoB,CAC7B,EACAqC,QAAAA,GACI,MAAME,EAAUxwC,aAAa6J,QAAQ,aAErC9C,KAAKgnC,YAAcyC,EAAUvhC,KAAKC,MAAMshC,GAAW,IACvD,EACAD,YAAAA,GACIxpC,KAAKgnC,YAAc,IACvB,IO5FR,MAAM,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASh9B,KAEpE,Q,WCFA0/B,EAAAA,EAAAA,IAAUC,GACLC,IAAIrwC,EAAAA,GACJswC,MAAM,O,qBCRX,MAAMC,EAA4B,qBAAX3wC,QACrB,4BAA4B+nC,KAAK1zB,SAASu8B,UAGtCC,GAAgBF,EAEhBtqC,EAAewqC,EACjB,qDACA,4BAGEC,EAAS,wBACTC,EAAmC,qBAAjBjxC,aAA+BA,aAAa6J,QAAQmnC,GAAU,KAEtF,KACEzqC,aAAe0qC,GAAYA,EAAShlC,QAAW1F,EAC/C2qC,WAAAA,CAAY1sB,GAAOxkB,aAAasU,QAAQ08B,EAAQxsB,EAAM,EACtD2sB,aAAAA,GAAkBnxC,aAAa6Q,WAAWmgC,EAAS,E,GCjBjDI,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqB1uB,IAAjB2uB,EACH,OAAOA,EAAaC,QAGrB,IAAIC,EAASL,EAAyBE,GAAY,CAGjDE,QAAS,CAAC,GAOX,OAHAE,EAAoBJ,GAAUK,KAAKF,EAAOD,QAASC,EAAQA,EAAOD,QAASH,GAGpEI,EAAOD,OACf,CAGAH,EAAoB9d,EAAIme,E,WCzBxB,IAAIE,EAAW,GACfP,EAAoBQ,EAAI,SAASC,EAAQC,EAAUC,EAAIC,GACtD,IAAGF,EAAH,CAMA,IAAIG,EAAevP,IACnB,IAASr5B,EAAI,EAAGA,EAAIsoC,EAASzsC,OAAQmE,IAAK,CACrCyoC,EAAWH,EAAStoC,GAAG,GACvB0oC,EAAKJ,EAAStoC,GAAG,GACjB2oC,EAAWL,EAAStoC,GAAG,GAE3B,IAJA,IAGI6oC,GAAY,EACPC,EAAI,EAAGA,EAAIL,EAAS5sC,OAAQitC,MACpB,EAAXH,GAAsBC,GAAgBD,IAAav2B,OAAOC,KAAK01B,EAAoBQ,GAAGQ,OAAM,SAAS7wC,GAAO,OAAO6vC,EAAoBQ,EAAErwC,GAAKuwC,EAASK,GAAK,IAChKL,EAAStS,OAAO2S,IAAK,IAErBD,GAAY,EACTF,EAAWC,IAAcA,EAAeD,IAG7C,GAAGE,EAAW,CACbP,EAASnS,OAAOn2B,IAAK,GACrB,IAAInC,EAAI6qC,SACEpvB,IAANzb,IAAiB2qC,EAAS3qC,EAC/B,CACD,CACA,OAAO2qC,CArBP,CAJCG,EAAWA,GAAY,EACvB,IAAI,IAAI3oC,EAAIsoC,EAASzsC,OAAQmE,EAAI,GAAKsoC,EAAStoC,EAAI,GAAG,GAAK2oC,EAAU3oC,IAAKsoC,EAAStoC,GAAKsoC,EAAStoC,EAAI,GACrGsoC,EAAStoC,GAAK,CAACyoC,EAAUC,EAAIC,EAwB/B,C,eC5BAZ,EAAoBxlC,EAAI,SAAS4lC,GAChC,IAAI1e,EAAS0e,GAAUA,EAAOa,WAC7B,WAAa,OAAOb,EAAO,UAAY,EACvC,WAAa,OAAOA,CAAQ,EAE7B,OADAJ,EAAoB3lC,EAAEqnB,EAAQ,CAAEtrB,EAAGsrB,IAC5BA,CACR,C,eCNAse,EAAoB3lC,EAAI,SAAS8lC,EAASe,GACzC,IAAI,IAAI/wC,KAAO+wC,EACXlB,EAAoB57B,EAAE88B,EAAY/wC,KAAS6vC,EAAoB57B,EAAE+7B,EAAShwC,IAC5Eka,OAAO82B,eAAehB,EAAShwC,EAAK,CAAEixC,YAAY,EAAMzpC,IAAKupC,EAAW/wC,IAG3E,C,eCPA6vC,EAAoB5S,EAAI,CAAC,EAGzB4S,EAAoB1gC,EAAI,SAAS+hC,GAChC,OAAOroC,QAAQC,IAAIoR,OAAOC,KAAK01B,EAAoB5S,GAAGpyB,QAAO,SAASu2B,EAAUphC,GAE/E,OADA6vC,EAAoB5S,EAAEj9B,GAAKkxC,EAAS9P,GAC7BA,CACR,GAAG,IACJ,C,eCPAyO,EAAoBnqB,EAAI,SAASwrB,GAEhC,MAAO,MAAQA,EAAR,cACR,C,eCHArB,EAAoBsB,SAAW,SAASD,GAEvC,MAAO,OAASA,EAAT,eACR,C,eCJArB,EAAoB/rB,EAAI,WACvB,GAA0B,kBAAfstB,WAAyB,OAAOA,WAC3C,IACC,OAAO7rC,MAAQ,IAAI8rC,SAAS,cAAb,EAChB,CAAE,MAAOliC,GACR,GAAsB,kBAAXzQ,OAAqB,OAAOA,MACxC,CACA,CAPuB,E,eCAxBmxC,EAAoB57B,EAAI,SAASq9B,EAAKC,GAAQ,OAAOr3B,OAAOs3B,UAAUC,eAAetB,KAAKmB,EAAKC,EAAO,C,eCAtG,IAAIG,EAAa,CAAC,EACdC,EAAoB,eAExB9B,EAAoB5rC,EAAI,SAAS+e,EAAK4uB,EAAM5xC,EAAKkxC,GAChD,GAAGQ,EAAW1uB,GAAQ0uB,EAAW1uB,GAAKjkB,KAAK6yC,OAA3C,CACA,IAAIC,EAAQC,EACZ,QAAW1wB,IAARphB,EAEF,IADA,IAAI+xC,EAAUhe,SAASie,qBAAqB,UACpClqC,EAAI,EAAGA,EAAIiqC,EAAQpuC,OAAQmE,IAAK,CACvC,IAAIZ,EAAI6qC,EAAQjqC,GAChB,GAAGZ,EAAE+qC,aAAa,QAAUjvB,GAAO9b,EAAE+qC,aAAa,iBAAmBN,EAAoB3xC,EAAK,CAAE6xC,EAAS3qC,EAAG,KAAO,CACpH,CAEG2qC,IACHC,GAAa,EACbD,EAAS9d,SAASme,cAAc,UAEhCL,EAAOM,QAAU,QACjBN,EAAOO,QAAU,IACbvC,EAAoBwC,IACvBR,EAAOS,aAAa,QAASzC,EAAoBwC,IAElDR,EAAOS,aAAa,eAAgBX,EAAoB3xC,GAExD6xC,EAAOjX,IAAM5X,GAEd0uB,EAAW1uB,GAAO,CAAC4uB,GACnB,IAAIW,EAAmB,SAASxlC,EAAMylC,GAErCX,EAAOY,QAAUZ,EAAOa,OAAS,KACjC30B,aAAaq0B,GACb,IAAIO,EAAUjB,EAAW1uB,GAIzB,UAHO0uB,EAAW1uB,GAClB6uB,EAAOe,YAAcf,EAAOe,WAAWC,YAAYhB,GACnDc,GAAWA,EAAQ9qC,SAAQ,SAAS2oC,GAAM,OAAOA,EAAGgC,EAAQ,IACzDzlC,EAAM,OAAOA,EAAKylC,EACtB,EACIJ,EAAU5/B,WAAW+/B,EAAiBO,KAAK,UAAM1xB,EAAW,CAAE9gB,KAAM,UAAW2tB,OAAQ4jB,IAAW,MACtGA,EAAOY,QAAUF,EAAiBO,KAAK,KAAMjB,EAAOY,SACpDZ,EAAOa,OAASH,EAAiBO,KAAK,KAAMjB,EAAOa,QACnDZ,GAAc/d,SAASgf,KAAKC,YAAYnB,EApCkB,CAqC3D,C,eCxCAhC,EAAoBlqC,EAAI,SAASqqC,GACX,qBAAXiD,QAA0BA,OAAOC,aAC1Ch5B,OAAO82B,eAAehB,EAASiD,OAAOC,YAAa,CAAEnnC,MAAO,WAE7DmO,OAAO82B,eAAehB,EAAS,aAAc,CAAEjkC,OAAO,GACvD,C,eCNA8jC,EAAoB51B,EAAI,G,eCAxB,GAAwB,qBAAb8Z,SAAX,CACA,IAAIof,EAAmB,SAASjC,EAASkC,EAAUC,EAAQC,EAASzc,GACnE,IAAI0c,EAAUxf,SAASme,cAAc,QAErCqB,EAAQrlB,IAAM,aACdqlB,EAAQjzC,KAAO,WACXuvC,EAAoBwC,KACvBkB,EAAQC,MAAQ3D,EAAoBwC,IAErC,IAAIoB,EAAiB,SAASjB,GAG7B,GADAe,EAAQd,QAAUc,EAAQb,OAAS,KAChB,SAAfF,EAAMlyC,KACTgzC,QACM,CACN,IAAII,EAAYlB,GAASA,EAAMlyC,KAC3BqzC,EAAWnB,GAASA,EAAMvkB,QAAUukB,EAAMvkB,OAAOjb,MAAQogC,EACzD3gC,EAAM,IAAI+B,MAAM,qBAAuB08B,EAAU,cAAgBwC,EAAY,KAAOC,EAAW,KACnGlhC,EAAIzT,KAAO,iBACXyT,EAAImhC,KAAO,wBACXnhC,EAAInS,KAAOozC,EACXjhC,EAAIohC,QAAUF,EACVJ,EAAQX,YAAYW,EAAQX,WAAWC,YAAYU,GACvD1c,EAAOpkB,EACR,CACD,EAUA,OATA8gC,EAAQd,QAAUc,EAAQb,OAASe,EACnCF,EAAQvgC,KAAOogC,EAGXC,EACHA,EAAOT,WAAWkB,aAAaP,EAASF,EAAOU,aAE/ChgB,SAASgf,KAAKC,YAAYO,GAEpBA,CACR,EACIS,EAAiB,SAAShhC,EAAMogC,GAEnC,IADA,IAAIa,EAAmBlgB,SAASie,qBAAqB,QAC7ClqC,EAAI,EAAGA,EAAImsC,EAAiBtwC,OAAQmE,IAAK,CAChD,IAAIosC,EAAMD,EAAiBnsC,GACvBqsC,EAAWD,EAAIjC,aAAa,cAAgBiC,EAAIjC,aAAa,QACjE,GAAe,eAAZiC,EAAIhmB,MAAyBimB,IAAanhC,GAAQmhC,IAAaf,GAAW,OAAOc,CACrF,CACA,IAAIE,EAAoBrgB,SAASie,qBAAqB,SACtD,IAAQlqC,EAAI,EAAGA,EAAIssC,EAAkBzwC,OAAQmE,IAAK,CAC7CosC,EAAME,EAAkBtsC,GACxBqsC,EAAWD,EAAIjC,aAAa,aAChC,GAAGkC,IAAanhC,GAAQmhC,IAAaf,EAAU,OAAOc,CACvD,CACD,EACIG,EAAiB,SAASnD,GAC7B,OAAO,IAAIroC,SAAQ,SAASyqC,EAASzc,GACpC,IAAI7jB,EAAO68B,EAAoBsB,SAASD,GACpCkC,EAAWvD,EAAoB51B,EAAIjH,EACvC,GAAGghC,EAAehhC,EAAMogC,GAAW,OAAOE,IAC1CH,EAAiBjC,EAASkC,EAAU,KAAME,EAASzc,EACpD,GACD,EAEIyd,EAAqB,CACxB,GAAI,GAGLzE,EAAoB5S,EAAEsX,QAAU,SAASrD,EAAS9P,GACjD,IAAIoT,EAAY,CAAC,IAAM,GACpBF,EAAmBpD,GAAU9P,EAASriC,KAAKu1C,EAAmBpD,IACzB,IAAhCoD,EAAmBpD,IAAkBsD,EAAUtD,IACtD9P,EAASriC,KAAKu1C,EAAmBpD,GAAWmD,EAAenD,GAAS1oC,MAAK,WACxE8rC,EAAmBpD,GAAW,CAC/B,IAAG,SAAS/hC,GAEX,aADOmlC,EAAmBpD,GACpB/hC,CACP,IAEF,CA3E2C,C,eCK3C,IAAIslC,EAAkB,CACrB,GAAI,GAGL5E,EAAoB5S,EAAE2T,EAAI,SAASM,EAAS9P,GAE1C,IAAIsT,EAAqB7E,EAAoB57B,EAAEwgC,EAAiBvD,GAAWuD,EAAgBvD,QAAW9vB,EACtG,GAA0B,IAAvBszB,EAGF,GAAGA,EACFtT,EAASriC,KAAK21C,EAAmB,QAC3B,CAGL,IAAIC,EAAU,IAAI9rC,SAAQ,SAASyqC,EAASzc,GAAU6d,EAAqBD,EAAgBvD,GAAW,CAACoC,EAASzc,EAAS,IACzHuK,EAASriC,KAAK21C,EAAmB,GAAKC,GAGtC,IAAI3xB,EAAM6sB,EAAoB51B,EAAI41B,EAAoBnqB,EAAEwrB,GAEpD9hC,EAAQ,IAAIoF,MACZogC,EAAe,SAASpC,GAC3B,GAAG3C,EAAoB57B,EAAEwgC,EAAiBvD,KACzCwD,EAAqBD,EAAgBvD,GACX,IAAvBwD,IAA0BD,EAAgBvD,QAAW9vB,GACrDszB,GAAoB,CACtB,IAAIhB,EAAYlB,IAAyB,SAAfA,EAAMlyC,KAAkB,UAAYkyC,EAAMlyC,MAChEu0C,EAAUrC,GAASA,EAAMvkB,QAAUukB,EAAMvkB,OAAO2M,IACpDxrB,EAAMwF,QAAU,iBAAmBs8B,EAAU,cAAgBwC,EAAY,KAAOmB,EAAU,IAC1FzlC,EAAMpQ,KAAO,iBACboQ,EAAM9O,KAAOozC,EACbtkC,EAAMykC,QAAUgB,EAChBH,EAAmB,GAAGtlC,EACvB,CAEF,EACAygC,EAAoB5rC,EAAE+e,EAAK4xB,EAAc,SAAW1D,EAASA,EAE/D,CAEH,EAUArB,EAAoBQ,EAAEO,EAAI,SAASM,GAAW,OAAoC,IAA7BuD,EAAgBvD,EAAgB,EAGrF,IAAI4D,EAAuB,SAASC,EAA4BnwC,GAC/D,IAKIkrC,EAAUoB,EALVX,EAAW3rC,EAAK,GAChBowC,EAAcpwC,EAAK,GACnBqwC,EAAUrwC,EAAK,GAGIkD,EAAI,EAC3B,GAAGyoC,EAASllC,MAAK,SAASuC,GAAM,OAA+B,IAAxB6mC,EAAgB7mC,EAAW,IAAI,CACrE,IAAIkiC,KAAYkF,EACZnF,EAAoB57B,EAAE+gC,EAAalF,KACrCD,EAAoB9d,EAAE+d,GAAYkF,EAAYlF,IAGhD,GAAGmF,EAAS,IAAI3E,EAAS2E,EAAQpF,EAClC,CAEA,IADGkF,GAA4BA,EAA2BnwC,GACrDkD,EAAIyoC,EAAS5sC,OAAQmE,IACzBopC,EAAUX,EAASzoC,GAChB+nC,EAAoB57B,EAAEwgC,EAAiBvD,IAAYuD,EAAgBvD,IACrEuD,EAAgBvD,GAAS,KAE1BuD,EAAgBvD,GAAW,EAE5B,OAAOrB,EAAoBQ,EAAEC,EAC9B,EAEI4E,EAAqBC,KAAK,2BAA6BA,KAAK,4BAA8B,GAC9FD,EAAmBrtC,QAAQitC,EAAqBhC,KAAK,KAAM,IAC3DoC,EAAmBn2C,KAAO+1C,EAAqBhC,KAAK,KAAMoC,EAAmBn2C,KAAK+zC,KAAKoC,G,ICpFvF,IAAIE,EAAsBvF,EAAoBQ,OAAEjvB,EAAW,CAAC,MAAM,WAAa,OAAOyuB,EAAoB,KAAO,IACjHuF,EAAsBvF,EAAoBQ,EAAE+E,E","sources":["webpack://bmi-app-gen/./src/shared/handleUnauthorized.js","webpack://bmi-app-gen/./src/views/MyDashboard.vue","webpack://bmi-app-gen/./src/views/Admin/StatsOverall/AnalyticsAllDashboard.vue","webpack://bmi-app-gen/./src/views/Admin/StatsOverall/AnalyticsAllDashboard.vue?9868","webpack://bmi-app-gen/./src/views/Staff/Statistics/AnalyticsDashboard.vue","webpack://bmi-app-gen/./src/views/Staff/Statistics/AnalyticsDashboard.vue?c722","webpack://bmi-app-gen/./src/views/MyDashboard.vue?dab7","webpack://bmi-app-gen/./src/views/MyRegister.vue","webpack://bmi-app-gen/./src/views/MyRegister.vue?0125","webpack://bmi-app-gen/./src/views/MyLogin.vue","webpack://bmi-app-gen/./src/views/MyLogin.vue?deb5","webpack://bmi-app-gen/./src/views/MyProfile.vue","webpack://bmi-app-gen/./src/views/MyProfile.vue?9f1a","webpack://bmi-app-gen/./src/views/Staff/SessionFiles/ViewSession.vue","webpack://bmi-app-gen/./src/shared/sessionHeaderCache.js","webpack://bmi-app-gen/./src/views/Staff/SessionFiles/ViewSession.vue?75e5","webpack://bmi-app-gen/./src/views/Staff/NonSessionFiles/ViewNonSession.vue","webpack://bmi-app-gen/./src/views/Staff/NonSessionFiles/ViewNonSession.vue?9974","webpack://bmi-app-gen/./src/views/Admin/StatsOverall/AnalyticsAllPage.vue","webpack://bmi-app-gen/./src/views/Admin/StatsOverall/AnalyticsAllCharts.vue","webpack://bmi-app-gen/./src/views/Admin/StatsOverall/AnalyticsAllCharts.vue?496a","webpack://bmi-app-gen/./src/views/Admin/StatsOverall/AnalyticsAllDashboard2.vue","webpack://bmi-app-gen/./src/shared/dateFormat.js","webpack://bmi-app-gen/./src/views/Admin/StatsOverall/AnalyticsAllDashboard2.vue?1aae","webpack://bmi-app-gen/./src/views/Admin/StatsOverall/AnalyticsAllCharts2.vue","webpack://bmi-app-gen/./src/views/Admin/StatsOverall/AnalyticsAllCharts2.vue?d867","webpack://bmi-app-gen/./src/views/Admin/StatsOverall/AnalyticsAllPage.vue?a65e","webpack://bmi-app-gen/./src/views/Admin/ManageUsers.vue","webpack://bmi-app-gen/./src/views/Admin/ManageUsers.vue?f297","webpack://bmi-app-gen/./src/views/Admin/ResetPassword.vue","webpack://bmi-app-gen/./src/views/Admin/ResetPassword.vue?d682","webpack://bmi-app-gen/./src/views/Admin/RegisterUser.vue","webpack://bmi-app-gen/./src/views/Admin/RegisterUser.vue?cd7f","webpack://bmi-app-gen/./src/views/Admin/EditUser.vue","webpack://bmi-app-gen/./src/views/Admin/EditUser.vue?7e82","webpack://bmi-app-gen/./src/views/Admin/ManageSessions.vue","webpack://bmi-app-gen/./src/components/ExportExcel.vue","webpack://bmi-app-gen/./src/components/ExportExcel.vue?2f9d","webpack://bmi-app-gen/./src/views/Admin/ManageSessions.vue?886c","webpack://bmi-app-gen/./src/views/Admin/NonSessionCompleteness.vue","webpack://bmi-app-gen/./src/views/Admin/NonSessionCompleteness.vue?caeb","webpack://bmi-app-gen/./src/views/Admin/ViewUser.vue","webpack://bmi-app-gen/./src/views/Admin/ViewUser.vue?e006","webpack://bmi-app-gen/./src/views/Staff/NonSessionFiles/ManageInfo.vue","webpack://bmi-app-gen/./src/views/Staff/NonSessionFiles/ManageInfo.vue?0aca","webpack://bmi-app-gen/./src/views/Staff/NonSessionFiles/ManageOccupationHistory.vue","webpack://bmi-app-gen/./src/views/Staff/NonSessionFiles/ManageOccupationHistory.vue?260b","webpack://bmi-app-gen/./src/views/Staff/NonSessionFiles/ManageFamilyHistory.vue","webpack://bmi-app-gen/./src/views/Staff/NonSessionFiles/ManageFamilyHistory.vue?c6e7","webpack://bmi-app-gen/./src/views/Staff/Statistics/AnalyticsPage.vue","webpack://bmi-app-gen/./src/views/Staff/Statistics/AnalyticsChart.vue","webpack://bmi-app-gen/./src/views/Staff/Statistics/AnalyticsChart.vue?68f4","webpack://bmi-app-gen/./src/views/Staff/Statistics/AnalyticsPage.vue?a85d","webpack://bmi-app-gen/./src/views/Staff/SessionFiles/MySessions.vue","webpack://bmi-app-gen/./src/views/Staff/SessionFiles/MySessions.vue?2ddc","webpack://bmi-app-gen/./src/views/Staff/SessionFiles/ManageMedicalHistory.vue","webpack://bmi-app-gen/./src/shared/sessionAcl.js","webpack://bmi-app-gen/./src/views/Staff/SessionFiles/ManageMedicalHistory.vue?02f1","webpack://bmi-app-gen/./src/views/Staff/SessionFiles/ManageLifestyle.vue","webpack://bmi-app-gen/./src/views/Staff/SessionFiles/ManageLifestyle.vue?0e14","webpack://bmi-app-gen/./src/views/Staff/SessionFiles/ManagePhysicalExam.vue","webpack://bmi-app-gen/./src/views/Staff/SessionFiles/ManagePhysicalExam.vue?f1e1","webpack://bmi-app-gen/./src/views/Staff/SessionFiles/ManageInvestigations.vue","webpack://bmi-app-gen/./src/views/Staff/SessionFiles/ManageInvestigations.vue?b6b3","webpack://bmi-app-gen/./src/views/Doctor/ManageDoctorInfo.vue","webpack://bmi-app-gen/./src/views/Doctor/ManageDoctorInfo.vue?e347","webpack://bmi-app-gen/./src/router/index.js","webpack://bmi-app-gen/./src/App.vue","webpack://bmi-app-gen/./src/components/NavBar.vue","webpack://bmi-app-gen/./src/components/NavBar.vue?01fd","webpack://bmi-app-gen/./src/components/ProfileSidebar.vue","webpack://bmi-app-gen/./src/components/ProfileSidebar.vue?86fc","webpack://bmi-app-gen/./src/components/ScrollToTop.vue","webpack://bmi-app-gen/./src/components/ScrollToTop.vue?7d33","webpack://bmi-app-gen/./src/App.vue?7ccd","webpack://bmi-app-gen/./src/main.js","webpack://bmi-app-gen/./src/apiConfig.js","webpack://bmi-app-gen/webpack/bootstrap","webpack://bmi-app-gen/webpack/runtime/chunk loaded","webpack://bmi-app-gen/webpack/runtime/compat get default export","webpack://bmi-app-gen/webpack/runtime/define property getters","webpack://bmi-app-gen/webpack/runtime/ensure chunk","webpack://bmi-app-gen/webpack/runtime/get javascript chunk filename","webpack://bmi-app-gen/webpack/runtime/get mini-css chunk filename","webpack://bmi-app-gen/webpack/runtime/global","webpack://bmi-app-gen/webpack/runtime/hasOwnProperty shorthand","webpack://bmi-app-gen/webpack/runtime/load script","webpack://bmi-app-gen/webpack/runtime/make namespace object","webpack://bmi-app-gen/webpack/runtime/publicPath","webpack://bmi-app-gen/webpack/runtime/css loading","webpack://bmi-app-gen/webpack/runtime/jsonp chunk loading","webpack://bmi-app-gen/webpack/startup"],"sourcesContent":["// src/shared/handleUnauthorized.js\r\nimport router from '@/router';\r\n\r\nexport function handleUnauthorized(res) {\r\n  if (res.status === 401) {\r\n    // clear all session data\r\n    localStorage.clear();\r\n\r\n    // call window logout event\r\n    window.dispatchEvent(new Event('user-logout'));\r\n\r\n    // notify the user\r\n    alert('Your session has expired. Please log in again.');\r\n\r\n    // navigate to login page\r\n    router.push({ name: 'Login' });\r\n\r\n    return true; // indicates we handled it\r\n  }\r\n  return false; // not handled, continue normally\r\n}\r\n","<template>\r\n  <div class=\"dashboard\">\r\n    <header>\r\n      <h1>Welcome, {{ userDisplayName }} ({{ roleLabel }})</h1>\r\n\r\n      <div class=\"toolbar\">\r\n        <button @click=\"logout\">Logout</button>\r\n      </div>\r\n    </header>\r\n\r\n    <!-- <nav>\r\n      <ul>\r\n        <li v-for=\"item in menu\" :key=\"item.name\">\r\n          <router-link :to=\"item.route\">{{ item.name }}</router-link>\r\n        </li>\r\n      </ul>\r\n    </nav> -->\r\n\r\n    <main>\r\n      <!-- info icon -->\r\n      <!-- <div class=\"info-container\">\r\n        <span class=\"info-icon\" @click=\"showInfo = !this.showInfo\"></span>\r\n\r\n        <div v-if=\"showInfo\" class=\"info-overlay\" @click.self=\"showInfo = false\">\r\n          <div class=\"info-box\">\r\n            <h4 style=\"color:black\">Medical Examination Form</h4>\r\n            <p style=\"color: black\">\r\n              Please answer the questions as they apply to you. If in doubt, leave a blank and ask the nurse or doctor later.\r\n              The completed Medical Report should be sent to the ATB Occupational Health Advisor (OHA).\r\n            </p>\r\n            \r\n            <button style=\"color: white; background-color: blue;\" @click=\"showInfo = false\">Got it</button>\r\n          </div>\r\n        </div>\r\n      </div> -->\r\n      <!-- loads sub-pages based on route -->\r\n      <!-- <router-view />  -->\r\n      <analytics-all-dashboard v-if=\"roleLabel === 'Admin'\" />\r\n      <analytics-dashboard v-if=\"roleLabel === 'Staff'\" />\r\n      <p v-if=\"roleLabel === 'Restricted'\">You currently do not have permissions to access this dashboard. Please contact the admin/IT to resolve this issue.</p>\r\n    </main>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport AnalyticsAllDashboard from './Admin/StatsOverall/AnalyticsAllDashboard.vue';\r\nimport AnalyticsDashboard from './Staff/Statistics/AnalyticsDashboard.vue';\r\n\r\nexport default {\r\n  name: 'MyDashboard',\r\n  components: {\r\n    AnalyticsAllDashboard,\r\n    AnalyticsDashboard\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      // Auth/user\r\n      currentUserInfo: null,\r\n      showInfo: false\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    jwtToken() {\r\n      return localStorage.getItem('jwt_token');\r\n    },\r\n\r\n    userRole() {\r\n      return this.currentUserInfo ? (this.currentUserInfo.role || 'Restricted') : 'Restricted';\r\n    },\r\n\r\n    userDisplayName() {\r\n      if (this.currentUserInfo?.fullname) return this.currentUserInfo.fullname;\r\n      if (this.currentUserInfo?.username) return this.currentUserInfo.username;\r\n      return 'Unknown User';\r\n    },\r\n\r\n    roleLabel() {\r\n      return {\r\n        doctor: 'Doctor',\r\n        staff: 'Staff',\r\n        admin: 'Admin',\r\n        restricted: 'Restricted',\r\n      }[this.userRole] || 'Restricted';\r\n    },\r\n\r\n  },\r\n\r\n  created() {\r\n    this.loadUserInfo();\r\n  },\r\n\r\n  mounted() {\r\n    if (!this.jwtToken || !this.currentUserInfo) {\r\n      console.warn('Authentication token or user info missing in Dashboard. Redirecting to login.');\r\n      this.logout();\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    loadUserInfo() {\r\n      const userInfoString = localStorage.getItem('user_info');\r\n      if (!userInfoString) { this.currentUserInfo = null; return; }\r\n      try {\r\n        this.currentUserInfo = JSON.parse(userInfoString);\r\n      } catch (e) {\r\n        console.error('Error parsing user_info in Dashboard:', e);\r\n        this.currentUserInfo = null;\r\n      }\r\n    },\r\n\r\n    logout() {\r\n      localStorage.removeItem('jwt_token');\r\n      localStorage.removeItem('user_info');\r\n      window.dispatchEvent(new Event('user-logout'));\r\n      this.$router.push('/');\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.dashboard {\r\n  display: flex;\r\n  flex-direction: column;\r\n  min-height: 100vh;\r\n}\r\n\r\nheader {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 15px 30px;\r\n  /* background-color: #f8f9fa;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05); */\r\n  /* Light background for header */\r\n  border-bottom: 2px solid #e0e0e0;\r\n  color: #898e93;\r\n}\r\n\r\nheader h1 {\r\n  margin: 0;\r\n  font-size: 1.8rem;\r\n  color: #007bff;\r\n  font-weight: bold;\r\n}\r\n\r\nheader button {\r\n  padding: 8px 15px;\r\n  background-color: #dc3545; /* Red for logout button */\r\n  color: white;\r\n  border: none;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n  font-size: 0.9rem;\r\n  transition: background-color 0.2s ease;\r\n}\r\n\r\nheader button:hover {\r\n  background-color: #c82333;\r\n}\r\n\r\nnav {\r\n  background-color: #343a40; /* Dark background for navigation */\r\n  padding: 15px 30px;\r\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\nnav ul {\r\n  list-style: none;\r\n  padding: 0;\r\n  margin: 0;\r\n  display: flex;\r\n  gap: 25px; /* Spacing between menu items */\r\n}\r\n\r\nnav li a {\r\n  text-decoration: none;\r\n  color: #ffffff; /* White text for links */\r\n  font-weight: bold;\r\n  font-size: 1rem;\r\n  padding: 5px 0;\r\n  transition: color 0.2s ease, border-bottom 0.2s ease;\r\n}\r\n\r\nnav li a:hover {\r\n  color: #007bff; /* Blue on hover */\r\n  border-bottom: 2px solid #007bff;\r\n}\r\n\r\nmain {\r\n  flex-grow: 1; /* Allows main content to take up available space */\r\n  padding: 30px;\r\n  background-color: #ffffff; \r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"dashboard\">\r\n    <h2>Statistics  Overview (all)</h2>\r\n\r\n    <!-- Top: search + year chips -->\r\n    <div class=\"topbar\">\r\n      <input\r\n        v-model=\"q\"\r\n        type=\"search\"\r\n        placeholder=\"Search staff by name or email\"\r\n        class=\"search\"\r\n      />\r\n      <div class=\"legend\">\r\n        <button\r\n          class=\"chip\"\r\n          :class=\"{active: activeYear === null}\"\r\n          @click=\"setYear(null)\"\r\n          title=\"Show all years\"\r\n        >\r\n          <div class=\"chip-title\">All</div>\r\n          <div class=\"chip-sub\">Abnormal labs: {{ totalsAll.abnormalLabs }}</div>\r\n        </button>\r\n\r\n        <button\r\n          v-for=\"y in years\"\r\n          :key=\"y\"\r\n          class=\"chip\"\r\n          :class=\"{active: activeYear === y}\"\r\n          @click=\"setYear(y)\"\r\n        >\r\n          <div class=\"chip-title\">{{ y }}</div>\r\n          <div class=\"chip-sub\">Abnormal labs: {{ abnormalByYear[y] ?? 0 }}</div>\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- KPIs -->\r\n    <div class=\"kpis\" v-if=\"hasAnyData\">\r\n      <div class=\"card\">\r\n        <div class=\"card-label\">Staff Covered</div>\r\n        <div class=\"card-main\"><span class=\"big\">{{ kpi.staffCount }}</span></div>\r\n        <div class=\"card-sub\">No. of staff considered in tables</div>\r\n      </div>\r\n      <div class=\"card\">\r\n        <div class=\"card-label\">Session Count</div>\r\n        <div class=\"card-main\"><span class=\"big\">{{ kpi.sessionCount }}</span></div>\r\n        <div class=\"card-sub\">From summary (current year filter)</div>\r\n      </div>\r\n      <div class=\"card\">\r\n        <div class=\"card-label\">Abnormal Lab Results</div>\r\n        <div class=\"card-main\"><span class=\"big\">{{ kpi.abnormal }}</span></div>\r\n        <div class=\"card-sub\">LDL / Total Chol / HDL combined</div>\r\n      </div>\r\n      <div class=\"card\">\r\n        <div class=\"card-label\">% Abnormal (labs)</div>\r\n        <div class=\"card-main\"><span class=\"big\">{{ kpi.pctAbnormal }}</span></div>\r\n        <div class=\"card-sub\">Of lipid results (admin totals)</div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Tables -->\r\n    <div class=\"grid\">\r\n      <div class=\"panel\">\r\n        <div class=\"panel-title\">Latest Vitals (by staff, in selection)</div>\r\n        <table>\r\n          <thead>\r\n            <tr>\r\n              <th>Staff</th>\r\n              <th>Session</th>\r\n              <th>Weight (kg)</th>\r\n              <th>Height (m)</th>\r\n              <th>BMI</th>\r\n              <th>BP (Sys/Dia)</th>\r\n              <th>Pulse</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr v-for=\"row in latestVitalsByStaff.slice(0, 12)\" :key=\"row._key\">\r\n              <td>\r\n                <div class=\"pair\">\r\n                  <!-- <span class=\"k\">Name:</span> -->\r\n                  <span class=\"v\">{{ row.staff_name || '-' }}</span>\r\n                </div>\r\n                <!-- <div class=\"pair\">\r\n                  <span class=\"k\">Email:</span>\r\n                  <span class=\"v\">{{ row.staff_email }}</span>\r\n                </div> -->\r\n              </td>\r\n              <td>{{ yearOf(row.session_date) }}</td>\r\n              <td>{{ row.weight_kg ?? '-' }}</td>\r\n              <td>{{ row.height_m ?? '-' }}</td>\r\n              <td>{{ row.bmi ?? '-' }}</td>\r\n              <td>{{ row.bp_sys ?? '-' }}/{{ row.bp_dia ?? '-' }}</td>\r\n              <td>{{ row.pulse_bpm ?? '-' }}</td>\r\n            </tr>\r\n            <tr v-if=\"!latestVitalsByStaff.length\">\r\n              <td colspan=\"7\" class=\"empty\">No vitals for this selection.</td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      <div class=\"panel\">\r\n        <div class=\"panel-title\">Key Lipids (LDL / Total Chol / HDL)</div>\r\n        <table>\r\n          <thead>\r\n            <tr>\r\n              <th>Staff</th>\r\n              <th>Session</th>\r\n              <th>LDL</th>\r\n              <th>Total Chol</th>\r\n              <th>HDL</th>\r\n              <th>Abnormal?</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr v-for=\"l in labsFiltered.slice().reverse().slice(0, 20)\" :key=\"l.session_id + '_' + l.staff_email\">\r\n              <td>\r\n                <div class=\"pair\">\r\n                  <!-- <span class=\"k\">Name:</span> -->\r\n                  <span class=\"v\">{{ l.staff_name || '-' }}</span>\r\n                </div>\r\n                <!-- <div class=\"pair\">\r\n                  <span class=\"k\">Email:</span>\r\n                  <span class=\"v\">{{ l.staff_email }}</span>\r\n                </div> -->\r\n              </td>\r\n              <td>{{ yearOf(l.session_date) }}</td>\r\n              <td>{{ l.ldl_result ?? 'Not done' }}</td>\r\n              <td>{{ l.tchol_result ?? 'Not done' }}</td>\r\n              <td>{{ l.hdl_result ?? 'Not done' }}</td>\r\n              <td>\r\n                <span :class=\"badgeClass(isRowAbnormal(l))\">\r\n                  {{ isRowAbnormal(l) ? 'Yes' : 'No' }}\r\n                </span>\r\n              </td>\r\n            </tr>\r\n            <tr v-if=\"!labsFiltered.length\">\r\n              <td colspan=\"6\" class=\"empty\">No lab rows in this selection.</td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n    \r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport cfg from '@/apiConfig';\r\nimport { handleUnauthorized } from '@/shared/handleUnauthorized';\r\nexport default {\r\n  name: 'AnalyticsAllPage',\r\n  data() {\r\n    return {\r\n      baseUrl: cfg.API_BASE_URL,\r\n      // Aggregates from admin endpoints\r\n      summary: null,         // /admin/stats/summary\r\n      staffMap: new Map(),   // /admin/staff-list (email -> name)\r\n      labsSeriesYear: [],    // /admin/stats/labs (groupBy=year) -> for chips\r\n      // Tables (built from top staff latest rows)\r\n      vitals: [],            // per-staff latest rows\r\n      labs: [],              // per-staff recent rows (flattened)\r\n      // UI state\r\n      activeYear: null,      // null = All\r\n      q: '',                 // search (name/email)\r\n      abnormalByYear: {},    // {year: count}\r\n    };\r\n  },\r\n  computed: {\r\n    hasAnyData() {\r\n      return !!(this.summary || this.vitals.length || this.labs.length);\r\n    },\r\n    years() {\r\n      // Prefer years from labsSeriesYear buckets\r\n      const ys = new Set(\r\n        (this.labsSeriesYear || [])\r\n          .map(r => this.yearFromBucket(r.bucket))\r\n          .filter(Boolean)\r\n      );\r\n      return [...ys].sort((a,b) => b-a);\r\n    },\r\n    // Filtered by year, then by text query\r\n    vitalsFiltered() {\r\n      let arr = this.filterByYear(this.vitals);\r\n      return this.filterByQuery(arr);\r\n    },\r\n    labsFiltered() {\r\n      let arr = this.filterByYear(this.labs);\r\n      return this.filterByQuery(arr);\r\n    },\r\n    totalsAll() {\r\n      // From admin year series (all years)\r\n      const totals = this.sumAbnormalFromSeries(this.labsSeriesYear);\r\n      return { abnormalLabs: totals.abnormal };\r\n    },\r\n    kpi() {\r\n      // Session count from summary.sessions_by_period (respecting year filter)\r\n      const sessionCount = this.sessionCountFromSummary();\r\n\r\n      // Lab abnormal % from admin totals, respecting year filter\r\n      const { abnormal, normal, notdone } = this.sumAbnormalFromSeries(this.filteredYearSeries());\r\n      const totalLabResults = abnormal + normal + notdone;\r\n      const pctAbn = totalLabResults ? Math.round((abnormal / totalLabResults) * 100) + '%' : '';\r\n\r\n      // Staff covered = unique in current filtered per-staff rows\r\n      const staffSet = new Set(this.vitalsFiltered.map(s => s.staff_email));\r\n      return {\r\n        staffCount: staffSet.size,\r\n        sessionCount,\r\n        abnormal,\r\n        pctAbnormal: pctAbn\r\n      };\r\n    },\r\n    // Latest vitals per staff (within selection)\r\n    latestVitalsByStaff() {\r\n      const by = new Map(); // email -> latest row\r\n      for (const v of this.vitalsFiltered) {\r\n        const k = v.staff_email;\r\n        const cur = by.get(k);\r\n        if (!cur || new Date(v.session_date) > new Date(cur.session_date)) {\r\n          by.set(k, v);\r\n        }\r\n      }\r\n      const out = [...by.values()].sort((a,b) => new Date(b.session_date) - new Date(a.session_date));\r\n      out.forEach((r, i) => r._key = r.session_id + '_' + r.staff_email + '_' + i);\r\n      return out;\r\n    }\r\n  },\r\n  async mounted() {\r\n    await this.loadData();\r\n    this.buildAbnormalByYear();\r\n  },\r\n  methods: {\r\n    // ---- Fetching ----\r\n    async loadData() {\r\n      const headers = { Authorization: `Bearer ${localStorage.getItem('jwt_token')}` };\r\n\r\n      // 0) NEW: fetch staff list and build a Map\r\n      const staffList = await fetch(`${this.baseUrl}/admin/staff-list`, { headers })\r\n        .then(res => {\r\n          if (handleUnauthorized(res)) return;\r\n\r\n          return res.json();\r\n        })\r\n        .catch(() => []);\r\n      this.staffMap = new Map(staffList.map(x => [x.staff_email, x.staff_name]));\r\n\r\n      // 1) Admin aggregates\r\n      const [summary, labsYear] = await Promise.all([\r\n        fetch(`${this.baseUrl}/admin/stats/summary?groupBy=month`, { headers }).then(r => r.json()),\r\n        fetch(`${this.baseUrl}/admin/stats/labs?fields=ldl_result,tchol_result,hdl_result&groupBy=year`, { headers }).then(r => r.json())\r\n      ]);\r\n\r\n      this.summary = summary || null;\r\n      this.labsSeriesYear = (labsYear && labsYear.series) ? labsYear.series : [];\r\n\r\n      // 2) Build \"tables\" from top staff\r\n      // Use top N staff from summary to avoid huge fan-out\r\n      const top = (summary?.top_staff_by_sessions || []).slice(0, 20);\r\n      const staffEmails = top.map(t => t.staff_email);\r\n      const unique = Array.from(new Set(staffEmails));\r\n\r\n      // Fetch each staff's vitals & labs, take latest (for vitals) and most recent lab rows\r\n      const perStaffPromises = unique.map(async email => {\r\n        const staffXYZ = email.replace(/\\./g, 'XYZ');\r\n        const [vitalsRows, labsRows] = await Promise.all([\r\n          fetch(`${this.baseUrl}/stats/vitals/${staffXYZ}`, { headers }).then(r => r.json()).catch(()=>[]),\r\n          fetch(`${this.baseUrl}/stats/labs/${staffXYZ}?fields=ldl_result,tchol_result,hdl_result`, { headers }).then(r => r.json()).catch(()=>[])\r\n        ]);\r\n        // attach staff_email\r\n        const name = this.staffMap.get(email) || null;\r\n        vitalsRows.forEach(r => { r.staff_email = email; r.staff_name = name; });\r\n        labsRows.forEach(r   => { r.staff_email = email; r.staff_name = name; });\r\n        return { vitalsRows, labsRows };\r\n      });\r\n\r\n      const all = await Promise.all(perStaffPromises);\r\n      const vitalsAll = [], labsAll = [];\r\n      all.forEach(({vitalsRows, labsRows}) => {\r\n        (vitalsRows || []).forEach(v => vitalsAll.push(v));\r\n        (labsRows || []).forEach(l => labsAll.push(l));\r\n      });\r\n\r\n      // sort by date asc for consistency with your earlier code\r\n      const byDateAsc = (a,b) => new Date(a.session_date) - new Date(b.session_date);\r\n      this.vitals = vitalsAll.sort(byDateAsc);\r\n      this.labs   = labsAll.sort(byDateAsc);\r\n      this.attachNames();\r\n    },\r\n\r\n    // ---- Computations / helpers ----\r\n    yearOf(d) { return d ? new Date(d).getFullYear() : ''; },\r\n    setYear(y) { this.activeYear = y; },\r\n    attachNames() {\r\n      const get = (email) => this.staffMap.get(email) || null;\r\n      this.vitals.forEach(v => { if (!v.staff_name) v.staff_name = get(v.staff_email); });\r\n      this.labs.forEach(l   => { if (!l.staff_name) l.staff_name = get(l.staff_email); });\r\n    },\r\n\r\n    yearFromBucket(bucket) {\r\n      // buckets for groupBy=year are like \"2025\"\r\n      // if backend returns a date-like string, parse year\r\n      const y = String(bucket || '').slice(0,4);\r\n      const n = Number(y);\r\n      return Number.isFinite(n) ? n : null;\r\n    },\r\n\r\n    filterByYear(arr) {\r\n      if (this.activeYear == null) return arr;\r\n      return arr.filter(r => this.yearOf(r.session_date) === this.activeYear);\r\n    },\r\n    filterByQuery(arr) {\r\n      const q = (this.q || '').toLowerCase().trim();\r\n      if (!q) return arr;\r\n      return arr.filter(r => {\r\n        const name = (r.staff_name || '').toLowerCase();\r\n        const email = (r.staff_email || '').toLowerCase();\r\n        return name.includes(q) || email.includes(q);\r\n      });\r\n    },\r\n\r\n    filteredYearSeries() {\r\n      if (this.activeYear == null) return this.labsSeriesYear;\r\n      return (this.labsSeriesYear || []).filter(r => this.yearFromBucket(r.bucket) === this.activeYear);\r\n    },\r\n\r\n    sessionCountFromSummary() {\r\n      // Sum summary.sessions_by_period counts respecting year filter\r\n      const rows = this.summary?.sessions_by_period || [];\r\n      if (this.activeYear == null) {\r\n        return rows.reduce((acc, r) => acc + (Number(r.count) || 0), 0);\r\n      }\r\n      // filter rows whose bucket belongs to activeYear (buckets are month-start strings or similar)\r\n      return rows\r\n        .filter(r => this.yearFromBucket(String(r.bucket)) === this.activeYear)\r\n        .reduce((acc, r) => acc + (Number(r.count) || 0), 0);\r\n    },\r\n\r\n    sumAbnormalFromSeries(series) {\r\n      // series rows include columns like ldl_result_abnormal, _normal, _not_done, etc.\r\n      let abnormal = 0, normal = 0, notdone = 0;\r\n      for (const r of (series || [])) {\r\n        const add = (k) => Number(r[k] || 0);\r\n        abnormal += add('ldl_result_abnormal') + add('tchol_result_abnormal') + add('hdl_result_abnormal');\r\n        normal   += add('ldl_result_normal')   + add('tchol_result_normal')   + add('hdl_result_normal');\r\n        notdone  += add('ldl_result_not_done') + add('tchol_result_not_done') + add('hdl_result_not_done');\r\n      }\r\n      return { abnormal, normal, notdone };\r\n    },\r\n\r\n    buildAbnormalByYear() {\r\n      const by = {};\r\n      for (const r of (this.labsSeriesYear || [])) {\r\n        const y = this.yearFromBucket(r.bucket);\r\n        if (!y) continue;\r\n        const counts = {\r\n          abnormal: (Number(r.ldl_result_abnormal||0) + Number(r.tchol_result_abnormal||0) + Number(r.hdl_result_abnormal||0))\r\n        };\r\n        by[y] = (by[y] ?? 0) + counts.abnormal;\r\n      }\r\n      this.abnormalByYear = by;\r\n    },\r\n\r\n    // Reused helpers from your per-staff page\r\n    isRowAbnormal(l) {\r\n      return [l.ldl_result, l.tchol_result, l.hdl_result].some(v => v === 'Abnormal');\r\n    },\r\n    badgeClass(isBad) {\r\n      return isBad ? 'badge bad' : 'badge good';\r\n    },\r\n  }\r\n};\r\n</script>\r\n\r\n\r\n<style scoped>\r\n.dashboard { padding: 24px; }\r\n\r\n.topbar {\r\n  display:flex; align-items:flex-start; gap:12px; flex-wrap:wrap; margin-bottom:10px;\r\n}\r\n.search {\r\n  min-width: 280px; padding:8px 10px; border:1px solid #e2e8f0; border-radius:8px;\r\n}\r\n\r\n.legend { display:flex; gap:8px; flex-wrap:wrap; margin-bottom: 14px; }\r\n.chip {\r\n  border:1px solid #e2e8f0; background:#fff; border-radius:10px; padding:8px 10px;\r\n  display:flex; flex-direction:column; gap:2px; min-width:90px; cursor:pointer;\r\n}\r\n.chip:hover { background:#f7fafc; }\r\n.chip.active { background:#2b6cb0; color:#fff; border-color:#2b6cb0; }\r\n.chip-sub { font-size:12px; opacity:0.9; }\r\n\r\n/* KPIs */\r\n.kpis {\r\n  display:grid; grid-template-columns: repeat(4, minmax(180px, 1fr));\r\n  gap: 12px; margin-bottom: 16px;\r\n} @media (max-width: 1000px) { \r\n  .kpis { \r\n    grid-template-columns: 1fr 1fr; \r\n    /* max-width: fit-content;  */\r\n  } \r\n} \r\n.card {\r\n  background:#fff; border:1px solid #e2e8f0; border-radius:10px; padding:12px;\r\n  box-shadow: 0 2px 6px rgba(0,0,0,0.04);\r\n}\r\n.card-label { font-size:12px; color:#4a5568; margin-bottom:4px; }\r\n.card-main { display:flex; align-items:baseline; gap:10px; }\r\n.big { font-size:24px; font-weight:700; color:#2d3748; }\r\n.card-sub { font-size:12px; color:#64748b; margin-top:4px; }\r\n\r\n.grid {\r\n  display:grid; \r\n  grid-template-columns: 1fr 1fr; \r\n  gap: 12px; \r\n  /* margin: 12px auto;  */\r\n  justify-content: center;\r\n}\r\n@media (max-width: 1250px) { .grid { grid-template-columns: 1fr; } }\r\n\r\n.panel {\r\n  background:#fff; border:1px solid #e2e8f0; \r\n  border-radius:10px; padding:12px;\r\n  box-shadow: 0 2px 6px rgba(0,0,0,0.04);\r\n  width: 100%;\r\n}\r\n.panel-title { font-weight:600; color:#2d3748; margin-bottom:8px; }\r\n\r\ntable { width:100%; border-collapse: collapse; background:white; }\r\nth, td { padding:10px 12px; border-bottom:1px solid #e2e8f0; text-align:left; }\r\nth { background:#f7fafc; color:#2d3748; font-weight:600; }\r\n.empty { color:#64748b; text-align:center; }\r\n\r\n.pair { display:flex; gap:6px; }\r\n.pair .k { width:56px; color:#64748b; }\r\n\r\n.badge {\r\n  font-size:12px; padding:2px 8px; border-radius:12px;\r\n  display:inline-block; border:1px solid transparent;\r\n}\r\n.badge.good { background:#ecfdf5; color:#065f46; border-color:#d1fae5; }\r\n.badge.bad  { background:#fef2f2; color:#991b1b; border-color:#fee2e2; }\r\n</style>\r\n","import { render } from \"./AnalyticsAllDashboard.vue?vue&type=template&id=e315365c&scoped=true\"\nimport script from \"./AnalyticsAllDashboard.vue?vue&type=script&lang=js\"\nexport * from \"./AnalyticsAllDashboard.vue?vue&type=script&lang=js\"\n\nimport \"./AnalyticsAllDashboard.vue?vue&type=style&index=0&id=e315365c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-e315365c\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"dashboard\">\r\n    <h2>Statistics  Overview</h2>\r\n\r\n    <!-- Legend / Session Selector --> \r\n    <div class=\"legend\">\r\n      <button\r\n        class=\"chip\"\r\n        :class=\"{active: activeSessionId === null}\"\r\n        @click=\"setActiveSession(null)\"\r\n        title=\"Show all sessions\"\r\n      >\r\n        <div class=\"chip-title\">All</div>\r\n        <div class=\"chip-sub\">Abnormal labs: {{ totalsAll.abnormalLabs }}</div>\r\n      </button>\r\n\r\n      <button\r\n        v-for=\"s in sortedSessions\"\r\n        :key=\"s.session_id\"\r\n        class=\"chip\"\r\n        :class=\"{active: activeSessionId === s.session_id}\"\r\n        @click=\"setActiveSession(s.session_id)\"\r\n        :title=\"fmtDate(s.session_date)\"\r\n      >\r\n        <div class=\"chip-title\">{{ yearOf(s.session_date) }}</div>\r\n        <div class=\"chip-sub\">Abnormal labs: {{ abnormalBySession[s.session_id] ?? 0 }}</div>\r\n      </button>\r\n    </div>\r\n\r\n    <!-- KPI Cards -->\r\n    <h3>Latest Values:</h3>\r\n    <div class=\"kpis\" v-if=\"vitalsFiltered.length || labsFiltered.length\">\r\n      <div class=\"card\">\r\n        <div class=\"card-label\">BMI</div>\r\n        <div class=\"card-main\">\r\n          <span class=\"big\">{{ kpiBMI.value ?? '-' }}</span>\r\n          <span class=\"delta\" :class=\"deltaClass(kpiBMI.delta)\">{{ prettyDelta(kpiBMI.delta) }}</span>\r\n        </div>\r\n        <div class=\"card-sub\">{{ kpiBMI.caption }}</div>\r\n      </div>\r\n\r\n      <div class=\"card\">\r\n        <div class=\"card-label\">Blood Pressure</div>\r\n        <div class=\"card-main\">\r\n          <span class=\"big\">{{ kpiBP.value ?? '-' }}</span>\r\n          <span class=\"delta\" :class=\"deltaClass(kpiBP.delta)\">{{ prettyDelta(kpiBP.delta) }}</span>\r\n        </div>\r\n        <div class=\"card-sub\">Systolic / Diastolic (mmHg)</div>\r\n      </div>\r\n\r\n      <div class=\"card\">\r\n        <div class=\"card-label\">Pulse</div>\r\n        <div class=\"card-main\">\r\n          <span class=\"big\">{{ kpiPulse.value ?? '-' }}</span>\r\n          <span class=\"delta\" :class=\"deltaClass(kpiPulse.delta)\">{{ prettyDelta(kpiPulse.delta) }}</span>\r\n        </div>\r\n        <div class=\"card-sub\">Beats per minute</div>\r\n      </div>\r\n\r\n      <div class=\"card\">\r\n        <div class=\"card-label\">Abnormal Labs</div>\r\n        <div class=\"card-main\">\r\n          <span class=\"big\">{{ kpiLabs.abnormal }}</span>\r\n        </div>\r\n        <div class=\"card-sub\">\r\n          Normal: {{ kpiLabs.normal }}  Not done: {{ kpiLabs.notdone }}\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Quick Tables -->\r\n    <div class=\"grid\">\r\n      <div class=\"panel\">\r\n        <div class=\"panel-title\">Latest Vitals (in selection)</div>\r\n        <table>\r\n          <thead>\r\n            <tr>\r\n              <th>Session</th>\r\n              <th>Weight (kg)</th>\r\n              <th>Height (m)</th>\r\n              <th>BMI</th>\r\n              <th>BP (Sys/Dia)</th>\r\n              <th>Pulse</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr v-for=\"v in vitalsFiltered.slice().reverse().slice(0,5)\" :key=\"v.session_id\">\r\n              <td>{{ yearOf(v.session_date) }}</td>\r\n              <td>{{ v.weight_kg ?? '-' }}</td>\r\n              <td>{{ v.height_m ?? '-' }}</td>\r\n              <td>{{ v.bmi ?? '-' }}</td>\r\n              <td>{{ v.bp_sys ?? '-' }}/{{ v.bp_dia ?? '-' }}</td>\r\n              <td>{{ v.pulse_bpm ?? '-' }}</td>\r\n            </tr>\r\n            <tr v-if=\"!vitalsFiltered.length\">\r\n              <td colspan=\"6\" class=\"empty\">No vitals in this selection.</td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      <div class=\"panel\">\r\n        <div class=\"panel-title\">Key Lipids (LDL / Total Chol / HDL)</div>\r\n        <table>\r\n          <thead>\r\n            <tr>\r\n              <th>Session</th>\r\n              <th>LDL</th>\r\n              <th>Total Chol</th>\r\n              <th>HDL</th>\r\n              <th>Abnormal?</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr v-for=\"l in labsFiltered.slice().reverse().slice(0,5)\" :key=\"l.session_id\">\r\n              <td>{{ yearOf(l.session_date) }}</td>\r\n              <td>{{ l.ldl_result ?? 'Not done' }}</td>\r\n              <td>{{ l.tchol_result ?? 'Not done' }}</td>\r\n              <td>{{ l.hdl_result ?? 'Not done' }}</td>\r\n              <td>\r\n                <span :class=\"badgeClass(isRowAbnormal(l))\">\r\n                  {{ isRowAbnormal(l) ? 'Yes' : 'No' }}\r\n                </span>\r\n              </td>\r\n            </tr>\r\n            <tr v-if=\"!labsFiltered.length\">\r\n              <td colspan=\"5\" class=\"empty\">No lab rows in this selection.</td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport cfg from '@/apiConfig';\r\nimport { handleUnauthorized } from '@/shared/handleUnauthorized';\r\nexport default {\r\n  name: 'AnalyticsDashboard',\r\n  data() {\r\n    return {\r\n      baseUrl: cfg.API_BASE_URL,\r\n      sessions: [],\r\n      vitals: [],\r\n      labs: [],\r\n      activeSessionId: null, // null = All\r\n      abnormalBySession: {}, // {session_id: count}\r\n    };\r\n  },\r\n  computed: {\r\n    // Filters and Sorting\r\n    vitalsFiltered() {\r\n      if (!this.activeSessionId) return this.vitals;\r\n      return this.vitals.filter(v => v.session_id === this.activeSessionId);\r\n    },\r\n    labsFiltered() {\r\n      if (!this.activeSessionId) return this.labs;\r\n      return this.labs.filter(v => v.session_id === this.activeSessionId);\r\n    },\r\n    sortedSessions() {\r\n        // Return a copy of the sessions array sorted by date descending (newest first)\r\n        return [...this.sessions].sort((a, b) => {\r\n            // Convert dates to time values for comparison\r\n            const dateA = new Date(a.session_date).getTime();\r\n            const dateB = new Date(b.session_date).getTime();\r\n\r\n            // Sort descending (b - a)\r\n            return dateB - dateA;\r\n        });\r\n    },\r\n\r\n    // Totals for All chip\r\n    totalsAll() {\r\n      const counts = this.countLabStatuses(this.labs);\r\n      return { abnormalLabs: counts.Abnormal };\r\n    },\r\n\r\n    // KPIs (based on latest rows within current selection)\r\n    kpiBMI() {\r\n      const latest = this.lastByDate(this.vitalsFiltered);\r\n      const prev   = this.prevByDate(this.vitalsFiltered);\r\n      const value = latest?.bmi ?? null;\r\n      const delta = (latest?.bmi != null && prev?.bmi != null) ? +(latest.bmi - prev.bmi).toFixed(1) : null;\r\n      return { value, delta, caption: latest ? `Latest session: ${this.yearOf(latest.session_date)}` : '' };\r\n    },\r\n    kpiBP() {\r\n      const latest = this.lastByDate(this.vitalsFiltered);\r\n      const prev   = this.prevByDate(this.vitalsFiltered);\r\n      const value = (latest?.bp_sys != null && latest?.bp_dia != null) ? `${latest.bp_sys}/${latest.bp_dia}` : null;\r\n      let delta = null;\r\n      if (latest?.bp_sys != null && prev?.bp_sys != null && latest?.bp_dia != null && prev?.bp_dia != null) {\r\n        delta = `${latest.bp_sys - prev.bp_sys}/${latest.bp_dia - prev.bp_dia}`;\r\n        const ds = latest.bp_sys - prev.bp_sys;\r\n        const dd = latest.bp_dia - prev.bp_dia;\r\n        // encode a signed feel: if either goes down more than up, show negative-ish\r\n        if (ds <= 0 && dd <= 0) delta = `${Math.abs(ds)}/${Math.abs(dd)}`;\r\n      }\r\n      return { value, delta, caption: latest ? `Latest session: ${this.yearOf(latest.session_date)}` : '' };\r\n    },\r\n    kpiPulse() {\r\n      const latest = this.lastByDate(this.vitalsFiltered);\r\n      const prev   = this.prevByDate(this.vitalsFiltered);\r\n      const value = latest?.pulse_bpm ?? null;\r\n      const delta = (latest?.pulse_bpm != null && prev?.pulse_bpm != null) ? latest.pulse_bpm - prev.pulse_bpm : null;\r\n      return { value, delta, caption: latest ? `Latest session: ${this.yearOf(latest.session_date)}` : '' };\r\n    },\r\n    kpiLabs() {\r\n      const counts = this.countLabStatuses(this.labsFiltered);\r\n      return {\r\n        abnormal: counts.Abnormal,\r\n        normal: counts.Normal,\r\n        notdone: counts['Not done']\r\n      };\r\n    }\r\n  },\r\n  async mounted() {\r\n    await this.loadData();\r\n    this.buildAbnormalIndex();\r\n    this.activeSessionId = null; // view All Session by default\r\n  },\r\n  methods: {\r\n    fmtDate(d) { return new Date(d).toLocaleDateString(); },\r\n    yearOf(d) { return new Date(d).getFullYear(); },\r\n\r\n    async loadData() {\r\n      const userInfo = JSON.parse(localStorage.getItem('user_info'));\r\n      if (!userInfo) return;\r\n      const staffXYZ = userInfo.email.replace(/\\./g, 'XYZ');\r\n      const headers = { \r\n        Authorization: `Bearer ${localStorage.getItem('jwt_token')}` \r\n      };\r\n\r\n      const [sessions, vitals, labs] = await Promise.all([\r\n        // only one need to check for unauthorized\r\n        fetch(`${this.baseUrl}/checkup-sessions/stats/${staffXYZ}`, { headers }).then(res => {\r\n          if (handleUnauthorized(res)) return;\r\n\r\n          return res.json();\r\n        }),\r\n        fetch(`${this.baseUrl}/stats/vitals/${staffXYZ}`, { headers }).then(r => r.json()),\r\n        fetch(`${this.baseUrl}/stats/labs/${staffXYZ}?fields=ldl_result,tchol_result,hdl_result`, { headers }).then(r => r.json())\r\n      ]);\r\n\r\n      this.sessions = (sessions || []).sort((a,b) => new Date(a.session_date) - new Date(b.session_date));\r\n      this.vitals   = (vitals   || []).sort((a,b) => new Date(a.session_date) - new Date(b.session_date));\r\n      this.labs     = (labs     || []).sort((a,b) => new Date(a.session_date) - new Date(b.session_date));\r\n\r\n      // default to latest session\r\n      this.activeSessionId = this.sessions.at(-1)?.session_id ?? null;\r\n    },\r\n\r\n    setActiveSession(id) {\r\n      this.activeSessionId = id; // null = All\r\n    },\r\n\r\n    // Build per-session abnormal lab counts for the chips\r\n    buildAbnormalIndex() {\r\n      const by = {};\r\n      for (const row of this.labs) {\r\n        const sid = row.session_id;\r\n        const vals = [row.ldl_result, row.tchol_result, row.hdl_result].filter(Boolean);\r\n        const abnormal = vals.filter(v => v === 'Abnormal').length;\r\n        by[sid] = (by[sid] ?? 0) + abnormal;\r\n      }\r\n      this.abnormalBySession = by;\r\n    },\r\n\r\n    // Utilities\r\n    lastByDate(arr) {\r\n      if (!arr.length) return null;\r\n      return arr.slice().sort((a,b) => new Date(a.session_date) - new Date(b.session_date)).at(-1);\r\n    },\r\n    prevByDate(arr) {\r\n      if (arr.length < 2) return null;\r\n      const s = arr.slice().sort((a,b) => new Date(a.session_date) - new Date(b.session_date));\r\n      return s.at(-2);\r\n    },\r\n    countLabStatuses(rows) {\r\n      const counts = { Normal:0, Abnormal:0, 'Not done':0 };\r\n      for (const r of rows) {\r\n        [r.ldl_result, r.tchol_result, r.hdl_result].forEach(v => {\r\n          const k = v ?? 'Not done';\r\n          if (counts[k] == null) counts[k] = 0;\r\n          counts[k] += 1;\r\n        });\r\n      }\r\n      return counts;\r\n    },\r\n    isRowAbnormal(l) {\r\n      return [l.ldl_result, l.tchol_result, l.hdl_result].some(v => v === 'Abnormal');\r\n    },\r\n    deltaClass(delta) {\r\n      if (delta == null) return '';\r\n      if (typeof delta === 'string') {\r\n        // crude parse: string like \"x/y\" or \"x/y\"\r\n        return delta.startsWith('') ? 'neg' : 'pos';\r\n      }\r\n      return delta < 0 ? 'neg' : (delta > 0 ? 'pos' : '');\r\n    },\r\n    prettyDelta(delta) {\r\n      if (delta == null) return '';\r\n      if (typeof delta === 'string') return delta;\r\n      return (delta > 0 ? `+${delta}` : `${delta}`);\r\n    },\r\n    badgeClass(isBad) {\r\n      return isBad ? 'badge bad' : 'badge good';\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.dashboard { padding: 24px; }\r\n\r\n/* Legend / session chips */\r\n.legend {\r\n  display:flex; gap:8px; flex-wrap:wrap; margin-bottom: 14px;\r\n}\r\n.chip {\r\n  border:1px solid #e2e8f0; background:#fff; border-radius:10px; padding:8px 10px;\r\n  display:flex; flex-direction:column; gap:2px; min-width:90px; cursor:pointer;\r\n}\r\n.chip:hover { background:#f7fafc; }\r\n.chip.active { background:#2b6cb0; color:#fff; border-color:#2b6cb0; }\r\n.chip-sub { font-size:12px; opacity:0.9; }\r\n\r\n/* KPIs */\r\n.kpis {\r\n  display:grid; grid-template-columns: repeat(4, minmax(180px, 1fr));\r\n  gap: 12px; margin-bottom: 16px;\r\n} @media (max-width: 1000px) { \r\n  .kpis { \r\n    grid-template-columns: 1fr 1fr; \r\n    /* max-width: fit-content;  */\r\n  } \r\n} \r\n\r\n.card {\r\n  background:#fff; border:1px solid #e2e8f0; border-radius:10px; padding:12px;\r\n  box-shadow: 0 2px 6px rgba(0,0,0,0.04);\r\n}\r\n.card-label { font-size:12px; color:#4a5568; margin-bottom:4px; }\r\n.card-main { display:flex; align-items:baseline; gap:10px; }\r\n.big { font-size:24px; font-weight:700; color:#2d3748; }\r\n.delta { font-size:12px; }\r\n.delta.pos { color:#0f766e; }\r\n.delta.neg { color:#b91c1c; }\r\n.card-sub { font-size:12px; color:#64748b; margin-top:4px; }\r\n\r\n.grid {\r\n  display:grid;\r\n  grid-template-columns: 1fr 1fr;\r\n  gap: 16px;\r\n} @media (max-width: 1190px) { .grid { grid-template-columns: 1fr; } }\r\n\r\n/* Panels */\r\n.panel {\r\n  background:#fff; border:1px solid #e2e8f0; \r\n  border-radius:10px; padding:12px;\r\n  box-shadow: 0 2px 6px rgba(0,0,0,0.04);\r\n  width: 100%;\r\n}\r\n.panel-title { font-weight:600; color:#2d3748; margin-bottom:8px; }\r\n\r\ntable { width:100%; border-collapse: collapse; background:white; }\r\nth, td { padding:10px 12px; border-bottom:1px solid #e2e8f0; text-align:left; }\r\nth { background:#f7fafc; color:#2d3748; font-weight:600; }\r\n.empty { color:#64748b; text-align:center; }\r\n\r\n/* Badges */\r\n.badge {\r\n  font-size:12px; padding:2px 8px; border-radius:12px;\r\n  display:inline-block; border:1px solid transparent;\r\n}\r\n.badge.good { background:#ecfdf5; color:#065f46; border-color:#d1fae5; }\r\n.badge.bad  { background:#fef2f2; color:#991b1b; border-color:#fee2e2; }\r\n\r\n\r\n</style>\r\n","import { render } from \"./AnalyticsDashboard.vue?vue&type=template&id=b353916c&scoped=true\"\nimport script from \"./AnalyticsDashboard.vue?vue&type=script&lang=js\"\nexport * from \"./AnalyticsDashboard.vue?vue&type=script&lang=js\"\n\nimport \"./AnalyticsDashboard.vue?vue&type=style&index=0&id=b353916c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-b353916c\"]])\n\nexport default __exports__","import { render } from \"./MyDashboard.vue?vue&type=template&id=6bf2fe83&scoped=true\"\nimport script from \"./MyDashboard.vue?vue&type=script&lang=js\"\nexport * from \"./MyDashboard.vue?vue&type=script&lang=js\"\n\nimport \"./MyDashboard.vue?vue&type=style&index=0&id=6bf2fe83&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6bf2fe83\"]])\n\nexport default __exports__","<template>\n  <div>\n    <div class=\"register-container\">\n      <h2>Register</h2>\n      <form @submit.prevent=\"register\">\n        <!-- Common Fields -->\n        <div class=\"form-row\">\n          <label for=\"username\">Username:</label>\n          <input v-model=\"form.username\" type=\"text\" id=\"username\" required />\n        </div>\n\n        <div class=\"form-row\">\n          <label for=\"password\">Password:</label>\n          <input v-model=\"form.password\" type=\"password\" id=\"password\" required />\n        </div>\n\n        <div class=\"form-row\">\n          <label for=\"confirmPassword\">Confirm Password:</label>\n          <input v-model=\"form.confirmPassword\" type=\"password\" id=\"confirmPassword\" required />\n        </div>\n\n        <div class=\"form-row\">\n          <label for=\"role\">Role:</label>\n          <select v-model=\"form.role\" id=\"role\" required>\n            <option :value=\"null\" disabled>-- Please select a role --</option> <!-- Added default null option -->\n            <option value=\"student\">Student</option>\n            <option value=\"lecturer\">Lecturer</option>\n            <option value=\"advisor\">Advisor</option>\n            <option value=\"admin\">Admin</option>\n          </select>\n        </div>\n\n        <!-- Conditional Fields: Student -->\n        <div v-if=\"form.role === 'student'\">\n            <h3>Student Details</h3>\n            <div class=\"form-row\">\n                <label for=\"fullName\">Full Name:</label>\n                <input v-model=\"form.fullName\" type=\"text\" id=\"fullName\" required />\n            </div>\n\n            <div class=\"form-row\">\n                <label for=\"matricNo\">Matric No:</label>\n                <input v-model=\"form.matricNo\" type=\"text\" id=\"matricNo\" required />\n            </div>\n\n            <div class=\"form-row\">\n                <label for=\"email\">Email:</label>\n                <input v-model=\"form.email\" type=\"email\" id=\"email\" required />\n            </div>\n\n            <div class=\"form-row\">\n                <label for=\"yearOfStudy\">Year of Study:</label>\n                <input v-model=\"form.yearOfStudy\" type=\"number\" id=\"yearOfStudy\" required min=\"1\" max=\"6\"/> <!-- Changed to type number, added min/max -->\n            </div>\n\n            <div class=\"form-row\">\n                <label for=\"programme\">Programme:</label>\n                <input v-model=\"form.programme\" type=\"text\" id=\"programme\" required />\n            </div>\n        </div>\n\n        <!-- Conditional Fields: Lecturer -->\n        <div v-if=\"form.role === 'lecturer'\">\n            <h3>Lecturer Details</h3>\n            <div class=\"form-row\">\n                <label for=\"lecturerName\">Full Name:</label>\n                <input v-model=\"form.lecturerName\" type=\"text\" id=\"lecturerName\" required />\n            </div>\n\n            <div class=\"form-row\">\n                <label for=\"lecturerStaffId\">Staff ID:</label>\n                <input v-model=\"form.lecturerStaffId\" type=\"text\" id=\"lecturerStaffId\" required />\n            </div>\n\n            <div class=\"form-row\">\n                <label for=\"lecturerEmail\">Email:</label>\n                <input v-model=\"form.lecturerEmail\" type=\"email\" id=\"lecturerEmail\" required />\n            </div>\n\n            <div class=\"form-row\">\n                <label for=\"lecturerDepartment\">Department:</label>\n                <input v-model=\"form.lecturerDepartment\" type=\"text\" id=\"lecturerDepartment\" required />\n            </div>\n        </div>\n\n        <!-- Conditional Fields: Advisor -->\n        <div v-if=\"form.role === 'advisor'\">\n            <h3>Academic Advisor Details</h3>\n            <div class=\"form-row\">\n                <label for=\"advisorName\">Full Name:</label>\n                <input v-model=\"form.advisorName\" type=\"text\" id=\"advisorName\" required />\n            </div>\n\n            <div class=\"form-row\">\n                <label for=\"advisorStaffId\">Staff ID:</label>\n                <input v-model=\"form.advisorStaffId\" type=\"text\" id=\"advisorStaffId\" required />\n            </div>\n\n            <div class=\"form-row\">\n                <label for=\"advisorEmail\">Email:</label>\n                <input v-model=\"form.advisorEmail\" type=\"email\" id=\"advisorEmail\" required />\n            </div>\n\n            <div class=\"form-row\">\n                <label for=\"advisorDepartment\">Department:</label>\n                <input v-model=\"form.advisorDepartment\" type=\"text\" id=\"advisorDepartment\" required />\n            </div>\n\n            <div class=\"form-row\">\n                <label for=\"adviseeQuota\">Advisee Quota:</label>\n                <input v-model=\"form.adviseeQuota\" type=\"number\" id=\"adviseeQuota\" required />\n            </div>\n        </div>\n\n        <!-- Conditional Fields: Admin -->\n        <div v-if=\"form.role === 'admin'\">\n          <h3>Admin Details</h3>\n          <div class=\"form-row\">\n            <label for=\"adminName\">Full Name:</label>\n            <input v-model=\"form.adminName\" type=\"text\" id=\"adminName\" required />\n          </div>\n\n          <div class=\"form-row\">\n            <label for=\"adminEmail\">Email:</label>\n            <input v-model=\"form.adminEmail\" type=\"email\" id=\"adminEmail\" required />\n          </div>\n        </div>\n\n\n        <button type=\"submit\">Register</button>\n\n        <p class=\"success\" v-if=\"successMessage\">{{ successMessage }}</p>\n        <p class=\"error\" v-if=\"errorMessage\">{{ errorMessage }}</p>\n\n        <p class=\"login-link\">\n          Already have an account?\n          <router-link to=\"/\">Login here</router-link> <!-- Corrected to '/' for login route -->\n        </p>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'MyRegister',\n  data() {\n    return {\n      successMessage: '',\n      errorMessage: '',\n      form: {\n        username: '',\n        password: '',\n        confirmPassword: '',\n        role: null, // <--- Set default role to null (unselected)\n        // Student fields (initialize to empty strings)\n        fullName: '',\n        matricNo: '',\n        email: '',\n        yearOfStudy: '',\n        programme: '',\n        // Lecturer fields\n        lecturerName: '',\n        lecturerStaffId: '',\n        lecturerEmail: '',\n        lecturerDepartment: '',\n        // Advisor fields\n        advisorName: '',\n        advisorStaffId: '',\n        advisorEmail: '',\n        advisorDepartment: '',\n        adviseeQuota:'',\n        // Admin fields\n        adminName: '',\n        adminEmail: ''\n      }\n    };\n  },\n  watch: {\n    // Watch for changes in role and clear conditional fields if role changes\n    'form.role'(newRole, oldRole) {\n      if (newRole !== 'student' && oldRole === 'student') {\n        this.form.fullName = '';\n        this.form.matricNo = '';\n        this.form.email = '';\n        this.form.yearOfStudy = '';\n        this.form.programme = '';\n      }\n      if (newRole !== 'lecturer' && oldRole === 'lecturer') {\n        this.form.lecturerName = '';\n        this.form.lecturerStaffId = '';\n        this.form.lecturerEmail = '';\n        this.form.lecturerDepartment = '';\n      }\n      if (newRole !== 'advisor' && oldRole === 'advisor') {\n        this.form.advisorName = '';\n        this.form.advisorStaffId = '';\n        this.form.advisorEmail = '';\n        this.form.advisorDepartment = '';\n        this.form.adviseeQuota = '';\n      }\n      \n    }\n  },\n  methods: {\n    async register() {\n      this.errorMessage = '';\n      this.successMessage = '';\n\n      // Basic client-side validation\n      if (this.form.password !== this.form.confirmPassword) {\n        this.errorMessage = \"Passwords do not match.\";\n        return;\n      }\n      if (this.form.role === null) { // check if a role has been selected\n        this.errorMessage = \"Please select a role.\";\n        return;\n      }\n\n      const body = {\n        username: this.form.username,\n        password: this.form.password,\n        role: this.form.role\n      };\n\n      // Add role-specific fields and perform client-side validation\n      if (this.form.role === 'student') {\n        if (!this.form.fullName || !this.form.matricNo || !this.form.email || !this.form.yearOfStudy || !this.form.programme) {\n            this.errorMessage = \"All student details (Full Name, Matric No, Email, Year of Study, Programme) are required.\";\n            return;\n        }\n        body.full_name = this.form.fullName;\n        body.matric_no = this.form.matricNo;\n        body.email = this.form.email;\n        body.year_of_study = parseInt(this.form.yearOfStudy);\n        body.programme = this.form.programme;\n      } if (this.form.role === 'lecturer') {\n          if (!this.form.lecturerName || !this.form.lecturerStaffId || !this.form.lecturerEmail || !this.form.lecturerDepartment) {\n            this.errorMessage = \"All lecturer details are required.\";\n            return;\n          }\n\n          body.full_name = this.form.lecturerName;\n          body.email = this.form.lecturerEmail;\n          body.lecturer_id = this.form.lecturerStaffId;\n          body.department = this.form.lecturerDepartment;\n          body.status = 'active';\n        }\n      else if (this.form.role === 'advisor') {\n        if (!this.form.advisorName || !this.form.advisorStaffId || !this.form.advisorEmail || !this.form.advisorDepartment || !this.form.adviseeQuota) {\n            this.errorMessage = \"All advisor details (Full Name, Staff ID, Email, Department, Advisee Quota) are required.\";\n            return;\n        }\n        body.full_name = this.form.advisorName;\n        body.email = this.form.advisorEmail;\n        body.advisor_id = this.form.advisorStaffId; // Assuming staff_id maps to advisor_id in DB\n        body.department = this.form.advisorDepartment;\n        body.advisee_quota = parseInt(this.form.adviseeQuota); // Ensure it's an integer\n      }\n\n      if (this.form.role === 'admin') {\n        if (!this.form.adminName || !this.form.adminEmail) {\n          this.errorMessage = \"All admin details (Full Name and Email) are required.\";\n          return;\n        }\n        body.full_name = this.form.adminName;\n        body.email = this.form.adminEmail;\n      }\n\n      console.log(\"Submitting registration:\", body);\n      \n      try {\n        const res = await fetch('http://localhost:8000/api/register', {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify(body)\n        });\n\n        const data = await res.json();\n\n        if (res.ok) {\n          this.successMessage = 'Registration successful! Redirecting to login...';\n          this.errorMessage = '';\n          // Reset form fields after successful registration\n          this.resetForm(); // <--- Call resetForm after successful registration\n\n          // Redirect to login page after a short delay\n          setTimeout(() => {\n            this.$router.push('/'); // <--- Redirect to the login route (root path)\n          }, 2000); // Redirect after 2 seconds\n\n        } else {\n          this.errorMessage = data.error || 'Registration failed.';\n          console.error('Registration Error:', data);\n        }\n      } catch (err) {\n        console.error('Network error during registration:', err);\n        this.errorMessage = 'Network error. Could not connect to the server. Please try again.';\n      }\n    },\n    resetForm() {\n        this.form = {\n            username: '',\n            password: '',\n            confirmPassword: '',\n            role: null, // Reset to null\n            fullName: '',\n            \n            //student            \n            matricNo: '',\n            email: '',\n            yearOfStudy: '',\n            programme: '',\n\n            //lecturer\n            lecturerName: '',\n            lecturerStaffId: '',\n            lecturerEmail: '',\n            lecturerDepartment: '',\n\n            //advisor\n            advisorName: '',\n            advisorStaffId: '',\n            advisorEmail: '',\n            advisorDepartment: '',\n            adviseeQuota:'',\n\n            //admin\n            adminName: '',\n            adminEmail: ''\n        };\n    }\n  }\n};\n</script>\n\n<style scoped>\n.register-container {\n  max-width: 500px; /* Adjusted max-width to better fit all fields */\n  margin: 20px auto; /* Added margin-top/bottom */\n  padding: 30px; /* Increased padding */\n  border: 1px solid #ddd;\n  border-radius: 8px;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); /* Slightly more prominent shadow */\n  background-color: #fff;\n}\n\nh2 {\n  text-align: center;\n  color: #333;\n  margin-bottom: 25px; /* Increased margin */\n  font-size: 24px; /* Larger heading */\n}\n\nh3 { /* Style for conditional section titles */\n    text-align: center;\n    color: #444;\n    margin-top: 25px;\n    margin-bottom: 15px;\n    font-size: 20px;\n    border-bottom: 1px solid #eee;\n    padding-bottom: 5px;\n}\n\n.form-row {\n  display: flex;\n  align-items: center;\n  margin-bottom: 15px;\n}\n\n.form-row label {\n  width: 150px;\n  margin-right: 15px; /* Increased margin */\n  font-weight: bold;\n  text-align: right;\n  color: #555;\n}\n\n.form-row input,\n.form-row select {\n  flex: 1;\n  padding: 10px 12px; /* Increased padding */\n  border: 1px solid #ccc;\n  border-radius: 5px; /* Slightly more rounded corners */\n  box-sizing: border-box;\n  font-size: 16px; /* Larger font size for inputs */\n}\n\nbutton {\n  width: 100%;\n  padding: 12px; /* Increased padding */\n  background-color: #28a745; /* Green for register button */\n  color: white;\n  border: none;\n  border-radius: 5px;\n  font-size: 18px; /* Larger font size */\n  cursor: pointer;\n  transition: background-color 0.3s ease, transform 0.2s ease;\n  margin-top: 20px; /* Added margin to separate from fields */\n}\n\nbutton:hover {\n  background-color: #218838;\n  transform: translateY(-2px); /* Slight lift effect */\n}\n\n.error {\n  color: #dc3545; /* Bootstrap red */\n  margin-top: 15px;\n  text-align: center;\n  font-weight: bold;\n}\n\n.success {\n  color: #28a745; /* Bootstrap green */\n  margin-top: 15px;\n  text-align: center;\n  font-weight: bold;\n}\n\n.login-link {\n  margin-top: 25px; /* Increased margin */\n  text-align: center;\n  font-size: 15px;\n  color: #666;\n}\n\n.login-link a {\n  color: #007bff;\n  text-decoration: none;\n  font-weight: bold;\n}\n\n.login-link a:hover {\n  text-decoration: underline;\n}\n</style>","import { render } from \"./MyRegister.vue?vue&type=template&id=02d500ac&scoped=true\"\nimport script from \"./MyRegister.vue?vue&type=script&lang=js\"\nexport * from \"./MyRegister.vue?vue&type=script&lang=js\"\n\nimport \"./MyRegister.vue?vue&type=style&index=0&id=02d500ac&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-02d500ac\"]])\n\nexport default __exports__","<template>\r\n  <div>\r\n    <div class=\"login-container\">\r\n      <h2>Login</h2>\r\n\r\n      <form @submit.prevent=\"login\">\r\n        <div class=\"form-row\">\r\n          <label for=\"email\">Email:</label>\r\n          <input v-model=\"email\" type=\"text\" id=\"email\" required />\r\n        </div>\r\n\r\n        <div class=\"form-row\">\r\n          <label for=\"password\">Password:</label>\r\n          <input v-model=\"password\" type=\"password\" id=\"password\" required />\r\n        </div>\r\n\r\n        <button type=\"submit\">Login</button>\r\n\r\n        <!-- <p class=\"register-link\">\r\n          Don't have an account?\r\n          <router-link to=\"/register\">Register here</router-link>\r\n        </p> -->\r\n      </form>\r\n    </div>\r\n\r\n    <!-- Feedback messages will appear below the container -->\r\n    <p v-if=\"successMessage\" class=\"success\">{{ successMessage }}</p>\r\n    <p v-if=\"errorMessage\" class=\"error\">{{ errorMessage }}</p>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport cfg from '@/apiConfig';\r\nexport default {\r\n  name: 'MyLogin',\r\n  data() {\r\n    return {\r\n      email: '',\r\n      password: '',\r\n      errorMessage: '',\r\n      successMessage: ''\r\n    };\r\n  },\r\n  methods: {\r\n    async login() {\r\n      // Clear previous messages at the start of the login attempt\r\n      this.errorMessage = '';\r\n      this.successMessage = '';\r\n      console.group('Login Process'); // Start a console group for better readability\r\n      console.log('Login attempt started for user:', this.email);\r\n\r\n      const baseUrl = cfg.API_BASE_URL;\r\n\r\n      try {\r\n        const res = await fetch(`${baseUrl}/login`, { \r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify({\r\n            email: this.email,\r\n            password: this.password\r\n          })\r\n        });\r\n\r\n        const data = await res.json();\r\n        // console.log('Login API raw response data:', data);\r\n\r\n        if (res.ok && data.token) {\r\n          console.log('Login API response successful. Token received.');\r\n          this.successMessage = `Login successful! Welcome, ${data.user.email}. Redirecting...`;\r\n\r\n          // 1: Store JWT token using the consistent key 'jwt_token' \r\n          localStorage.setItem('jwt_token', data.token);\r\n          // console.log('localStorage: jwt_token set to:', localStorage.getItem('jwt_token'));\r\n\r\n          // 2: Store user info object using the consistent key 'user_info' \r\n          // The /api/login response already provides the full user object (id, email, role)\r\n          // Store this as a JSON string under 'user_info'. This replaces the separate /api/me/role call.\r\n          localStorage.setItem('user_info', JSON.stringify(data.user));\r\n          // console.log('localStorage: user_info set to:', localStorage.getItem('user_info'));\r\n\r\n          console.log('Attempting redirection to /dashboard...');\r\n          window.dispatchEvent(new Event('user-login'));\r\n\r\n          if (this.$router) {\r\n              // console.log('Vue Router instance found. Calling this.$router.push(/dashboard).');\r\n              // using .then().catch() to log router push success/failure\r\n              this.$router.push('/dashboard').then(() => {\r\n                // console.log('Router push to /dashboard completed successfully (promise resolved).');\r\n              }).catch(err => {\r\n                console.error('Router push to /dashboard failed (promise rejected):', err);\r\n                this.errorMessage = 'Navigation error after login.';\r\n              });\r\n          } else {\r\n              console.warn('Vue Router instance not found. Falling back to window.location.href. Ensure router is correctly installed/configured in main.js.');\r\n              window.location.href = 'dashboard.html'; // fallback\r\n          }\r\n\r\n        } else {\r\n          this.errorMessage = data.error || 'Login failed. Please check your credentials.';\r\n          console.error('Login failed with API error:', this.errorMessage);\r\n        }\r\n      } catch (err) {\r\n        console.error('Login network/fetch error or uncaught exception:', err);\r\n        this.errorMessage = 'Could not connect to the server. Please try again.';\r\n      } finally {\r\n        console.groupEnd(); \r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.login-container {\r\n  max-width: 400px;\r\n  margin: 20px auto;\r\n  padding: 30px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 8px;\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\r\n  background-color: #fff;\r\n}\r\n\r\nh2 {\r\n  text-align: center;\r\n  color: #333;\r\n  margin-bottom: 25px;\r\n  font-size: 24px;\r\n}\r\n\r\n.form-row {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.form-row label {\r\n  width: 120px;\r\n  margin-right: 15px;\r\n  font-weight: bold;\r\n  text-align: right;\r\n  color: #555;\r\n}\r\n\r\n.form-row input {\r\n  flex: 1;\r\n  padding: 10px 12px;\r\n  border: 1px solid #ccc;\r\n  border-radius: 5px;\r\n  box-sizing: border-box;\r\n  font-size: 16px;\r\n}\r\n\r\nbutton {\r\n  width: 100%;\r\n  padding: 12px;\r\n  background-color: #007bff;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 5px;\r\n  font-size: 18px;\r\n  cursor: pointer;\r\n  transition: background-color 0.3s ease, transform 0.2s ease;\r\n  margin-top: 20px;\r\n}\r\n\r\nbutton:hover {\r\n  background-color: #0056b3;\r\n  transform: translateY(-2px);\r\n}\r\n\r\n.error {\r\n  color: #dc3545;\r\n  margin-top: 15px;\r\n  text-align: center;\r\n  font-weight: bold;\r\n}\r\n\r\n.success {\r\n  color: #28a745;\r\n  margin-top: 15px;\r\n  text-align: center;\r\n  font-weight: bold;\r\n}\r\n\r\n.register-link {\r\n  margin-top: 25px;\r\n  text-align: center;\r\n  font-size: 15px;\r\n  color: #666;\r\n}\r\n\r\n.register-link a {\r\n  color: #007bff;\r\n  text-decoration: none;\r\n  font-weight: bold;\r\n}\r\n\r\n.register-link a:hover {\r\n  text-decoration: underline;\r\n}\r\n\r\n/* .login-container {\r\n  padding: 24px;\r\n  max-width: 720px;\r\n  margin: 0 auto;\r\n}\r\nbody {\r\n  background-image: url('https://media.istockphoto.com/id/171280997/photo/healthcare.jpg?s=612x612&w=0&k=20&c=ieNPm06MiKZJUhfay7_l5K2O01BHbH8WdexcpzzEIhM=');\r\n  background-repeat: no-repeat;\r\n  background-size: cover;\r\n} */\r\n</style>\r\n","import { render } from \"./MyLogin.vue?vue&type=template&id=2fbad2ae&scoped=true\"\nimport script from \"./MyLogin.vue?vue&type=script&lang=js\"\nexport * from \"./MyLogin.vue?vue&type=script&lang=js\"\n\nimport \"./MyLogin.vue?vue&type=style&index=0&id=2fbad2ae&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2fbad2ae\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"profile-page\">\r\n    <h2>User Profile</h2>\r\n\r\n    <div v-if=\"loading\">Loading profile</div>\r\n\r\n    <form v-else @submit.prevent=\"save\">\r\n      <div class=\"field\">\r\n        <label>Full Name</label>\r\n        <input v-model.trim=\"form.fullname\" type=\"text\" placeholder=\"Full name\" />\r\n      </div>\r\n\r\n      <div class=\"field\">\r\n        <label>Email</label>\r\n        <input v-model=\"form.email\" type=\"email\" readonly class=\"readonly\" />\r\n      </div>\r\n\r\n      <div class=\"field\">\r\n        <label>Role</label>\r\n        <input :value=\"formattedRole\" type=\"text\" readonly class=\"readonly\" />\r\n      </div>\r\n\r\n      <div class=\"field\" v-if=\"formattedRole === 'Staff' || formattedRole === 'Admin'\">\r\n        <label v-if=\"formattedRole === 'Staff'\">Job Title</label>\r\n        <label v-if=\"formattedRole === 'Admin'\">Department</label>\r\n        <input v-if=\"formattedRole === 'Staff'\" v-model.trim=\"form.job_title\" type=\"text\" placeholder=\"Job Title\" />\r\n        <input v-if=\"formattedRole === 'Admin'\" v-model.trim=\"form.department\" type=\"text\" placeholder=\"Department\" />\r\n      </div>\r\n\r\n      <div class=\"field\">\r\n        <label>Phone No.</label>\r\n        <input v-model.trim=\"form.phone_no\" type=\"tel\" placeholder=\"e.g. +60 12-345 6789\" />\r\n      </div>\r\n\r\n      <div class=\"actions\">\r\n\r\n        <button\r\n          type=\"submit\"\r\n          class=\"btn primary\"\r\n          :disabled=\"!isDirty || saving\"\r\n          :title=\"!isDirty ? 'No changes to save' : ''\"\r\n        >\r\n          {{ saving ? 'Saving' : 'Save Changes' }}\r\n        </button>\r\n\r\n        <button\r\n          type=\"button\"\r\n          class=\"btn ghost\"\r\n          @click=\"reset\"\r\n          :disabled=\"!isDirty || saving\"\r\n          title=\"Reset changes\"\r\n        >\r\n          Reset\r\n        </button>\r\n\r\n      </div>\r\n    </form>\r\n    <button type=\"button\" style=\"margin-top: 1rem;\" @click=\"$router.push('/dashboard')\">Back</button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport cfg from '@/apiConfig';\r\nimport { handleUnauthorized } from '@/shared/handleUnauthorized';\r\nexport default {\r\n  name: 'MyProfile',\r\n  data() {\r\n    return {\r\n      baseUrl: cfg.API_BASE_URL,\r\n      loading: true,\r\n      saving: false,\r\n      original: null, // snapshot for dirty check\r\n      form: {\r\n        fullname: '',\r\n        email: '',\r\n        role: '',\r\n        phone_no: '',\r\n      },\r\n    }\r\n  },\r\n  computed: {\r\n    formattedRole() {\r\n      const role = this.form.role\r\n      if (!role) return 'Unknown Role'\r\n      const map = { admin: 'Admin', staff: 'Staff', doctor: 'Doctor' }\r\n      return map[role] || role.charAt(0).toUpperCase() + role.slice(1)\r\n    },\r\n    isDirty() {\r\n      // Compare only the fields you allow editing/storing\r\n      const pick = (o) => ({\r\n        fullname: o.fullname || '',\r\n        phone_no: o.phone_no || '',\r\n        job_title: o.job_title || '',\r\n        department: o.department || '',\r\n        // email/role are read-only; exclude from dirty logic\r\n      })\r\n      try {\r\n        return JSON.stringify(pick(this.form)) !== JSON.stringify(pick(this.original || {}))\r\n      } catch {\r\n        return true\r\n      }\r\n    },\r\n  },\r\n  mounted() {\r\n    this.loadUserData()\r\n  },\r\n  methods: {\r\n    loadUserData() {\r\n      // const baseUrl = cfg.API_BASE_URL;\r\n      const user = JSON.parse(localStorage.getItem('user_info') || 'null');\r\n      const staffEmailXYZ = user.email.replace(/\\./g, 'XYZ');\r\n      fetch(`${this.baseUrl}/user/role-based/${staffEmailXYZ}`, {\r\n        headers: {\r\n          Authorization: `Bearer ${localStorage.getItem('jwt_token')}`,\r\n        },\r\n      })\r\n      .then(res => {\r\n        if (handleUnauthorized(res)) return;\r\n\r\n        return res.json();\r\n      })\r\n      .then(data => {\r\n        this.form = data;\r\n        this.form.email = \r\n          data.staff_email || data.doctor_email || data.admin_email || '';\r\n        this.form.fullname = \r\n          data.staff_name || data.doctor_name || data.admin_name || '';\r\n\r\n        this.original = JSON.parse(JSON.stringify(this.form))\r\n      })\r\n      .catch(err => {\r\n        console.error('Error fetching user data:', err);\r\n      });\r\n      this.loading = false\r\n    },\r\n    reset() {\r\n      this.form = JSON.parse(JSON.stringify(this.original))\r\n    },\r\n    async save() {\r\n      // const baseUrl = cfg.API_BASE_URL;\r\n      if (!this.isDirty || this.saving) return\r\n      this.saving = true\r\n      const staffEmailXYZ = this.form.email.replace(/\\./g, 'XYZ');\r\n      try {\r\n        const r = await fetch(`${this.baseUrl}/user/edit/role-based/${staffEmailXYZ}`, {\r\n          method: 'PUT',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n            Authorization: `Bearer ${localStorage.getItem('jwt_token')}`,\r\n          },\r\n          body: JSON.stringify({\r\n            fullname: this.form.fullname,\r\n            phone_no: this.form.phone_no,\r\n            role: this.form.role,\r\n            job_title: this.form.job_title,\r\n            department: this.form.department,\r\n            // address: this.form.address,\r\n          }),\r\n        })\r\n\r\n        if (!r.ok) throw new Error(`Save failed (${r.status})`)\r\n        const updated = await r.json()\r\n\r\n        // Merge back to localStorage user (keep tokens/other fields)\r\n        const current = JSON.parse(localStorage.getItem('user_info') || '{}')\r\n        const merged = {\r\n          ...current,\r\n          fullname: updated.fullname ?? this.form.fullname,\r\n          // phone_no: updated.phone_no ?? this.form.phone_no,\r\n          // address: updated.address ?? this.form.address,\r\n        }\r\n        localStorage.setItem('user_info', JSON.stringify(merged))\r\n\r\n        // Update local state & snapshot\r\n        this.form = {\r\n          ...this.form,\r\n          fullname: merged.fullname,\r\n          phone_no: merged.phone_no,\r\n          // address: merged.address,\r\n        }\r\n        this.original = JSON.parse(JSON.stringify(this.form))\r\n        this.loadUserData()\r\n\r\n        // Let the rest of the app refresh header/sidebar, etc.\r\n        window.dispatchEvent(new Event('user-login'))\r\n\r\n        // optional: visual feedback\r\n        alert('Profile saved ')\r\n      } catch (e) {\r\n        console.error(e)\r\n        alert(e.message || 'Failed to save profile')\r\n      } finally {\r\n        this.saving = false\r\n      }\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.profile-page { padding: 24px; max-width: 720px; }\r\n.field { margin-bottom: 14px; display: flex; flex-direction: column; }\r\nlabel { font-size: 13px; color: #4b5563; margin-bottom: 6px; }\r\ninput, textarea {\r\n  border: 1px solid #e5e7eb; border-radius: 8px; padding: 8px 10px; font-size: 14px;\r\n}\r\ninput.readonly { background: #f9fafb; color: #6b7280; }\r\n.actions { display: flex; gap: 8px; margin-top: 12px; }\r\n.btn { padding: 8px 12px; border: 1px solid #d1d5db; border-radius: 8px; background: #f3f4f6; cursor: pointer; }\r\n.btn.ghost { background: rgb(152, 131, 8); }\r\n.btn.primary { background: #2563eb; color: white; border-color: #2563eb; }\r\n.btn[disabled] { opacity: .55; cursor: not-allowed; }\r\n</style>\r\n\r\n","import { render } from \"./MyProfile.vue?vue&type=template&id=681dc49c&scoped=true\"\nimport script from \"./MyProfile.vue?vue&type=script&lang=js\"\nexport * from \"./MyProfile.vue?vue&type=script&lang=js\"\n\nimport \"./MyProfile.vue?vue&type=style&index=0&id=681dc49c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-681dc49c\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"session-wrap\">\r\n    <div class=\"head\">\r\n      <div>\r\n        <div class=\"title\">Session {{ sessionId }}</div>\r\n        <div class=\"muted\">\r\n          {{ staffName || '(no name)' }}  {{ staffEmail }}\r\n        </div>\r\n      </div>\r\n      <button class=\"ghost\" @click=\"$router.push('/dashboard')\">Back to Dashboard</button>\r\n    </div>\r\n\r\n    <!-- sticky sub-nav -->\r\n    <nav class=\"subnav\">\r\n      <RouterLink :to=\"sub('medical-history')\"  exact-active-class=\"active\">Medical History</RouterLink>\r\n      <RouterLink :to=\"sub('lifestyle')\"        exact-active-class=\"active\">Lifestyle</RouterLink>\r\n      <RouterLink :to=\"sub('physical')\"        exact-active-class=\"active\">Physical Exams</RouterLink>\r\n      <RouterLink :to=\"sub('investigations')\"   exact-active-class=\"active\">Investigations</RouterLink>\r\n    </nav>\r\n\r\n    <!-- pages render here -->\r\n    <router-view :key=\"$route.fullPath\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport cfg from '@/apiConfig';\r\nimport { getSessionHeader, setSessionHeader } from '@/shared/sessionHeaderCache';\r\nimport { handleUnauthorized } from '@/shared/handleUnauthorized';\r\n// import config from '@/';\r\nexport default {\r\n  provide() {\r\n    return { \r\n      refreshSessionHeader: () => this.refreshHeader(),\r\n      currentSessionHeader: () => this.sessionHeader, // read-only access \r\n    }; \r\n  },\r\n  data() { \r\n    return {\r\n      baseUrl: cfg.API_BASE_URL,\r\n      staffEmail: '',\r\n      staffName: '',\r\n      sessionHeader: null,\r\n    }; \r\n  },\r\n  name: 'ViewSession',\r\n  computed: {\r\n    sessionId()  { return this.$route.params.sessionId; },\r\n    // staffEmail() { return this.$route.query.staff || ''; },\r\n    // staffName()  { return this.$route.query.name || ''; },\r\n  },\r\n  async mounted() {\r\n    this.getStaffInfo();\r\n    this.sessionHeader = await getSessionHeader(this.sessionId);\r\n  },\r\n  methods: {\r\n    async getStaffInfo() {\r\n      const res = await fetch(`${this.baseUrl}/staff-session/${this.sessionId}`, {\r\n        headers: {\r\n          Authorization: `Bearer ${localStorage.getItem('jwt_token')}`\r\n        }\r\n      });\r\n      const data = await res.json();\r\n      if (handleUnauthorized(res)) return;\r\n      this.staffEmail = data.staff_email;\r\n      this.staffName = data.staff_name;\r\n    },\r\n    async refreshHeader() {\r\n      const id = this.$route.params.sessionId;\r\n      this.sessionHeader = await getSessionHeader(id);\r\n      setSessionHeader(id, this.sessionHeader);\r\n    },\r\n    sub(child) {\r\n      // keep staff info in the query so children can read it if needed\r\n      return { name: `session-${child}`, params: { sessionId: this.sessionId }, query: this.$route.query };\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.session-wrap { padding: 24px; }\r\n.head { display:flex; align-items:center; justify-content:space-between; margin-bottom:12px; }\r\n.title { font-size:20px; font-weight:700; }\r\n.muted { color:#6b7280; font-size:13px; }\r\n\r\n.subnav {\r\n  position: sticky; top: 56px; z-index: 100;\r\n  display:flex; gap:10px; padding:10px; margin-bottom:16px;\r\n  background:#f8fafc; border:1px solid #e5e7eb; border-radius:8px;\r\n}\r\n.subnav a { padding:8px 12px; border-radius:6px; color:#1f2937; text-decoration:none; }\r\n.subnav a.active { background:#e0e7ff; color:#1e3a8a; }\r\nbutton.ghost { background:transparent; border:1px solid #CBD5E0; padding:6px 10px; border-radius:6px; }\r\n</style>\r\n","// small in-memory cache\r\nconst _cache = new Map();\r\n\r\nimport cfg from '@/apiConfig';\r\n\r\nexport async function getSessionHeader(sessionId) {\r\n  const baseURL = cfg.API_BASE_URL;\r\n  if (_cache.has(sessionId)) return _cache.get(sessionId);\r\n\r\n  const r = await fetch(`${baseURL}/session-header/${sessionId}`, {\r\n    headers: { Authorization: `Bearer ${localStorage.getItem('jwt_token')}` }\r\n  });\r\n  if (!r.ok) throw new Error('Failed to fetch session header');\r\n  const data = await r.json();\r\n  _cache.set(sessionId, data);\r\n  return data;\r\n}\r\n\r\nexport function setSessionHeader(sessionId, header) {\r\n  _cache.set(sessionId, header);\r\n}\r\n\r\nexport function invalidateSessionHeader(sessionId) { _cache.delete(sessionId); }\r\n","import { render } from \"./ViewSession.vue?vue&type=template&id=06306129&scoped=true\"\nimport script from \"./ViewSession.vue?vue&type=script&lang=js\"\nexport * from \"./ViewSession.vue?vue&type=script&lang=js\"\n\nimport \"./ViewSession.vue?vue&type=style&index=0&id=06306129&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-06306129\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"ns-wrap\">\r\n    <div class=\"head\">\r\n      <div>\r\n        <div class=\"title\">Non-Session Details</div>\r\n        <div class=\"muted\">{{ staffEmail || 'unable to fetch email' }}</div>\r\n      </div>\r\n      <button class=\"ghost\" @click=\"$router.push('/dashboard')\">Back to Dashboard</button>\r\n    </div>\r\n\r\n    <!-- sticky sub-nav -->\r\n    <nav class=\"subnav\">\r\n      <RouterLink :to=\"sub('staff-info')\" exact-active-class=\"active\">Personal Info</RouterLink>\r\n      <RouterLink :to=\"sub('occ-history')\" exact-active-class=\"active\">Occupational History</RouterLink>\r\n      <RouterLink :to=\"sub('fam-history')\" exact-active-class=\"active\">Family History</RouterLink>\r\n      <!-- <RouterLink :to=\"sub('fhd')\" exact-active-class=\"active\">Family Disease</RouterLink> -->\r\n    </nav>\r\n\r\n    <!-- pages render here -->\r\n    <router-view :key=\"$route.fullPath\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport cfg from '@/apiConfig';\r\nexport default {\r\n  name: 'ViewNonSession',\r\n  provide() {\r\n    // children can inject these: currentStaffHeader(), refreshStaffHeader()\r\n    return {\r\n      currentStaffHeader: () => this.staffHeader,\r\n      refreshStaffHeader: () => this.refreshHeader(),\r\n    };\r\n  },\r\n  data() {\r\n    return {\r\n      baseUrl: cfg.API_BASE_URL,\r\n      staffEmail: '',\r\n      staffName: '',\r\n      staffHeader: null, // you can put any header fields you want here\r\n      loading: false,\r\n    };\r\n  },\r\n  mounted() {\r\n      this.fetchStaffEmail();\r\n  },\r\n//   watch: {\r\n//     '$route.params.staffEmail': {\r\n//       immediate: true,\r\n//       handler() {\r\n//         this.staffEmail = this.$route.params.staffEmail || '';\r\n//         this.refreshHeader();\r\n//       }\r\n//     }\r\n//   },\r\n  methods: {\r\n    // fetch staffEmail from route (admin, doctor) or localstorage (staff)\r\n    fetchStaffEmail() {\r\n      this.staffEmail = this.$route.params.staffEmail || JSON.parse(localStorage.getItem('user_info')).email || '';\r\n    },\r\n    // encode email for use in path\r\n    encodeEmailForPath(email) {\r\n      // matches your existing convention used elsewhere\r\n      return encodeURIComponent((email || '').replace(/\\./g, 'XYZ'));\r\n    },\r\n    async refreshHeader() {\r\n      if (!this.staffEmail) return;\r\n      this.loading = true;\r\n      try {\r\n        // reuse the details endpoint you already have:\r\n        // GET /admin/non-session/staff/{emailXYZ}\r\n        const emailXYZ = this.encodeEmailForPath(this.staffEmail);\r\n        const r = await fetch(`${this.baseUrl}/admin/non-session/staff/${emailXYZ}`, {\r\n          headers: { Authorization: `Bearer ${localStorage.getItem('jwt_token')}` }\r\n        });\r\n        const payload = await r.json();\r\n\r\n        // payload shape based on your drawer: { staff, occupational_history, family_history, family_history_disease }\r\n        const s = payload?.staff || {};\r\n        this.staffName = s.staff_name || '';\r\n        // expose anything children might need\r\n        this.staffHeader = {\r\n          staff_email: s.staff_email || this.staffEmail,\r\n          staff_name: s.staff_name || '',\r\n          job_title: s.job_title || '',\r\n          phone_no: s.phone_no || '',\r\n          // add more header fields if useful\r\n        };\r\n      } catch (e) {\r\n        console.error(e);\r\n        this.staffHeader = { staff_email: this.staffEmail, staff_name: '' };\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    },\r\n    sub(child) {\r\n      // keep params; children read staffEmail via $route.params or inject()\r\n      return { name: `ns-${child}`, params: { staffEmail: this.staffEmail } };\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.ns-wrap { padding: 24px; }\r\n.head { display:flex; align-items:center; justify-content:space-between; margin-bottom:12px; }\r\n.title { font-size:20px; font-weight:700; }\r\n.muted { color:#6b7280; font-size:13px; }\r\n.subnav {\r\n  position: sticky; top: 56px; z-index: 10;\r\n  display:flex; gap:10px; padding:10px; margin-bottom:16px;\r\n  background:#f8fafc; border:1px solid #e5e7eb; border-radius:8px;\r\n}\r\n.subnav a { padding:8px 12px; border-radius:6px; color:#1f2937; text-decoration:none; }\r\n.subnav a.active { background:#e0e7ff; color:#1e3a8a; }\r\nbutton.ghost { background:transparent; border:1px solid #CBD5E0; padding:6px 10px; border-radius:6px; }\r\n</style>\r\n","import { render } from \"./ViewNonSession.vue?vue&type=template&id=13187a95&scoped=true\"\nimport script from \"./ViewNonSession.vue?vue&type=script&lang=js\"\nexport * from \"./ViewNonSession.vue?vue&type=script&lang=js\"\n\nimport \"./ViewNonSession.vue?vue&type=style&index=0&id=13187a95&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-13187a95\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"stats\">\r\n    <h2>Statistics  All Staff</h2>\r\n    <button @click=\"$router.push('/dashboard')\" style=\"margin-bottom: 18px;\">Back to Dashboard</button>\r\n\r\n    <div class=\"switcher\">\r\n      <button :class=\"{active: mode==='dashboard'}\" @click=\"mode='dashboard'\">Overview</button>\r\n      <button :class=\"{active: mode==='charts'}\" @click=\"mode='charts'\">Charts</button>\r\n      <button :class=\"{active: mode==='dashboard2'}\" @click=\"mode='dashboard2'\">Overview-2</button>\r\n      <button :class=\"{active: mode==='charts2'}\" @click=\"mode='charts2'\">Charts-2</button>\r\n    </div>\r\n\r\n    <keep-alive>\r\n      <AnalyticsAllDashboard v-if=\"mode === 'dashboard'\"/>\r\n      <AnalyticsAllCharts v-else-if=\"mode === 'charts'\"/>\r\n      <AnalyticsAllDashboard2 v-else-if=\"mode === 'dashboard2'\"/>\r\n      <AnalyticsAllCharts2 v-else/>\r\n    </keep-alive>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport AnalyticsAllCharts from './AnalyticsAllCharts.vue';\r\nimport AnalyticsAllDashboard from './AnalyticsAllDashboard.vue';\r\nimport AnalyticsAllDashboard2 from './AnalyticsAllDashboard2.vue';\r\nimport AnalyticsAllCharts2 from './AnalyticsAllCharts2.vue';\r\n\r\nexport default {\r\n  name: 'AnalyticsAllPage',\r\n  data: () => ({ mode: 'dashboard' }),\r\n  components: {\r\n    AnalyticsAllCharts,\r\n    AnalyticsAllDashboard,\r\n    AnalyticsAllCharts2,\r\n    AnalyticsAllDashboard2\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n</style>\r\n","<template>\r\n  <div class=\"analytics-charts\">\r\n    <h2>Health Statistics Charts</h2>\r\n\r\n    <div class=\"session-bar\" v-if=\"sessionsByPeriod.length\">\r\n      <span class=\"hint\">Sessions</span>\r\n      <span\r\n        v-for=\"s in sessionsByPeriod\"\r\n        :key=\"s.bucket\"\r\n        class=\"session-pill\"\r\n        :title=\"String(s.bucket)\"\r\n      >\r\n        {{ labelFromBucket(s.bucket) }}\r\n      </span>\r\n    </div>\r\n\r\n    <!-- BMI band controls -->\r\n    <div class=\"band-controls\">\r\n      <div class=\"band-item\">\r\n        <label><b>Low</b> upper bound</label>\r\n        <input type=\"number\" step=\"0.1\" v-model.number=\"bmiThresholds.lowMax\" @input=\"onBandInput\" />\r\n      </div>\r\n      <div class=\"band-item\">\r\n        <label><b>Fit</b> upper bound</label>\r\n        <input type=\"number\" step=\"0.1\" v-model.number=\"bmiThresholds.fitMax\" @input=\"onBandInput\" />\r\n      </div>\r\n      <div class=\"band-legend\">\r\n        <span class=\"dot dot-low\"></span> Low\r\n        <span class=\"dot dot-fit\"></span> Fit\r\n        <span class=\"dot dot-exceed\"></span> Exceed\r\n      </div>\r\n    </div>\r\n\r\n\r\n    <div class=\"grid\">\r\n\r\n      <!-- BMI distribution scatter -->\r\n      <div class=\"card wide\">\r\n        <div class=\"card-title\">BMI Distribution (latest per staff)</div>\r\n        <canvas ref=\"bmiScatterCanvas\" height=\"220\"></canvas>\r\n        <div class=\"muted\" v-if=\"!bmiPoints.length\" style=\"margin-top:8px;\">No BMI data found for the selected staff set.</div>\r\n      </div>\r\n\r\n      <div class=\"card\">\r\n        <div class=\"card-title\">BMI Trend (avg)</div>\r\n        <canvas ref=\"bmiCanvas\" height=\"120\"></canvas>\r\n      </div>\r\n\r\n      <div class=\"card\">\r\n        <div class=\"card-title\">Blood Pressure Trend (avg)</div>\r\n        <canvas ref=\"bpCanvas\" height=\"120\"></canvas>\r\n      </div>\r\n\r\n      <div class=\"card\">\r\n        <div class=\"card-title\">Pulse Trend (avg)</div>\r\n        <canvas ref=\"pulseCanvas\" height=\"120\"></canvas>\r\n      </div>\r\n\r\n      <div class=\"card wide\">\r\n        <div class=\"card-title\">Key Lipids by Period (Normal / Abnormal / Not done)</div>\r\n        <canvas ref=\"lipidsCanvas\" height=\"160\"></canvas>\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport cfg from '@/apiConfig';\r\nimport { handleUnauthorized } from '@/shared/handleUnauthorized';\r\nimport {\r\n  Chart, LineController, BarController, LineElement, BarElement, PointElement,\r\n  LinearScale, CategoryScale, Tooltip, Legend, Filler, Title, ScatterController\r\n} from 'chart.js';\r\nChart.register(LineController, BarController, LineElement, BarElement, PointElement, LinearScale, CategoryScale, Tooltip, Legend, Filler, Title, ScatterController);\r\n\r\nexport default {\r\n  name: 'AnalyticsCharts',\r\n  data() {\r\n    return {\r\n      baseUrl: cfg.API_BASE_URL,\r\n\r\n      sessionsByPeriod: [], // from admin summary (groupBy=month)\r\n      vitalsSeries: [],     // from admin vitals (groupBy=month)\r\n      labsSeries: [],       // from admin labs (groupBy=month)\r\n\r\n      // BMI scatter extras\r\n      staffMap: new Map(),  // email -> name (optional if you later add /admin/staff-list)\r\n      bmiPoints: [],        // [{x, y, email, name, date}]\r\n      bmiThresholds: { lowMax: 23.5, fitMax: 24.9 },\r\n\r\n      charts: {\r\n        bmi: null,\r\n        bp: null,\r\n        pulse: null,\r\n        lipids: null,\r\n        bmiScatter: null\r\n      },\r\n      scatterDebounce: null,\r\n    };\r\n  },\r\n  async mounted() {\r\n    await this.loadData();\r\n    this.renderAllCharts();\r\n    window.addEventListener('resize', this.resizeCharts);\r\n  },\r\n  beforeUnmount() {\r\n    this.destroyCharts();\r\n    window.removeEventListener('resize', this.resizeCharts);\r\n  },\r\n  methods: {\r\n    // ---- Fetch ----\r\n    async loadData() {\r\n      const headers = { Authorization: `Bearer ${localStorage.getItem('jwt_token')}` };\r\n\r\n      const [summary, vitals, labs] = await Promise.all([\r\n        fetch(`${this.baseUrl}/admin/stats/summary?groupBy=month`, { headers }).then(r => r.json()),\r\n        fetch(`${this.baseUrl}/admin/stats/vitals?fields=bmi,bp_sys,bp_dia,pulse_bpm&groupBy=month`, { headers }).then(r => r.json()),\r\n        fetch(`${this.baseUrl}/admin/stats/labs?fields=ldl_result,tchol_result,hdl_result&groupBy=month`, { headers }).then(r => r.json())\r\n      ]);\r\n\r\n      this.sessionsByPeriod = (summary?.sessions_by_period || []).map(r => ({ bucket: r.bucket, count: Number(r.count || 0) }));\r\n      this.vitalsSeries = (vitals?.series || []);\r\n      this.labsSeries = (labs?.series || []);\r\n\r\n      // Build BMI distribution (latest BMI per staff from top N staff)\r\n      const MAX_SCATTER_STAFF = 30; // tweakable\r\n      const top = (summary?.top_staff_by_sessions || []).slice(0, MAX_SCATTER_STAFF);\r\n      const emails = Array.from(new Set(top.map(t => t.staff_email)));\r\n\r\n      // OPTIONAL: if you have /admin/staff-list, uncomment this to populate names:\r\n      // try {\r\n      //   const staffList = await fetch(`${this.baseUrl}/admin/staff-list`, { headers }).then(r => r.json());\r\n      //   this.staffMap = new Map((staffList || []).map(x => [x.staff_email, x.staff_name]));\r\n      // } catch {}\r\n\r\n      // Per-staff vitals; take latest BMI\r\n      const per = await Promise.all(emails.map(async (email) => {\r\n        const staffXYZ = email.replace(/\\./g, 'XYZ');\r\n        const rows = await fetch(`${this.baseUrl}/stats/vitals/${staffXYZ}`, { headers })\r\n          .then(res => {\r\n            if (handleUnauthorized(res)) return;\r\n\r\n            return res.json();\r\n          })\r\n          .catch(() => []);\r\n        if (!Array.isArray(rows) || !rows.length) return null;\r\n        // latest by date\r\n        rows.sort((a,b) => new Date(a.session_date) - new Date(b.session_date));\r\n        const latest = rows.at(-1);\r\n        const bmi = latest?.bmi;\r\n        if (bmi == null || isNaN(bmi)) return null;\r\n        const name = this.staffMap.get(email) || null;\r\n        return { email, name, bmi: Number(bmi), date: latest.session_date };\r\n      }));\r\n\r\n      // Build points for scatter; x is just index, labels array mirrors this\r\n      const pts = (per.filter(Boolean) || []);\r\n      this.bmiPoints = pts.map((p, i) => ({\r\n        x: i + 1, // 1-based index for nicer ticks\r\n        y: p.bmi,\r\n        email: p.email,\r\n        name: p.name,\r\n        date: p.date\r\n      }));\r\n    },\r\n\r\n    // ---- UI helpers ----\r\n    fmtDate(d) { return new Date(d).toLocaleDateString(); },\r\n    labelFromBucket(bucket) {\r\n      // Buckets for month are \"YYYY-MM-01\"; keep short label \"YYYY-MM\"\r\n      const s = String(bucket || '');\r\n      return s.length >= 7 ? s.slice(0,7) : s;\r\n    },\r\n\r\n    // ---- Chart helpers ----\r\n    destroyCharts() {\r\n      Object.keys(this.charts).forEach(k => {\r\n        if (this.charts[k]) { this.charts[k].destroy(); this.charts[k] = null; }\r\n      });\r\n    },\r\n    resizeCharts() {\r\n      Object.values(this.charts).forEach(c => c && c.resize());\r\n    },\r\n    renderAllCharts() {\r\n      this.destroyCharts();\r\n      this.renderBMI();\r\n      this.renderBP();\r\n      this.renderPulse();\r\n      this.renderLipids();\r\n      this.renderBMIScatter();\r\n    },\r\n\r\n    // 1) BMI line (avg per period)\r\n    renderBMI() {\r\n      const ctx = this.$refs.bmiCanvas?.getContext('2d'); if (!ctx) return;\r\n      const labels = this.vitalsSeries.map(v => this.labelFromBucket(v.bucket));\r\n      const data = this.vitalsSeries.map(v => v.avg_bmi ?? null);\r\n\r\n      this.charts.bmi = new Chart(ctx, {\r\n        type: 'line',\r\n        data: {\r\n          labels,\r\n          datasets: [{ label: 'BMI (avg)', data, tension: 0.3, \r\n            fill: false, pointRadius: 4 }]\r\n        },\r\n        options: {\r\n          responsive: true,\r\n          // layout: { padding: { top: 20 } },\r\n          plugins: { \r\n            legend: { display: true }, tooltip: { mode: 'index', intersect: false },\r\n            datalabels: {\r\n              align: 'top',      // Move label above the point\r\n              anchor: 'end',     // Anchor it to the top edge\r\n              offset: 4,         // Add a small gap\r\n              color: '#4b5563',  // Dark grey text\r\n              font: { size: 11, weight: 'bold' },\r\n              formatter: (val) => {\r\n                // Fix the decimals: 24.74000 -> 24.7\r\n                return val != null ? Number(val).toFixed(1) : '';\r\n              },\r\n              // Optional: Hides labels if they overlap each other\r\n              display: 'auto' \r\n            },\r\n          },\r\n          scales: {\r\n            y: { beginAtZero: false, title: { display: true, text: 'BMI' } },\r\n            x: { title: { display: true, text: 'Period' } }\r\n          }\r\n        }\r\n      });\r\n    },\r\n\r\n    // 2) BP line (avg Sys & Dia)\r\n    renderBP() {\r\n      const ctx = this.$refs.bpCanvas?.getContext('2d'); if (!ctx) return;\r\n      const labels = this.vitalsSeries.map(v => this.labelFromBucket(v.bucket));\r\n      const sys = this.vitalsSeries.map(v => v.avg_bp_sys ?? null);\r\n      const dia = this.vitalsSeries.map(v => v.avg_bp_dia ?? null);\r\n\r\n      this.charts.bp = new Chart(ctx, {\r\n        type: 'line',\r\n        data: {\r\n          labels,\r\n          datasets: [\r\n            { label: 'Systolic (avg)', data: sys, tension: 0.3, pointRadius: 3 },\r\n            { label: 'Diastolic (avg)', data: dia, tension: 0.3, pointRadius: 3 }\r\n          ]\r\n        },\r\n        options: {\r\n          responsive: true,\r\n          // layout: { padding: { top: 20 } },\r\n          plugins: { \r\n            legend: { display: true }, tooltip: { mode: 'index', intersect: false },\r\n            datalabels: {\r\n              align: 'top',\r\n              anchor: 'end',\r\n              offset: 4,\r\n              color: '#4b5563',\r\n              font: { size: 10, weight: 'bold' },\r\n              backgroundColor: 'rgba(255,255,255,0.8)', // Semi-transparent white background\r\n              borderRadius: 4,\r\n              padding: 2,\r\n              formatter: (val) => val != null ? Math.round(val) : '', // BP is usually whole numbers\r\n              display: 'auto' // Crucial for BP: hides overlapping labels\r\n            }\r\n          },\r\n          scales: {\r\n            y: { beginAtZero: false, title: { display: true, text: 'mmHg' } },\r\n            x: { title: { display: true, text: 'Period' } }\r\n          }\r\n        }\r\n      });\r\n    },\r\n\r\n    // 3) Pulse line (avg)\r\n    renderPulse() {\r\n      const ctx = this.$refs.pulseCanvas?.getContext('2d'); if (!ctx) return;\r\n      const labels = this.vitalsSeries.map(v => this.labelFromBucket(v.bucket));\r\n      const pulse = this.vitalsSeries.map(v => v.avg_pulse_bpm ?? null);\r\n\r\n      this.charts.pulse = new Chart(ctx, {\r\n        type: 'line',\r\n        data: { labels, datasets: [{ label: 'Pulse (avg bpm)', data: pulse, tension: 0.3, pointRadius: 3 }] },\r\n        options: {\r\n          responsive: true,\r\n          plugins: { \r\n            legend: { display: true },\r\n            datalabels: {\r\n              align: 'top',      // Move label above the point\r\n              anchor: 'end',     // Anchor it to the top edge\r\n              offset: 4,         // Add a small gap\r\n              color: '#4b5563',  // Dark grey text\r\n              font: { size: 11, weight: 'bold' },\r\n              formatter: (val) => {\r\n                // Fix the decimals: 24.74000 -> 24.7\r\n                return val != null ? Number(val).toFixed(1) : '';\r\n              },\r\n              // Optional: Hides labels if they overlap each other\r\n              display: 'auto' \r\n            },\r\n          },\r\n          scales: {\r\n            y: { beginAtZero: false, title: { display: true, text: 'bpm' } },\r\n            x: { title: { display: true, text: 'Period' } }\r\n          }\r\n        }\r\n      });\r\n    },\r\n\r\n    // 4) Lipids stacked bar (sum across LDL/Tchol/HDL per period)\r\n    renderLipids() {\r\n      const ctx = this.$refs.lipidsCanvas?.getContext('2d'); if (!ctx) return;\r\n\r\n      const labels = this.labsSeries.map(v => this.labelFromBucket(v.bucket));\r\n\r\n      const normal = this.labsSeries.map(v =>\r\n        (Number(v.ldl_result_normal||0) + Number(v.tchol_result_normal||0) + Number(v.hdl_result_normal||0))\r\n      );\r\n      const abnormal = this.labsSeries.map(v =>\r\n        (Number(v.ldl_result_abnormal||0) + Number(v.tchol_result_abnormal||0) + Number(v.hdl_result_abnormal||0))\r\n      );\r\n      const notdone = this.labsSeries.map(v =>\r\n        (Number(v.ldl_result_not_done||0) + Number(v.tchol_result_not_done||0) + Number(v.hdl_result_not_done||0))\r\n      );\r\n\r\n      this.charts.lipids = new Chart(ctx, {\r\n        type: 'bar',\r\n        data: {\r\n          // labels: { display: 'auto', position: 'bottom' },\r\n          labels,\r\n          datasets: [\r\n            { label: 'Normal',   data: normal,   stack: 'lipids', backgroundColor: '#008000' },\r\n            { label: 'Abnormal', data: abnormal, stack: 'lipids', backgroundColor: '#ff0000' },\r\n            { label: 'Not done', data: notdone,  stack: 'lipids', backgroundColor: '#cccccc' }\r\n          ]\r\n        },\r\n        options: {\r\n          responsive: true,\r\n          plugins: { legend: { display: true } },\r\n          scales: {\r\n            x: { stacked: true, title: { display: true, text: 'Period' } },\r\n            y: { stacked: true, beginAtZero: true, ticks: { stepSize: 1 }, title: { display: true, text: 'Count of Tests' } }\r\n          }\r\n        }\r\n      });\r\n    },\r\n\r\n    // 5) BMI distribution scatter\r\n    onBandInput() {\r\n      clearTimeout(this.scatterDebounce);\r\n      // Small delay avoids rapid consecutive rebuilds that can race draw cycles\r\n      this.scatterDebounce = setTimeout(() => {\r\n        this.renderBMIScatter(); \r\n      }, 120);\r\n    },\r\n    renderBMIScatter() {\r\n      const canvas = this.$refs.bmiScatterCanvas;\r\n      if (!canvas) return;\r\n      const ctx = canvas.getContext('2d');\r\n      if (!ctx) return;\r\n\r\n      // Safely destroy old chart if it exists\r\n      if (this.charts.bmiScatter) {\r\n        try { this.charts.bmiScatter.stop(); } catch (err) { /* ignore */ }\r\n        try { this.charts.bmiScatter.destroy(); } catch (err) { /* ignore */ }\r\n        this.charts.bmiScatter = null;\r\n      }\r\n\r\n      const { lowMax, fitMax } = this.bmiThresholds;\r\n      const low = [], fit = [], exceed = [];\r\n      const labels = [];\r\n\r\n      this.bmiPoints.forEach((p, i) => {\r\n        labels[i] = p.name || p.email;\r\n        const pt = { x: p.x, y: p.y };\r\n        if (p.y <= lowMax) low.push(pt);\r\n        else if (p.y <= fitMax) fit.push(pt);\r\n        else exceed.push(pt);\r\n      });\r\n\r\n      const thresholdLines = {\r\n        id: 'thresholdLines',\r\n        afterDraw: (chart) => {\r\n          const { ctx, chartArea, scales } = chart || {};\r\n          if (!ctx || !chartArea || !scales?.y) return;\r\n\r\n          const drawLine = (val, dash = [4, 3]) => {\r\n            const y = scales.y.getPixelForValue(val);\r\n            ctx.save();\r\n            ctx.setLineDash(dash);\r\n            ctx.strokeStyle = '#718096';\r\n            ctx.lineWidth = 1;\r\n            ctx.beginPath();\r\n            ctx.moveTo(chartArea.left, y);\r\n            ctx.lineTo(chartArea.right, y);\r\n            ctx.stroke();\r\n            ctx.restore();\r\n          };\r\n          drawLine(lowMax);\r\n          drawLine(fitMax, [6, 3]);\r\n        }\r\n      };\r\n\r\n      const datasets = [\r\n        { label: 'Low', data: low, pointRadius: 4, backgroundColor: '#63b3ed' },\r\n        { label: 'Fit', data: fit, pointRadius: 4, backgroundColor: '#48bb78' },\r\n        { label: 'Exceed', data: exceed, pointRadius: 4, backgroundColor: '#f56565' }\r\n      ];\r\n\r\n      requestAnimationFrame(() => {\r\n        this.charts.bmiScatter = new Chart(ctx, {\r\n          type: 'scatter',\r\n          data: { datasets },\r\n          options: {\r\n            animation: false,\r\n            responsive: true,\r\n            plugins: {\r\n              legend: { display: true },\r\n              tooltip: {\r\n                callbacks: {\r\n                  title: (items) => {\r\n                    const x = items[0]?.parsed?.x;\r\n                    const idx = (x ?? 1) - 1;\r\n                    return labels[idx] || `Staff #${x}`;\r\n                  },\r\n                  label: (item) => `BMI: ${item.parsed.y}`\r\n                }\r\n              }\r\n            },\r\n            scales: {\r\n              x: {\r\n                type: 'linear',\r\n                title: { display: true, text: 'Staff (top by sessions)' },\r\n                ticks: {\r\n                  stepSize: 1,\r\n                  callback: (val) => {\r\n                    const idx = Math.round(val) - 1;\r\n                    const lab = labels[idx];\r\n                    if (!lab) return '';\r\n                    const s = String(lab);\r\n                    return s.length > 12 ? s.slice(0, 12) + '' : s;\r\n                  }\r\n                },\r\n                min: 0.5,\r\n                max: Math.max(1.5, this.bmiPoints.length + 0.5)\r\n              },\r\n              y: { title: { display: true, text: 'BMI' }, beginAtZero: false }\r\n            }\r\n          },\r\n          plugins: [thresholdLines]\r\n        });\r\n      });\r\n    },\r\n\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.analytics-charts { padding: 24px; }\r\n.session-bar { display:flex; align-items:center; gap:8px; margin-bottom: 16px; flex-wrap: wrap; }\r\n.session-pill { background:#edf2f7; border-radius: 14px; padding:4px 10px; font-size:12px; color:#2d3748; }\r\n.hint { color:#4a5568; margin-right:6px; font-size:12px; }\r\n\r\n.band-controls { display:flex; align-items:center; gap:16px; margin: 10px 0 18px; flex-wrap: wrap; }\r\n.band-item { display:flex; align-items:center; gap:8px; }\r\n.band-item label { color:#4a5568; font-size:12px; }\r\n.band-item input { width: 80px; padding:4px 6px; border:1px solid #cbd5e0; border-radius:6px; }\r\n.band-legend { display:flex; align-items:center; gap:10px; font-size:12px; color:#4a5568; }\r\n.dot { width:10px; height:10px; border-radius:50%; display:inline-block; margin-right:4px; }\r\n.dot-low { background:#63b3ed; }\r\n.dot-fit { background:#48bb78; }\r\n.dot-exceed { background:#f56565; }\r\n\r\n.card { background:#fff; border:1px solid #e2e8f0; border-radius:10px; padding:14px; box-shadow: 0 2px 6px rgba(0,0,0,0.04); }\r\n.card.wide { grid-column: 1 / -1; }\r\n.card-title { font-weight:600; color:#2d3748; margin-bottom:10px; font-size:14px; }\r\n.muted { color:#718096; font-size:12px; }\r\n</style>\r\n","import { render } from \"./AnalyticsAllCharts.vue?vue&type=template&id=1d99bed4&scoped=true\"\nimport script from \"./AnalyticsAllCharts.vue?vue&type=script&lang=js\"\nexport * from \"./AnalyticsAllCharts.vue?vue&type=script&lang=js\"\n\nimport \"./AnalyticsAllCharts.vue?vue&type=style&index=0&id=1d99bed4&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1d99bed4\"]])\n\nexport default __exports__","<!-- AnalyticsAbnormalityDrilldown.vue -->\r\n<template>\r\n  <div class=\"abnormality-drilldown container\">\r\n    <h2>Lab Abnormality Drill-down</h2>\r\n\r\n    <div class=\"filters\">\r\n      <div class=\"filter-group\">\r\n        <label>Type</label>\r\n        <select v-model=\"type\">\r\n          <option value=\"cholesterol\">Cholesterol (LDL, TChol, HDL, TG)</option>\r\n          <option value=\"liver\">Liver Function (Bilirubin, GGT, AST, ALT)</option>\r\n          <option value=\"glucose\">Glucose (FBS, RBS)</option>\r\n          <option value=\"uric_acid\">Uric Acid</option>\r\n          <option value=\"renal\">Renal Panel (BUN, Creat, Electrolytes)</option>\r\n        </select>\r\n      </div>\r\n\r\n      <div class=\"filter-group\">\r\n        <label>Result Status</label>\r\n        <select v-model=\"result_status\">\r\n            <option value=\"all\">All</option>\r\n            <option value=\"abnormal\">Abnormal only</option>\r\n            <option value=\"normal\">Normal only</option>\r\n            <option value=\"not done\">Not done only</option>\r\n        </select>\r\n      </div>\r\n\r\n      <div class=\"filter-group\">\r\n        <label>Date Range</label>\r\n        <div class=\"date-row\">\r\n          <VueDatePicker \r\n            v-model=\"from\"\r\n            :max-date=\"new Date()\" \r\n            :enable-time-picker=\"false\"\r\n            auto-apply\r\n            placeholder=\"Start Date\"\r\n          />\r\n          <span>-</span>\r\n          <VueDatePicker \r\n            v-model=\"to\"\r\n            :max-date=\"new Date()\" \r\n            :enable-time-picker=\"false\"\r\n            auto-apply\r\n            placeholder=\"End Date\"\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <button @click=\"load\" :disabled=\"loading\">Refresh</button>\r\n    </div>\r\n\r\n    <div v-if=\"loading\" class=\"spinner\">Loading</div>\r\n\r\n    <table v-else class=\"std-table\">\r\n      <thead>\r\n        <tr>\r\n          <th>Staff</th>\r\n          <th>Session Date</th>\r\n          <th v-for=\"field in displayedFields\" :key=\"field\">{{ formatField(field) }}</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <!-- <tr v-for=\"row in results\" :key=\"row.session_id\"\r\n            @click=\"gotoSession(row.session_id)\" class=\"clickable\"> -->\r\n        <tr v-for=\"row in results\" :key=\"row.session_id\">\r\n          <td>{{ row.staff_name }}</td>\r\n          <td>{{ formatDateShort(row.session_date) }}</td>\r\n          <td v-for=\"field in displayedFields\" :key=\"field\"\r\n              :class=\"highlightCell(row[field])\">\r\n            {{ row[field] || '' }}\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n\r\n    <p v-if=\"!loading && results.length === 0\" class=\"muted\">No records found for the selected filters.</p>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport cfg from '@/apiConfig';\r\nimport { handleUnauthorized } from '@/shared/handleUnauthorized';\r\nimport { formatDateShort } from '@/shared/dateFormat';\r\nimport { VueDatePicker } from '@vuepic/vue-datepicker';\r\n\r\nconst fieldLabels = {\r\n  ldl_result: 'LDL', tchol_result: 'Total Chol', hdl_result: 'HDL', tg_result: 'TG',\r\n  tbil_result: 'Total Bilirubin', ggt_result: 'GGT', ast_result: 'AST', alt_result: 'ALT',\r\n  fbs_result: 'FBS', rbs_result: 'RBS',\r\n  ua_result: 'Uric Acid',\r\n  bu_result: 'Urea', creat_result: 'Creatinine', na_result: 'Na', k_result: 'K', cl_result: 'Cl'\r\n};\r\n\r\nconst typeToFields = {\r\n  cholesterol: ['ldl_result', 'tchol_result', 'hdl_result', 'tg_result'],\r\n  liver: ['tbil_result', 'ggt_result', 'ast_result', 'alt_result'],\r\n  glucose: ['fbs_result', 'rbs_result'],\r\n  uric_acid: ['ua_result'],\r\n  renal: ['bu_result', 'creat_result', 'na_result', 'k_result', 'cl_result'],\r\n};\r\n\r\nexport default {\r\n  components: { VueDatePicker },\r\n  data() {\r\n    return {\r\n      type: 'cholesterol',\r\n      result_status: 'all',\r\n      from: null,\r\n      to: null,\r\n      debounceTimer: null,\r\n      abortController: null,\r\n      results: [],\r\n      loading: false,\r\n    };\r\n  },\r\n  computed: {\r\n    displayedFields() {\r\n      return typeToFields[this.type];\r\n    },\r\n  },\r\n  methods: {\r\n    formatDateShort,\r\n    debouncedLoad() {\r\n      clearTimeout(this.debounceTimer);\r\n      this.debounceTimer = setTimeout(() => {\r\n        this.load();\r\n      }, 500); // Wait 500ms after the last change\r\n    },\r\n    async load() {\r\n      // 1. Helper to safely convert Date Object -> \"2025-11-21\"\r\n      const formatDate = (date) => {\r\n          if (!date) return null;\r\n          // If it's already a string (e.g. from native input), return it\r\n          if (typeof date === 'string') return date;\r\n          // If it's a Date object, format it safely\r\n          try {\r\n              // Adjust for timezone offset if necessary, or use simple ISO\r\n              // .toISOString() returns UTC. If you need local time, use this:\r\n              const offset = date.getTimezoneOffset() * 60000;\r\n              const localISOTime = (new Date(date - offset)).toISOString().slice(0, 10);\r\n              return localISOTime;\r\n          } catch (e) {\r\n              return null;\r\n          }\r\n      };\r\n\r\n      this.loading = true;\r\n\r\n      const headers = { Authorization: `Bearer ${localStorage.getItem('jwt_token')}` };\r\n      \r\n      // 2. Prepare the URL with base parameters\r\n      let url = `${cfg.API_BASE_URL}/admin/stats/staff-abnormality?type=${this.type}&result_status=${this.result_status}`;\r\n\r\n      // 3. Convert dates and append only if they exist\r\n      const fromStr = formatDate(this.from);\r\n      const toStr = formatDate(this.to);\r\n\r\n      if (fromStr) url += `&from=${fromStr}`;\r\n      if (toStr) url += `&to=${toStr}`;\r\n\r\n      try {\r\n          const res = await fetch(url, { headers });\r\n          \r\n          if (handleUnauthorized(res)) return;\r\n          if (!res.ok) throw new Error('Failed');\r\n\r\n          const json = await res.json();\r\n          this.results = json.results || [];\r\n      } catch (e) {\r\n          // Only alert if it's NOT a cancellation error (optional)\r\n          if (e.name !== 'AbortError') {\r\n              console.error(e);\r\n              alert('Failed to load data');\r\n          }\r\n      } finally {\r\n          this.loading = false;\r\n      }\r\n    },\r\n\r\n    formatField(col) { return fieldLabels[col] || col; },\r\n    highlightCell(val) {\r\n      if (!val) return '';\r\n      return val.toLowerCase() === 'abnormal' ? 'abnormal' :\r\n             val.toLowerCase() === 'normal' ? 'normal' : '';\r\n    },\r\n    gotoSession(sessionId) {\r\n      this.$router.push(`/staff/session/${sessionId}/investigations`);\r\n    }\r\n  },\r\n  mounted() {\r\n    this.load();\r\n  },\r\n  watch: {\r\n    from() { this.debouncedLoad(); },\r\n    to() { this.debouncedLoad(); },\r\n    type() { this.debouncedLoad(); },\r\n    result_status() { this.debouncedLoad(); }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n/* .filters-bar { display:flex; gap:20px; flex-wrap:wrap; margin-bottom:20px; align-items:end; } */\r\n.filter-group { display:flex; flex-direction:column; gap:4px; }\r\n.filter-group label { font-size:13px; color:#555; }\r\n.filter-group select, .filter-group input { padding:6px 8px; }\r\n\r\n.results-table { width:100%; border-collapse:collapse; margin-top:10px; }\r\n.results-table th, .results-table td { border:1px solid #ddd; padding:8px 10px; text-align:left; font-size:13px; }\r\n.results-table th { background:#f7fafc; }\r\n.clickable { cursor:pointer; }\r\n.clickable:hover { background:#f0fff4; }\r\n.abnormal { background:#fee2e2; font-weight:600; }\r\n.normal { background:#ecfdf5; }\r\n</style>","// src/shared/dateFormat.js\r\n\r\n/**\r\n * Format a timestamp or ISO string to \"DD MMM YYYY, HH:mm\" (e.g. \"29 Oct 2025, 14:45\")\r\n * @param {string|number|Date} value\r\n * @param {object} options - Optional Intl.DateTimeFormat options\r\n * @returns {string}\r\n */\r\nexport function formatDate(value, options = {}) {\r\n  if (!value) return '-'\r\n\r\n  const date = value instanceof Date ? value : new Date(value)\r\n  if (isNaN(date)) return '-'\r\n\r\n  return new Intl.DateTimeFormat('en-MY', {\r\n    year: 'numeric',\r\n    month: 'short',\r\n    day: '2-digit',\r\n    hour: '2-digit',\r\n    minute: '2-digit',\r\n    hour12: false,\r\n    ...options,\r\n  }).format(date)\r\n}\r\n\r\n// date-only version.\r\nexport function formatDateShort(value) {\r\n  return formatDate(value, { hour: undefined, minute: undefined })\r\n}\r\n","import { render } from \"./AnalyticsAllDashboard2.vue?vue&type=template&id=a5eb9ffe&scoped=true\"\nimport script from \"./AnalyticsAllDashboard2.vue?vue&type=script&lang=js\"\nexport * from \"./AnalyticsAllDashboard2.vue?vue&type=script&lang=js\"\n\nimport \"./AnalyticsAllDashboard2.vue?vue&type=style&index=0&id=a5eb9ffe&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-a5eb9ffe\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"abnormality-dashboard\">\r\n    <h2>Company Lab Abnormality Dashboard (Latest Session per Staff)</h2>\r\n\r\n    <div class=\"top-controls\">\r\n      <select v-model=\"selectedYear\">\r\n        <option :value=\"null\">All Years</option>\r\n        <option v-for=\"y in years\" :key=\"y\">{{ y }}</option>\r\n      </select>\r\n\r\n      <div class=\"summary\">\r\n        {{ latestSessionsCount }} unique staff checked  \r\n        <strong class=\"red\" v-if=\"totalAbnormal > 0\">{{ totalAbnormal }} abnormal results found</strong>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"groups-grid\">\r\n      <div class=\"group-card\">\r\n        <h3>Cholesterol Profile</h3>\r\n        <canvas ref=\"cholesterolCanvas\"></canvas>\r\n      </div>\r\n\r\n      <div class=\"group-card\">\r\n        <h3>Liver Function</h3>\r\n        <canvas ref=\"liverCanvas\"></canvas>\r\n      </div>\r\n\r\n      <div class=\"group-card\">\r\n        <h3>Glucose</h3>\r\n        <canvas ref=\"glucoseCanvas\"></canvas>\r\n      </div>\r\n\r\n      <div class=\"group-card\">\r\n        <h3>Renal Panel</h3>\r\n        <canvas ref=\"renalCanvas\"></canvas>\r\n      </div>\r\n\r\n      <div class=\"group-card wide\">\r\n        <h3>Other Important Tests</h3>\r\n        <canvas ref=\"otherCanvas\"></canvas>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport cfg from '@/apiConfig';\r\nimport Chart from 'chart.js/auto';\r\nimport { handleUnauthorized } from '@/shared/handleUnauthorized';\r\n\r\nimport ChartDataLabels from 'chartjs-plugin-datalabels';\r\nChart.register(ChartDataLabels);\r\n\r\nconst GROUPS = {\r\n  cholesterol: {\r\n    title: 'Cholesterol Profile',\r\n    tests: [\r\n      { label: 'LDL (>3.4)', field: 'ldl_result' },\r\n      { label: 'Total Chol (>5.2)', field: 'tchol_result' },\r\n      { label: 'HDL (<1.0 M / <1.3 F)', field: 'hdl_result' },\r\n      { label: 'Triglycerides (>1.7)', field: 'tg_result' },\r\n    ],\r\n    color: '#f97316'\r\n  },\r\n  liver: {\r\n    title: 'Liver Function',\r\n    tests: [\r\n      { label: 'ALT (<66)', field: 'alt_result' },\r\n      { label: 'AST (<51)', field: 'ast_result' },\r\n      { label: 'GGT (<51)', field: 'ggt_result' },\r\n      { label: 'Bilirubin (>21)', field: 'tbil_result' },\r\n    ],\r\n    color: '#dc2626'\r\n  },\r\n  glucose: {\r\n    title: 'Glucose',\r\n    tests: [\r\n      { label: 'FBS (>5.6)', field: 'fbs_result' },\r\n      { label: 'RBS (>7.8)', field: 'rbs_result' },\r\n    ],\r\n    color: '#7c3aed'\r\n  },\r\n  renal: {\r\n    title: 'Renal Panel',\r\n    tests: [\r\n      { label: 'Creatinine (>115)', field: 'creat_result' },\r\n      { label: 'Urea (>7.1)', field: 'bu_result' },\r\n      { label: 'Uric Acid (>420)', field: 'ua_result' },\r\n    ],\r\n    color: '#0891b2'\r\n  },\r\n  other: {\r\n    title: 'Other Important Tests',\r\n    tests: [\r\n      { label: 'Sodium (135-145)', field: 'na_result' },\r\n      { label: 'Potassium (3.5-5.0)', field: 'k_result' },\r\n      { label: 'Chloride (98-107)', field: 'cl_result' },\r\n    ],\r\n    color: '#6b7280'\r\n  }\r\n};\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      selectedYear: null,\r\n      latestPerStaff: [], \r\n      charts: {},\r\n      loading: true\r\n    };\r\n  },\r\n  computed: {\r\n    years() {\r\n      // Safely map dates\r\n      const y = [...new Set(this.latestPerStaff\r\n        .filter(r => r.session_date)\r\n        .map(r => new Date(r.session_date).getFullYear())\r\n      )];\r\n      return y.sort((a,b) => b-a);\r\n    },\r\n    filtered() {\r\n      if (!this.selectedYear) return this.latestPerStaff;\r\n      return this.latestPerStaff.filter(r => new Date(r.session_date).getFullYear() === this.selectedYear);\r\n    },\r\n    latestSessionsCount() { return this.filtered.length; },\r\n    totalAbnormal() {\r\n      let count = 0;\r\n      Object.values(GROUPS).forEach(g => {\r\n        g.tests.forEach(t => {\r\n          // Case insensitive check just in case\r\n          count += this.filtered.filter(r => r[t.field]?.toLowerCase() === 'abnormal').length;\r\n        });\r\n      });\r\n      return count;\r\n    }\r\n  },\r\n  watch: {\r\n    selectedYear() { this.renderAll(); }\r\n  },\r\n  async mounted() {\r\n    await this.loadLatestPerStaff();\r\n    this.renderAll();\r\n  },\r\n  methods: {\r\n    async loadLatestPerStaff() {\r\n      this.loading = true;\r\n      try {\r\n        const res = await fetch(`${cfg.API_BASE_URL}/admin/stats/latest-lab-per-staff`, {\r\n          headers: { Authorization: `Bearer ${localStorage.getItem('jwt_token')}` }\r\n        });\r\n        if (!res.ok) throw new Error(res.statusText);\r\n        if (handleUnauthorized(res)) return;\r\n\r\n        const json = await res.json();\r\n        this.latestPerStaff = json.results || [];\r\n\r\n        // ============================================================\r\n        // DEBUG: INJECT A FAKE \"ALL ABNORMAL\" USER TO TEST CHARTS\r\n        // ============================================================\r\n        // this.latestPerStaff.push({\r\n        //     staff_email: \"all_abnormal\",\r\n        //     session_date: \"2025-01-01\",\r\n        //     // Glucose\r\n        //     fbs_result: \"Abnormal\",\r\n        //     rbs_result: \"Abnormal\",\r\n        //     // Renal\r\n        //     creat_result: \"Abnormal\",\r\n        //     bu_result: \"Abnormal\",\r\n        //     ua_result: \"Abnormal\",\r\n        //     // Other\r\n        //     na_result: \"Abnormal\",\r\n        //     k_result: \"Abnormal\",\r\n        //     cl_result: \"Abnormal\",\r\n        //     // Cholesterol\r\n        //     ldl_result: \"Abnormal\",\r\n        //     tchol_result: \"Abnormal\",\r\n        //     tg_result: \"Abnormal\",\r\n        //     hdl_result: \"Abnormal\",\r\n        //     // Liver\r\n        //     alt_result: \"Abnormal\",\r\n        //     ast_result: \"Abnormal\"\r\n        // });\r\n        // ============================================================\r\n\r\n        console.log(\"Data Loaded:\", this.latestPerStaff.length, \"rows\");\r\n        // console.log(\"Data Loaded:\", this.latestPerStaff);\r\n      } catch (e) {\r\n        console.error(\"API Error:\", e);\r\n        this.latestPerStaff = [];\r\n      }\r\n      this.loading = false;\r\n    },\r\n\r\n    renderAll() {\r\n      this.$nextTick(() => {\r\n        this.destroyAll();\r\n        Object.keys(GROUPS).forEach(key => {\r\n            try {\r\n                this.renderGroup(key);\r\n            } catch (err) {\r\n                console.error(`Failed to render chart for ${key}:`, err);\r\n            }\r\n        });\r\n      });\r\n    },\r\n\r\n    destroyAll() {\r\n      Object.values(this.charts).forEach(c => c?.destroy());\r\n      this.charts = {};\r\n    },\r\n\r\n    renderGroup(groupKey) {\r\n      const group = GROUPS[groupKey];\r\n      // This constructs the ref name: 'cholesterol' + 'Canvas' = 'cholesterolCanvas'\r\n      const canvas = this.$refs[groupKey + 'Canvas'];\r\n\r\n      // Safety Check: If HTML ref doesn't match, warn and return instead of crashing\r\n      if (!canvas) {\r\n        console.warn(`CANVAS MISSING: Could not find <canvas ref=\"${groupKey}Canvas\"> in your HTML.`);\r\n        return;\r\n      }\r\n\r\n      const data = this.filtered;\r\n      const total = data.length || 1;\r\n\r\n      const labels = [];\r\n      const counts = [];\r\n      const percents = [];\r\n\r\n      group.tests.forEach(t => {\r\n        // 1. Case Insensitive Check for 'Abnormal'\r\n        const abnormal = data.filter(r => r[t.field]?.toLowerCase() === 'abnormal').length;\r\n        \r\n        // 2. Logic: Always push label, so the chart exists even if count is 0\r\n        labels.push(t.label);\r\n        counts.push(abnormal);\r\n        percents.push(Number((abnormal / total * 100).toFixed(1)));\r\n      });\r\n\r\n      this.charts[groupKey] = new Chart(canvas, {\r\n        type: 'bar',\r\n        data: {\r\n          labels,\r\n          datasets: [{\r\n            data: percents,\r\n            backgroundColor: group.color + 'cc',\r\n            borderColor: group.color,\r\n            borderWidth: 2,\r\n            borderRadius: 8,\r\n            barThickness: 32\r\n          }]\r\n        },\r\n        options: {\r\n          indexAxis: 'y',\r\n          responsive: true,\r\n          maintainAspectRatio: false,\r\n          plugins: {\r\n            legend: { display: false },\r\n            tooltip: { \r\n                callbacks: { \r\n                    label: c => `${c.parsed.x}% (${counts[c.dataIndex]} staff)` \r\n                } \r\n            },\r\n            datalabels: {\r\n              anchor: 'end',\r\n              align: 'end',\r\n              color: '#1a1a1a',\r\n              font: { weight: 'bold' },\r\n              formatter: (val, ctx) => {\r\n                 // Only show number if greater than 0\r\n                 return counts[ctx.dataIndex] > 0 ? counts[ctx.dataIndex] : '';\r\n              }\r\n            }\r\n          },\r\n          scales: {\r\n            x: { \r\n                max: 100, \r\n                ticks: { callback: v => v + '%' },\r\n                beginAtZero: true \r\n            },\r\n            y: { ticks: { font: { size: 12 } } }\r\n          }\r\n        }\r\n      });\r\n    }\r\n  },\r\n  beforeUnmount() { this.destroyAll(); }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.abnormality-dashboard { padding: 24px; background: #f9fafb; min-height: 100vh; }\r\nh2 { text-align: center; margin-bottom: 12px; color: #1e293b; }\r\n.top-controls { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; flex-wrap: wrap; gap: 16px; }\r\n.summary { font-size: 18px; font-weight: 600; }\r\n.red { color: #dc2626; }\r\n\r\n.groups-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(380px, 1fr));\r\n  gap: 24px;\r\n}\r\n.group-card {\r\n  background: white;\r\n  border-radius: 16px;\r\n  padding: 20px;\r\n  box-shadow: 0 10px 25px rgba(0,0,0,0.1);\r\n}\r\n.group-card h3 {\r\n  text-align: center;\r\n  margin: 0 0 20px 0;\r\n  color: #1e293b;\r\n  font-size: 18px;\r\n}\r\n.wide { grid-column: 1 / -1; }\r\n\r\ncanvas { height: 220px !important; }\r\n</style>","import { render } from \"./AnalyticsAllCharts2.vue?vue&type=template&id=099bc841&scoped=true\"\nimport script from \"./AnalyticsAllCharts2.vue?vue&type=script&lang=js\"\nexport * from \"./AnalyticsAllCharts2.vue?vue&type=script&lang=js\"\n\nimport \"./AnalyticsAllCharts2.vue?vue&type=style&index=0&id=099bc841&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-099bc841\"]])\n\nexport default __exports__","import { render } from \"./AnalyticsAllPage.vue?vue&type=template&id=d5af0556\"\nimport script from \"./AnalyticsAllPage.vue?vue&type=script&lang=js\"\nexport * from \"./AnalyticsAllPage.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <div class=\"manage-users\">\n    <h2>Manage Users</h2>\n\n    <div class=\"filters\">\n      <label for=\"roleFilter\">Filter by Role:</label>\n      <select v-model=\"roleFilter\" id=\"roleFilter\">\n        <option value=\"\">All</option>\n        <option value=\"doctor\">Doctor</option>\n        <option value=\"staff\">Staff</option>\n        <option value=\"admin\">Admin</option>\n      </select>\n    </div>\n    <div class=\"actions\" style=\"margin-bottom: 18px;\">\n      <button @click=\"registerUser\" style=\"color: white; background: blue;\">Register New User</button>\n      <button @click=\"$router.push('/dashboard')\" style=\"margin-left: 8px;\">Back to Dashboard</button>\n    </div>\n    <table>\n      <thead>\n        <tr>\n          <th>User ID</th>\n          <th>Full Name</th>\n          <th>Email</th>\n          <th>Role</th>\n          <!-- <th>Password</th> -->\n          <th>Actions</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-if=\"filteredUsers.length === 0\">\n          <td colspan=\"5\" class=\"text-center py-4\">Loading...</td>\n        </tr>\n        <template v-else>\n          <tr v-for=\"user in filteredUsers\" :key=\"user.email\">\n            <td>{{ user.user_id }}</td>\n            <td>{{ user.fullname || '-' }}</td>\n            <td>\n              {{ user.email }}\n              \n              <span v-if=\"user.email === currentAdmin\" style=\"color: grey\">\n                <i>(self)</i>\n              </span>\n            </td>\n            <td>{{ formatRole(user.role) }}</td>\n            <!-- <td>\n              <span v-if=\"showPassword[user.email]\">{{ user.password }}</span>\n              <span v-else></span>\n              <button @click=\"togglePassword(user.email)\" style=\"margin-left: 8px;\">\n                {{ showPassword[user.email] ? 'Hide' : 'Show' }}\n              </button>\n          </td> -->\n            <td class=\"actions\">\n              <button @click=\"editUser(user)\">Edit</button>\n              <button @click=\"$router.push(`/admin/view-user/${user.email}`)\">View Info (role-based)</button>\n              <button @click=\"$router.push(`/reset-password/${user.user_id}/${user.email}`)\">Reset Password</button>\n              <button class=\"danger\" @click=\"deleteUser(user)\">Delete</button>\n            </td>\n          </tr>\n        </template>\n      </tbody>\n    </table>\n  </div>\n\n</template>\n\n<script>\nimport cfg from '@/apiConfig';\nimport { handleUnauthorized } from '@/shared/handleUnauthorized';\nexport default {\n  name: 'ManageUsers',\n  data() {\n    return {\n      baseUrl: cfg.API_BASE_URL,\n      roleFilter: '',\n      users: [] // will be populated from backend\n    };\n  },\n  computed: {\n    filteredUsers() {\n      return this.roleFilter\n        ? this.users.filter(u => u.role === this.roleFilter)\n        : this.users;\n    },\n    currentAdmin() {\n      return JSON.parse(localStorage.getItem('user_info')).email;\n    }\n  },\n  methods: {\n    registerUser() {\n      this.$router.push('/admin/register-user');\n    },\n    \n    formatRole(role) {\n      if (!role) return 'Unknown';\n      const map = {\n        admin: 'Admin',\n        doctor: 'Doctor',\n        staff: 'Staff'\n      };\n      return map[role] || role.charAt(0).toUpperCase() + role.slice(1);\n    },\n\n    editUser(user) {\n      this.$router.push(`/admin/edit-user/${user.user_id}`);\n    },\n\n    deleteUser(user) {\n      if (confirm(`Delete ${user.fullname}?`)) {\n        // const baseUrl = cfg.API_BASE_URL;\n        const token = localStorage.getItem('jwt_token');\n\n        fetch(`${this.baseUrl}/admin/user/${user.user_id}`, {\n          method: 'DELETE',\n          headers: {\n        'Authorization': `Bearer ${token}`,\n        'Content-Type': 'application/json'\n          }\n        })\n        .then(res => {\n          if (!res.ok) throw new Error('Failed to delete user');\n          // reload the page after successful deletion\n          window.location.reload();\n        })\n        .catch(err => {\n          alert('Error deleting user: ' + err.message);\n        });\n      }\n    }\n  },\n  \n  mounted() {\n  const token = localStorage.getItem('jwt_token');\n  // const baseUrl = cfg.API_BASE_URL;\n\n  fetch(`${this.baseUrl}/admin/users`, {\n    method: 'GET',\n    headers: {\n      'Authorization': `Bearer ${token}`,\n      'Content-Type': 'application/json'\n    }\n  })\n    .then(res => {\n      if (handleUnauthorized(res)) return;\n\n      return res.json();\n    })\n    .then(data => {\n      // console.log('Fetched users:', data);\n      this.users = data;\n    })\n    .catch(err => {\n      console.error('Failed to fetch users:', err);\n    });\n  }\n\n};\n</script>\n\n<style scoped>\n.manage-users {\n  padding: 24px;\n}\n\nh2 {\n  font-size: 22px;\n  margin-bottom: 16px;\n}\n\ntable {\n  width: 100%;\n  border-collapse: collapse;\n  background: white;\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);\n}\n\nth,\ntd {\n  padding: 12px 16px;\n  text-align: left;\n  border-bottom: 1px solid #e2e8f0;\n}\n\nth {\n  background-color: #f7fafc;\n  color: #2d3748;\n  font-weight: 600;\n}\n\n.actions {\n  text-align: center;\n  display: flex;\n  gap: 8px;\n}\n\nbutton {\n  padding: 6px 12px;\n  font-size: 13px;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  background: #edf2f7;\n  color: #2d3748;\n  transition: background 0.2s ease;\n}\n\nbutton:hover {\n  background: #e2e8f0;\n}\n\nbutton.danger {\n  background: #feb2b2;\n  color: #742a2a;\n}\n\nbutton.danger:hover {\n  background: #fc8181;\n}\n</style>\n","import { render } from \"./ManageUsers.vue?vue&type=template&id=6bbb021d&scoped=true\"\nimport script from \"./ManageUsers.vue?vue&type=script&lang=js\"\nexport * from \"./ManageUsers.vue?vue&type=script&lang=js\"\n\nimport \"./ManageUsers.vue?vue&type=style&index=0&id=6bbb021d&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6bbb021d\"]])\n\nexport default __exports__","<template>\n  <div class=\"reset-pass\">\n    <h2>{{ title }}</h2>\n\n    <form @submit.prevent=\"resetPassword\">\n      <div>\n        <label>User ID: </label>\n        <span><b>{{ userId }}</b></span>\n      </div>\n      <div>\n        <label>Email: </label>\n        <span><b>{{ userEmail }}</b></span>\n      </div>\n      <div>\n        <label for=\"newPassword\">New Password: </label>\n        <input type=\"text\" v-model=\"newPassword\" required />\n      </div>\n\n      <button type=\"submit\">Reset Password</button>\n      <button type=\"button\" @click=\"$router.back()\" style=\"margin-left: 1rem;\">Back</button>\n    </form>\n  </div>\n</template>\n\n<script>\nimport cfg from '@/apiConfig';\nexport default {\n  data() {\n    return {\n      baseUrl: cfg.API_BASE_URL,\n      newPassword: '',  // New password entered by the admin or user\n      isAdmin: false,  // To check if the user is admin or not\n      userId: '',  // store the userId (either the logged-in user or the user being managed by admin)\n      userEmail: '', // store the email of the user whose password is being reset\n      adminName: ''\n    };\n  },\n  computed: {\n    title() {\n      return this.isAdmin\n        ? 'Reset Password - Action by (Admin): ' + this.adminName // admin specific title\n        : 'Reset Your Password'; // regular user title\n    }\n  },\n  mounted() {\n    const userInfo = JSON.parse(localStorage.getItem('user_info'));\n    const userId = this.$route.params.userId || userInfo.id; // if admin is managing another user's reset, get userId from route params\n    this.userEmail = this.$route.params.userEmail || userInfo.email; // if admin is managing another user's reset, get email from route params\n\n    this.isAdmin = userInfo.role === 'admin'; // Check if current user is admin\n    this.adminName = userInfo.fullname; // Set the admin's name\n    this.userId = userId;  // Set the userId for password reset (either current user or another user for admin)\n  },\n  methods: {\n    resetPassword() {\n      // // validate password length\n      // if (this.newPassword.length < 6) {\n      //   alert('Password must be at least 6 characters long');\n      //   return;\n      // }\n      const confirmation = window.confirm('Do you sure you want to reset password for this user?');\n      if (!confirmation) {\n        alert('Password reset cancelled.');\n        return;\n      }\n\n      const url = this.isAdmin\n        ? `${this.baseUrl}/admin/user/reset-password/${this.userId}`  // Admin can reset any user's password\n        : `${this.baseUrl}/user/reset-password/${this.userId}`; // Regular user can only reset their own password\n\n      // Send request to reset the password\n      fetch(url, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${localStorage.getItem('jwt_token')}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({ new_password: this.newPassword })\n      })\n      .then(res => res.json())\n      .then(() => {\n        alert('Password reset successfully');\n        this.$router.push('/admin/manage-users');\n      })\n      .catch(err => {\n        console.error('Error resetting password:', err);\n      });\n    }\n  }\n};\n</script>\n\n<style scoped>\n.reset-pass {\n    max-width: 400px;\n    margin: 2rem auto;\n    padding: 2rem;\n    border: 1px solid #ccc;\n    border-radius: 8px;\n}\n.reset-pass form > div {\n    margin-bottom: 1rem;\n}\n.success {\n    color: green;\n}\n.error {\n    color: red;\n}\n</style>","import { render } from \"./ResetPassword.vue?vue&type=template&id=a29bab2a&scoped=true\"\nimport script from \"./ResetPassword.vue?vue&type=script&lang=js\"\nexport * from \"./ResetPassword.vue?vue&type=script&lang=js\"\n\nimport \"./ResetPassword.vue?vue&type=style&index=0&id=a29bab2a&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-a29bab2a\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"register-user\">\r\n    <h2>Register User</h2>\r\n\r\n    <form @submit.prevent=\"registerUser\">\r\n      <div>\r\n        <label for=\"fullname\">Full Name: </label>\r\n        <input v-model.trim=\"form.fullname\" id=\"fullname\" type=\"text\" required />\r\n      </div>\r\n\r\n      <div>\r\n        <label :for=\"email\" v-if=\"this.isAdminSelected\">Username: </label>\r\n        <label :for=\"email\" v-else>Email: </label>\r\n        <input v-model.trim=\"form.email\" id=\"email\" :type=\"this.isAdminSelected ? 'text' : 'email'\" required />\r\n        <br><small v-if=\"this.isAdminSelected\">(Username instead of email for Admin account to avoid confusion)</small>\r\n      </div>\r\n\r\n      <div>\r\n        <label for=\"password\">Password: </label>\r\n        <input v-model=\"form.password\" id=\"password\" type=\"text\" required />\r\n      </div>\r\n\r\n      <div>\r\n        <label for=\"role\">Role: </label>\r\n        <select v-model=\"form.role\" id=\"role\" required>\r\n          <option value=\"\" disabled>Select role</option>\r\n            <option value=\"staff\">Staff</option>\r\n            <option value=\"doctor\">Doctor</option>\r\n            <option value=\"admin\">Admin</option>\r\n        </select>\r\n      </div>\r\n\r\n      <!-- init blocks (only for Staff) -->\r\n      <div v-if=\"isStaff\" class=\"divider\"></div>\r\n\r\n      <div v-if=\"isStaff\" class=\"option-line\">\r\n        <label>\r\n          <input type=\"checkbox\" v-model=\"form.init_staff_profile\" />\r\n          Create staff profile record\r\n        </label>\r\n        <small class=\"muted\">Creates a minimal row in <code>staff</code> if not present.</small>\r\n      </div>\r\n\r\n      <div v-if=\"isStaff\" class=\"option-line\">\r\n        <label>\r\n          <input type=\"checkbox\" v-model=\"form.init_session\" />\r\n          Create initial session now\r\n        </label>\r\n        <small class=\"muted\">Initialize session-linked tables (empty).</small>\r\n      </div>\r\n\r\n      <div v-if=\"isStaff && form.init_session\" class=\"grid2\">\r\n        <label>\r\n          Session Date\r\n          <input type=\"date\" v-model=\"form.session_date\" />\r\n        </label>\r\n\r\n        <label>\r\n          Session Type\r\n          <select v-model=\"form.session_type\">\r\n            <option value=\"annual\">Annual</option>\r\n            <option value=\"pre-employment\">Pre-employment</option>\r\n            <option value=\"followup\">Follow-up</option>\r\n            <option value=\"return-to-work\">Return to Work</option>\r\n            <option value=\"ad-hoc\">Ad-hoc</option>\r\n          </select>\r\n        </label>\r\n\r\n        <label>\r\n          Status\r\n          <select v-model=\"form.session_status\">\r\n            <option value=\"draft\">draft</option>\r\n            <option value=\"submitted\">submitted</option>\r\n            <option value=\"locked\">locked</option>\r\n          </select>\r\n        </label>\r\n\r\n        <!-- <label class=\"inline\">\r\n          <input type=\"checkbox\" v-model=\"form.duplicate_recent\" />\r\n          Duplicate data from previous session (if any)\r\n        </label> -->\r\n      </div>\r\n\r\n      <div class=\"actions\">\r\n        <button type=\"submit\" :disabled=\"submitting\">\r\n          {{ submitting ? 'Registering' : 'Register' }}\r\n        </button>\r\n        <button type=\"button\" class=\"ghost\" @click=\"$router.push('/admin/manage-users')\">\r\n          Back\r\n        </button>\r\n      </div>\r\n    </form>\r\n\r\n    <div v-if=\"message\" :class=\"{ success: success, error: !success }\" class=\"msg\">\r\n      {{ message }}\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport cfg from '@/apiConfig';\r\n\r\nexport default {\r\n  name: \"RegisterUser\",\r\n  data() {\r\n    return {\r\n      baseUrl: cfg.API_BASE_URL,\r\n      submitting: false,\r\n      isAdminSelected: false,\r\n      form: {\r\n        fullname: \"\",\r\n        email: \"\",\r\n        password: \"\",\r\n        role: \"\",\r\n\r\n        // optional extras (only used when role === 'staff')\r\n        init_staff_profile: true,\r\n        init_session: true,\r\n        session_date: new Date().toISOString().slice(0, 10),\r\n        session_type: \"annual\",\r\n        session_status: \"draft\",\r\n        duplicate_recent: false,\r\n      },\r\n      message: \"\",\r\n      success: false,\r\n    };\r\n  },\r\n  computed: {\r\n    isStaff() {\r\n      return this.form.role === \"staff\";\r\n    },\r\n  },\r\n  watch: {\r\n    // if user switches away from staff, clear staff-only options\r\n    \"form.role\"(v) {\r\n      if (v !== \"staff\") {\r\n        this.form.init_staff_profile = true;\r\n        this.form.init_session = true;\r\n        this.form.duplicate_recent = false;\r\n      }\r\n\r\n      if (v === \"admin\") this.isAdminSelected = true;\r\n      else this.isAdminSelected = false;\r\n    },\r\n  },\r\n  methods: {\r\n    async registerUser() {\r\n      this.message = \"\";\r\n      this.success = false;\r\n      this.submitting = true;\r\n\r\n      try {\r\n        const token = localStorage.getItem(\"jwt_token\");\r\n\r\n        // build payload\r\n        const body = {\r\n          fullname: this.form.fullname,\r\n          email: this.form.email,\r\n          password: this.form.password,\r\n          role: this.form.role,\r\n\r\n          // optional provisioning (backend will ignore when role!=staff)\r\n          init_staff_profile: this.form.init_staff_profile ?? true,\r\n          init_session: this.isStaff && !!this.form.init_session,\r\n          session_date: this.isStaff && this.form.init_session ? this.form.session_date : null,\r\n          session_type: this.isStaff && this.form.init_session ? this.form.session_type : null,\r\n          session_status: this.isStaff && this.form.init_session ? this.form.session_status : null,\r\n          duplicate_recent: this.isStaff && this.form.init_session ? !!this.form.duplicate_recent : false,\r\n        };\r\n\r\n        const response = await fetch(`${this.baseUrl}/admin/register`, {\r\n          method: \"POST\",\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          body: JSON.stringify(body),\r\n        });\r\n\r\n        if (!response.ok) {\r\n          const txt = await response.text();\r\n          throw new Error(txt || \"Registration failed\");\r\n        }\r\n\r\n        // success UX\r\n        this.message = \"User registered successfully\";\r\n        this.success = true;\r\n\r\n        // reset form (keep role handy)\r\n        this.form = {\r\n          fullname: \"\",\r\n          email: \"\",\r\n          password: \"\",\r\n          role: \"\",\r\n          init_staff_profile: false,\r\n          init_session: false,\r\n          session_date: new Date().toISOString().slice(0, 10),\r\n          session_type: \"annual\",\r\n          session_status: \"draft\",\r\n          duplicate_recent: false,\r\n        };\r\n      } catch (err) {\r\n        this.message = err.message || \"Registration failed\";\r\n        this.success = false;\r\n      } finally {\r\n        this.submitting = false;\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.register-user {\r\n  max-width: 560px;\r\n  margin: 2rem auto;\r\n  padding: 1.5rem 1.25rem;\r\n  border: 1px solid #e5e7eb;\r\n  border-radius: 10px;\r\n  background: #fff;\r\n}\r\n.register-user form > div { margin-bottom: 1rem; }\r\n.inline { display: flex; align-items: center; gap: .5rem; }\r\n.actions { display: flex; gap: .75rem; margin-top: .5rem; }\r\n.muted { color: #64748b; font-size: 12px; }\r\n.divider { height: 1px; background: #e5e7eb; margin: .5rem 0 1rem; }\r\n.option-line { display: flex; flex-direction: column; gap: .25rem; }\r\nbutton { padding: .5rem .9rem; border-radius: 6px; border: 1px solid #cbd5e1; }\r\nbutton.ghost { background: transparent; }\r\nbutton[type=\"submit\"] { background: #2563eb; color:#fff; border-color:#2563eb; }\r\n.msg { margin-top: .75rem; }\r\n.success { color: #15803d; }\r\n.error { color: #b91c1c; }\r\n</style>\r\n","import { render } from \"./RegisterUser.vue?vue&type=template&id=acb2d5b2&scoped=true\"\nimport script from \"./RegisterUser.vue?vue&type=script&lang=js\"\nexport * from \"./RegisterUser.vue?vue&type=script&lang=js\"\n\nimport \"./RegisterUser.vue?vue&type=style&index=0&id=acb2d5b2&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-acb2d5b2\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"edit-user\">\r\n    <h2>Edit User Info</h2>\r\n    <form @submit.prevent=\"updateUser\">\r\n    <div>\r\n      <label for=\"fullname\">Full Name: </label><br>\r\n      <input type=\"text\" v-model=\"user.fullname\" required /><br>\r\n      <span v-if=\"originalUser.fullname && user.fullname !== originalUser.fullname\" style=\"color: #888;\">\r\n        (Current: {{ originalUser.fullname }})\r\n      </span>\r\n    </div>\r\n        \r\n    <div>\r\n      <label :for=\"email\" v-if=\"this.isAdminSelected\">Username: </label>\r\n      <label :for=\"email\" v-else>Email: </label>\r\n      <br>\r\n      <input :type=\"this.isAdminSelected ? 'text' : 'email'\" v-model=\"user.email\" required />\r\n      <br>\r\n      <span v-if=\"originalUser.email && user.email !== originalUser.email\" style=\"color: #888;\">\r\n        (Current: {{ originalUser.email }})\r\n      </span>\r\n      <br><small v-if=\"this.isAdminSelected\">(Username instead of email for Admin account to avoid confusion)</small>\r\n    </div>\r\n      \r\n      <div>\r\n        <label for=\"role\">Role: </label>\r\n        <select v-model=\"user.role\" required>\r\n          <option value=\"admin\">Admin</option>\r\n          <option value=\"doctor\">Doctor</option>\r\n          <option value=\"staff\">Staff</option>\r\n          <option value=\"restricted\">Restricted</option>\r\n        </select>\r\n        <span v-if=\"originalUser.role && user.role !== originalUser.role\" style=\"color: #888;\">\r\n          (Current: {{ originalUser.role }})\r\n        </span>\r\n      </div>\r\n\r\n      <button class=\"action-btn\" type=\"submit\" :disabled=\"!isModalChanged\">Save Changes</button>\r\n      <button type=\"button\" @click=\"$router.push('/admin/manage-users')\" style=\"margin-left: 1rem;\">Back</button>\r\n    </form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport cfg from '@/apiConfig';\r\nimport { handleUnauthorized } from '@/shared/handleUnauthorized';\r\nexport default {\r\n  data() {\r\n    return {\r\n      baseUrl: cfg.API_BASE_URL,\r\n      isAdminSelected: false,\r\n      user: {\r\n        user_id: '',\r\n        fullname: '',\r\n        email: '',\r\n        role: ''\r\n      },\r\n      originalUser: {\r\n        fullname: '',\r\n        email: '',\r\n        role: ''\r\n      }\r\n    };\r\n  },\r\n  mounted() {\r\n    const userId = this.$route.params.userId;  // get user ID from the route parameter\r\n    this.fetchUserInfo(userId); \r\n  },\r\n  computed: {\r\n    isModalChanged() {\r\n      // Check if ANY of the tracked properties have changed\r\n      return (\r\n        this.user.fullname !== this.originalUser.fullname ||\r\n        this.user.email !== this.originalUser.email ||\r\n        this.user.role !== this.originalUser.role\r\n      );\r\n    }\r\n  },\r\n  watch: {\r\n    \"user.role\"(v) {\r\n      if (v === 'admin') this.isAdminSelected = true;\r\n      else this.isAdminSelected = false;\r\n    }\r\n  },\r\n  methods: {\r\n    fetchUserInfo(userId) {\r\n      // const baseUrl = cfg.API_BASE_URL;\r\n\r\n      fetch(`${this.baseUrl}/admin/user/${userId}`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${localStorage.getItem('jwt_token')}`,\r\n          'Content-Type': 'application/json'\r\n        }\r\n      })\r\n      .then(res => {\r\n        if (handleUnauthorized(res)) return;\r\n\r\n        return res.json();\r\n      })\r\n      .then(data => {\r\n        this.user = data;  // populate the form with the current user data\r\n        this.originalUser.fullname = data.fullname; // store original fullname\r\n        this.originalUser.email = data.email; // store original email\r\n        this.originalUser.role = data.role; // store original role\r\n      })\r\n      .catch(err => {\r\n        console.error('Error fetching user data:', err);\r\n      });\r\n    },\r\n    updateUser() {\r\n      // const baseUrl = cfg.API_BASE_URL;\r\n\r\n      fetch(`${this.baseUrl}/admin/user/${this.user.user_id}`, {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Authorization': `Bearer ${localStorage.getItem('jwt_token')}`,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(this.user)\r\n      })\r\n      .then(res => res.json())\r\n      .then(() => {\r\n        alert('User info updated successfully');\r\n        this.$router.push('/admin/manage-users'); \r\n      })\r\n      .catch(err => {\r\n        console.error('Error updating user info:', err);\r\n      });\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.edit-user {\r\n    max-width: 400px;\r\n    margin: 2rem auto;\r\n    padding: 2rem;\r\n    border: 1px solid #ccc;\r\n    border-radius: 8px;\r\n}\r\n.edit-user form > div {\r\n    margin-bottom: 1rem;\r\n}\r\n.action-btn:disabled {\r\n  background: #cbd5e0 !important;\r\n  color: #2d3748 !important;\r\n  cursor: not-allowed;\r\n  opacity: 0.5 !important;\r\n}\r\n.success {\r\n    color: green;\r\n}\r\n.error {\r\n    color: red;\r\n}\r\n</style>","import { render } from \"./EditUser.vue?vue&type=template&id=3d929ef9&scoped=true\"\nimport script from \"./EditUser.vue?vue&type=script&lang=js\"\nexport * from \"./EditUser.vue?vue&type=script&lang=js\"\n\nimport \"./EditUser.vue?vue&type=style&index=0&id=3d929ef9&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3d929ef9\"]])\n\nexport default __exports__","<template>\n  <div class=\"manage-sessions\">\n    <h2>Manage Sessions</h2> \n\n    <button @click=\"$router.back()\" v-if=\"isFilteredView\" class=\"\">Back</button>\n    <button @click=\"$router.push('/dashboard')\" v-else class=\"\">Back to Dashboard</button>\n\n    <!-- Create Session Modal -->\n    <div v-if=\"isCreateOpen\" class=\"modal-overlay\" @click=\"closeCreateModal\">\n      <div class=\"modal-content\" @click.stop style=\"max-width:540px\">\n        <h3>Create Checkup Session</h3>\n        <form @submit.prevent=\"submitCreate\">\n          <div class=\"grid2\">\n            <label>\n              Staff Email\n              <select v-model=\"createForm.staff_email\" required @change=\"syncDuplicateDefault\">\n                <option v-for=\"staffEmail in staffEmailList\" :key=\"staffEmail.staff_email\" :value=\"staffEmail.staff_email\">\n                  {{ staffEmail.staff_name }} ({{ staffEmail.staff_email }})\n                </option>\n              </select>\n            </label>\n\n            <div>\n              <label>\n                Session Date\n                <!-- <input type=\"date\" v-model=\"createForm.session_date\" required /> -->\n              </label>\n              <!-- max-date: Dec of next year -->\n              <VueDatePicker \n                    v-model=\"createForm.session_date\"\n                    :max-date=\"new Date(new Date().getFullYear() + 1, 11, 31)\"\n                    :year-range=\"[1900, new Date().getFullYear() + 1]\"\n                    auto-apply\n                    :enable-time-picker=\"false\"\n                />\n            </div>\n\n            <label>\n              Type\n              <select v-model=\"createForm.session_type\" required>\n                <option value=\"annual\">Annual</option>\n                <option value=\"pre-employment\">Pre-employment</option>\n                <option value=\"followup\">Follow-up</option>\n                <option value=\"return-to-work\">Return to Work</option>\n                <option value=\"ad-hoc\">Ad-hoc</option>\n              </select>\n            </label>\n\n            <label>\n              Status\n              <select v-model=\"createForm.status\" required>\n                <option value=\"draft\">draft</option>\n                <option value=\"submitted\">submitted</option>\n                <option value=\"locked\">locked</option>\n              </select>\n            </label>\n          </div>\n\n          <label style=\"display:flex;gap:.5rem;align-items:center;margin-top:8px\">\n            <input type=\"checkbox\" v-model=\"createForm.no_forms\" />\n            No forms (doctor follow-up)\n          </label>\n\n          <!-- toggle to choose \"duplicate\" or \"empty\" -->\n          <label style=\"display:flex;gap:.5rem;align-items:center;margin-top:8px\">\n            <input\n              type=\"checkbox\"\n              v-model=\"createForm.duplicate_recent\"\n              :disabled=\"createForm.no_forms || !hasPrevForSelected\"\n            />\n            Duplicate data from previous session\n            <span v-if=\"!hasPrevForSelected\" class=\"muted\"> no previous session found</span>\n          </label>\n\n          <div class=\"modal-actions\">\n            <button type=\"submit\" :disabled=\"creating\">{{ creating ? 'Creating' : 'Create' }}</button>\n            <button type=\"button\" class=\"ghost\" @click=\"closeCreateModal\">Cancel</button>\n          </div>\n        </form>\n      </div>\n    </div>\n\n    <!-- Edit Session Modal -->\n    <div v-if=\"isEditOpen\" class=\"modal-overlay\" @click=\"closeEditModal\">\n      <div class=\"modal-content\" @click.stop style=\"max-width:540px\">\n        <h3>Edit Checkup Session</h3>\n        <form @submit.prevent=\"submitEdit\">\n          <div class=\"grid2\">\n            <label>\n              Staff (read-only)\n              <input type=\"text\" :value=\"editForm.staff_email\" disabled />\n            </label>\n\n            <label v-if=\"isAdminRole\">\n              Assigned Doctor\n              <select v-model=\"editForm.assigned_doctor_email\">\n                <option v-for=\"doctor in doctorEmailList\" :key=\"doctor.doctor_email\" :value=\"doctor.doctor_email\">\n                  {{ doctor.doctor_name }} ({{ doctor.doctor_email }})\n                </option>\n              </select>\n            </label>\n\n            <label>\n              Session Remarks\n              <textarea v-model=\"editForm.session_remarks\" placeholder=\"Overall session remarks\" :disabled=\"isAdminRole\"></textarea>\n            </label>\n\n            <div v-if=\"isAdminRole\">\n              <label v-if=\"isAdminRole\">Session Date</label>\n                <VueDatePicker \n                    v-model=\"editForm.session_date\"\n                    :max-date=\"new Date(new Date().getFullYear() + 1, 11, 31)\"\n                    :year-range=\"[1900, new Date().getFullYear() + 1]\"\n                    auto-apply\n                    :enable-time-picker=\"false\"\n                />\n            </div>\n\n            <label v-if=\"isAdminRole\">\n              Type\n              <select v-model=\"editForm.session_type\" required>\n                <option value=\"annual\">Annual</option>\n                <option value=\"pre-employment\">Pre-employment</option>\n                <option value=\"followup\">Follow-up</option>\n                <option value=\"return-to-work\">Return to Work</option>\n                <option value=\"ad-hoc\">Ad-hoc</option>\n              </select>\n            </label>\n\n            <label v-if=\"isAdminRole\">\n              Status\n              <select v-model=\"editForm.status\" required>\n                <option value=\"draft\">draft</option>\n                <option value=\"submitted\">submitted</option>\n                <option value=\"locked\">locked</option>\n              </select>\n            </label>\n          </div>\n\n          <div class=\"modal-actions\">\n            <button type=\"submit\" :disabled=\"editing\">\n              {{ editing ? 'Saving' : 'Save Changes' }}\n            </button>\n            <button type=\"button\" class=\"ghost\" @click=\"closeEditModal\">Cancel</button>\n          </div>\n        </form>\n      </div>\n    </div>\n\n    <!-- Top Filter Toolbar -->\n    <div class=\"toolbar\">\n      <input\n        v-model.trim=\"search\"\n        type=\"text\"\n        class=\"search-input\"\n        placeholder=\"Search staff (name or email)\" />\n\n      <div class=\"filters\" style=\"margin-top: 5px;\">\n        <select v-model=\"yearFilter\">\n          <option value=\"\">All Years</option>\n          <option v-for=\"year in availableYears\" :key=\"year\" :value=\"year.toString()\">\n            {{ year }}\n          </option>\n        </select>\n\n        <select v-model=\"typeFilter\">\n          <option value=\"\">All Types</option>\n          <option value=\"annual\">Annual</option>\n          <option value=\"pre-employment\">Pre-employment</option>\n          <option value=\"followup\">Follow-up</option>\n          <option value=\"return-to-work\">Return to Work</option>\n          <option value=\"ad-hoc\">Ad-hoc</option>\n        </select>\n      \n        <select v-model=\"statusFilter\">\n          <option value=\"\">All Status</option>\n          <option value=\"draft\">Draft</option>\n          <option value=\"submitted\">Submitted</option>\n          <option value=\"locked\">Locked</option>\n        </select>\n      </div>\n\n    </div>\n\n    <!-- Pagination -->\n    <div style=\"display:flex;gap:8px;\">\n\n      <div>\n        <button :disabled=\"page<=1 || loading\" @click=\"goFirst\"> First</button>\n        <button :disabled=\"page<=1 || loading\" @click=\"prevPage\"> Prev</button>\n        <span>Page {{ page }} / {{ totalPages || 1 }}</span>\n        <button :disabled=\"page>=totalPages || loading\" @click=\"nextPage\">Next </button>\n        <button :disabled=\"page>=totalPages || loading\" @click=\"goLast\">Last </button>\n      </div>\n      <div class=\"filters\">\n        <select v-model.number=\"pageSize\" @change=\"changePageSize\">\n          <option :value=\"10\">10</option>\n          <option :value=\"20\">20</option>\n          <option :value=\"50\">50</option>\n        </select>\n      </div>\n\n      <div style=\"display: flex; align-items: center; margin-bottom: 8px; justify-content: flex-end;\">\n        <button v-if=\"isAdminRole\" class=\"new-btn\" @click=\"createNewSession\">\n          + New Session\n        </button>\n\n        <button @click=\"showMetadata = !showMetadata\" class=\"new-btn\">\n          {{ showMetadata ? 'Hide Metadata Columns' : 'Show Metadata Columns' }}\n        </button>\n\n        <button @click=\"showHasTables = !showHasTables\" class=\"new-btn\">\n          {{ showHasTables ? 'Hide Has-Forms Columns' : 'Show Has-Forms Columns' }}\n        </button>\n\n        <div>\n          <ExportExcel\n            :rows=\"pagedSessions\"\n            :allRows=\"sessions\"\n            :columns=\"nsColumns\"\n            filename=\"session-list.xlsx\"\n            sheetName=\"Session Data\"\n            title=\"Export Session Columns\"\n          >\n            <template #trigger=\"{ open, disabled }\">\n              <button :disabled=\"disabled\" @click=\"open\" class=\"new-btn\">Export Excel</button>\n            </template>\n          </ExportExcel>\n        </div>  \n      </div>\n\n    </div>\n\n    <!-- Main Table -->\n    <div class=\"table-wrap\" @scroll=\"onTableScroll\">\n      <table>\n        <thead>\n          <tr>\n            <th v-if=\"!isFilteredView\">Staff</th>\n            <th @click=\"toggleDateSort\" style=\"min-width: 110px; cursor:pointer\">\n              Date\n              <span v-if=\"sortDir === 'asc'\"></span>\n              <span v-else></span>\n            </th>\n            <th style=\"width: min-content;\">Type</th>\n            <th style=\"width: min-content;\">Status</th>\n            <th v-if=\"isAdminRole && showMetadata\">Created By</th>\n            <th v-if=\"isAdminRole && showMetadata\">Created At</th>\n            <th v-if=\"isAdminRole && showMetadata\">Updated By</th>\n            <th v-if=\"showMetadata\">Updated At</th>\n            <th v-if=\"showMetadata\">Has Forms (All)</th>\n            <th v-if=\"showHasTables\">Has Forms (Medical History)</th>\n            <th v-if=\"showHasTables\">Has Forms (Lifestyle)</th>\n            <th v-if=\"showHasTables\">Has Forms (Physical Exams)</th>\n            <th v-if=\"showHasTables\">Has Forms (Investigations)</th>\n            <!-- reports column header -->\n            <th class=\"nowrap\">Reports</th>\n            <th style=\"min-width: 120px;\">Doctor Info</th>\n            <th>Action</th>\n          </tr>\n        </thead>\n\n        <tbody>\n          <!-- <tr v-for=\"s in pagedSessions\" :key=\"s.session_id\"> -->\n          <tr v-for=\"(s, i) in pagedSessions\" :key=\"s.session_id ?? i\">\n            <td v-if=\"!isFilteredView\">\n              <div class=\"pair\"><span class=\"v\"><b>{{ s.staff_name }}</b></span></div>\n            </td>\n            <td>{{ formatDate(s.session_date) }}</td>\n            <td>{{ s.session_type }}</td>\n            <td>\n              <span class=\"status-pill\" :class=\"s.status\">{{ s.status }}</span>\n            </td>\n            <td v-if=\"isAdminRole && showMetadata\">{{ s.created_by || '-' }}</td>\n            <td v-if=\"isAdminRole && showMetadata\">{{ formatDate(s.created_at) }}</td>\n            <td v-if=\"isAdminRole && showMetadata\">{{ s.updated_by || '-' }}</td>\n            <td v-if=\"showMetadata\">{{ formatDate(s.updated_at) }}</td>\n            <td v-if=\"showMetadata\">{{ s.has_forms_all ? 'Yes' : 'No' }}</td>\n            <td v-if=\"showHasTables\">\n              <span :style=\"{color: s.has_mh ? '#3e8e41' : '#8b0a1a'}\">{{ s.has_mh ? 'Yes' : 'No' }}</span>\n            </td>\n            <td v-if=\"showHasTables\">\n              <span :style=\"{color: s.has_lifestyle ? '#3e8e41' : '#8b0a1a'}\">{{ s.has_lifestyle ? 'Yes' : 'No' }}</span>\n            </td>\n            <td v-if=\"showHasTables\">\n              <span :style=\"{color: (s.has_pe1 && s.has_pe2) ? '#3e8e41' : '#8b0a1a'}\">{{ (s.has_pe1 && s.has_pe2) ? 'Yes' : 'No' }}</span>\n            </td>\n            <td v-if=\"showHasTables\">\n              <span :style=\"{color: (s.has_investigations && s.has_ilab) ? '#3e8e41' : '#8b0a1a'}\">{{ (s.has_investigations && s.has_ilab) ? 'Yes' : 'No' }}</span>\n            </td>\n            \n            <!-- Reports column -->\n            <td class=\"reports-cell\" @click.stop>\n              <!-- report status pill -->\n              <div class=\"report-pill\">\n                <span v-if=\"reportExists(s)\" class=\"pill ok\">uploaded</span>\n                <span v-else class=\"pill muted\">none</span>\n              </div>\n              \n              <div class=\"report-menu\" @click.stop>\n                <button\n                  class=\"menu-btn\"\n                  @click.stop=\"toggleReportMenu(s.session_id)\"\n                >\n                  Reports \n                </button>\n\n                <!-- dropdown -->\n                <div\n                  class=\"menu-list\"\n                  v-if=\"openReportMenuId === s.session_id\"\n                  @click.stop\n                >\n                  <!-- loader / empty states -->\n                  <div v-if=\"reportsLoadingId === s.session_id\" class=\"muted\">Loading</div>\n                  <div v-else-if=\"(reportsBySession[s.session_id] || []).length === 0\" class=\"muted\">\n                    No reports.\n                  </div>\n\n                  <!-- list -->\n                  <div v-else class=\"report-list\">\n\n                    <div v-for=\"r in reportsBySession[s.session_id]\" :key=\"r.report_id\">\n                      <div class=\"meta\">\n                        <strong>{{ r.title || (r.file_name.length > 10 ? r.file_name.substring(0, 7) + '...' : r.file_name) }}</strong>\n                        <div class=\"sub\">\n                          {{ (r.file_size/1024).toFixed(0) }} KB \n                          {{ formatDate(r.uploaded_at) }}\n                        </div>\n\n                        <div class=\"upload-block\">\n                          <a\n                            :href=\"`${baseUrl}/reports/${r.report_id}/download`\"\n                            target=\"_blank\" rel=\"noopener\" class=\"btn\"\n                          >\n                            View/Download\n                          </a>\n                          <a\n                            class=\"btn-danger\"\n                            @click=\"deleteReport(s.session_id, r.report_id)\"\n                            :disabled=\"deletingReportId === r.report_id\"\n                            title=\"Delete\"\n                          >\n                            {{ deletingReportId === r.report_id ? 'Deleting' : 'Delete' }}\n                          </a>\n                        </div>\n\n                      </div>\n                    </div>\n                    \n                  </div>\n\n                  <hr v-if=\"true\">\n\n                  <!-- upload area -->\n                  <div class=\"upload-block\" v-if=\"!reportExists(s)\">\n                    <input\n                      class=\"title-input\"\n                      type=\"text\"\n                      placeholder=\"Optional title\"\n                      v-model=\"uploadTitleBySession[s.session_id]\"\n                    />\n                    <input\n                      class=\"file-input\"\n                      type=\"file\"\n                      accept=\"application/pdf\"\n                      @change=\"onPickFile(s.session_id, $event)\"\n                    />\n                    <button\n                      class=\"upload-btn\"\n                      @click=\"uploadReport(s)\"\n                      :disabled=\"!uploadFileBySession[s.session_id] || uploadingSessionId === s.session_id\"\n                    >\n                      {{ uploadingSessionId === s.session_id ? 'Uploading' : 'Upload PDF' }}\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </td>\n\n            <td>\n              <p :class=\"{'muted-text': s.assigned_doctor_email === null}\">\n                {{ s.assigned_doctor_email || 'Unassigned' }}\n              </p>\n              <p :class=\"{'muted-text': s.session_remarks === null}\">\n                {{ s.session_remarks || 'No remarks' }}\n              </p>\n            </td>\n\n            <td class=\"actions\">\n              <button @click=\"viewSession(s)\">Open</button>\n              <div class=\"action-menu\" @click.stop>\n                <button class=\"menu-btn\" @click=\"toggleRowMenu(s.session_id)\">Actions </button>\n\n                <div class=\"menu-list\" v-if=\"openRowMenuId === s.session_id\">\n                  <!-- <button @click=\"viewSession(s)\">View/Edit Data</button> -->\n                  <button @click=\"openEdit(s)\">Edit Session</button>\n                  <button\n                    @click=\"$router.push({ \n                      name: 'export-medical', \n                      query: { session_id: s.session_id, staff_email: s.staff_email } \n                    })\"\n                  >\n                    Export Session Excel\n                  </button>\n                  <button class=\"danger\" @click=\"deleteSession(s)\">Delete Session & Data</button>\n                </div>\n              </div>\n            </td>\n          </tr>\n\n          <tr v-if=\"filteredSessions.length === 0\" class=\"empty-row\">\n            <td colspan=\"8\">\n              <div class=\"empty-state\">No sessions found.</div>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    <!-- sticky horizontal scrollbar (proxy) -->\n    <div class=\"x-scroll\" ref=\"xScroll\" @scroll=\"onXScroll\">\n      <!-- This spacers width will be set to match the tables scroll width -->\n      <div :style=\"{ width: tableScrollWidth + 'px', height: '1px' }\"></div>\n    </div>\n  </div>\n\n</template>\n\n<script>\nimport cfg from '@/apiConfig';\nimport { handleUnauthorized } from '@/shared/handleUnauthorized';\nimport { getSessionHeader, setSessionHeader, invalidateSessionHeader } from '@/shared/sessionHeaderCache';\nimport ExportExcel from '@/components/ExportExcel.vue';\nimport { formatDate } from '@/shared/dateFormat';\nimport { VueDatePicker } from '@vuepic/vue-datepicker';\n\nexport default {\n  components: { ExportExcel, VueDatePicker },\n  props: { rows: { type: Array, default: () => [] } },\n  data() {\n    let role = null;\n    try { role = JSON.parse(localStorage.getItem('user_info'))?.role || null; } catch { /* ignore */ }\n    return {\n      isAdminRole: role === 'admin',\n      page: 1,\n      pageSize: 10,\n      sortDir: 'desc',\n      loading: false,\n      tableScrollWidth: 0,\n      resizeObs: null,\n\n      baseUrl: cfg.API_BASE_URL,\n\n      sessions: [],\n      // email lists for session assigned users\n      staffEmailList: [],\n      doctorEmailList: [],\n\n      search: \"\",\n      yearFilter: \"\",\n      typeFilter: \"\",\n      statusFilter: \"\",\n      showMetadata: false,\n      showHasTables: false,\n      openRowMenuId: null,\n      openReportMenuId: null,\n\n      reportsBySession: {}, // { [session_id]: Array<Report> }\n      reportsLoadingId: null, // session_id currently loading\n      uploadTitleBySession: {}, // { [session_id]: string }\n      uploadFileBySession: {}, // { [session_id]: File }\n      uploadingSessionId: null,\n      deletingReportId: null,\n      reportHas: {}, // { [session_id]: number }\n\n      // create modal\n      isCreateOpen: false,\n      creating: false,\n      createForm: {\n        staff_email: '',\n        session_date: new Date().toISOString().slice(0,10), // yyyy-mm-dd\n        session_type: 'annual',\n        status: 'draft',\n        duplicate_recent: true,\n        no_forms: false,\n        init_tables: true,\n      },\n      hasPrevByStaff: {}, // { [staff_email]: boolean }\n\n      // edit modal\n      isEditOpen: false,\n      editing: false,\n      editForm: {\n        session_id: null,\n        staff_email: '',\n        assigned_doctor_email: null,\n        session_remarks: null,\n        session_date: '',\n        session_type: 'annual',\n        status: 'draft'\n      },\n\n      // duplicate: - old\n      duplicating: false,\n    };\n  },\n  computed: {\n    isFilteredView() {\n        return !!this.$route.query.staff; \n    },\n    totalPages() {\n      const total = Math.ceil(this.filteredSessions.length / this.pageSize) || 1;\n      return total;\n    },\n    pagedSessions() {\n      const start = (this.page - 1) * this.pageSize;\n      // return this.filteredSessions.slice(start, start + this.pageSize);\n      // console.log('this.sortedSessions', this.sortedSessions.slice(start, start + this.pageSize));\n      return this.sortedSessions.slice(start, start + this.pageSize);\n    },\n    sortedSessions() {\n      const dir = this.sortDir === 'asc' ? 1 : -1;\n      return [...this.filteredSessions].sort((a, b) => {\n        const at = toTime(a.session_date);\n        const bt = toTime(b.session_date);\n        if (isNaN(at) && isNaN(bt)) return 0;\n        if (isNaN(at)) return 1;\n        if (isNaN(bt)) return -1;\n        if (at === bt) return 0;\n        return at > bt ? dir : -dir;\n      });\n    },\n    availableYears() {\n      const arr = Array.isArray(this.sessions) ? this.sessions : [];\n      const years = new Set(\n        arr\n          .map(s => {\n            // handle ISO date, 'YYYY-MM-DD', or Date-like\n            const d = s?.session_date ? new Date(s.session_date) : null;\n            return d && !isNaN(d) ? d.getFullYear() : null;\n          })\n          .filter(y => y !== null)\n      );\n      return Array.from(years).sort((a, b) => b - a); // newest first\n    },\n    filteredSessions() {\n      const q = this.search.toLowerCase();\n      return this.sessions.filter(s => {\n        const matchSearch =\n          !q ||\n          (s.staff_name && s.staff_name.toLowerCase().includes(q)) ||\n          (s.staff_email && s.staff_email.toLowerCase().includes(q));\n\n        const matchYear =\n          !this.yearFilter ||\n          new Date(s.session_date).getFullYear().toString() === this.yearFilter;\n\n        const matchStatus =\n          !this.statusFilter || s.status === this.statusFilter;\n\n        const matchType =\n          !this.typeFilter || s.session_type === this.typeFilter;\n\n        return matchSearch && matchYear && matchType && matchStatus;\n      });\n    },\n    // derive current staff email from your page state or URL (?staff=)\n    // activeStaffEmail() {\n    //   // if already store selected staff in data/computed, use that instead.\n    //   // otherwise parse from query param:\n    //   const q = this.$route?.query?.staff || '';\n    //   return q || ''; // return '' if none\n    // },\n    hasPrevForSelected() {\n      return !!this.hasPrevByStaff[this.createForm.staff_email];\n    },\n    nsColumns() {\n      return [\n        // { key: 'session_id', label: 'Session ID' },\n        { key: 'staff_name', label: 'Staff Name' },\n        { key: 'staff_email', label: 'Staff Email' },\n        { key: 'session_date', label: 'Session Date' },\n        { key: 'session_type', label: 'Session Type' },\n        { key: 'status', label: 'Status' },\n        { key: 'created_by', label: 'Created By' },\n        { key: 'created_at', label: 'Created At' },\n        { key: 'updated_by', label: 'Updated By' },\n        { key: 'updated_at', label: 'Updated At' },\n        { key: 'assigned_doctor_email', label: 'Assigned Doctor Email' },\n        { key: 'session_remarks', label: 'Session Remarks' },\n      ];\n    }\n  },\n\n  mounted() {\n    this.fetchSessions();\n    this.fetchEmails();\n    window.addEventListener(\"click\", this.closeMenus);\n    this.applyStaffQuery();\n    // avoid adding too many event listeners\n    if (!this._onDocClick_reports) {\n      this._onDocClick_reports = (e) => {\n        if (!e.target.closest('.report-menu')) {\n          this.openReportMenuId = null;\n        }\n      };\n      document.addEventListener('click', this._onDocClick_reports);\n    }\n    this.$nextTick(() => this.measureXBar());\n    // keep it in sync on resize/content changes\n    window.addEventListener('resize', this.measureXBar);\n    this.resizeObs = new ResizeObserver(() => this.measureXBar());\n    const wrap = this.$el.querySelector('.table-wrap');\n    if (wrap) this.resizeObs.observe(wrap);\n  },\n  watch: { \n    '$route.query.staff'() { this.applyStaffQuery(); },\n    // keep modal's staff_email in sync with current selection\n    activeStaffEmail: {\n      immediate: true,\n      handler(v) {\n        if (v && (!this.createForm.staff_email || this.isCreateOpen)) {\n          this.createForm.staff_email = v;\n        }\n      }\n    },\n    search() { this.page = 1; },\n    yearFilter() { this.page = 1; },\n    statusFilter() { this.page = 1; },\n    sessions: {\n      deep: true,\n      handler() { \n        // reset and clamp whenever the source list changes\n        if (this.page > this.totalPages) this.page = this.totalPages;\n      }\n    },\n    totalPages(n) {\n      if (this.page > n) this.page = n;\n      if (this.page < 1) this.page = 1;\n    },\n    'createForm.session_type'(v) {\n      // auto-check \"No forms\" when follow-up is chosen\n      this.createForm.no_forms = (v === 'followup');\n    },\n    'createForm.no_forms'(v) {\n      // when \"No forms\" is true, duplication is irrelevant  turn it off\n      if (v) this.createForm.duplicate_recent = false;\n    },\n  },\n  beforeUnmount() {\n    window.removeEventListener(\"click\", this.closeMenus);\n    window.removeEventListener('resize', this.measureXBar);\n    if (this.resizeObs) this.resizeObs.disconnect();\n  },\n  methods: {\n    // pagination controls:\n    goFirst() { this.page = 1; },\n    prevPage() { if (this.page > 1) this.page--; },\n    nextPage() { if (this.page < this.totalPages) this.page++; },\n    goLast() { this.page = this.totalPages; },\n    changePageSize() {\n      // when page size changes, jump back to page 1 to avoid landing on an empty page\n      this.page = 1;\n    },\n    toggleDateSort() {\n      this.sortDir = this.sortDir === 'asc' ? 'desc' : 'asc'\n    },\n    // fmt(d) {\n    //   if (!d) return '-'\n    //   const t = toTime(d)\n    //   if (isNaN(t)) return d\n    //   return new Date(t).toISOString().slice(0, 10) // YYYY-MM-DD\n    // },\n    formatDate,\n    // measure the tables scrollable width and align proxy position\n    measureXBar() {\n      const wrap = this.$el.querySelector('.table-wrap');\n      if (!wrap) return;\n      this.tableScrollWidth = wrap.scrollWidth;\n      if (this.$refs.xScroll) {\n        this.$refs.xScroll.scrollLeft = wrap.scrollLeft;\n      }\n    },\n    // when the real table scrolls horizontally, move the proxy\n    onTableScroll(e) {\n      if (this.$refs.xScroll) {\n        this.$refs.xScroll.scrollLeft = e.target.scrollLeft;\n      }\n    },\n    // when the proxy scrolls, move the real table\n    onXScroll(e) {\n      const wrap = this.$el.querySelector('.table-wrap');\n      if (wrap) wrap.scrollLeft = e.target.scrollLeft;\n    },\n    // fetch:\n    async fetchEmails() {\n      // const baseUrl = cfg.API_BASE_URL;\n\n      try {\n        const res = await fetch(`${this.baseUrl}/admin/staff-list`, {\n          headers: { Authorization: `Bearer ${localStorage.getItem('jwt_token')}` }\n        });\n        const payload = await res.json();\n        this.staffEmailList = Array.isArray(payload) ? payload : [];\n      } catch (e) {\n        console.error(e);\n        this.staffEmailList = []; // still keep it as an array on error\n      }\n      try {\n        const res = await fetch(`${this.baseUrl}/admin/doctor-list`, {\n          headers: { Authorization: `Bearer ${localStorage.getItem('jwt_token')}` }\n        });\n        const payload = await res.json();\n        this.doctorEmailList = Array.isArray(payload) ? payload : [];\n      } catch (e) {\n        console.error(e);\n        this.doctorEmailList = []; // still keep it as an array on error\n      }\n    },\n    async fetchSessions() {\n      // const baseUrl = cfg.API_BASE_URL;\n\n      try {\n        const res = await fetch(`${this.baseUrl}/admin/sessions`, {\n          headers: { Authorization: `Bearer ${localStorage.getItem('jwt_token')}` }\n        });\n        const payload = await res.json();\n        if (handleUnauthorized(res)) return;\n\n        // normalize to an array no matter what the backend sends\n        this.sessions = Array.isArray(payload)\n          ? payload\n          : (Array.isArray(payload?.sessions) ? payload.sessions : []);\n\n        this.sessions.forEach(s => {\n          s.has_forms_all = \n            (s.has_investigations) &&\n            (s.has_ilab) &&\n            (s.has_lifestyle) &&\n            (s.has_mh) &&\n            (s.has_pe1) &&\n            (s.has_pe2); \n        });\n\n        this.refreshReportFlagsForSessions(this.sessions.map(s => s.session_id));\n        this.hasPrevByStaff = this.sessions.reduce((acc, s) => {\n          acc[s.staff_email] = true; // any session means \"has previous\"\n          return acc;\n        }, {});\n      } catch (e) {\n        console.error(e);\n        this.sessions = []; // still keep it as an array on error\n      }\n    },\n    applyStaffQuery() {\n      const q = this.$route.query.staff;\n      if (!q) return;\n\n      // decode the email from the URL\n      const email = decodeURIComponent(q);\n\n      this.search = email;\n\n      // if you also select a row programmatically, do it here:\n      // e.g., this.selectedStaffEmail = email;\n\n      // if your staff list loads async, call this again after data arrives:\n      // this.$nextTick(() => this.applyStaffQuery());\n    },\n    toggleRowMenu(id) {\n      this.openRowMenuId = this.openRowMenuId === id ? null : id;\n    },\n    closeMenus() {\n      this.openRowMenuId = null;\n    },\n    // Actions\n    createNewSession() { // == openCreateModal()\n      // pick current staff\n      const fromQuery = this.$route?.query?.staff || '';\n      this.createForm = {\n        staff_email: fromQuery || (this.staffEmailList[0]?.staff_email || ''),\n        session_date: new Date().toISOString().slice(0,10),\n        session_type: 'annual',\n        status: 'draft',\n        duplicate_recent: true, // default true (will be disabled if not allowed)\n        no_forms: false,\n        init_tables: !this.createForm.no_forms,\n      };\n      // if no previous for selected staff, will auto-uncheck (it remains disabled)\n      if (!this.hasPrevForSelected) this.createForm.duplicate_recent = false;\n      this.isCreateOpen = true;\n      // console.log(this.hasPrevByStaff);\n    },\n    closeCreateModal() {\n      this.isCreateOpen = false;\n    },\n    syncDuplicateDefault() {\n      // if staff changes, keep checkbox checked only if previous session exists\n      if (!this.hasPrevForSelected) this.createForm.duplicate_recent = false;\n    },\n    async submitCreate() {\n      if (!this.createForm.staff_email) {\n        alert('Please select a staff.');\n        return;\n      }\n      if (!this.isAdminRole) {\n        alert('Only admins can create sessions.');\n        return;\n      }\n      if (this.createForm.no_forms) {\n        this.createForm.init_tables = false;\n        this.createForm.duplicate_recent = false;\n      }\n\n      // const baseUrl = cfg.API_BASE_URL;\n      this.creating = true;\n\n      try {\n        const endpoint =\n          (this.createForm.duplicate_recent && this.hasPrevForSelected)\n            ? `${this.baseUrl}/sessions/duplicate-last` // \"create duplicate\" endpoint\n            : `${this.baseUrl}/create-session`; // \"create empty\" endpoint\n\n        const res = await fetch(endpoint, {\n          method: 'POST',\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem('jwt_token')}`,\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            staff_email: this.createForm.staff_email,\n            session_date: this.createForm.session_date,\n            session_type: this.createForm.session_type,\n            status: this.createForm.status,\n            created_by: JSON.parse(localStorage.getItem('user_info')).email,\n            init_tables: !this.createForm.no_forms,  // true by default, false for follow-up\n          })\n        });\n\n        if (!res.ok) {\n          const msg = await res.text();\n          throw new Error(msg || 'Create failed');\n        }\n\n        // Refresh your table/list (keeps your date sorting intact)\n        await this.fetchSessions();\n        // Rebuild the \"hasPrev\" index so the checkbox enables for the next time\n        this.hasPrevByStaff = this.sessions.reduce((acc, s) => (acc[s.staff_email] = true, acc), {});\n        this.isCreateOpen = false;\n\n      } catch (e) {\n        alert(e.message || 'Failed to create session');\n      } finally {\n        this.creating = false;\n      }\n    },\n    viewSession(s) { \n      // alert(`View ${s.session_id}`);\n      const row = s;\n      this.$router.push({\n        name: 'session-medical-history',\n        params: { sessionId: row.session_id },\n        query:  { staff: row.staff_email, name: row.staff_name }\n      });\n    },\n    // edit session data\n    openEdit(s) {\n      // prefill from the row\n      this.editForm = {\n        session_id: s.session_id,\n        staff_email: s.staff_email,\n        assigned_doctor_email: s.assigned_doctor_email,\n        session_remarks: s.session_remarks,\n        session_date: this.toYMD(s.session_date),\n        session_type: s.session_type,\n        status: s.status\n      };\n      this.isEditOpen = true;\n    },\n\n    closeEditModal() {\n      this.isEditOpen = false;\n      this.editing = false;\n      // reset form\n      this.editForm = {\n        session_id: null,\n        staff_email: '',\n        assigned_doctor_email: null,\n        session_remarks: null,\n        session_date: '',\n        session_type: 'annual',\n        status: 'draft'\n      };\n    },\n\n    toYMD(d) {\n      if (!d) return '';\n      // accept 'YYYY-MM-DD' or Date/ISO\n      const dt = new Date(d);\n      if (isNaN(dt)) return String(d).slice(0,10);\n      return dt.toISOString().slice(0,10);\n    },\n\n    async submitEdit() {\n      const { session_id, assigned_doctor_email, session_remarks, session_date, session_type, status } = this.editForm;\n      // const baseUrl = cfg.API_BASE_URL;\n\n      if (!session_id || !session_date || !session_type || !status) {\n        alert('Please fill all fields.');\n        return;\n      }\n\n      this.editing = true;\n      try {\n        const updated_by = JSON.parse(localStorage.getItem('user_info')).email;\n\n        const payload = {\n          assigned_doctor_email: assigned_doctor_email || null,\n          session_remarks: session_remarks ?? null,\n          session_date,\n          session_type,\n          status,\n          updated_by\n        };\n\n        const res = await fetch(`${this.baseUrl}/edit-session/${session_id}`, {\n          method: 'PUT',\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem('jwt_token')}`,\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(payload)\n        });\n        if (!res.ok) throw new Error(await res.text() || 'Failed to update session');\n\n        // refresh the list\n        await this.fetchSessions();\n\n        // keep the session header cache consistent (in case ViewSession is open elsewhere)\n        invalidateSessionHeader(session_id);\n        // repopulate light endpoint\n        try {\n          const fresh = await getSessionHeader(session_id, { force: true }); // force fetch\n          setSessionHeader(session_id, fresh);\n        } catch { /* ignore */ }\n\n        this.isEditOpen = false;\n      } catch (e) {\n        alert(e.message || 'Failed to update session');\n      } finally {\n        this.editing = false;\n      }\n    },\n    // delete session\n    async deleteSession(s) {\n      const sid = s.session_id;\n      if (!sid) return;\n\n      if (!confirm(`Delete session #${sid} for ${s.staff_email}? This will also remove its report files.`)) {\n        return;\n      }\n\n      try {\n        // 1) Ensure we have the report list for this session\n        let reports = this.reportsBySession[sid];\n        if (!Array.isArray(reports)) {\n          // attempt to fetch if not cached\n          const r = await fetch(`${this.baseUrl}/sessions/${sid}/reports`, {\n            headers: { Authorization: `Bearer ${localStorage.getItem('jwt_token')}` }\n          });\n          reports = (await r.json()) || [];\n        }\n\n        // 2) Delete report (so file are removed server-side)\n        if (Array.isArray(reports) && reports.length) {\n          const firstReport = reports[0];\n          try {\n            await fetch(`${this.baseUrl}/reports/${firstReport.report_id}`, {\n              method: 'DELETE',\n              headers: { Authorization: `Bearer ${localStorage.getItem('jwt_token')}` }\n            });\n          } catch (e) { /* best-effort */ }\n        }\n\n        // 3) Delete the session row\n        const del = await fetch(`${this.baseUrl}/delete-session/${sid}`, {\n          method: 'DELETE',\n          headers: { Authorization: `Bearer ${localStorage.getItem('jwt_token')}` }\n        });\n        if (!del.ok) {\n          const txt = await del.text();\n          throw new Error(txt || 'Failed to delete session');\n        }\n\n        // 4) Clean up UI: remove row & caches, close menus, refresh pills\n        this.sessions = this.sessions.filter(row => row.session_id !== sid);\n\n        // clear report cache + pill state for this sid\n        if (this.$delete) {\n          this.$delete(this.reportsBySession, sid);\n          this.$delete(this.reportHas, sid);\n        } else {\n          const rb = { ...this.reportsBySession }; delete rb[sid]; this.reportsBySession = rb;\n          const rh = { ...this.reportHas }; delete rh[sid]; this.reportHas = rh;\n        }\n\n        if (this.openReportMenuId === sid) this.openReportMenuId = null;\n        if (this.openRowMenuId === sid) this.openRowMenuId = null;\n\n        // optional: show a toast\n        // alert('Session deleted');\n      } catch (e) {\n        console.error(e);\n        alert(e.message || 'Failed to delete session');\n      }\n    },\n\n    // reports:\n    reportExists(s) {\n      const sid = s.session_id;\n      if (this.reportHas[sid] !== undefined) return this.reportHas[sid];\n      return !!s.has_report; // fallback if your backend already returns it\n    },\n\n    // internal cache setter\n    setReportExists(sessionId, val) {\n      const next = { ...this.reportHas, [sessionId]: !!val };\n      this.reportHas = next;\n      this.$nextTick(() => this.reportHas = next);\n    },\n\n    // fetch whether a report exists for each session\n    async refreshReportFlagsForSessions(sessionIds) {\n      // const baseUrl = cfg.API_BASE_URL;\n\n      if (!Array.isArray(sessionIds) || sessionIds.length === 0) return;\n      await Promise.all(sessionIds.map(async (sid) => {\n        try {\n          const r = await fetch(`${this.baseUrl}/admin/checkup-reports/${sid}`, {\n            headers: { Authorization: `Bearer ${localStorage.getItem('jwt_token')}` }\n          });\n          if (!r.ok) throw 0;\n          const arr = await r.json();\n          this.setReportExists(sid, Array.isArray(arr) && arr.length > 0);\n        } catch {\n          this.setReportExists(sid, false);\n        }\n      }));\n    },\n\n    // call these inside your upload/delete success handlers\n    onReportUploaded(sessionId) {\n      this.setReportExists(sessionId, true);\n    },\n    onReportDeleted(sessionId) {\n      this.setReportExists(sessionId, false);\n    },\n\n    // --- reports menu toggle ---\n    toggleReportMenu(sessionId) {\n      this.openReportMenuId = (this.openReportMenuId === sessionId) ? null : sessionId;\n      if (this.openReportMenuId) {\n        this.ensureReportsLoaded(sessionId);\n      }\n    },\n\n    // --- load list ---\n    ensureReportsLoaded(sessionId) {\n      // const baseUrl = cfg.API_BASE_URL;\n\n      if (this.reportsBySession[sessionId]) return; // already loaded\n      this.reportsLoadingId = sessionId;\n\n      fetch(`${this.baseUrl}/sessions/${sessionId}/reports`, {\n        headers: { Authorization: `Bearer ${localStorage.getItem('jwt_token')}` }\n      })\n      .then(r => r.json())\n      .then(list => {\n        this.$set\n          ? this.$set(this.reportsBySession, sessionId, Array.isArray(list) ? list : [])\n          : (this.reportsBySession = { ...this.reportsBySession, [sessionId]: Array.isArray(list) ? list : [] });\n      })\n      .catch(() => {\n        this.$set\n          ? this.$set(this.reportsBySession, sessionId, [])\n          : (this.reportsBySession = { ...this.reportsBySession, [sessionId]: [] });\n      })\n      .finally(() => { this.reportsLoadingId = null; });\n    },\n\n    // --- pick file ---\n    onPickFile(sessionId, e) {\n      const file = e.target.files && e.target.files[0];\n      if (!file) return;\n      // accept only PDF (frontend guard)\n      if (file.type !== 'application/pdf') {\n        alert('Please select a PDF file.');\n        e.target.value = '';\n        return;\n      }\n      // store file by session\n      if (this.$set) {\n        this.$set(this.uploadFileBySession, sessionId, file);\n      } else {\n        this.uploadFileBySession = { ...this.uploadFileBySession, [sessionId]: file };\n      }\n    },\n\n    // --- upload ---\n    uploadReport(sessionRow) {\n      const sessionId = sessionRow.session_id;\n      const file = this.uploadFileBySession[sessionId];\n      // const baseUrl = cfg.API_BASE_URL;\n\n      if (!file) return;\n\n      const fd = new FormData();\n      fd.append('file', file);\n      const title = this.uploadTitleBySession[sessionId] || '';\n      if (title) fd.append('title', title);\n\n      this.uploadingSessionId = sessionId;\n\n      fetch(`${this.baseUrl}/sessions/${sessionId}/upload-report`, {\n        method: 'POST',\n        headers: { Authorization: `Bearer ${localStorage.getItem('jwt_token')}` },\n        body: fd\n      })\n      .then(r => r.ok ? r.json() : Promise.reject(r))\n      .then(() => {\n        this.onReportUploaded(sessionId);\n        // reset inputs\n        if (this.$set) {\n          this.$set(this.uploadTitleBySession, sessionId, '');\n          this.$set(this.uploadFileBySession, sessionId, null);\n          // \n        } else {\n          this.uploadTitleBySession = { ...this.uploadTitleBySession, [sessionId]: '' };\n          this.uploadFileBySession = { ...this.uploadFileBySession, [sessionId]: null };\n        }\n        // reload list\n        // clear cached then refetch for freshness\n        if (this.$delete) {\n          this.$delete(this.reportsBySession, sessionId);\n        } else {\n          const clone = { ...this.reportsBySession };\n          delete clone[sessionId];\n          this.reportsBySession = clone;\n        }\n        this.ensureReportsLoaded(sessionId);\n      })\n      .catch(async (err) => {\n        let msg = 'Upload failed';\n        try { msg = (await err.json()).error || msg; }\n        catch (e) { console.warn('Upload: could not parse error JSON', e); } \n        alert(msg);\n      })\n      .finally(() => { this.uploadingSessionId = null; });\n    },\n\n    // --- delete ---\n    deleteReport(sessionId, reportId) {\n      // const baseUrl = cfg.API_BASE_URL;\n\n      if (!confirm('Delete this report?')) return;\n      this.deletingReportId = reportId;\n\n      fetch(`${this.baseUrl}/reports/${reportId}`, {\n        method: 'DELETE',\n        headers: { Authorization: `Bearer ${localStorage.getItem('jwt_token')}` }\n      })\n      .then(r => r.ok ? r.json() : Promise.reject(r))\n      .then(() => {\n        // remove from local cache\n        const list = this.reportsBySession[sessionId] || [];\n        const next = list.filter(r => r.report_id !== reportId);\n        this.onReportDeleted(sessionId);\n        if (this.$set) {\n          this.$set(this.reportsBySession, sessionId, next);\n        } else {\n          this.reportsBySession = { ...this.reportsBySession, [sessionId]: next };\n        }\n      })\n      .catch(async (err) => {\n        let msg = 'Delete failed';\n        try { msg = (await err.json()).error || msg; }\n        catch (e) { console.warn('Delete: could not parse error JSON', e); }\n        alert(msg);\n      })\n      .finally(() => { this.deletingReportId = null; });\n    },\n  }\n};\n// helper outside export to avoid re-creating per call\nfunction toTime(val) {\n  return typeof val === 'number' ? val : Date.parse(val)\n}\n</script>\n\n<style scoped>\n\n.manage-sessions { padding: 24px; }\n.back-btn { margin-bottom: 16px; background: none; border: none; color: #2563eb; cursor: pointer; }\n.toolbar { display:flex; gap:12px; align-items:center; margin-bottom:16px; flex-wrap:nowrap; }\n.search-input {\n  flex:1 1 260px; \n  max-width:400px;\n  height: 40px;\n  padding:10px 12px;\n  border:1px solid #e2e8f0;\n  border-radius:8px;\n  font-size:14px;\n}\n.search-input:focus {\n  outline:none; border-color:#93c5fd;\n  box-shadow:0 0 0 3px rgba(147,197,253,.35);\n}\n\n.dup-btn {\n  background:#e2e8f0; border:none; border-radius:6px;\n  padding:8px 12px; cursor:pointer;\n}\n/* .table-responsive { width:100%; overflow-x:auto; background:white; box-shadow:0 2px 6px rgba(0,0,0,.05); border-radius:8px; } */\ntable { width:100%; border-collapse:collapse; }\nth, td {\n  padding:12px 16px; text-align:left;\n  border-bottom:1px solid #e2e8f0;\n  vertical-align:top;\n}\n.muted-text {\n  color: #6b7280;\n  font-style: italic;\n}\nth { background:#f7fafc; color:#2d3748; font-weight:600; position:sticky; top:0; z-index:1; }\n.status-pill {\n  padding:4px 10px; border-radius:999px; font-size:12px;\n  text-transform:capitalize; \n}\n.status-pill.draft { background:#fef9c3; color:#92400e; }\n.status-pill.submitted { background:#bfdbfe; color:#1e3a8a; }\n.status-pill.locked { background:#d1fae5; color:#065f46; }\n\n.reports-cell { position: relative; text-align: center; }\n.report-menu { display: inline-block; position: relative; }\n\n/* .modal {\n  background: #fff;\n  border-radius: 8px;\n  box-shadow: 0 8px 24px rgba(0,0,0,.12);\n} */\n\n/* dropdown actions */\n.action-menu { position:relative; display:inline-block; }\n.menu-btn {\n  padding: 6px 10px;\n  font-size: 12px;\n  border-radius: 4px;\n  background: #edf2f7;\n  color: #2d3748;\n  border: 1px solid #e2e8f0;\n  cursor: pointer;\n}\n.menu-btn:hover { background: #e2e8f0; }\n.menu-list {\n  position: absolute;\n  right: 0;\n  top: calc(100% + 6px);\n  min-width: 280px;\n  max-width: 360px;\n  background: #fff;\n  border: 1px solid #e2e8f0;\n  box-shadow: 0 8px 24px rgba(0,0,0,.12);\n  border-radius: 8px;\n  padding: 10px;\n  z-index: 5;\n  width: max-content;\n  min-width: unset;\n  max-width: none;\n  white-space: nowrap;\n}\n.menu-list button {\n  border:none; background:none; text-align:left; padding:6px 10px; font-size:13px; \n  cursor:pointer; display: block; width: 100%;\n}\n.menu-list button:hover { background:#f7fafc; }\n.menu-list button.danger { color:#b91c1c; padding-right: 6px; }\n.empty-state { text-align:center; padding:24px; color:#4a5568; }\n\n.report-list { list-style: none; margin: 0; padding: 0; }\n.report-list li {\n  display: block;\n  align-items: flex-start;\n  justify-content: space-between;\n  gap: 10px;\n  padding: 8px 0;\n  border-bottom: 1px dashed #edf2f7;\n}\n.report-list li:last-child { border-bottom: none; }\n.meta {\n  display: block;\n  max-width: 70%;\n}\n.meta .sub { color: #718096; font-size: 12px; }\n.row-actions { display: inline-flex; gap: 10px; white-space: nowrap; }\n.row-actions a { text-decoration: none; color: #2b6cb0; }\n.row-actions a:hover { text-decoration: underline; }\n.linklike { background: transparent; border: none; color: #c53030; cursor: pointer; padding: 0; }\n.linklike:hover { text-decoration: underline; }\n\n.report-pill { margin-bottom: 6px; text-align: center; }\n.pill {\n  display: inline-block;\n  padding: 3px 10px;\n  font-size: 12px;\n  border-radius: 999px;\n  background: #edf2f7;\n  color: #2d3748;\n}\n.pill.ok { background: #e6f6ea; color: #137333; }\n.pill.muted { background: #eef2f6; color: #64748b; }\n/* Upload area layout */\n.upload-block {\n  display: flex !important;\n  flex-direction: column !important;\n  gap: 8px;\n  margin-top: 10px;\n  padding-top: 6px;\n  border-top: 1px solid #e2e8f0;\n  min-width: fit-content;\n}\n\n/*  reset-proof enabled style */\nbutton.upload-btn {\n  background: #2563eb !important;   /* visible blue */\n  color: #ffffff !important;\n  border: none !important;\n  opacity: 1 !important;\n  visibility: visible !important;\n\n  display: inline-flex !important;\n  align-items: center;\n  justify-content: center;\n  min-height: 32px;\n  padding: 6px 12px;\n  border-radius: 6px;\n  box-shadow: 0 1px 2px rgba(0,0,0,.06);\n  cursor: pointer;\n}\n\n/* hover/active (only when not disabled) */\nbutton.upload-btn:hover:not(:disabled) { background: #1d4ed8 !important; }\nbutton.upload-btn:active:not(:disabled) { background: #1e40af !important; }\n\n/* keep disabled clearly visible */\nbutton.upload-btn:disabled {\n  background: #cbd5e0 !important;\n  color: #2d3748 !important;\n  cursor: not-allowed;\n  opacity: 1 !important;\n}\n\n\n.muted { color: #718096; font-size: 12px; }\n.danger { color: #c53030; }\n.nowrap { white-space: nowrap; }\n</style>\n","<template>\r\n<!-- Trigger -->\r\n<slot name=\"trigger\" :open=\"open\" :disabled=\"!hasAnyRows\">\r\n  <button :disabled=\"!hasAnyRows\" @click=\"open\">Export Excel</button>\r\n</slot>\r\n\r\n<!-- Dialog -->\r\n<div v-if=\"show\" class=\"export-backdrop\" @click.self=\"close\">\r\n  <div class=\"export-dialog\">\r\n    <h3>{{ title || 'Export columns' }}</h3>\r\n\r\n    <!-- Data scope (only shown if allRows is provided) -->\r\n    <div v-if=\"hasAllRows\" class=\"scope\">\r\n      <strong>Data scope:</strong>\r\n      <label class=\"scope-item\">\r\n        <input type=\"radio\" value=\"displayed\" v-model=\"exportScope\" />\r\n        Displayed only (filtered/paged)\r\n      </label>\r\n      <label class=\"scope-item\">\r\n        <input type=\"radio\" value=\"all\" v-model=\"exportScope\" />\r\n        All rows\r\n      </label>\r\n      <span class=\"scope-count\"><b>Rows:</b> {{ effectiveRows.length }}</span>\r\n    </div>\r\n\r\n    <div class=\"cols\">\r\n      <label v-for=\"(col, i) in normalizedColumns\" :key=\"col.key ?? i\" class=\"col-item\">\r\n        <input type=\"checkbox\" v-model=\"selected\" :value=\"col.key\" />\r\n        {{ col.label }}\r\n      </label>\r\n    </div>\r\n\r\n    <div class=\"dialog-actions\">\r\n      <button @click=\"selectAll\">Select all</button>\r\n      <button @click=\"clearAll\">Clear</button>\r\n      <div class=\"spacer\"></div>\r\n      <button @click=\"close\">Cancel</button>\r\n      <button :disabled=\"!effectiveRows.length || !selected.length\" @click=\"exportNow\" style=\"background-color: #2563eb; color: white;\">\r\n        Export\r\n      </button>\r\n    </div>\r\n  </div>\r\n</div>\r\n</template>\r\n\r\n<script>\r\n// Reusable Excel exporter with checkbox dialog\r\nimport * as XLSX from 'xlsx';\r\n\r\nexport default {\r\n  name: 'ExportExcel',\r\n  props: {\r\n    rows: { type: Array, default: () => [] },\r\n    allRows: { type: Array, default: () => null },\r\n    columns: { type: [Array, Object], required: true }, // also allow object\r\n    filename: { type: String, default: '' },\r\n    sheetName: { type: String, default: 'Sheet1' },\r\n    title: { type: String, default: '' },\r\n    defaultSelectedKeys: { type: Array, default: null },\r\n  },\r\n  data() {\r\n    return {\r\n      show: false,\r\n      selected: [],\r\n      exportScope: 'displayed',\r\n    };\r\n  },\r\n  computed: {\r\n    normalizedColumns() {\r\n      // accept array, or object map -> array of values\r\n      if (Array.isArray(this.columns)) return this.columns;\r\n    if (this.columns && typeof this.columns === 'object') return Object.values(this.columns);\r\n    console.warn('[ExportExcel] \"columns\" not array/object:', this.columns);\r\n    return [];\r\n    },\r\n    hasAllRows() {\r\n        return Array.isArray(this.allRows) && this.allRows.length > 0;\r\n    },\r\n    hasAnyRows() {\r\n        return (this.rows?.length || 0) > 0 || (this.allRows?.length || 0) > 0;\r\n    },\r\n    effectiveRows() {\r\n        return (this.exportScope === 'all' && this.hasAllRows) ? this.allRows : (this.rows || []);\r\n    },\r\n  },\r\n  watch: {\r\n  normalizedColumns(newCols) {\r\n    if (newCols?.length && !this.selected.length) {\r\n      this.selected = newCols.map(c => c.key);\r\n    }\r\n  }\r\n},\r\n  mounted() {\r\n    if (!this.normalizedColumns.length) {\r\n      console.warn('[ExportExcel] No columns provided or failed to normalize.');\r\n    }\r\n    this.selected = (Array.isArray(this.defaultSelectedKeys) && this.defaultSelectedKeys.length)\r\n      ? [...this.defaultSelectedKeys]\r\n      : this.normalizedColumns.map(c => c.key);\r\n  },\r\n  methods: {\r\n    open() { this.show = true; },\r\n    close() { this.show = false; },\r\n    selectAll() { this.selected = this.normalizedColumns.map(c => c.key); },\r\n    clearAll() { this.selected = []; },\r\n\r\n    _getXLSX() {\r\n      if (typeof XLSX !== 'undefined') return XLSX;\r\n      if (typeof window !== 'undefined' && window.XLSX) return window.XLSX;\r\n      throw new Error('XLSX not found. Install \"xlsx\" or include the CDN script.');\r\n    },\r\n\r\n    _valueFor(col, row) {\r\n      const raw = col.getter ? col.getter(row) : row?.[col.key];\r\n      return col.format ? col.format(raw, row) : (raw ?? '');\r\n    },\r\n\r\n    _autosize(ws, selectedCols, exportedRows) {\r\n      const widths = selectedCols.map(c => {\r\n        const headerLen = (c.label || '').toString().length;\r\n        const maxCell = exportedRows.reduce((m, r) => {\r\n          const v = r[c.label];\r\n          const len = (v == null ? '' : String(v)).length;\r\n          return Math.max(m, len);\r\n        }, 0);\r\n        return { wch: Math.min(Math.max(10, Math.max(headerLen, maxCell) + 2), 60) };\r\n      });\r\n      ws['!cols'] = widths;\r\n    },\r\n    exportNow() {\r\n        try {\r\n        const XLSX = this._getXLSX();\r\n\r\n        const selectedCols = this.normalizedColumns.filter(c => this.selected.includes(c.key));\r\n        if (!selectedCols.length) return;\r\n\r\n        const data = this.effectiveRows.map(row => {\r\n            const out = {};\r\n            for (const col of selectedCols) out[col.label] = this._valueFor(col, row);\r\n            return out;\r\n        });\r\n\r\n        const ws = XLSX.utils.json_to_sheet(data, { skipHeader: false });\r\n        this._autosize(ws, selectedCols, data);\r\n\r\n        const wb = XLSX.utils.book_new();\r\n        XLSX.utils.book_append_sheet(wb, ws, this.sheetName || 'Sheet1');\r\n\r\n        const suffix = this.exportScope === 'all' ? 'all' : 'displayed';\r\n        const name = this.filename || `export-${suffix}-${new Date().toISOString().slice(0,10)}.xlsx`;\r\n        XLSX.writeFile(wb, name);\r\n\r\n        this.close();\r\n        } catch (e) {\r\n        console.error(e);\r\n        alert('Export failed. Check console for details.');\r\n        }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n\r\n<style scoped>\r\n.export-backdrop {\r\n  position: fixed; inset: 0; display: grid; place-items: center;\r\n  background: rgba(0,0,0,.35); z-index: 9999;\r\n}\r\n.export-dialog {\r\n  background: #fff; width: min(720px, 92vw); max-height: 80vh; overflow: auto;\r\n  border-radius: 12px; padding: 16px 18px; box-shadow: 0 10px 35px rgba(0,0,0,.25);\r\n}\r\n.cols { display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 8px 16px; margin: 12px 0 14px; }\r\n.col-item { display: flex; align-items: center; gap: 8px; }\r\n.dialog-actions { display: flex; align-items: center; gap: 8px; }\r\n.dialog-actions .spacer { flex: 1; }\r\n.scope { display:flex; align-items:center; gap:12px; margin: 6px 0 12px; }\r\n.scope-item { display:flex; align-items:center; gap:6px; }\r\n.scope-count { opacity:.8; font-size:.9em; }\r\n</style>\r\n","import { render } from \"./ExportExcel.vue?vue&type=template&id=e1a073a0&scoped=true\"\nimport script from \"./ExportExcel.vue?vue&type=script&lang=js\"\nexport * from \"./ExportExcel.vue?vue&type=script&lang=js\"\n\nimport \"./ExportExcel.vue?vue&type=style&index=0&id=e1a073a0&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-e1a073a0\"]])\n\nexport default __exports__","import { render } from \"./ManageSessions.vue?vue&type=template&id=f86708ce&scoped=true\"\nimport script from \"./ManageSessions.vue?vue&type=script&lang=js\"\nexport * from \"./ManageSessions.vue?vue&type=script&lang=js\"\n\nimport \"./ManageSessions.vue?vue&type=style&index=0&id=f86708ce&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-f86708ce\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"ns-page\">\r\n    <h2>Manage Staff Personal Info</h2>\r\n\r\n    <button @click=\"$router.push('/dashboard')\" class=\"\">Back</button>\r\n\r\n    <!-- Top bar: search + filter + pagination -->\r\n    <div class=\"topbar\">\r\n      <input\r\n        v-model=\"search\"\r\n        @input=\"debouncedFetch\"\r\n        type=\"search\"\r\n        placeholder=\"Search staff by name, email, or staff no\"\r\n        class=\"search\"\r\n      />\r\n\r\n      <div class=\"filters\">\r\n        <select v-model=\"statusFilter\">\r\n          <option value=\"all\">All Status</option>\r\n          <option value=\"complete\">Complete</option>\r\n          <option value=\"incomplete\">Incomplete</option>\r\n        </select>\r\n      </div>\r\n\r\n      <div class=\"pager\" style=\"height: calc(2.5rem + 16px)\">\r\n        <button :disabled=\"page===1 || loading\" @click=\"prevPage\">Prev</button>\r\n        <span>Page {{ page }}</span>\r\n        <button style=\"margin-left: 8px;\" :disabled=\"loading || items.length < pageSize\" @click=\"nextPage\">Next</button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- summary bar -->\r\n    <div class=\"toolbar\">\r\n      <div class=\"summary-bar\">\r\n        <span class=\"pill ok\">Complete: {{ counts.filtered.complete }}</span>\r\n        <span class=\"pill bad\">Incomplete: {{ counts.filtered.incomplete }}</span>\r\n        <span class=\"sep\">|</span>\r\n        <span class=\"muted\">All staff </span>\r\n        <span class=\"pill mini ok\">C: {{ counts.all.complete }}</span>\r\n        <span class=\"pill mini bad\">I: {{ counts.all.incomplete }}</span>\r\n      </div>\r\n\r\n      <div style=\"margin-bottom: 1rem;\">\r\n        <button class=\"new-btn\" @click=\"showSummaryColumns = !showSummaryColumns\">\r\n          {{ showSummaryColumns ? 'Hide' : 'Show' }} Details Columns\r\n        </button>\r\n        <ExportExcel\r\n          :rows=\"displayedItems\"\r\n          :allRows=\"items\"\r\n          :columns=\"nsColumns\"\r\n          filename=\"non-session.xlsx\"\r\n          sheetName=\"Non-Session Data\"\r\n          title=\"Export Non-Session Columns\"\r\n        >\r\n          <template #trigger=\"{ open, disabled }\">\r\n            <button :disabled=\"disabled\" @click=\"open\" class=\"new-btn\">Export Excel</button>\r\n          </template>\r\n        </ExportExcel>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Main Table -->\r\n    <div class=\"table-wrap\" \r\n    @scroll=\"onTableScroll\">\r\n      <table>\r\n        <thead>\r\n          <tr>\r\n            <th>Name</th>\r\n            <th v-if=\"!showSummaryColumns\" class=\"center\">Staff Info Status</th>\r\n            <th v-if=\"showSummaryColumns\" class=\"center\">Personal Info</th>\r\n            <th v-if=\"showSummaryColumns\" class=\"center\">Occupational History</th>\r\n            <th v-if=\"showSummaryColumns\" class=\"center\">Family (named entries)</th>\r\n            <th v-if=\"showSummaryColumns\" class=\"center\">Family Disease</th>\r\n            <!-- <th v-if=\"showSummaryColumns\" style=\"min-width: 320px;\">Updated At</th> -->\r\n            <th class=\"center\">Session Counts</th>\r\n            <th class=\"nowrap\" style=\"\">Actions</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr\r\n            v-for=\"row in displayedItems\"\r\n            :key=\"row.staff_email\"\r\n            @click=\"openDetails(row)\"\r\n            class=\"clickable\"\r\n          >\r\n            <!-- Name -->\r\n            <td>\r\n              <div class=\"pair\"><span class=\"v\">{{ row.staff_name || '-' }}</span></div>\r\n            </td>\r\n\r\n            <!-- Staff Info -->\r\n            <td v-if=\"!showSummaryColumns\" class=\"center\">\r\n              <span :class=\"['chip', row.non_session_score >= 3 ? 'ok' : 'bad']\">\r\n                {{ row.non_session_score >= 3 ? 'Complete' : 'Incomplete' }}\r\n              </span>\r\n            </td>\r\n\r\n            <!-- Personal Info -->\r\n            <td v-if=\"showSummaryColumns\" class=\"center\">\r\n              <span :class=\"['chip', row.staff_info_complete ? 'ok' : 'bad']\">\r\n                {{ row.staff_info_complete ? 'Complete' : 'Incomplete' }}\r\n              </span>\r\n              <br><br>\r\n              <div class=\"pair\"><span class=\"k\">Doctor:</span><br><span class=\"v\">{{ row.personal_doctor_email || '-' }}</span></div>\r\n              <br>\r\n              <div v-if=\"row.staff_updated_at\" class=\"mini-ts\">{{ formatDate(row.staff_updated_at) }}</div>\r\n              <br>\r\n              <div v-if=\"sinceCreated(row,'staff')\" class=\"since-pill\">since created</div>\r\n            </td>\r\n\r\n            <!-- Occupational History -->\r\n            <td v-if=\"showSummaryColumns\" class=\"center\">\r\n              <div class=\"tcount\">\r\n                <!-- <span class=\"num\">{{ row.occ_count ?? 0 }}</span>\r\n                <br><br> -->\r\n                <small v-if=\"row.occ_updated_at\">{{ formatDate(row.occ_updated_at) }}</small>\r\n                <br>\r\n                <div v-if=\"sinceCreated(row,'occ')\" class=\"since-pill\">since created</div>\r\n              </div>\r\n            </td>\r\n\r\n            <!-- Family -->\r\n            <td v-if=\"showSummaryColumns\" class=\"center\">\r\n              <span :class=\"['chip', row.family_min_ok ? 'ok' : 'bad']\">{{ row.family_min_ok ? 'Complete' : 'Incomplete' }}</span>\r\n              <br><br>\r\n              <div class=\"tcount\">\r\n                <span class=\"num\">{{ row.fam_named_count ?? 0 }}</span>\r\n                <br><br>\r\n                <div v-if=\"row.fam_updated_at\" class=\"mini-ts\">{{ formatDate(row.fam_updated_at) }}</div>\r\n                <br>\r\n                <div v-if=\"sinceCreated(row,'fam')\" class=\"since-pill\">since created</div>\r\n              </div>\r\n            </td>\r\n\r\n            <!-- Family Disease -->\r\n            <td v-if=\"showSummaryColumns\" class=\"center\">\r\n              <span :class=\"['chip', row.fhd_answered ? 'ok' : 'bad']\">{{ row.fhd_answered ? 'Complete' : 'Incomplete' }}</span>\r\n              <br><br>\r\n              <div v-if=\"row.fhd_updated_at\" class=\"mini-ts\">{{ formatDate(row.fhd_updated_at) }}</div>\r\n              <br>\r\n              <div v-if=\"sinceCreated(row,'fhd')\" class=\"since-pill\">since created</div>\r\n            </td>\r\n\r\n            <!-- Updated At -->\r\n            <!-- <td v-if=\"showSummaryColumns\">\r\n              <div class=\"pair\">\r\n                <span class=\"k\">Staff:</span>\r\n                <span class=\"v\">\r\n                  {{ formatDate(row.staff_updated_at) || '-' }}\r\n                  <span v-if=\"sinceCreated(row,'staff')\" class=\"since\"> since created</span>\r\n                </span>\r\n              </div>\r\n              <div class=\"pair\">\r\n                <span class=\"k\">Occ:</span>\r\n                <span class=\"v\">\r\n                  {{ formatDate(row.occ_updated_at) || '-' }}\r\n                  <span v-if=\"sinceCreated(row,'occ')\" class=\"since\"> since created</span>\r\n                </span>\r\n              </div>\r\n              <div class=\"pair\">\r\n                <span class=\"k\">Fam:</span>\r\n                <span class=\"v\">\r\n                  {{ formatDate(row.fam_updated_at) || '-' }}\r\n                  <span v-if=\"sinceCreated(row,'fam')\" class=\"since\"> since created</span>\r\n                </span>\r\n              </div>\r\n              <div class=\"pair\">\r\n                <span class=\"k\">FHD:</span>\r\n                <span class=\"v\">\r\n                  {{ formatDate(row.fhd_updated_at) || '-' }}\r\n                  <span v-if=\"sinceCreated(row,'fhd')\" class=\"since\"> since created</span>\r\n                </span>\r\n              </div>\r\n            </td> -->\r\n\r\n            <!-- Session Count -->\r\n            <td class=\"center\">{{ row.session_count }}</td>\r\n\r\n            <!-- Actions -->\r\n            <td class=\"center\" @click.stop>\r\n              <button @click=\"goEditStaff(row.staff_email)\">Open</button>\r\n              <button @click=\"goSessions(row.staff_email)\">View Sessions</button>\r\n              <button @click=\"openDetails(row)\">Preview Details</button>\r\n            </td>\r\n          </tr>\r\n\r\n          <tr v-if=\"!loading && displayedItems.length===0\">\r\n            <td colspan=\"8\" class=\"empty\">No staff found for this filter.</td>\r\n          </tr>\r\n\r\n          <tr v-if=\"loading\">\r\n            <td colspan=\"8\" class=\"loading\">Loading</td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n    <!-- sticky horizontal scrollbar (proxy) -->\r\n    <div class=\"x-scroll\" ref=\"xScroll\" @scroll=\"onXScroll\">\r\n      <!-- This spacers width will be set to match the tables scroll width -->\r\n      <div :style=\"{ width: tableScrollWidth + 'px', height: '1px' }\"></div>\r\n    </div>\r\n\r\n\r\n    <!-- Right drawer -->\r\n    <div class=\"drawer\" :class=\"{open: detailOpen}\" @click.self=\"closeDetails\">\r\n      <div class=\"drawer-panel\" @click.stop>\r\n        <div class=\"drawer-header\">\r\n          <div>\r\n            <div class=\"title\"><strong> Non-Session Details</strong></div>\r\n            <div class=\"subtitle\" v-if=\"detail?.staff\">\r\n              {{ detail.staff.staff_name || '(no name)' }}  {{ detail.staff.staff_email }}\r\n            </div>\r\n          </div>\r\n          <button class=\"x\" @click=\"closeDetails\"></button>\r\n        </div>\r\n\r\n        <div class=\"drawer-body\">\r\n          <section class=\"box\" v-if=\"detail?.staff\">\r\n            <h4>Staff Info</h4>\r\n            <div class=\"grid2\">\r\n              <div class=\"pair\"><span class=\"k\">Staff No:</span><span class=\"v\">{{ detail.staff.staff_no || '-' }}</span></div>\r\n              <div class=\"pair\"><span class=\"k\">Job Title / Position:</span><span class=\"v\">{{ detail.staff.job_title || '-' }}</span></div>\r\n              <div class=\"pair\"><span class=\"k\">Department:</span><span class=\"v\">{{ detail.staff.department || '-' }}</span></div>\r\n              <div class=\"pair\"><span class=\"k\">Nationality:</span><span class=\"v\">{{ detail.staff.nationality || '-' }}</span></div>\r\n              <div class=\"pair\"><span class=\"k\">Phone:</span><span class=\"v\">{{ detail.staff.phone_no || '-' }}</span></div>\r\n              <div class=\"pair\"><span class=\"k\">Address:</span><span class=\"v\">{{ detail.staff.address || '-' }}</span></div>\r\n            </div>\r\n          </section>\r\n\r\n          <section class=\"box\">\r\n            <h4>Occupational History ({{ detail?.occupational_history?.length || 0 }})</h4>\r\n            <div v-if=\"detail?.occupational_history?.length\">\r\n              <table class=\"mini\">\r\n                <thead>\r\n                  <tr>\r\n                    <th>#</th>\r\n                    <th>Year</th>\r\n                    <th>Company</th>\r\n                    <th>Location</th>\r\n                    <th>Job Title</th>\r\n                    <th>Nature of Work</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  <tr v-for=\"(oh,i) in detail.occupational_history\" :key=\"oh.oh_id || i\">\r\n                    <td>{{ i+1 }}</td>\r\n                    <td>{{ oh.year ?? '' }}</td>\r\n                    <td>{{ oh.company ?? '' }}</td>\r\n                    <td>{{ oh.location ?? '' }}</td>\r\n                    <td>{{ oh.job_title ?? '' }}</td>\r\n                    <td>{{ oh.nature_of_work ?? '' }}</td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n            <div v-else class=\"muted\">No occupational history.</div>\r\n          </section>\r\n\r\n          <section class=\"box\">\r\n            <h4>Family Members ({{ detail?.family_history?.length || 0 }})</h4>\r\n            <div v-if=\"detail?.family_history?.length\">\r\n              <table class=\"mini\">\r\n                <thead>\r\n                  <tr>\r\n                    <th>#</th>\r\n                    <th>Relationship</th>\r\n                    <th>Name</th>\r\n                    <th>Sex</th>\r\n                    <th>Year of Birth</th>\r\n                    <th>Age</th>\r\n                    <th>Age at Death</th>\r\n                    <th>Health / Cause of Death</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  <tr v-for=\"(fh,i) in detail.family_history\" :key=\"fh.fh_id || i\">\r\n                    <td>{{ i+1 }}</td>\r\n                    <td>{{ fh.relationship }}</td>\r\n                    <td>{{ fh.relative_name ?? '' }}</td>\r\n                    <td>{{ fh.sex ?? '' }}</td>\r\n                    <td>{{ fh.year_of_born ?? '' }}</td>\r\n                    <td>{{ fh.age_now ?? '' }}</td>\r\n                    <td>{{ fh.age_at_death ?? '-' }}</td>\r\n                    <td>{{ fh.state_health_death_cause ?? '-' }}</td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n            <div v-else class=\"muted\">No family members.</div>\r\n          </section>\r\n\r\n          <section class=\"box\">\r\n            <h4>Family History Disease</h4>\r\n            <div v-if=\"detail?.family_history_disease\">\r\n              <table class=\"mini\">\r\n                <thead>\r\n                  <tr>\r\n                    <th>Disease</th>\r\n                    <th>Yes / No</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  <tr>\r\n                    <td>Heart disease</td>\r\n                    <td>{{ yn(detail.family_history_disease.heart_disease) }}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>HBP</td>\r\n                    <td>{{ yn(detail.family_history_disease.high_blood_pressure) }}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>Diabetes</td>\r\n                    <td>{{ yn(detail.family_history_disease.diabetes) }}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>Stroke</td>\r\n                    <td>{{ yn(detail.family_history_disease.stroke) }}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>Kidney</td>\r\n                    <td>{{ yn(detail.family_history_disease.kidney_disease) }}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>Allergy</td>\r\n                    <td>{{ yn(detail.family_history_disease.allergy) }}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>Asthma</td>\r\n                    <td>{{ yn(detail.family_history_disease.asthma) }}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>Eczema</td>\r\n                    <td>{{ yn(detail.family_history_disease.eczema) }}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>TB</td>\r\n                    <td>{{ yn(detail.family_history_disease.tuberculosis) }}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>Epilepsy</td>\r\n                    <td>{{ yn(detail.family_history_disease.epilepsy) }}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>Mental Disorder</td>\r\n                    <td>{{ yn(detail.family_history_disease.mental_disorder) }}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>Alcohol</td>\r\n                    <td>{{ yn(detail.family_history_disease.alcohol_dependence) }}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>Drugs</td>\r\n                    <td>{{ yn(detail.family_history_disease.drug_abuse) }}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>Birth abnormality</td>\r\n                    <td>{{ yn(detail.family_history_disease.birth_abnormality) }}</td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n              <div class=\"box\">\r\n                <p style=\"margin-bottom: 1rem;\">\r\n                  <b>Details:</b>\r\n                  <br>{{ detail.family_history_disease.details }}\r\n                </p>\r\n              </div>\r\n            </div>\r\n            <div v-else class=\"muted\">No family disease summary.</div>\r\n          </section>\r\n        </div>\r\n\r\n        <div class=\"drawer-footer\">\r\n          <button @click=\"goEditStaff(detail?.staff?.staff_email)\" :disabled=\"!detail?.staff\">Open Info</button>\r\n          <button @click=\"goSessions(detail?.staff?.staff_email)\" :disabled=\"!detail?.staff\">View Sessions</button>\r\n          <button class=\"ghost\" @click=\"closeDetails\">Close</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport cfg from '@/apiConfig';\r\nimport { handleUnauthorized } from '@/shared/handleUnauthorized';\r\nimport ExportExcel from '@/components/ExportExcel.vue';\r\nimport { formatDate } from '@/shared/dateFormat';\r\n\r\nexport default {\r\n  name: 'NonSessionCompleteness',\r\n  components: { ExportExcel },\r\n  data() {\r\n    return {\r\n      loading: false,\r\n      tableScrollWidth: 0,\r\n      resizeObs: null,\r\n      // isAdminRole: false,\r\n\r\n      baseUrl: cfg.API_BASE_URL,\r\n\r\n      items: [],\r\n      search: '',\r\n      page: 1,\r\n      pageSize: 20,\r\n      statusFilter: 'all',\r\n      showSummaryColumns: false,\r\n\r\n      // dropdown state\r\n      openRowMenuId: null,\r\n\r\n      // drawer\r\n      detailOpen: false,\r\n      detail: null,\r\n\r\n      // debounce\r\n      t: null,\r\n    };\r\n  },\r\n  mounted() {\r\n    this.fetchSummary();\r\n    // // close row action menu on outside click\r\n    // this._onDocClick = (e) => {\r\n    //   if (!e.target.closest('.action-menu')) this.openRowMenuId = null;\r\n    // };\r\n    // document.addEventListener('click', this._onDocClick);\r\n    // // Esc closes menus/drawer\r\n    // this._onKey = (e) => {\r\n    //   if (e.key === 'Escape') {\r\n    //     this.openRowMenuId = null;\r\n    //     if (this.detailOpen) this.closeDetails();\r\n    //   }\r\n    // };\r\n    // document.addEventListener('keydown', this._onKey);\r\n    this.$nextTick(() => this.measureXBar());\r\n    // keep it in sync on resize/content changes\r\n    window.addEventListener('resize', this.measureXBar);\r\n    this.resizeObs = new ResizeObserver(() => this.measureXBar());\r\n    const wrap = this.$el.querySelector('.table-wrap');\r\n    if (wrap) this.resizeObs.observe(wrap);\r\n  },\r\n  beforeUnmount() {\r\n    // document.removeEventListener('click', this._onDocClick);\r\n    // document.removeEventListener('keydown', this._onKey);\r\n    window.removeEventListener('resize', this.measureXBar);\r\n    if (this.resizeObs) this.resizeObs.disconnect();\r\n  },\r\n  computed: {\r\n    isAdminRole() { \r\n      const userInfoString = localStorage.getItem('user_info');\r\n      if (userInfoString) {\r\n        try {\r\n          const userInfo = JSON.parse(userInfoString);\r\n          return userInfo.role === 'admin';\r\n        } catch (e) {\r\n          console.error('Error parsing user_info from localStorage:', e);\r\n          return false;\r\n        }\r\n      }\r\n      return false;\r\n    },\r\n    displayedItems() {\r\n      const src = Array.isArray(this.items) ? this.items : [];\r\n      const q = (this.search || '').toLowerCase();\r\n\r\n      // 1) text search\r\n      let out = src.filter(r => {\r\n        const hay = `${r.staff_name || ''} ${r.staff_email || ''} ${r.staff_no || ''}`.toLowerCase();\r\n        return !q || hay.includes(q);\r\n      });\r\n\r\n      // 2) filter (complete/incomplete)\r\n      if (this.statusFilter !== 'all') {\r\n        out = out.filter(r => this.rowStatus(r) === this.statusFilter);\r\n      }\r\n      return out;\r\n    },\r\n    counts() {\r\n      const all = { complete: 0, incomplete: 0 };\r\n      const filtered = { complete: 0, incomplete: 0 };\r\n\r\n      // totals across all items\r\n      for (const r of (Array.isArray(this.items) ? this.items : [])) {\r\n        const s = this.rowStatus(r);\r\n        all[s] = (all[s] || 0) + 1;\r\n      }\r\n\r\n      // numbers for what's currently displayed (after search/filter)\r\n      for (const r of this.displayedItems) {\r\n        const s = this.rowStatus(r);\r\n        filtered[s] = (filtered[s] || 0) + 1;\r\n      }\r\n      return { all, filtered };\r\n    },\r\n    // export excel\r\n    nsColumns() {\r\n      // can reuse helpers available in this SFC \r\n      return [\r\n        { key: 'staff_name',  label: 'Name' },\r\n        { key: 'staff_email', label: 'Email' },\r\n        { key: 'staff_no',    label: 'Staff No' },\r\n        { key: 'job_title',   label: 'Job Title / Position' },\r\n        { key: 'department', label: 'Department' },\r\n\r\n        { key: 'staff_info_complete', label: 'Staff Info Complete', format: v => v ? 'Yes' : 'No' },\r\n        { key: 'family_min_ok',       label: 'Family Minimum OK',   format: v => v ? 'Yes' : 'No' },\r\n        { key: 'fhd_answered',        label: 'Family Disease Answered', format: v => v ? 'Yes' : 'No' },\r\n\r\n        { key: 'occ_count',       label: 'Occupational Entries' },\r\n        { key: 'fam_named_count', label: 'Family Named Entries' },\r\n\r\n        { key: 'staff_updated_at', label: 'Staff Updated At', format: (v) => this.fmtDateTime?.(v) ?? v ?? '' },\r\n        { key: 'occ_updated_at',   label: 'Occupational Updated At', format: (v) => this.fmtDateTime?.(v) ?? v ?? '' },\r\n        { key: 'fam_updated_at',   label: 'Family Updated At', format: (v) => this.fmtDateTime?.(v) ?? v ?? '' },\r\n        { key: 'fhd_updated_at',   label: 'Family Disease Updated At', format: (v) => this.fmtDateTime?.(v) ?? v ?? '' },\r\n\r\n        { key: 'status', label: 'Overall Status', getter: (row) => this.rowStatus?.(row) ?? '' },\r\n        { key: 'non_session_score', label: 'Score' },\r\n      ];\r\n    },\r\n  },\r\n  methods: {\r\n    formatDate,\r\n    // measure the tables scrollable width and align proxy position\r\n    measureXBar() {\r\n      const wrap = this.$el.querySelector('.table-wrap');\r\n      if (!wrap) return;\r\n      this.tableScrollWidth = wrap.scrollWidth;\r\n      if (this.$refs.xScroll) {\r\n        this.$refs.xScroll.scrollLeft = wrap.scrollLeft;\r\n      }\r\n    },\r\n    // when the real table scrolls horizontally, move the proxy\r\n    onTableScroll(e) {\r\n      if (this.$refs.xScroll) {\r\n        this.$refs.xScroll.scrollLeft = e.target.scrollLeft;\r\n      }\r\n    },\r\n    // when the proxy scrolls, move the real table\r\n    onXScroll(e) {\r\n      const wrap = this.$el.querySelector('.table-wrap');\r\n      if (wrap) wrap.scrollLeft = e.target.scrollLeft;\r\n    },\r\n    // ---- Fetching ----\r\n    fetchSummary() {\r\n      \r\n      this.loading = true;\r\n      const params = new URLSearchParams({\r\n        q: this.search || '',\r\n        page: String(this.page),\r\n        page_size: String(this.pageSize)\r\n      });\r\n\r\n      fetch(`${this.baseUrl}/admin/non-session/summary?${params.toString()}`, {\r\n        headers: {\r\n          Authorization: `Bearer ${localStorage.getItem('jwt_token')}`,\r\n          'Content-Type': 'application/json'\r\n        }\r\n      })\r\n      .then(res => {\r\n        if (handleUnauthorized(res)) return;\r\n\r\n        return res.json();\r\n      })\r\n      .then(data => {\r\n        this.items = Array.isArray(data) ? data : (Array.isArray(data.items) ? data.items : []);\r\n      })\r\n      .catch(() => { this.items = []; })\r\n      .finally(() => {\r\n        this.loading = false;\r\n        this.$nextTick(() => this.measureXBar());\r\n      });\r\n    },\r\n    debouncedFetch() {\r\n      clearTimeout(this.t);\r\n      this.t = setTimeout(() => {\r\n        this.page = 1;\r\n        this.fetchSummary();\r\n      }, 300);\r\n    },\r\n    nextPage() { this.page++; this.fetchSummary(); },\r\n    prevPage() { if (this.page > 1) { this.page--; this.fetchSummary(); } },\r\n\r\n    // ---- \"since created\" helpers ----\r\n    // sameDay(a, b) {\r\n    //   if (!a || !b) return false;\r\n    //   const da = new Date(a), db = new Date(b);\r\n    //   if (isNaN(da) || isNaN(db)) return false;\r\n    //   return da.getFullYear()===db.getFullYear()\r\n    //     && da.getMonth()===db.getMonth()\r\n    //     && da.getDate()===db.getDate();\r\n    // },\r\n    // check if a specific section's updated_at equals the session_created_at (by day)\r\n    sinceCreated(row, key) {\r\n      // key all: 'staff' | 'occ' | 'fam' | 'fhd'\r\n      const map = {\r\n        staff: row.staff_updated_at,\r\n        occ:   row.occ_updated_at,\r\n        fam:   row.fam_updated_at,\r\n        fhd:   row.fhd_updated_at\r\n      };\r\n      const dateA = new Date(map[key]);\r\n      const dateB = new Date(row.staff_created_at);\r\n      return dateA.toDateString() === dateB.toDateString() && dateA.getHours() === dateB.getHours() && dateA.getMinutes() === dateB.getMinutes();\r\n    },\r\n    // ---- Status logic (Complete / Incomplete) ----\r\n    rowStatus(r) {\r\n      const staffOk = r?.staff_info_complete ? 1 : 0;\r\n      const famOk   = r?.family_min_ok ? 1 : 0;      // backend already enforces 2 named relatives\r\n      const fhdOk   = r?.fhd_answered ? 1 : 0;       // updated_at > created_at\r\n\r\n      const complete = (staffOk && famOk && fhdOk);\r\n      return complete ? 'complete' : 'incomplete';\r\n    },\r\n    // rowStatus(r) {\r\n    //   const hasStaffInfo = !!r.staff_info_complete;\r\n    //   const famCount = Number(r.fam_count ?? 0);\r\n    //   const hasFhd = (r.has_fhd === true || r.has_fhd === 1 || r.has_fhd === '1');\r\n    //   const occCount = Number(r.occ_count ?? 0);\r\n\r\n    //   const incomplete = !hasStaffInfo || famCount === 0 || !hasFhd || occCount === 0;\r\n    //   return incomplete ? 'incomplete' : 'complete';\r\n    // },\r\n\r\n    // ---- UI Helpers ----\r\n    fmtDateTime(v) {\r\n      if (!v) return '';\r\n      const d = new Date(v);\r\n      if (isNaN(d)) return v;\r\n      const options = { year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit' };\r\n      return d.toLocaleString('default', options).replace(/:\\d{2}$/, ':00');\r\n    },\r\n    yn(v) { return (v === true || v === 1 || v === '1' || v === 'Y' || v === 'y') ? 'Yes' : 'No'; },\r\n\r\n    // ---- Row actions ----\r\n    // toggleRowMenu(id) {\r\n    //   this.openRowMenuId = this.openRowMenuId === id ? null : id;\r\n    // },\r\n    openDetails(row) {\r\n      // close any open dropdown before opening the drawer\r\n      this.openRowMenuId = null;\r\n      this.detailOpen = true;\r\n      this.detail = null;\r\n\r\n      const emailXYZ = encodeURIComponent(row.staff_email.replace(/\\./g, 'XYZ'));\r\n      fetch(`${this.baseUrl}/admin/non-session/staff/${emailXYZ}`, {\r\n        headers: {\r\n          Authorization: `Bearer ${localStorage.getItem('jwt_token')}`,\r\n          'Content-Type': 'application/json'\r\n        }\r\n      })\r\n        .then(r => r.json())\r\n        .then(payload => { this.detail = payload || {}; })\r\n        .catch(() => {});\r\n    },\r\n    closeDetails() {\r\n      this.detailOpen = false;\r\n      this.detail = null;\r\n      this.openRowMenuId = null;\r\n    },\r\n    goSessions(staffEmail) {\r\n      this.openRowMenuId = null;\r\n      if (!staffEmail) return;\r\n      const q = encodeURIComponent(staffEmail);\r\n      if (!this.isAdminRole) {\r\n        this.$router.push(`/doctor/manage-sessions?staff=${q}`);\r\n      } else {\r\n        this.$router.push(`/admin/manage-sessions?staff=${q}`);\r\n      }\r\n    },\r\n    goEditStaff(staffEmail) {\r\n      this.openRowMenuId = null;\r\n      if (!staffEmail) return;\r\n      const q = encodeURIComponent(staffEmail);\r\n      console.log('goEditStaff', q);\r\n      this.$router.push(`/admin/non-session/${q}`);\r\n    },\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.toolbar {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n</style>","import { render } from \"./NonSessionCompleteness.vue?vue&type=template&id=058d56ae&scoped=true\"\nimport script from \"./NonSessionCompleteness.vue?vue&type=script&lang=js\"\nexport * from \"./NonSessionCompleteness.vue?vue&type=script&lang=js\"\n\nimport \"./NonSessionCompleteness.vue?vue&type=style&index=0&id=058d56ae&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-058d56ae\"]])\n\nexport default __exports__","<template>\r\n\r\n    <h2>User Details</h2>\r\n\r\n    <button @click=\"$router.push('/admin/manage-users')\">Back to Manage Users</button>\r\n        \r\n    <div v-if=\"user\">\r\n      <div v-if=\"role === 'doctor'\">\r\n      <h3>Doctor Details</h3>\r\n      <p><strong>Email:</strong> {{ user.doctor_email || '-' }}</p>\r\n      <p><strong>Name:</strong> {{ user.doctor_name || '-' }}</p>\r\n      <p><strong>Phone Number:</strong> {{ user.phone_no || '-' }}</p>\r\n    </div>\r\n    \r\n    <div v-else-if=\"role === 'staff'\">\r\n      <h3>Staff Details</h3>\r\n      <p><strong>Role:</strong> {{ user.role }}</p>\r\n      <p><strong>Staff UID:</strong> {{ user.staff_uid }}</p>\r\n      <p><strong>Email:</strong> {{ user.staff_email }}</p>\r\n      <p><strong>Name:</strong> {{ user.staff_name || '-' }}</p>\r\n      <p><strong>Created At:</strong> {{ user.created_at || '-' }}</p>\r\n      <p><strong>Last Updated:</strong> {{ user.updated_at || '-' }}</p>\r\n      <p><strong>Marital Status:</strong> {{ user.marital_status || '-' }}</p>\r\n      <p><strong>Sex:</strong> {{ user.sex || '-' }}</p>\r\n      <p><strong>Date of Birth:</strong> {{ user.date_of_birth || '-' }}</p>\r\n      <p><strong>Year of Birth:</strong> {{ user.year_of_born || '-' }}</p>\r\n      <p><strong>Age:</strong> {{ user.age || '-' }}</p>\r\n      <p><strong>IC/Passport:</strong> {{ user.ic_passport || '-' }}</p>\r\n      <p><strong>Nationality:</strong> {{ user.nationality || '-' }}</p>\r\n      <p><strong>Job Title:</strong> {{ user.job_title || '-' }}</p>\r\n      <p><strong>Staff No:</strong> {{ user.staff_no || '-' }}</p>\r\n      <p><strong>Phone No:</strong> {{ user.phone_no || '-' }}</p>\r\n      <p><strong>Address:</strong> {{ user.address || '-' }}</p>\r\n      <p><strong>Personal Doctor Email:</strong> {{ user.personal_doctor_email || 'N/A' }}</p>\r\n      <p><strong>Doctor Phone No:</strong> {{ user.doctor_phone_no || 'N/A' }}</p>\r\n      <p><strong>Reason for Examination:</strong> {{ user.reason_for_examination }}</p>\r\n    </div>\r\n\r\n    <div v-else-if=\"role === 'admin'\">\r\n      <h3>Admin Details</h3>\r\n      <p><strong>Email:</strong> {{ user.admin_email || '-' }}</p>\r\n      <p><strong>Name:</strong> {{ user.admin_name || '-' }}</p>\r\n      <p><strong>Department:</strong> {{ user.department || '-' }}</p>\r\n      <p><strong>Phone No:</strong> {{ user.phone_no || '-' }}</p>\r\n      </div>\r\n  </div>\r\n  <div v-else>\r\n      <p>Loading user data...</p>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport cfg from '@/apiConfig';\r\nimport { handleUnauthorized } from '@/shared/handleUnauthorized';\r\nexport default {\r\n  data() {\r\n    return {\r\n      baseUrl: cfg.API_BASE_URL,\r\n      user: null,\r\n      role: '',\r\n    };\r\n  },\r\n  mounted() {\r\n    const email = (this.$route.params.email).replace(/\\./g, 'XYZ');  // Get the email from the route parameter\r\n    this.fetchUserInfo(email);\r\n  },\r\n  methods: {\r\n    async fetchUserInfo(email) {\r\n      try {\r\n        const response = await fetch(`${this.baseUrl}/user/role-based/${email}`, {\r\n            method: 'GET',\r\n            headers: {\r\n                'Authorization': `Bearer ${localStorage.getItem('jwt_token')}`,\r\n                'Content-Type': 'application/json',\r\n            },\r\n        });\r\n\r\n        const data = await response.json();\r\n        if (response.ok) {\r\n          this.user = data;\r\n          this.role = data.role;\r\n        } else if (handleUnauthorized(response)) {\r\n          // return;\r\n        } else {\r\n          alert('Error fetching user data: ' + data.error);\r\n        }\r\n      } catch (error) {\r\n        console.error('Error:', error);\r\n        alert('Failed to load user data');\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n","import { render } from \"./ViewUser.vue?vue&type=template&id=4647c1d2\"\nimport script from \"./ViewUser.vue?vue&type=script&lang=js\"\nexport * from \"./ViewUser.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <div>\r\n    <h2>Staff Personal Information</h2>\r\n\r\n    <button class=\"action-btn\" @click=\"openModal\">Edit</button>\r\n\r\n    <!-- Display view -->\r\n    <table class=\"pretty\">\r\n      <tbody>\r\n        <tr><td><b>Full Name:</b></td> <td>{{ staffData.staff_name || '-' }}</td></tr>\r\n        <tr><td><b>Email:</b></td> <td>{{ staffData.staff_email || '-' }}</td></tr>\r\n        <tr><td><b>Last Updated at:</b></td> <td>{{ formatDate(staffData.updated_at) || '-' }}</td></tr>\r\n        <tr><td><b>Marital Status:</b></td> <td>{{ staffData.marital_status ? staffData.marital_status.charAt(0).toUpperCase() + staffData.marital_status.slice(1) : '-' }}</td></tr>\r\n        <tr><td><b>Gender:</b></td> <td>{{ staffData.sex === 'M' ? 'Male' : staffData.sex === 'F' ? 'Female' : '-' }}</td></tr>\r\n        <tr><td><b>Date of Birth:</b></td> <td>{{ formatDateShort(staffData.date_of_birth) || '-' }}</td></tr>\r\n        <tr><td><b>Year of Born:</b></td> <td>{{ staffData.year_of_born ?? '-' }}</td></tr>\r\n        <tr><td><b>Age:</b></td> <td>{{ staffData.age ?? '-' }}</td></tr>\r\n        <tr><td><b>IC Passport:</b></td> <td>{{ staffData.ic_passport || '-' }}</td></tr>\r\n        <tr><td><b>Nationality:</b></td> <td>{{ staffData.nationality || '-' }}</td></tr>\r\n        <tr><td><b>Job Title / Position:</b></td> <td>{{ staffData.job_title || '-' }}</td></tr>\r\n        <tr><td><b>Department:</b></td> <td>{{ staffData.department || '-' }}</td></tr>\r\n        <tr><td><b>Staff No:</b></td> <td>{{ staffData.staff_no || '-' }}</td></tr>\r\n        <tr><td><b>Phone No:</b></td> <td>{{ staffData.phone_no || '-' }}</td></tr>\r\n        <tr><td><b>Address:</b></td> <td>{{ staffData.address || '-' }}</td></tr>\r\n        <tr><td><b>Personal Doctor Email:</b></td> <td>{{ staffData.personal_doctor_email || '-' }}</td></tr>\r\n        <tr><td><b>Doctor's Phone No:</b></td> <td>{{ staffData.doctor_phone_no || '-' }}</td></tr>\r\n        <tr><td><b>Reason for Examination:</b></td> <td>{{ staffData.reason_for_examination || '-' }}</td></tr>\r\n        <tr><td><b>Date of This (Current) Assessment:</b></td> <td>{{ formatDateShort(staffData.date_of_this_assessment) || '-' }}</td></tr>\r\n        <tr><td><b>Date of Last Assessment:</b></td> <td>{{ formatDateShort(staffData.date_of_last_assessment) || '-' }}</td></tr>\r\n      </tbody>\r\n    </table>\r\n\r\n    <!-- <button @click=\"$router.back()\" style=\"margin-left:1rem;\">Back</button> -->\r\n\r\n    <!-- Modal: Edit staff info -->\r\n    <div v-if=\"isModalOpen\" class=\"modal-overlay\" @click=\"closeModal\">\r\n      <div class=\"modal-content\" @click.stop>\r\n        <h3>Edit Staff Personal Information</h3>\r\n        <form @submit.prevent=\"submitStaffEdit\">\r\n          <div class=\"form-grid\">\r\n            <div class=\"field\">\r\n              <label>Full Name</label>\r\n              <input type=\"text\" v-model=\"modalStaff.staff_name\" required />\r\n            </div>\r\n\r\n            <div class=\"field\">\r\n              <label>Marital Status</label>\r\n              <select style=\"margin-top: 0.5px\" v-model=\"modalStaff.marital_status\">\r\n                <option value=\"single\">Single</option>\r\n                <option value=\"married\">Married</option>\r\n                <option value=\"divorced\">Divorced</option>\r\n                <!-- <option value=\"cohabiting\">Cohabiting</option> -->\r\n              </select>\r\n            </div>\r\n\r\n            <div class=\"field\">\r\n              <label>Gender</label>\r\n              <select style=\"margin-top: 0.5px\" v-model=\"modalStaff.sex\">\r\n                <option value=\"M\">Male</option>\r\n                <option value=\"F\">Female</option>\r\n              </select>\r\n            </div>\r\n\r\n            <div class=\"field\">\r\n              <label>Date of Birth</label>\r\n              <VueDatePicker \r\n                  v-model=\"modalStaff.date_of_birth\"\r\n                  :max-date=\"new Date()\"\r\n                  :year-range=\"[1900, new Date().getFullYear()]\"\r\n                  auto-apply\r\n                  :enable-time-picker=\"false\"\r\n              />\r\n            </div>\r\n\r\n            <div class=\"field\">\r\n              <label>Year of Born</label>\r\n              <input type=\"number\" v-model.number=\"modalStaff.year_of_born\" @input=\"syncAgeFromYear\" />\r\n            </div>\r\n\r\n            <div class=\"field\">\r\n              <label>Age</label>\r\n              <input type=\"number\" v-model.number=\"modalStaff.age\" />\r\n            </div>\r\n\r\n            <div class=\"field\">\r\n              <label>IC / Passport <small class=\"mini-ts\">- without dash (-)</small></label>\r\n              <input type=\"text\" v-model=\"modalStaff.ic_passport\" pattern=\"[0-9a-zA-Z]*\" />\r\n            </div>\r\n\r\n            <div class=\"field\">\r\n              <label>Nationality</label>\r\n              <input type=\"text\" v-model=\"modalStaff.nationality\" />\r\n            </div>\r\n\r\n            <div class=\"field\">\r\n              <label>Job Title / Position</label>\r\n              <input type=\"text\" v-model=\"modalStaff.job_title\" />\r\n            </div>\r\n\r\n            <div class=\"field\">\r\n              <label>Department</label>\r\n              <select style=\"margin-top: 0.5px\" v-model=\"modalStaff.department\" required>\r\n                <option value=\"OPS-A\">OPS-A</option>\r\n                <option value=\"OPS-B\">OPS-B</option>\r\n                <option value=\"OPS-C\">OPS-C</option>\r\n                <option value=\"OPS-D\">OPS-D</option>\r\n                <option value=\"OPS-Normal\">OPS-Normal</option>\r\n                <option value=\"E&M\">E&M</option>\r\n                <option value=\"HSE\">HSE</option>\r\n                <option value=\"CS-Comm\">CS & Commercial</option>\r\n                <option value=\"Finance\">Finance</option>\r\n                <option value=\"HR\">HR</option>\r\n                <option value=\"IT\">IT</option>\r\n                <option value=\"MO\">MO</option>\r\n              </select>\r\n            </div>\r\n\r\n            <div class=\"field\">\r\n              <label>Staff No</label>\r\n              <input type=\"text\" v-model=\"modalStaff.staff_no\" />\r\n            </div>\r\n\r\n            <div class=\"field\">\r\n              <label>Phone No</label>\r\n              <input type=\"text\" v-model=\"modalStaff.phone_no\" />\r\n            </div>\r\n\r\n            <div class=\"field span-2\">\r\n              <label>Address</label>\r\n              <input type=\"text\" v-model=\"modalStaff.address\" />\r\n            </div>\r\n\r\n            <div class=\"field\">\r\n              <label>Personal Doctor Email</label>\r\n              <input type=\"text\" v-model=\"modalStaff.personal_doctor_email\" readonly class=\"readonly\" />\r\n            </div>\r\n\r\n            <div class=\"field\">\r\n              <label>Doctor's Phone No</label>\r\n              <input type=\"text\" v-model=\"modalStaff.doctor_phone_no\" readonly class=\"readonly\" />\r\n            </div>\r\n\r\n            <div class=\"field\">\r\n              <label>Date of This (Current) Assessment</label>\r\n              <input type=\"text\" v-model=\"modalStaff.date_of_this_assessment\" readonly class=\"readonly\" />\r\n            </div>\r\n\r\n            <div class=\"field\">\r\n              <label>Date of Last Assessment</label>\r\n              <input type=\"text\" v-model=\"modalStaff.date_of_last_assessment\" readonly class=\"readonly\" />\r\n            </div>\r\n\r\n            <div class=\"field span-2\">\r\n              <label>Reason for Examination</label>\r\n              <select style=\"margin-top: 0.5px\" v-model=\"modalStaff.reason_for_examination\" required>\r\n                <option value=\"Pre-employment\">Pre-employment</option>\r\n                <option value=\"Periodic / Medical Surveillance\">Periodic / Medical Surveillance</option>\r\n                <!-- <option value=\"Medical Surveillance\">Medical Surveillance</option> -->\r\n              </select>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"modal-actions\">\r\n            <button type=\"submit\" class=\"action-btn\" :disabled=\"!isModalChanged\">\r\n              Save Changes\r\n            </button>\r\n            <button type=\"button\" class=\"action-btn\" @click=\"closeModal\">Cancel</button>\r\n          </div>\r\n\r\n        </form>\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport cfg from '@/apiConfig';\r\nimport { handleUnauthorized } from '@/shared/handleUnauthorized';\r\nimport {formatDate, formatDateShort} from '@/shared/dateFormat';\r\nimport { VueDatePicker } from '@vuepic/vue-datepicker';\r\nimport '@vuepic/vue-datepicker/dist/main.css';\r\n\r\nexport default {\r\n  components: { VueDatePicker },\r\n  name: 'ManageStaffInfo',\r\n  data() {\r\n    return {\r\n      baseUrl: cfg.API_BASE_URL,\r\n      isModalOpen: false,\r\n      staffData: {\r\n        staff_uid: '',\r\n        staff_email: '',\r\n        staff_name: '',\r\n        updated_at: '',\r\n        marital_status: '',\r\n        sex: '',\r\n        date_of_birth: null,\r\n        year_of_born: null,\r\n        age: null,\r\n        ic_passport: '',\r\n        nationality: '',\r\n        job_title: '',\r\n        department: '',\r\n        staff_no: '',\r\n        phone_no: '',\r\n        address: '',\r\n        personal_doctor_email: '',\r\n        doctor_phone_no: '',\r\n        reason_for_examination: '',\r\n        date_of_this_assessment: '',\r\n        date_of_last_assessment: '',\r\n      },\r\n      originalStaffData: null,\r\n      modalStaff: {} // clone for editing\r\n    };\r\n  },\r\n  computed: {\r\n    // original \"form changed\" (display view didnt use this, but keeping parity)\r\n    isFormChanged() {\r\n      if (!this.originalStaffData) return false;\r\n      const fields = [\r\n        'staff_name','marital_status','sex','date_of_birth','year_of_born','age',\r\n        'ic_passport','nationality','job_title','department','staff_no','phone_no','address',\r\n        'personal_doctor_email','doctor_phone_no','reason_for_examination'\r\n      ];\r\n      return fields.some(f => this.staffData[f] !== this.originalStaffData[f]);\r\n    },\r\n    // modal change detection\r\n    isModalChanged() {\r\n      if (!this.originalStaffData) return false;\r\n      const fields = [\r\n        'staff_name','marital_status','sex','date_of_birth','year_of_born','age',\r\n        'ic_passport','nationality','job_title','department','staff_no','phone_no','address',\r\n        'personal_doctor_email','doctor_phone_no','reason_for_examination'\r\n      ];\r\n      return fields.some(f => this.modalStaff[f] !== this.originalStaffData[f]);\r\n    }\r\n  },\r\n  // watch: {\r\n  //   // Watcher for the year_of_born\r\n  //   'modalStaff.year_of_born'(newYear) {\r\n  //     if (newYear) {\r\n  //       // Calculate the new date, keeping month/day\r\n  //       const newDate = new Date(\r\n  //         newYear,\r\n  //         this.modalStaff.date_of_birth ? this.modalStaff.date_of_birth.getMonth() : 0, // Use existing month or default to Jan\r\n  //         this.modalStaff.date_of_birth ? this.modalStaff.date_of_birth.getDate() : 1   // Use existing day or default to 1st\r\n  //       );\r\n        \r\n  //       // ONLY update date_of_birth if the year has actually changed \r\n  //       // (This prevents the 'date_of_birth' watcher from firing unnecessarily)\r\n  //       if (this.modalStaff.date_of_birth?.getFullYear() !== newDate.getFullYear()) {\r\n  //            this.modalStaff.date_of_birth = newDate;\r\n  //       }\r\n  //     } else {\r\n  //        this.modalStaff.date_of_birth = null;\r\n  //     }\r\n  //   },\r\n\r\n  //   // Watcher for the date_of_birth\r\n  //   'modalStaff.date_of_birth'(newDate) {\r\n  //     if (newDate) {\r\n  //       const newYear = newDate.getFullYear();\r\n        \r\n  //       // ONLY update year_of_born if it has actually changed\r\n  //       // This stops the infinite loop\r\n  //       if (this.modalStaff.year_of_born !== newYear) {\r\n  //           this.modalStaff.year_of_born = newYear;\r\n  //       }\r\n  //     } else {\r\n  //       this.modalStaff.year_of_born = null;\r\n  //     }\r\n  //   },\r\n  // },\r\n  mounted() {\r\n    this.fetchStaffInfo();\r\n  },\r\n  methods: {\r\n    formatDateShort, formatDate,\r\n    fetchStaffInfo() {\r\n      const userInfo = localStorage.getItem('user_info');\r\n      if (!userInfo) return;\r\n\r\n      const staffEmailInView = this.$route.params.staffEmail || JSON.parse(localStorage.getItem('user_info')).email || '';\r\n      const staffEmailXYZ = staffEmailInView.replace(/\\./g, 'XYZ');\r\n      fetch(`${this.baseUrl}/staff/info/${encodeURIComponent(staffEmailXYZ)}`, {\r\n        method: 'GET',\r\n        headers: {\r\n          Authorization: `Bearer ${localStorage.getItem('jwt_token')}`,\r\n          'Content-Type': 'application/json'\r\n        }\r\n      })\r\n      .then(res => {\r\n        if (handleUnauthorized(res)) return;\r\n\r\n        return res.json();\r\n      })\r\n      .then(data => {\r\n        this.staffData = data || {};\r\n        // console.log(\"staffData: \", this.staffData);\r\n        this.originalStaffData = JSON.parse(JSON.stringify(this.staffData));\r\n      })\r\n      .catch(err => {\r\n        console.error('Error fetching staff info:', err);\r\n        alert('Failed to fetch staff info.');\r\n      });\r\n    },\r\n\r\n    openModal() {\r\n      this.modalStaff = JSON.parse(JSON.stringify(this.staffData));\r\n      this.isModalOpen = true;\r\n    },\r\n    closeModal() {\r\n      this.isModalOpen = false;\r\n      // discard edits\r\n      this.modalStaff = JSON.parse(JSON.stringify(this.staffData));\r\n    },\r\n\r\n    // auto-calc Age when Year of Birth is adjusted\r\n    syncAgeFromYear() {\r\n      const y = Number(this.modalStaff.year_of_born);\r\n      if (y && y > 1900) {\r\n        const now = new Date();\r\n        const age = now.getFullYear() - y;\r\n        // if date_of_birth is set, refine with month/day when you want; for now keep simple\r\n        this.modalStaff.age = age;\r\n      }\r\n    },\r\n\r\n    submitStaffEdit() {\r\n      // use the email on the record (authoritative)\r\n      const staffEmailXYZ = (this.modalStaff.staff_email || this.staffData.staff_email || '')\r\n        .replace(/\\./g, 'XYZ');\r\n\r\n      fetch(`${this.baseUrl}/staff/edit-info/${staffEmailXYZ}`, {\r\n        method: 'POST', // keeping your existing method\r\n        headers: {\r\n          Authorization: `Bearer ${localStorage.getItem('jwt_token')}`,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(this.modalStaff)\r\n      })\r\n      .then(res => res.json())\r\n      .then(() => {\r\n        alert('Personal info updated successfully');\r\n        this.isModalOpen = false;\r\n        // refresh display + baseline\r\n        this.fetchStaffInfo();\r\n      })\r\n      .catch(err => {\r\n        console.error('Error updating staff data:', err);\r\n        alert('Failed to update data.');\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.pretty {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  background: white;\r\n  box-shadow: 0 2px 6px rgba(0,0,0,0.05);\r\n}\r\n.pretty td {\r\n  padding: 12px 16px;\r\n  border-bottom: 1px solid #e2e8f0;\r\n}\r\n.pretty tr:nth-child(odd) td {\r\n  background:#fcfdff;\r\n}\r\n\r\n.action-btn {\r\n  background: #063d9b;\r\n  color: #edf2f7;\r\n  margin: 12px 0;\r\n}\r\naction-btn:disabled {\r\n  background: #cbd5e0 !important;\r\n  color: #2d3748 !important;\r\n  cursor: not-allowed;\r\n  opacity: 0.5 !important;\r\n}\r\n\r\n/* Form layout */\r\n.form-grid {\r\n  display:grid;\r\n  grid-template-columns: repeat(2, minmax(220px, 1fr));\r\n  gap: 12px 16px;\r\n  margin-top: 8px;\r\n}\r\n.field { display:flex; flex-direction:column; gap:6px; }\r\n.field label { font-size: 13px; color:#4a5568; }\r\n.field input,\r\n.field select {\r\n  border:1px solid #e2e8f0; border-radius:8px; padding:8px 10px;\r\n  font-size:14px; outline:none;\r\n}\r\n.field input.readonly {\r\n  background-color:#f0f0f0; cursor:not-allowed;\r\n}\r\n.span-2 { grid-column: span 2; }\r\n</style>\r\n","import { render } from \"./ManageInfo.vue?vue&type=template&id=17f52c08&scoped=true\"\nimport script from \"./ManageInfo.vue?vue&type=script&lang=js\"\nexport * from \"./ManageInfo.vue?vue&type=script&lang=js\"\n\nimport \"./ManageInfo.vue?vue&type=style&index=0&id=17f52c08&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-17f52c08\"]])\n\nexport default __exports__","<template>\r\n  <div>\r\n    <h2>Occupational History</h2>\r\n\r\n    <!-- Unified Modal for Add/Edit -->\r\n    <div v-if=\"isModalOpen\" class=\"modal-overlay-vertical\" @click=\"closeModal\">\r\n      <div class=\"modal-content-vertical\" @click.stop>\r\n        <h3>{{ editingHistory ? 'Edit Occupational History' : 'Add New Occupational History' }}</h3>\r\n        <form @submit.prevent=\"submitEntry\">\r\n          <label for=\"year\">Year:</label>\r\n          <input type=\"number\" v-model=\"modalHistory.year\" required /><br>\r\n\r\n          <label for=\"company\">Company:</label>\r\n          <input type=\"text\" v-model=\"modalHistory.company\" required /><br>\r\n\r\n          <label for=\"location\">Location:</label>\r\n          <input type=\"text\" v-model=\"modalHistory.location\" required /><br>\r\n\r\n          <label for=\"job_title\">Job Title:</label>\r\n          <input type=\"text\" v-model=\"modalHistory.job_title\" required /><br>\r\n\r\n          <label for=\"nature_of_work\">Nature of Work:</label>\r\n          <input type=\"text\" v-model=\"modalHistory.nature_of_work\" required /><br>\r\n\r\n          <button type=\"submit\">{{ editingHistory ? 'Save Changes' : 'Add Entry' }}</button>\r\n          <button type=\"button\" @click=\"closeModal\">Cancel</button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n\r\n    <div>\r\n      <table>\r\n        <thead>\r\n          <tr>\r\n            <th>#</th>\r\n            <th>Year</th>\r\n            <th>Company</th>\r\n            <th>Location</th>\r\n            <th>Job Title</th>\r\n            <th>Nature of Work</th>\r\n            <th>Actions</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n\r\n          <tr v-if=\"!occupationalHistory.length\">\r\n            <td colspan=\"6\" class=\"empty\">No occupational history record.</td>\r\n          </tr>\r\n\r\n          <template v-if=\"occupationalHistory.length\">\r\n            <tr v-for=\"(history, index) in occupationalHistory\" :key=\"index\">\r\n              <td>{{ index + 1 }}</td>\r\n              <td>{{ history.year ?? '-' }}</td>\r\n              <td>{{ history.company ?? '-' }}</td>\r\n              <td>{{ history.location ?? '-' }}</td>\r\n              <td>{{ history.job_title ?? '-' }}</td>\r\n              <td>{{ history.nature_of_work ?? '-' }}</td>\r\n              <td>\r\n                <button @click=\"openEditModal(history)\">Edit</button>\r\n                <button class=\"danger\" @click=\"deleteHistory(history)\">Delete</button>\r\n              </td>\r\n            </tr>\r\n          </template>\r\n\r\n        </tbody>\r\n      </table>\r\n      <button @click=\"openAddModal\">Add New Entry</button>\r\n    </div>\r\n\r\n    <!-- <button @click=\"$router.back()\" style=\"margin-left: 1rem;\">Back</button> -->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport cfg from '@/apiConfig';\r\nimport { handleUnauthorized } from '@/shared/handleUnauthorized';\r\nexport default {\r\n  data() {\r\n    return {\r\n      baseUrl: cfg.API_BASE_URL,\r\n      occupationalHistory: [],\r\n      isModalOpen: false,\r\n      editingHistory: null, // null if adding new entry\r\n      // the object bound to the modal inputs\r\n      modalHistory: { \r\n        year: null,\r\n        company: '',\r\n        location: '',\r\n        job_title: '',\r\n        nature_of_work: ''\r\n      }\r\n    }\r\n  },\r\n\r\n  mounted() {\r\n    this.fetchOccupationalHistory();\r\n  },\r\n\r\n  methods: {\r\n    fetchOccupationalHistory() {\r\n      const userInfo = localStorage.getItem('user_info');\r\n      if (!userInfo) return;\r\n      const staffEmailInView = this.$route.params.staffEmail || JSON.parse(localStorage.getItem('user_info')).email || '';\r\n      const staffEmailXYZ = staffEmailInView.replace(/\\./g, 'XYZ');\r\n\r\n      fetch(`${this.baseUrl}/occupational-history/${staffEmailXYZ}`, {\r\n        headers: { Authorization: `Bearer ${localStorage.getItem('jwt_token')}` }\r\n      })\r\n        .then(res => {\r\n          if (handleUnauthorized(res)) return;\r\n\r\n          return res.json();\r\n        })\r\n        .then(data => {\r\n          this.occupationalHistory = data;\r\n          // console.log(\"Occupational History: \", this.occupationalHistory);\r\n        })\r\n        .catch(err => {\r\n          console.error(err);\r\n          this.occupationalHistory = [];\r\n        });\r\n    },\r\n\r\n    // Open modal for adding new entry\r\n    openAddModal() {\r\n      this.editingHistory = null;\r\n      this.modalHistory = { year: null, company: '', location: '', job_title: '', nature_of_work: '' };\r\n      this.isModalOpen = true;\r\n    },\r\n\r\n    // Open modal for editing an existing entry\r\n    openEditModal(history) {\r\n      this.editingHistory = history;\r\n      this.modalHistory = { ...history }; // clone to avoid editing table directly\r\n      this.isModalOpen = true;\r\n    },\r\n\r\n    closeModal() {\r\n      this.isModalOpen = false;\r\n      this.editingHistory = null;\r\n      this.modalHistory = { year: null, company: '', location: '', job_title: '', nature_of_work: '' };\r\n    },\r\n\r\n    // Unified submit handler for add/edit\r\n    submitEntry() {\r\n      const userInfo = localStorage.getItem('user_info');\r\n      const token = localStorage.getItem('jwt_token');\r\n      if (!userInfo || !token) return alert('User not logged in');\r\n\r\n      const staffEmailInView = this.$route.params.staffEmail || JSON.parse(localStorage.getItem('user_info')).email || '';\r\n      // const staffEmail = JSON.parse(userInfo).email;\r\n      const staffEmail = staffEmailInView;\r\n\r\n      // construct payload with top-level keys (no array wrapper)\r\n      const payload = {\r\n        staff_email: staffEmail,\r\n        year: this.modalHistory.year,\r\n        company: this.modalHistory.company,\r\n        location: this.modalHistory.location,\r\n        job_title: this.modalHistory.job_title,\r\n        nature_of_work: this.modalHistory.nature_of_work\r\n      };\r\n\r\n      if (this.editingHistory) {\r\n        // EDIT\r\n        const url = `${this.baseUrl}/occupational-history/edit/${this.editingHistory.oh_id}`;\r\n        fetch(url, {\r\n          method: 'PUT',\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n            'Content-Type': 'application/json'\r\n          },\r\n          body: JSON.stringify(payload)\r\n        })\r\n          .then(res => res.json())\r\n          .then(() => {\r\n            // update the table locally\r\n            const index = this.occupationalHistory.findIndex(h => h.oh_id === this.editingHistory.oh_id);\r\n            if (index !== -1) this.occupationalHistory.splice(index, 1, { ...payload, oh_id: this.editingHistory.oh_id });\r\n            this.closeModal();\r\n          })\r\n          .catch(err => console.error(err));\r\n      } else {\r\n        // ADD\r\n        fetch(`${this.baseUrl}/occupational-history/add`, {\r\n          method: 'POST',\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n            'Content-Type': 'application/json'\r\n          },\r\n          body: JSON.stringify(payload)\r\n        })\r\n          .then(res => res.json())\r\n          .then(() => {\r\n            this.closeModal();\r\n            this.fetchOccupationalHistory();\r\n          })\r\n          .catch(err => console.error(err));\r\n      }\r\n    },\r\n\r\n    deleteHistory(history) {\r\n      const isConfirmed = window.confirm('Are you sure you want to delete this history?');\r\n      if (!isConfirmed) return;\r\n\r\n      fetch(`${this.baseUrl}/occupational-history/delete/${history.oh_id}`, {\r\n        method: 'DELETE',\r\n        headers: { Authorization: `Bearer ${localStorage.getItem('jwt_token')}` }\r\n      })\r\n        .then(() => {\r\n          alert('History deleted successfully');\r\n          this.occupationalHistory = this.occupationalHistory.filter(h => h.oh_id !== history.oh_id);\r\n        })\r\n        .catch(err => console.error(err));\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.manage-users {\r\n  padding: 24px;\r\n}\r\n\r\nh2 {\r\n  font-size: 22px;\r\n  margin-bottom: 16px;\r\n}\r\n\r\ntable {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  background: white;\r\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);\r\n}\r\n\r\nth,\r\ntd {\r\n  padding: 12px 16px;\r\n  text-align: left;\r\n  border-bottom: 1px solid #e2e8f0;\r\n}\r\n\r\nth {\r\n  background-color: #f7fafc;\r\n  color: #2d3748;\r\n  font-weight: 600;\r\n}\r\n\r\n.actions {\r\n  text-align: center;\r\n  display: flex;\r\n  gap: 8px;\r\n}\r\n\r\nbutton {\r\n  padding: 6px 12px;\r\n  font-size: 13px;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  background: #edf2f7;\r\n  color: #2d3748;\r\n  transition: background 0.2s ease;\r\n}\r\n\r\nbutton:hover {\r\n  background: #e2e8f0;\r\n}\r\n\r\nbutton.danger {\r\n  background: #feb2b2;\r\n  color: #742a2a;\r\n}\r\n\r\nbutton.danger:hover {\r\n  background: #fc8181;\r\n}\r\n\r\ninput {\r\n  width: 100%;\r\n  padding: 8px;\r\n  margin-bottom: 12px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n}\r\n\r\ninput:focus {\r\n  outline: none;\r\n  border-color: #4a90e2;\r\n}\r\n\r\nbutton[type=\"submit\"], button[type=\"button\"] {\r\n  width: 100%;\r\n  padding: 8px;\r\n  margin-top: 10px;\r\n  margin: 10px;\r\n  font-size: 16px;\r\n}\r\n</style>","import { render } from \"./ManageOccupationHistory.vue?vue&type=template&id=c950a14a&scoped=true\"\nimport script from \"./ManageOccupationHistory.vue?vue&type=script&lang=js\"\nexport * from \"./ManageOccupationHistory.vue?vue&type=script&lang=js\"\n\nimport \"./ManageOccupationHistory.vue?vue&type=style&index=0&id=c950a14a&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-c950a14a\"]])\n\nexport default __exports__","<template>\r\n  <div>\r\n    <h2>Family History</h2>\r\n\r\n    <!-- Unified Add/Edit Family Member Modal -->\r\n    <div v-if=\"isFamilyModalOpen\" class=\"modal-overlay-vertical\" @click=\"closeFamilyModal\">\r\n      <div class=\"modal-content-vertical\" @click.stop>\r\n        <h3>{{ editingFamily ? 'Edit Family Member' : 'Add Family Member' }}</h3>\r\n        <form @submit.prevent=\"submitFamilyEntry\">\r\n          <label>Relationship:</label>\r\n          <select v-model=\"modalFamily.relationship\" required>\r\n            <option value=\"father\">Father</option>\r\n            <option value=\"mother\">Mother</option>\r\n            <option value=\"spouse\">Spouse</option>\r\n            <option value=\"brother\">Brother</option>\r\n            <option value=\"sister\">Sister</option>\r\n            <option value=\"child\">Child</option>\r\n          </select><br><br>\r\n\r\n          <label>Relative Name:</label>\r\n          <input type=\"text\" v-model=\"modalFamily.relative_name\" required /><br>\r\n\r\n          <label>Sex:</label>\r\n          <select v-model=\"modalFamily.sex\">\r\n            <option value=\"M\">M</option>\r\n            <option value=\"F\">F</option>\r\n          </select><br><br>\r\n\r\n          <label>Year of Birth:</label>\r\n          <input type=\"number\" v-model=\"modalFamily.year_of_born\" /><br>\r\n\r\n          <label>Age Now:</label>\r\n          <!-- <input type=\"number\" v-model=\"modalFamily.age_now\" /><br> -->\r\n          <input type=\"number\" v-model=\"modalFamily.age_now\" readonly style=\"background-color: #f2f2f2;\" /><br>\r\n\r\n          <label>Age at Death:</label>\r\n          <input type=\"number\" v-model=\"modalFamily.age_at_death\" /><br>\r\n\r\n          <label>State Health / Death Cause:</label>\r\n          <input type=\"text\" v-model=\"modalFamily.state_health_death_cause\" /><br>\r\n\r\n          <button type=\"submit\">{{ editingFamily ? 'Save Changes' : 'Add Member' }}</button>\r\n          <button type=\"button\" @click=\"closeFamilyModal\">Cancel</button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Family Disease Modal -->\r\n    <div v-if=\"isDiseaseModalOpen\" class=\"modal-overlay-vertical\" @click=\"closeDiseaseModal\">\r\n      <div class=\"modal-content-vertical\" @click.stop style=\"overflow-y: auto; max-height: 90vh;\">\r\n        <h3>Edit Family Disease</h3>\r\n        <form @submit.prevent=\"submitDiseaseEntry\">\r\n          <table>\r\n            <tbody>\r\n              <tr>\r\n                <td><label>Heart Disease</label></td>\r\n                <td><input type=\"checkbox\" class=\"checkbox\" v-model=\"modalDisease.heart_disease\" /></td>\r\n              </tr>\r\n              <tr>\r\n                <td><label>High Blood Pressure</label></td>\r\n                <td><input type=\"checkbox\" class=\"checkbox\" v-model=\"modalDisease.high_blood_pressure\" /></td>\r\n              </tr>\r\n              <tr>\r\n                <td><label>Stroke</label></td>\r\n                <td><input type=\"checkbox\" class=\"checkbox\" v-model=\"modalDisease.stroke\" /></td>\r\n              </tr>\r\n              <tr>\r\n                <td><label>Cancer</label></td>\r\n                <td><input type=\"checkbox\" class=\"checkbox\" v-model=\"modalDisease.cancer\" /></td>\r\n              </tr>\r\n              <tr>\r\n                <td><label>Diabetes</label></td>\r\n                <td><input type=\"checkbox\" class=\"checkbox\" v-model=\"modalDisease.diabetes\" /></td>\r\n              </tr>\r\n              <tr>\r\n                <td><label>Kidney Disease</label></td>\r\n                <td><input type=\"checkbox\" class=\"checkbox\" v-model=\"modalDisease.kidney_disease\" /></td>\r\n              </tr>\r\n              <tr>\r\n                <td><label>Allergy</label></td>\r\n                <td><input type=\"checkbox\" class=\"checkbox\" v-model=\"modalDisease.allergy\" /></td>\r\n              </tr>\r\n              <tr>\r\n                <td><label>Asthma</label></td>\r\n                <td><input type=\"checkbox\" class=\"checkbox\" v-model=\"modalDisease.asthma\" /></td>\r\n              </tr>\r\n              <tr>\r\n                <td><label>Eczema</label></td>\r\n                <td><input type=\"checkbox\" class=\"checkbox\" v-model=\"modalDisease.eczema\" /></td>\r\n              </tr>\r\n              <tr>\r\n                <td><label>Tuberculosis</label></td>\r\n                <td><input type=\"checkbox\" class=\"checkbox\" v-model=\"modalDisease.tuberculosis\" /></td>\r\n              </tr>\r\n              <tr>\r\n                <td><label>Epilepsy</label></td>\r\n                <td><input type=\"checkbox\" class=\"checkbox\" v-model=\"modalDisease.epilepsy\" /></td>\r\n              </tr>\r\n              <tr>\r\n                <td><label>Mental Disorder</label></td>\r\n                <td><input type=\"checkbox\" class=\"checkbox\" v-model=\"modalDisease.mental_disorder\" /></td>\r\n              </tr>\r\n              <tr>\r\n                <td><label>Alcohol Dependence</label></td>\r\n                <td><input type=\"checkbox\" class=\"checkbox\" v-model=\"modalDisease.alcohol_dependence\" /></td>\r\n              </tr>\r\n              <tr>\r\n                <td><label>Drug Abuse</label></td>\r\n                <td><input type=\"checkbox\" class=\"checkbox\" v-model=\"modalDisease.drug_abuse\" /></td>\r\n              </tr>\r\n              <tr>\r\n                <td><label>Birth Abnormality</label></td>\r\n                <td><input type=\"checkbox\" class=\"checkbox\" v-model=\"modalDisease.birth_abnormality\" /></td>\r\n              </tr>\r\n              <tr>\r\n                <td><label>None of the Above</label></td>\r\n                <td><input type=\"checkbox\" class=\"checkbox\" v-model=\"modalDisease.none_above\" /></td>\r\n              </tr>\r\n              <tr>\r\n                <td><label>Details:</label></td>\r\n                <td><textarea v-model=\"modalDisease.details\" style=\"height: 150px; width: 100%;\"></textarea></td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n\r\n          <button type=\"submit\">Save Disease Info</button>\r\n          <button type=\"button\" @click=\"closeDiseaseModal\">Cancel</button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Family History Table -->\r\n    <table>\r\n      <thead>\r\n        <tr>\r\n          <th>Relationship</th>\r\n          <th>Relative Name</th>\r\n          <th>Sex</th>\r\n          <th>Year of Birth</th>\r\n          <th>Age</th>\r\n          <th>Age at Death</th>\r\n          <th>State Health / Death Cause</th>\r\n          <th>Actions</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr v-for=\"history in familyHistory\" :key=\"history.fh_id\">\r\n          <td>{{ history.relationship.charAt(0).toUpperCase() + history.relationship.slice(1) }}</td>\r\n          <td>{{ history.relative_name ?? '' }}</td>\r\n          <td>{{ history.sex ?? '' }}</td>\r\n          <td>{{ history.year_of_born ?? '' }}</td>\r\n          <td>{{ history.age_now ?? '' }}</td>\r\n          <td>{{ history.age_at_death ?? '' }}</td>\r\n          <td>{{ history.state_health_death_cause ?? '' }}</td>\r\n          <td>\r\n            <button @click=\"openEditFamilyModal(history)\">Edit</button>\r\n            <button class=\"danger\" @click=\"deleteFamilyMember(history)\">Delete</button>\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n    <button @click=\"openAddFamilyModal\">Add Family Member</button>\r\n\r\n    <!-- Family Disease Box -->\r\n    <div class=\"disease-box\" style=\"margin-top: 1rem\">\r\n      <h3>Family History Disease</h3>\r\n\r\n      <!-- info icon -->\r\n      <!-- <div class=\"info-container\">\r\n        <span class=\"info-icon\" @click=\"showInfo = !this.showInfo\"></span>\r\n        <div v-if=\"showInfo\" class=\"info-overlay\" @click.self=\"showInfo = false\">\r\n          <div class=\"info-box\">\r\n            <h4 style=\"color: black\">Guide</h4>\r\n            <p style=\"color: black\">If this is your first time filling out this form and you don't want to check any boxes, make sure to also click <b>'Save Disease Info'</b> to ensure the data is up to date.</p>\r\n            <button style=\"color: white; background-color: blue;\" @click=\"showInfo = false\">Got it</button>\r\n          </div>\r\n        </div>\r\n      </div> -->\r\n\r\n\r\n      <div style=\"display: flex;\">\r\n      <table class=\"disease-table\">\r\n        <thead>\r\n          <tr>\r\n            <th>Disease</th>\r\n            <th>Yes/No</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr>\r\n            <td>Heart Disease</td>\r\n            <td><span :style=\"{ color: familyHistoryDisease.heart_disease ? 'red' : 'green' }\">{{ familyHistoryDisease.heart_disease ? 'Yes' : 'No' }}</span></td>\r\n          </tr>\r\n          <tr>\r\n            <td>High Blood Pressure</td>\r\n            <td><span :style=\"{ color: familyHistoryDisease.high_blood_pressure ? 'red' : 'green' }\">{{ familyHistoryDisease.high_blood_pressure ? 'Yes' : 'No' }}</span></td>\r\n          </tr>\r\n          <tr>\r\n            <td>Stroke</td>\r\n            <td><span :style=\"{ color: familyHistoryDisease.stroke ? 'red' : 'green' }\">{{ familyHistoryDisease.stroke ? 'Yes' : 'No' }}</span></td>\r\n          </tr>\r\n          <tr>\r\n            <td>Cancer</td>\r\n            <td><span :style=\"{ color: familyHistoryDisease.cancer ? 'red' : 'green' }\">{{ familyHistoryDisease.cancer ? 'Yes' : 'No' }}</span></td>\r\n          </tr>\r\n          <tr>\r\n            <td>Diabetes</td>\r\n            <td><span :style=\"{ color: familyHistoryDisease.diabetes ? 'red' : 'green' }\">{{ familyHistoryDisease.diabetes ? 'Yes' : 'No' }}</span></td>\r\n          </tr>\r\n          <tr>\r\n            <td>Kidney Disease</td>\r\n            <td><span :style=\"{ color: familyHistoryDisease.kidney_disease ? 'red' : 'green' }\">{{ familyHistoryDisease.kidney_disease ? 'Yes' : 'No' }}</span></td>\r\n          </tr>\r\n          <tr>\r\n            <td>Allergy</td>\r\n            <td><span :style=\"{ color: familyHistoryDisease.allergy ? 'red' : 'green' }\">{{ familyHistoryDisease.allergy ? 'Yes' : 'No' }}</span></td>\r\n          </tr>\r\n          <tr>\r\n            <td>Asthma</td>\r\n            <td><span :style=\"{ color: familyHistoryDisease.asthma ? 'red' : 'green' }\">{{ familyHistoryDisease.asthma ? 'Yes' : 'No' }}</span></td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n      <!-- separate 16/2 -->\r\n      <table class=\"disease-table\" style=\"margin-left: auto;\">\r\n        <thead>\r\n          <tr>\r\n            <th>Disease</th>\r\n            <th>Yes/No</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr>\r\n            <td>Eczema</td>\r\n            <td><span :style=\"{ color: familyHistoryDisease.eczema ? 'red' : 'green' }\">{{ familyHistoryDisease.eczema ? 'Yes' : 'No' }}</span></td>\r\n          </tr>\r\n          <tr>\r\n            <td>Tuberculosis</td>\r\n            <td><span :style=\"{ color: familyHistoryDisease.tuberculosis ? 'red' : 'green' }\">{{ familyHistoryDisease.tuberculosis ? 'Yes' : 'No' }}</span></td>\r\n          </tr>\r\n          <tr>\r\n            <td>Epilepsy</td>\r\n            <td><span :style=\"{ color: familyHistoryDisease.epilepsy ? 'red' : 'green' }\">{{ familyHistoryDisease.epilepsy ? 'Yes' : 'No' }}</span></td>\r\n          </tr>\r\n          <tr>\r\n            <td>Nervous or Mental Dependence</td>\r\n            <td><span :style=\"{ color: familyHistoryDisease.alcohol_dependence ? 'red' : 'green' }\">{{ familyHistoryDisease.alcohol_dependence ? 'Yes' : 'No' }}</span></td>\r\n          </tr>\r\n          <tr>\r\n            <td>Drug Abuse</td>\r\n            <td><span :style=\"{ color: familyHistoryDisease.drug_abuse ? 'red' : 'green' }\">{{ familyHistoryDisease.drug_abuse ? 'Yes' : 'No' }}</span></td>\r\n          </tr>\r\n          <tr>\r\n            <td>Birth Abnormality</td>\r\n            <td><span :style=\"{ color: familyHistoryDisease.birth_abnormality ? 'red' : 'green' }\">{{ familyHistoryDisease.birth_abnormality ? 'Yes' : 'No' }}</span></td>\r\n          </tr>\r\n          <tr>\r\n            <td><b>None of the Above</b></td>\r\n            <td><span :style=\"{ color: familyHistoryDisease.none_above ? 'green' : 'red' }\">{{ familyHistoryDisease.none_above ? 'Yes' : 'No' }}</span></td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n      </div>\r\n\r\n      <div class=\"inv-box\">\r\n        <strong>Details:</strong> <small><i>(to be filled by OHD)</i></small>\r\n        <p>{{ familyHistoryDisease.details || '-' }}</p>\r\n      </div>\r\n    </div>\r\n\r\n    <button @click=\"openDiseaseModal\">Edit Family Disease</button>\r\n    <!-- <button @click=\"$router.back()\" style=\"margin-left: 1rem;\">Back</button> -->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport cfg from '@/apiConfig';\r\nimport { handleUnauthorized } from '@/shared/handleUnauthorized';\r\nexport default {\r\n  data() {\r\n    return {\r\n      baseUrl: cfg.API_BASE_URL,\r\n      familyHistory: [],\r\n      familyHistoryDisease: [],\r\n\r\n      showInfo: false,\r\n\r\n      // Family Member modal\r\n      isFamilyModalOpen: false,\r\n      editingFamily: null,\r\n      modalFamily: {\r\n        relationship: '',\r\n        relative_name: '',\r\n        sex: '',\r\n        year_of_born: null,\r\n        age_now: null,\r\n        age_at_death: null,\r\n        state_health_death_cause: ''\r\n      },\r\n\r\n      // Disease modal\r\n      isDiseaseModalOpen: false,\r\n      modalDisease: {}\r\n    };\r\n  },\r\n\r\n  mounted() {\r\n    this.fetchFamilyHistory();\r\n    this.fetchFamilyDisease();\r\n  },\r\n\r\n  methods: {\r\n\r\n    fetchFamilyHistory() {\r\n      const userInfo = localStorage.getItem('user_info');\r\n      if (!userInfo) return;\r\n      // const staffEmail = JSON.parse(userInfo).email.replace(/\\./g, 'XYZ');\r\n      const staffEmailInView = this.$route.params.staffEmail || JSON.parse(localStorage.getItem('user_info')).email || '';\r\n      const staffEmailXYZ = staffEmailInView.replace(/\\./g, 'XYZ');\r\n\r\n      fetch(`${this.baseUrl}/family-history/${staffEmailXYZ}`, {\r\n        headers: { \r\n          Authorization: `Bearer ${localStorage.getItem('jwt_token')}` \r\n        }\r\n      })\r\n        .then(res => {\r\n          if (handleUnauthorized(res)) return;\r\n\r\n          return res.json();\r\n        })\r\n        .then(data => {\r\n          this.familyHistory = data.family_history;\r\n          // console.log(\"familyHistory: \",this.familyHistory);\r\n        })\r\n        .catch(err => console.error(err));\r\n    },\r\n    // boolean normalizer\r\n    asBool(v) {\r\n      if (v === true || v === false) return v;\r\n      if (v == null) return false;\r\n      if (typeof v === 'number') return v === 1;\r\n      if (typeof v === 'string') {\r\n        const s = v.trim().toLowerCase();\r\n        return s === '1' || s === 'true' || s === 'y' || s === 'yes';\r\n      }\r\n      return !!v;\r\n    },\r\n    fetchFamilyDisease() {\r\n      const userInfo = localStorage.getItem('user_info');\r\n      if (!userInfo) return;\r\n      // const staffEmail = JSON.parse(userInfo).email.replace(/\\./g, 'XYZ');\r\n      const staffEmailInView = this.$route.params.staffEmail || JSON.parse(localStorage.getItem('user_info')).email || '';\r\n      const staffEmailXYZ = staffEmailInView.replace(/\\./g, 'XYZ');\r\n\r\n      fetch(`${this.baseUrl}/family-history-disease/${staffEmailXYZ}`, {\r\n        headers: { \r\n          Authorization: `Bearer ${localStorage.getItem('jwt_token')}` \r\n        }\r\n      })\r\n        .then(res => {\r\n          if (handleUnauthorized(res)) return;\r\n\r\n          return res.json();\r\n        })\r\n        .then(data => {\r\n          // console.log(data);\r\n          // this.familyHistoryDisease = data;\r\n\r\n          // if data is an array, take the first element\r\n          const fhdData = Array.isArray(data) ? data[0] || {} : data;\r\n          Object.keys(fhdData).forEach(key => {\r\n            if (key !== 'staff_email' && key !== 'created_at' && key !== 'updated_at' && key !== 'details') {\r\n              fhdData[key] = this.asBool(fhdData[key]);\r\n            }\r\n          });\r\n          // this.familyHistoryDisease = Array.isArray(data) ? data[0] || {} : data;\r\n          this.familyHistoryDisease = fhdData;\r\n\r\n          // // convert numbers to booleans\r\n          // Object.keys(this.familyHistoryDisease).forEach(key => {\r\n          //   if (key !== 'staff_email' && key !== 'created_at' && key !== 'updated_at' && key !== 'details') {\r\n          //     this.familyHistoryDisease[key] = !!this.familyHistoryDisease[key]; // 0 -> false, 1 -> true\r\n          //   }\r\n          // });\r\n\r\n          // console.log(\"familyHistoryDisease: \",this.familyHistoryDisease);\r\n        })\r\n        .catch(err => console.error(err));\r\n    },\r\n\r\n    // -------- Family Member Modal ----------\r\n    openAddFamilyModal() {\r\n      this.editingFamily = null;\r\n      this.modalFamily = { \r\n        relationship: '', relative_name: '', sex: '', year_of_born: null, \r\n        age_now: null, age_at_death: null, state_health_death_cause: '' \r\n      };\r\n      this.isFamilyModalOpen = true;\r\n    },\r\n    openEditFamilyModal(history) {\r\n      this.editingFamily = history;\r\n      this.modalFamily = { ...history };\r\n      this.isFamilyModalOpen = true;\r\n      // this.modalFamily.age_now = new Date().getFullYear() - this.modalFamily.year_of_born;\r\n    },\r\n    closeFamilyModal() {\r\n      this.isFamilyModalOpen = false;\r\n      this.editingFamily = null;\r\n    },\r\n    submitFamilyEntry() { // not finished / not yet implemented\r\n      \r\n      const userInfo = localStorage.getItem('user_info');\r\n\r\n      if (!userInfo) return;\r\n      // const staffEmail = JSON.parse(userInfo).email;\r\n      const staffEmailInView = this.$route.params.staffEmail || JSON.parse(localStorage.getItem('user_info')).email || '';\r\n      const staffEmail = staffEmailInView;\r\n      const payload = { \r\n        staff_email: staffEmail,\r\n        ...\r\n        this.modalFamily \r\n      };\r\n\r\n      if (this.editingFamily) {\r\n        // Edit existing\r\n        fetch(`${this.baseUrl}/family-history/edit/${this.editingFamily.fh_id}`, {\r\n          method: 'PUT',\r\n          headers: { \r\n            Authorization: `Bearer ${localStorage.getItem('jwt_token')}`, \r\n            'Content-Type': 'application/json' \r\n          },\r\n          body: JSON.stringify(payload)\r\n        })\r\n          .then(res => res.json())\r\n          .then(() => {\r\n            // console.log(payload);\r\n            this.closeFamilyModal();\r\n            this.fetchFamilyHistory();\r\n          })\r\n          .catch(err => console.error(err));\r\n      } else {\r\n        // Add new\r\n        fetch(`${this.baseUrl}/family-history/add`, {\r\n          method: 'POST',\r\n          headers: { \r\n            Authorization: `Bearer ${localStorage.getItem('jwt_token')}`, \r\n            'Content-Type': 'application/json' \r\n          },\r\n          body: JSON.stringify(payload)\r\n        })\r\n          .then(res => res.json())\r\n          .then(() => {\r\n            this.closeFamilyModal();\r\n            this.fetchFamilyHistory();\r\n          })\r\n          .catch(err => console.error(err));\r\n      }\r\n    },\r\n\r\n    deleteFamilyMember(history) {\r\n      const confirmed = window.confirm('Are you sure you want to delete this member?');\r\n      if (!confirmed) return;\r\n      fetch(`${this.baseUrl}/family-history/delete/${history.fh_id}`, {\r\n        method: 'DELETE',\r\n        headers: { Authorization: `Bearer ${localStorage.getItem('jwt_token')}` }\r\n      })\r\n        .then(() => {\r\n          this.familyHistory = this.familyHistory.filter(f => f.fh_id !== history.fh_id);\r\n        })\r\n        .catch(err => console.error(err));\r\n    },\r\n\r\n    // -------- Family Disease Modal ----------\r\n    openDiseaseModal() {\r\n      const defaultDisease = {\r\n        heart_disease: false,\r\n        high_blood_pressure: false,\r\n        stroke: false,\r\n        cancer: false,\r\n        diabetes: false,\r\n        kidney_disease: false,\r\n        allergy: false,\r\n        asthma: false,\r\n        eczema: false,\r\n        tuberculosis: false,\r\n        epilepsy: false,\r\n        mental_disorder: false,\r\n        alcohol_dependence: false,\r\n        drug_abuse: false,\r\n        birth_abnormality: false,\r\n        none_above: false,\r\n        details: ''\r\n      };\r\n\r\n      // Merge backend data (existing) with defaults\r\n      this.modalDisease = { \r\n        ...defaultDisease, \r\n        ...JSON.parse(JSON.stringify(this.familyHistoryDisease)) \r\n      };\r\n      this.isDiseaseModalOpen = true;\r\n    },\r\n\r\n    closeDiseaseModal() {\r\n      this.isDiseaseModalOpen = false;\r\n    },\r\n\r\n    submitDiseaseEntry() {\r\n      const userInfo = localStorage.getItem('user_info');\r\n      if (!userInfo) return;\r\n\r\n      // const staffEmail = JSON.parse(userInfo).email;\r\n      const staffEmailInView = this.$route.params.staffEmail || JSON.parse(localStorage.getItem('user_info')).email || '';\r\n      const staffEmail = staffEmailInView;\r\n\r\n      // create a plain object copy to remove Vue Proxy\r\n      const payload = {\r\n        staff_email: staffEmail,\r\n        heart_disease: this.modalDisease.heart_disease || false,\r\n        high_blood_pressure: this.modalDisease.high_blood_pressure || false,\r\n        stroke: this.modalDisease.stroke || false,\r\n        cancer: this.modalDisease.cancer || false,\r\n        diabetes: this.modalDisease.diabetes || false,\r\n        kidney_disease: this.modalDisease.kidney_disease || false,\r\n        allergy: this.modalDisease.allergy || false,\r\n        asthma: this.modalDisease.asthma || false,\r\n        eczema: this.modalDisease.eczema || false,\r\n        tuberculosis: this.modalDisease.tuberculosis || false,\r\n        epilepsy: this.modalDisease.epilepsy || false,\r\n        mental_disorder: this.modalDisease.mental_disorder || false,\r\n        alcohol_dependence: this.modalDisease.alcohol_dependence || false,\r\n        drug_abuse: this.modalDisease.drug_abuse || false,\r\n        birth_abnormality: this.modalDisease.birth_abnormality || false,\r\n        none_above: this.modalDisease.none_above || true,\r\n        details: this.modalDisease.details || ''\r\n      };\r\n      // console.log(payload);\r\n      const staffEmailXYZ = staffEmail.replace(/\\./g, 'XYZ');\r\n\r\n      fetch(`${this.baseUrl}/family-history-disease/edit/${staffEmailXYZ}`, {\r\n        method: 'PUT',\r\n        headers: {\r\n          Authorization: `Bearer ${localStorage.getItem('jwt_token')}`,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(payload)\r\n      })\r\n        .then(res => res.json())\r\n        .then(() => {\r\n          this.familyHistoryDisease = { ...payload };\r\n          this.closeDiseaseModal();\r\n          this.fetchFamilyHistory();\r\n          this.fetchFamilyDisease();\r\n        })\r\n        .catch(err => console.error(err));\r\n    },\r\n\r\n    formatDiseaseLabel(key) {\r\n      return key.replace(/_/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase());\r\n    }\r\n  },\r\n\r\n  watch: {\r\n    'modalFamily.year_of_born'(newYear) {\r\n      const currentYear = new Date().getFullYear();\r\n      this.modalFamily.age_now = newYear ? currentYear - newYear : null;\r\n    },\r\n    'modalFamily.relationship'(newRelationship) {\r\n        const maleRelationships = ['father', 'brother'];\r\n        const femaleRelationships = ['mother', 'sister'];\r\n\r\n        if (maleRelationships.includes(newRelationship)) {\r\n            this.modalFamily.sex = 'M';\r\n        } else if (femaleRelationships.includes(newRelationship)) {\r\n            this.modalFamily.sex = 'F';\r\n        } else {\r\n            // Clear or keep current sex for spouse/child\r\n            this.modalFamily.sex = ''; \r\n        }\r\n    },\r\n    'modalDisease.none_above'(newValue) {\r\n      if (newValue && this.medicalFields) {\r\n        // uncheck all other fields except none_of_the_above\r\n        this.medicalFields?.forEach(field => {\r\n            if (field.key !== 'none_of_the_above' && field.key !== 'details') {\r\n                this.modalDisease[field.key] = false;\r\n            }\r\n        });\r\n      } else if (this.medicalFields) {\r\n        // uncheck none_of_the_above if any other field is checked\r\n        this.medicalFields?.forEach(field => {\r\n            if (field.key !== 'none_of_the_above' && field.key !== 'details' && this.modalDisease[field.key]) {\r\n                this.modalDisease.none_of_the_above = false;\r\n                return;\r\n            }\r\n        });\r\n      }\r\n    },\r\n  }\r\n};\r\n</script> \r\n\r\n\r\n<style scoped>\r\n.manage-users {\r\n  padding: 24px;\r\n}\r\n\r\nh2 {\r\n  font-size: 22px;\r\n  margin-bottom: 16px;\r\n}\r\n\r\ntable {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  background: white;\r\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);\r\n}\r\n\r\nth,\r\ntd {\r\n  padding: 12px 16px;\r\n  text-align: left;\r\n  border-bottom: 1px solid #e2e8f0;\r\n}\r\n\r\nth {\r\n  background-color: #f7fafc;\r\n  color: #2d3748;\r\n  font-weight: 600;\r\n}\r\n\r\n.actions {\r\n  text-align: center;\r\n  display: flex;\r\n  gap: 8px;\r\n}\r\n\r\nbutton {\r\n  padding: 6px 12px;\r\n  font-size: 13px;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  background: #edf2f7;\r\n  color: #2d3748;\r\n  transition: background 0.2s ease;\r\n}\r\n\r\nbutton:hover {\r\n  background: #e2e8f0;\r\n}\r\n\r\nbutton.danger {\r\n  background: #feb2b2;\r\n  color: #742a2a;\r\n}\r\n\r\nbutton.danger:hover {\r\n  background: #fc8181;\r\n}\r\n\r\ninput {\r\n  width: 100%;\r\n  padding: 8px;\r\n  margin-bottom: 12px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n}\r\n\r\ninput:focus {\r\n  outline: none;\r\n  border-color: #4a90e2;\r\n}\r\n\r\nbutton[type=\"submit\"], button[type=\"button\"] {\r\n  width: 100%;\r\n  padding: 8px;\r\n  margin-top: 10px;\r\n  margin: 10px;\r\n  font-size: 16px;\r\n}\r\n\r\n.disease-box {\r\n  background: #f7fafc;\r\n  padding: 16px;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 6px rgba(0,0,0,0.1);\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.disease-box h3 {\r\n  margin-bottom: 12px;\r\n}\r\n\r\n.disease-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));\r\n  /* grid-template-columns: repeat(2, 1fr);  2 columns */\r\n  gap: 12px;\r\n}\r\n\r\n.disease-table {\r\n  border-collapse: collapse;\r\n  width: 49%;\r\n  background: white;\r\n  box-shadow: 0 2px 6px rgba(0,0,0,0.1);\r\n  border-radius: 8px;\r\n}\r\n\r\n.disease-table td {\r\n  padding: 12px;\r\n  text-align: left;\r\n  border-bottom: 1px solid #e2e8f0;\r\n}\r\n\r\n.disease-table th {\r\n  background-color: #f7fafc;\r\n  color: #2d3748;\r\n  font-weight: 600;\r\n}\r\n\r\n/* .disease-details {\r\n  margin-top: 12px;\r\n  background: white;\r\n  padding: 8px;\r\n  border-radius: 4px;\r\n  box-shadow: 0 1px 3px rgba(0,0,0,0.05);\r\n} */\r\n\r\n.checkbox {\r\n  transform: scale(2.5); \r\n  margin-top: 1rem\r\n}\r\n\r\n/* .disease-item {\r\n  background: white;\r\n  padding: 8px;\r\n  border-radius: 4px;\r\n  box-shadow: 0 1px 3px rgba(0,0,0,0.05);\r\n  text-align: left;\r\n}\r\n\r\n.checkbox-label {\r\n  display: flex;\r\n  align-items: center;\r\n  cursor: pointer;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.checkbox-label input[type=\"checkbox\"] {\r\n  transform: scale(3);\r\n  margin-right: 8px;\r\n  cursor: pointer;\r\n  vertical-align: left;\r\n} */\r\n\r\n</style>","import { render } from \"./ManageFamilyHistory.vue?vue&type=template&id=79ccf3bc&scoped=true\"\nimport script from \"./ManageFamilyHistory.vue?vue&type=script&lang=js\"\nexport * from \"./ManageFamilyHistory.vue?vue&type=script&lang=js\"\n\nimport \"./ManageFamilyHistory.vue?vue&type=style&index=0&id=79ccf3bc&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-79ccf3bc\"]])\n\nexport default __exports__","<!-- src/views/Statistics.vue -->\r\n<template>\r\n  <div class=\"stats\">\r\n    <h2>Statistics</h2>\r\n    <button @click=\"$router.push('/dashboard')\" style=\"margin-bottom: 18px;\">Back to Dashboard</button>\r\n\r\n    <div class=\"switcher\">\r\n      <button :class=\"{active: mode==='dashboard'}\" @click=\"mode='dashboard'\">Overview</button>\r\n      <button :class=\"{active: mode==='charts'}\" @click=\"mode='charts'\">Charts</button>\r\n    </div>\r\n\r\n    <keep-alive>\r\n      <component :is=\"currentComp\"/>\r\n    </keep-alive>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport AnalyticsDashboard from '@/views/Staff/Statistics/AnalyticsDashboard.vue'\r\nimport AnalyticsCharts from '@/views/Staff/Statistics/AnalyticsChart.vue'\r\n\r\nexport default {\r\n  name: 'AnalyticsPage',\r\n  data: () => ({ mode: 'dashboard' }),\r\n  computed: {\r\n    currentComp() {\r\n      return this.mode === 'dashboard' ? AnalyticsDashboard : AnalyticsCharts;\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n</style>\r\n","<template>\r\n  <div class=\"analytics-charts\">\r\n    <h2>Health Statistics</h2>\r\n\r\n    <div class=\"session-bar\" v-if=\"sessions.length\">\r\n      <span class=\"hint\">Sessions</span>\r\n      <span\r\n        v-for=\"s in sessions\"\r\n        :key=\"s.session_id\"\r\n        class=\"session-pill\"\r\n        :title=\"fmtDate(s.session_date)\"\r\n      >\r\n        {{ new Date(s.session_date).getFullYear() }}\r\n      </span>\r\n    </div>\r\n\r\n    <div class=\"grid\">\r\n      <div class=\"card\">\r\n        <div class=\"card-title\">BMI Trend</div>\r\n        <canvas ref=\"bmiCanvas\" height=\"120\"></canvas>\r\n      </div>\r\n\r\n      <div class=\"card\">\r\n        <div class=\"card-title\">Blood Pressure Trend</div>\r\n        <canvas ref=\"bpCanvas\" height=\"120\"></canvas>\r\n      </div>\r\n\r\n      <div class=\"card\">\r\n        <div class=\"card-title\">Pulse Trend</div>\r\n        <canvas ref=\"pulseCanvas\" height=\"120\"></canvas>\r\n      </div>\r\n\r\n      <div class=\"card wide\">\r\n        <div class=\"card-title\">Key Lipids by Session (Normal / Abnormal / Not done)</div>\r\n        <canvas ref=\"lipidsCanvas\" height=\"160\"></canvas>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport cfg from '@/apiConfig';\r\nimport { handleUnauthorized } from '@/shared/handleUnauthorized';\r\nimport { Chart, LineController, BarController, LineElement, BarElement, PointElement, LinearScale, CategoryScale, Tooltip, Legend, Filler, Title } from 'chart.js';\r\nChart.register(LineController, BarController, LineElement, BarElement, PointElement, LinearScale, CategoryScale, Tooltip, Legend, Filler, Title);\r\n\r\nexport default {\r\n  name: 'AnalyticsCharts',\r\n  data() {\r\n    return {\r\n      baseUrl: cfg.API_BASE_URL,\r\n      sessions: [],\r\n      vitals: [],\r\n      labs: [],\r\n      charts: {\r\n        bmi: null,\r\n        bp: null,\r\n        pulse: null,\r\n        lipids: null\r\n      }\r\n    };\r\n  },\r\n  async mounted() {\r\n    await this.loadData();\r\n    this.renderAllCharts();\r\n    window.addEventListener('resize', this.resizeCharts);\r\n  },\r\n  beforeUnmount() {\r\n    this.destroyCharts();\r\n    window.removeEventListener('resize', this.resizeCharts);\r\n  },\r\n  methods: {\r\n    fmtDate(d) { return new Date(d).toLocaleDateString(); },\r\n\r\n    async loadData() {\r\n      const userInfo = JSON.parse(localStorage.getItem('user_info'));\r\n      if (!userInfo) return;\r\n      const staffXYZ = userInfo.email.replace(/\\./g, 'XYZ');\r\n      const headers = { Authorization: `Bearer ${localStorage.getItem('jwt_token')}` };\r\n\r\n      const [sessions, vitals, labs] = await Promise.all([\r\n        fetch(`${this.baseUrl}/checkup-sessions/stats/${staffXYZ}`, { headers }).then(res => {\r\n          if (handleUnauthorized(res)) return;\r\n\r\n          return res.json();\r\n        }),\r\n        fetch(`${this.baseUrl}/stats/vitals/${staffXYZ}`, { headers }).then(r => r.json()),\r\n        fetch(`${this.baseUrl}/stats/labs/${staffXYZ}?fields=ldl_result,tchol_result,hdl_result`, { headers }).then(r => r.json())\r\n      ]);\r\n\r\n      // Ensure arrays + sort by date ascending\r\n      this.sessions = (sessions || []).sort((a, b) => new Date(a.session_date) - new Date(b.session_date));\r\n      this.vitals = (vitals || []).sort((a, b) => new Date(a.session_date) - new Date(b.session_date));\r\n      this.labs = (labs || []).sort((a, b) => new Date(a.session_date) - new Date(b.session_date));\r\n    },\r\n\r\n    // ---- Chart helpers ----\r\n    destroyCharts() {\r\n      Object.keys(this.charts).forEach(k => {\r\n        if (this.charts[k]) { this.charts[k].destroy(); this.charts[k] = null; }\r\n      });\r\n    },\r\n    resizeCharts() {\r\n      Object.values(this.charts).forEach(c => c && c.resize());\r\n    },\r\n\r\n    renderAllCharts() {\r\n      this.destroyCharts();\r\n      this.renderBMI();\r\n      this.renderBP();\r\n      this.renderPulse();\r\n      this.renderLipids();\r\n    },\r\n\r\n    // 1) BMI line\r\n    renderBMI() {\r\n      const ctx = this.$refs.bmiCanvas?.getContext('2d'); if (!ctx) return;\r\n      const labels = this.vitals.map(v => new Date(v.session_date).getFullYear());\r\n      const data = this.vitals.map(v => v.bmi ?? null);\r\n\r\n      this.charts.bmi = new Chart(ctx, {\r\n        type: 'line',\r\n        data: {\r\n          labels,\r\n          datasets: [{\r\n            label: 'BMI',\r\n            data,\r\n            tension: 0.3,\r\n            fill: false,\r\n            pointRadius: 3\r\n          }]\r\n        },\r\n        options: {\r\n          responsive: true,\r\n          plugins: {\r\n            legend: { display: true },\r\n            tooltip: { mode: 'index', intersect: false }\r\n          },\r\n          scales: {\r\n            y: { beginAtZero: false, title: { display: true, text: 'BMI' } },\r\n            x: { title: { display: true, text: 'Session (Year)' } }\r\n          }\r\n        }\r\n      });\r\n    },\r\n\r\n    // 2) BP line (Sys & Dia)\r\n    renderBP() {\r\n      const ctx = this.$refs.bpCanvas?.getContext('2d'); if (!ctx) return;\r\n      const labels = this.vitals.map(v => new Date(v.session_date).getFullYear());\r\n      const sys = this.vitals.map(v => v.bp_sys ?? null);\r\n      const dia = this.vitals.map(v => v.bp_dia ?? null);\r\n\r\n      this.charts.bp = new Chart(ctx, {\r\n        type: 'line',\r\n        data: {\r\n          labels,\r\n          datasets: [\r\n            { label: 'Systolic', data: sys, tension: 0.3, pointRadius: 3 },\r\n            { label: 'Diastolic', data: dia, tension: 0.3, pointRadius: 3 }\r\n          ]\r\n        },\r\n        options: {\r\n          responsive: true,\r\n          plugins: {\r\n            legend: { display: true },\r\n            tooltip: { mode: 'index', intersect: false }\r\n          },\r\n          scales: {\r\n            y: { beginAtZero: false, title: { display: true, text: 'mmHg' } },\r\n            x: { title: { display: true, text: 'Session (Year)' } }\r\n          }\r\n        }\r\n      });\r\n    },\r\n\r\n    // 3) Pulse line\r\n    renderPulse() {\r\n      const ctx = this.$refs.pulseCanvas?.getContext('2d'); if (!ctx) return;\r\n      const labels = this.vitals.map(v => new Date(v.session_date).getFullYear());\r\n      const pulse = this.vitals.map(v => v.pulse_bpm ?? null);\r\n\r\n      this.charts.pulse = new Chart(ctx, {\r\n        type: 'line',\r\n        data: {\r\n          labels,\r\n          datasets: [{ label: 'Pulse (bpm)', data: pulse, tension: 0.3, pointRadius: 3 }]\r\n        },\r\n        options: {\r\n          responsive: true,\r\n          plugins: { legend: { display: true } },\r\n          scales: {\r\n            y: { beginAtZero: false, title: { display: true, text: 'bpm' } },\r\n            x: { title: { display: true, text: 'Session (Year)' } }\r\n          }\r\n        }\r\n      });\r\n    },\r\n\r\n    // 4) Lipids stacked bar (Normal / Abnormal / Not done) for LDL, Tchol, HDL\r\n    renderLipids() {\r\n      const ctx = this.$refs.lipidsCanvas?.getContext('2d'); if (!ctx) return;\r\n\r\n      // One bar per session, each bar is stacked: Normal / Abnormal / Not done count among the 3 fields\r\n      const labels = this.labs.map(v => new Date(v.session_date).getFullYear());\r\n\r\n      const perSessionCounts = this.labs.map(row => {\r\n        const vals = [\r\n          row.ldl_result ?? 'Not done',\r\n          row.tchol_result ?? 'Not done',\r\n          row.hdl_result ?? 'Not done'\r\n        ];\r\n        return {\r\n          normal: vals.filter(v => v === 'Normal').length,\r\n          abnormal: vals.filter(v => v === 'Abnormal').length,\r\n          notdone: vals.filter(v => v === 'Not done').length\r\n        };\r\n      });\r\n\r\n      const normal = perSessionCounts.map(x => x.normal);\r\n      const abnormal = perSessionCounts.map(x => x.abnormal);\r\n      const notdone = perSessionCounts.map(x => x.notdone);\r\n\r\n      this.charts.lipids = new Chart(ctx, {\r\n        type: 'bar',\r\n        data: {\r\n          labels,\r\n          datasets: [\r\n            { label: 'Normal',   data: normal,   stack: 'lipids', backgroundColor: '#008000' },\r\n            { label: 'Abnormal', data: abnormal, stack: 'lipids', backgroundColor: '#ff0000' },\r\n            { label: 'Not done', data: notdone,  stack: 'lipids', backgroundColor: '#cccccc' }\r\n          ]\r\n        },\r\n        options: {\r\n          responsive: true,\r\n          plugins: { legend: { display: true } },\r\n          scales: {\r\n            x: { stacked: true, title: { display: true, text: 'Session (Year)' } },\r\n            y: { stacked: true, beginAtZero: true, ticks: { stepSize: 1 }, title: { display: true, text: 'Count of Tests' } }\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.analytics-charts { padding: 24px; }\r\n.session-bar { display:flex; align-items:center; gap:8px; margin-bottom: 16px; flex-wrap: wrap; }\r\n.session-pill { background:#edf2f7; border-radius: 14px; padding:4px 10px; font-size:12px; color:#2d3748; }\r\n.hint { color:#4a5568; margin-right:6px; font-size:12px; }\r\n\r\n.card { background:#fff; border:1px solid #e2e8f0; border-radius:10px; padding:14px; box-shadow: 0 2px 6px rgba(0,0,0,0.04); }\r\n.card.wide { grid-column: 1 / -1; }\r\n.card-title { font-weight:600; color:#2d3748; margin-bottom:10px; font-size:14px; }\r\n</style>\r\n","import { render } from \"./AnalyticsChart.vue?vue&type=template&id=c96c7d2e&scoped=true\"\nimport script from \"./AnalyticsChart.vue?vue&type=script&lang=js\"\nexport * from \"./AnalyticsChart.vue?vue&type=script&lang=js\"\n\nimport \"./AnalyticsChart.vue?vue&type=style&index=0&id=c96c7d2e&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-c96c7d2e\"]])\n\nexport default __exports__","import { render } from \"./AnalyticsPage.vue?vue&type=template&id=58245597\"\nimport script from \"./AnalyticsPage.vue?vue&type=script&lang=js\"\nexport * from \"./AnalyticsPage.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <div class=\"page\">\r\n    <h2>My Checkup Sessions</h2>\r\n\r\n    <div class=\"filters\">\r\n      <select v-model=\"year\">\r\n        <option value=\"\">All years</option>\r\n        <option v-for=\"y in years\" :key=\"y\" :value=\"String(y)\">{{ y }}</option>\r\n      </select>\r\n\r\n      <select v-model=\"type\">\r\n        <option value=\"\">All type</option>\r\n        <option value=\"annual\">Annual</option>\r\n        <option value=\"followup\">Follow-up</option>\r\n        <option value=\"pre-employment\">Pre-employment</option>\r\n        <option value=\"return-to-work\">Return to Work</option>\r\n        <option value=\"ad-hoc\">Ad-hoc</option>\r\n      </select>\r\n\r\n      <select v-model=\"status\">\r\n        <option value=\"\">All status</option>\r\n        <option value=\"draft\">Draft</option>\r\n        <option value=\"submitted\">Submitted</option>\r\n        <option value=\"locked\">Locked</option>\r\n      </select>\r\n      \r\n    </div>\r\n\r\n    <div class=\"table-responsive\">\r\n      <table>\r\n        <thead>\r\n          <tr>\r\n            <th @click=\"toggleDateSort\" style=\"min-width: 110px; cursor:pointer\">\r\n              Date\r\n              <span v-if=\"sortDir === 'asc'\"></span>\r\n              <span v-else></span>\r\n            </th>\r\n            <th>Type</th>\r\n            <th style=\"display: flex; align-items: center;\">\r\n              Status\r\n              <div class=\"info-container\" style=\"margin: 0;\">\r\n                <span class=\"info-icon\" @click=\"toggleInfo\"></span>\r\n              </div>\r\n            </th>\r\n            <th>Report</th>\r\n            <th>Actions</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr v-for=\"s in sortedSessions\" :key=\"s.session_id\">\r\n            <td>{{ formatDate(s.session_date) }}</td>\r\n            <td>{{ s.session_type }}</td>\r\n            <td><span class=\"pill\" :class=\"s.status\">{{ s.status }}</span></td>\r\n\r\n            <!-- Reports column -->\r\n            <td class=\"reports-cell\" @click.stop>\r\n              <div class=\"report-wrapper\">\r\n                <template v-if=\"(reportsBySession[s.session_id] || []).length\">\r\n                  <button\r\n                    class=\"pill2 ok pill2-btn\"\r\n                    @click.stop=\"toggleReportMenu(s.session_id)\"\r\n                    style=\"margin-top: 0px;\"\r\n                  >\r\n                    Uploaded \r\n                  </button>\r\n\r\n                  <div\r\n                    class=\"menu-list\"\r\n                    v-if=\"openReportMenuId === s.session_id\"\r\n                    @click.stop\r\n                  >\r\n                    <div v-if=\"reportsLoadingId === s.session_id\" class=\"muted\">Loading</div>\r\n                    <ul v-else class=\"report-list\">\r\n                      <li v-for=\"r in reportsBySession[s.session_id]\" :key=\"r.report_id\">\r\n                        <div class=\"meta\">\r\n                          <strong>{{ r.title || safeName(r.file_name) }}</strong>\r\n                          <div class=\"sub\">{{ kb(r.file_size) }}  {{ prettyTs(r.uploaded_at) }}</div>\r\n                        </div>\r\n                      </li>\r\n                    </ul>\r\n                  </div>\r\n                </template>\r\n\r\n                <template v-else>\r\n                  <span class=\"pill2 muted\">None</span>\r\n                </template>\r\n              </div>\r\n            </td>\r\n\r\n            <td>\r\n              <button class=\"btn\" :disabled=\"!s.has_forms_all\" @click=\"$router.push(`/staff/session/${s.session_id}`)\">\r\n                {{ !s.has_forms_all ? 'No Forms' : 'Open' }}\r\n              </button>\r\n              \r\n              <a\r\n                v-for=\"r in reportsBySession[s.session_id]\" :key=\"r.report_id\"\r\n                :href=\"`${this.baseUrl}/reports/${r.report_id}/download`\"\r\n                target=\"_blank\" rel=\"noopener\" class=\"btn linklike\"\r\n                :class=\"{ disabled: (reportsBySession[s.session_id] || []).length === 0 }\"\r\n                @click=\"(reportsBySession[s.session_id] || []).length === 0 && $event.preventDefault()\"\r\n              >\r\n                Download Report\r\n              </a>\r\n\r\n              <button class=\"btn\"\r\n                @click=\"$router.push({ \r\n                  name: 'export-medical', \r\n                  query: { session_id: s.session_id, staff_email: s.staff_email } \r\n                })\"\r\n              >\r\n                Export Excel\r\n              </button>\r\n\r\n            </td>\r\n          </tr>\r\n\r\n          <tr v-if=\"!filtered.length\">\r\n            <td colspan=\"5\" class=\"empty\">No sessions.</td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n      <teleport to=\"body\">\r\n        <div v-if=\"showInfo\" class=\"info-overlay\" @click.self=\"closeInfo\">\r\n          <div class=\"info-box\">\r\n            <h4>Checkup Status Guide</h4>\r\n            <p>The form's editable status is determined by its current state:</p>\r\n            <ul style=\"text-align: left; list-style: none; padding: 0; margin: 0;\">\r\n              <li>\r\n                <b>Draft: Staff</b> and <b>Doctor</b> can edit the form.\r\n              </li>\r\n              <li>\r\n                <b>Submitted:</b> Only the <b>Doctor</b> can edit the form.\r\n              </li>\r\n              <li>\r\n                <b>Locked:</b> The form is <b>view-only</b> for all.\r\n              </li>\r\n            </ul>\r\n            <button @click=\"closeInfo\">Got it</button>\r\n          </div>\r\n        </div>\r\n      </teleport>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { formatDate } from '@/shared/dateFormat';\r\nimport cfg from '@/apiConfig';\r\nimport { handleUnauthorized } from '@/shared/handleUnauthorized';\r\n\r\nexport default {\r\n  data: () => ({\r\n    baseUrl: cfg.API_BASE_URL,\r\n    showInfo: false,\r\n    sessions: [],\r\n    year: '',\r\n    status: '',\r\n    type: '',\r\n    sortDir: 'desc',\r\n    // reports state\r\n    openReportMenuId: null,\r\n    reportsLoadingId: null,\r\n    reportsBySession: {},    // { [session_id]: Report[] }\r\n    reportHas: {},           // { [session_id]: boolean }\r\n  }),\r\n  computed: {\r\n    years() {\r\n      const set = new Set(\r\n        this.sessions\r\n          .map(s => {\r\n            const d = new Date(s.session_date);\r\n            return isNaN(d) ? null : d.getFullYear();\r\n          })\r\n          .filter(Boolean)\r\n      );\r\n      return [...set].sort((a, b) => b - a);\r\n    },\r\n    filtered() {\r\n      return this.sessions.filter(s => {\r\n        const yOk = !this.year || new Date(s.session_date).getFullYear().toString() === this.year;\r\n        const stOk = !this.status || s.status === this.status;\r\n        const tOk = !this.type || s.session_type === this.type;\r\n        return yOk && stOk && tOk;\r\n      });\r\n    },\r\n    sortedSessions() {\r\n      const dir = this.sortDir === 'asc' ? 1 : -1;\r\n      return [...this.filtered].sort((a, b) => {\r\n        const at = this.toTime(a.session_date);\r\n        const bt = this.toTime(b.session_date);\r\n        if (at === bt) return 0;\r\n        return at > bt ? dir : -dir;\r\n      });\r\n    },\r\n  },\r\n  mounted() {\r\n    this.fetchMine();\r\n\r\n    // close the report dropdowns when clicking outside\r\n    this._onDocClick = (e) => {\r\n      if (!e.target.closest('.report-menu')) {\r\n        this.openReportMenuId = null;\r\n      }\r\n    };\r\n    document.addEventListener('click', this._onDocClick);\r\n  },\r\n  beforeUnmount() {\r\n    document.removeEventListener('click', this._onDocClick);\r\n  },\r\n  methods: {\r\n    toggleInfo() { this.showInfo = !this.showInfo; },\r\n    closeInfo() { this.showInfo = false; },\r\n    toTime(d) {\r\n      const t = new Date(d).getTime();\r\n      return Number.isFinite(t) ? t : -Infinity; // invalid dates go to bottom\r\n    },\r\n    async fetchMine() {\r\n\r\n      const user = JSON.parse(localStorage.getItem('user_info') || '{}');\r\n      if (!user?.email) return;\r\n      const staffEmail = user.email.replace(/\\./g, 'XYZ');\r\n\r\n      const r = await fetch(`${this.baseUrl}/checkup-sessions/${staffEmail}`, {\r\n        headers: { Authorization: `Bearer ${localStorage.getItem('jwt_token')}` }\r\n      });\r\n      const data = await r.json();\r\n      if (handleUnauthorized(r)) return;\r\n      this.sessions = Array.isArray(data) ? data : (data.sessions || []);\r\n      this.sessions.forEach(s => {\r\n        s.has_forms_all = \r\n          (s.has_investigations) &&\r\n          (s.has_ilab) &&\r\n          (s.has_lifestyle) &&\r\n          (s.has_mh) &&\r\n          (s.has_pe1) &&\r\n          (s.has_pe2); \r\n      });\r\n      // fetch all reports for each session\r\n      const promises = this.sessions.map(s => this.ensureReportsLoaded(s.session_id));\r\n      await Promise.all(promises);\r\n    },\r\n\r\n    // --- basic formatters ---\r\n    // fmt(d) { return d ? new Date(d).toISOString().slice(0, 10) : '-'; },\r\n    formatDate,\r\n    prettyTs(ts) {\r\n      const d = new Date(ts);\r\n      return isNaN(d) ? '' : d.toLocaleString();\r\n    },\r\n    kb(bytes) {\r\n      const n = Number(bytes || 0);\r\n      return `${Math.round(n / 1024)} KB`;\r\n    },\r\n    safeName(name = '') {\r\n      return name.length > 16 ? `${name.slice(0, 13)}` : name;\r\n    },\r\n    toggleDateSort() {\r\n      this.sortDir = this.sortDir === 'asc' ? 'desc' : 'asc'\r\n    },\r\n\r\n    // --- report status pill ---\r\n    reportExists(s) {\r\n      const sid = s.session_id;\r\n      if (this.reportHas[sid] !== undefined) return this.reportHas[sid];\r\n      // fallback to rows `has_report` if your API includes it\r\n      return !!s.has_report;\r\n    },\r\n    setReportExists(sessionId, val) {\r\n      this.reportHas = { ...this.reportHas, [sessionId]: !!val };\r\n    },\r\n\r\n    // --- dropdown toggle + lazy load list ---\r\n    toggleReportMenu(sessionId) {\r\n      this.openReportMenuId =\r\n        this.openReportMenuId === sessionId ? null : sessionId;\r\n      if (this.openReportMenuId) {\r\n        this.ensureReportsLoaded(sessionId);\r\n      }\r\n    },\r\n\r\n    ensureReportsLoaded(sessionId) {\r\n      if (this.reportsBySession[sessionId]) return; // already loaded\r\n      this.reportsLoadingId = sessionId;\r\n\r\n      // staff-side endpoint to read report(s) for this session\r\n      fetch(`${this.baseUrl}/sessions/${sessionId}/reports`, {\r\n        headers: { Authorization: `Bearer ${localStorage.getItem('jwt_token')}` }\r\n      })\r\n        .then(r => r.json())\r\n        .then(list => {\r\n          const arr = Array.isArray(list) ? list : [];\r\n          this.reportsBySession = { ...this.reportsBySession, [sessionId]: arr };\r\n          this.setReportExists(sessionId, arr.length > 0);\r\n        })\r\n        .catch(() => {\r\n          this.reportsBySession = { ...this.reportsBySession, [sessionId]: [] };\r\n          this.setReportExists(sessionId, false);\r\n        })\r\n        .finally(() => {\r\n          this.reportsLoadingId = null;\r\n        });\r\n    },\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.table-responsive {\r\n  width: 100%;\r\n  overflow-x: auto;\r\n  background: white;\r\n  box-shadow: 0 2px 6px rgba(0,0,0,.05);\r\n  border-radius: 8px;\r\n}\r\n.table-responsive table { width: 100%; border-collapse: collapse; }\r\n.table-responsive th, .table-responsive td {\r\n  padding: 12px 16px;\r\n  text-align: left;\r\n  border-bottom: 1px solid #e2e8f0;\r\n  vertical-align: top;\r\n}\r\n.table-responsive th {\r\n  background: #f7fafc;\r\n  color: #2d3748;\r\n  font-weight: 600;\r\n  top: 0;\r\n}\r\n.info-container { \r\n  margin: 0;\r\n  line-height: 1;\r\n}\r\n.pill { padding:3px 10px; border-radius:999px; text-transform:capitalize; font-size:12px; }\r\n.pill.draft { background:#fef9c3; color:#92400e; }\r\n.pill.submitted { background:#bfdbfe; color:#1e3a8a; }\r\n.pill.locked { background:#d1fae5; color:#065f46; }\r\n.pill.ok { background:#e6f6ea; color:#137333; }\r\n.pill.muted { background:#eef2f6; color:#64748b; }\r\n\r\n.pill2 {\r\n  display: inline-flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 2px 10px;\r\n  border-radius: 999px;\r\n  font-size: 12px;\r\n  line-height: 1.4;\r\n  height: 24px;\r\n}\r\n.pill2.ok {\r\n  background: #e7f7ec;\r\n  color: #1f7a3a;\r\n  border: 1px solid #bfe7c9;\r\n}\r\n.pill2.muted {\r\n  background: #f3f4f6;\r\n  color: #6b7280;\r\n  border: 1px solid #e5e7eb;\r\n}\r\n.pill2-btn {\r\n  cursor: pointer;\r\n  border: 1px solid #bfe7c9;\r\n  background: #e7f7ec;\r\n}\r\n\r\n.empty { padding:18px; text-align:center; color:#6b7280; }\r\n\r\n.btn {\r\n  display: inline-block;\r\n  padding: 6px 10px;\r\n  border: 1px solid #ccc;\r\n  border-radius: 4px;\r\n  background: #f4f4f4;\r\n  cursor: pointer;\r\n  text-decoration: none;\r\n  color: #222;\r\n  font-size: 13px;\r\n  margin-top: 0px;\r\n  margin-right: 8px;\r\n}\r\n.btn:disabled {\r\n  opacity: 0.5;\r\n  pointer-events: none;\r\n  background: #e2e8f0 !important;\r\n  color: #2d3748 !important;\r\n  border-color: #e2e8f0 !important;\r\n}\r\n\r\n/* reports dropdown */\r\n.reports-cell { position: relative; text-align: center; }\r\n.report-wrapper {\r\n  display: inline-block;\r\n  position: relative;\r\n  vertical-align: middle;\r\n}\r\n.report-menu { display: inline-block; position: relative; }\r\n.menu-btn {\r\n  padding: 6px 10px;\r\n  font-size: 12px;\r\n  border-radius: 4px;\r\n  background: #edf2f7;\r\n  color: #2d3748;\r\n  border: 1px solid #e2e8f0;\r\n  cursor: pointer;\r\n}\r\n.menu-btn:hover { background:#e2e8f0; }\r\n/* dropdown alignment */\r\n.menu-list {\r\n  position: absolute;\r\n  top: 100%; /* right below the pill */\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  margin-top: 4px;\r\n  min-width: fit-content;\r\n  background: white;\r\n  border: 1px solid #e5e7eb;\r\n  border-radius: 6px;\r\n  box-shadow: 0 2px 8px rgba(0,0,0,0.08);\r\n  z-index: 10;\r\n}\r\n.report-list { list-style:none; margin:0; padding:0; min-width: fit-content; white-space: nowrap; }\r\n.report-list li {\r\n  display:flex; justify-content:space-between; gap:10px;\r\n  padding:8px 0; border-bottom:1px dashed #edf2f7;\r\n}\r\n.report-list li:last-child { border-bottom:none; }\r\n.meta { max-width:70%; }\r\n.meta .sub { color:#718096; font-size:12px; }\r\n.row-actions a { text-decoration:none; color:#2b6cb0; }\r\n.row-actions a:hover { text-decoration:underline; }\r\n.report-pill { margin-bottom: 6px; }\r\n.muted { color:#718096; font-size:12px; }\r\n</style>\r\n","import { render } from \"./MySessions.vue?vue&type=template&id=7890fe6c&scoped=true\"\nimport script from \"./MySessions.vue?vue&type=script&lang=js\"\nexport * from \"./MySessions.vue?vue&type=script&lang=js\"\n\nimport \"./MySessions.vue?vue&type=style&index=0&id=7890fe6c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7890fe6c\"]])\n\nexport default __exports__","<template>\r\n  <div>\r\n    <h2>Medical History</h2>\r\n\r\n    <!-- Edit Medical History Modal -->\r\n    <teleport to=\"body\">\r\n      <div v-if=\"isModalOpen\" class=\"modal-overlay\" @click=\"closeModal\">\r\n        <div class=\"modal-content\" @click.stop>\r\n          <h3>Edit Medical History</h3>\r\n          <form @submit.prevent=\"submitMedicalHistory\">\r\n            <div class=\"medical-grid\">\r\n              <div v-for=\"field in medicalFields\" :key=\"field.key\" class=\"medical-item\">\r\n                <label class=\"checkbox-label\">\r\n                  <input type=\"checkbox\" v-model=\"modalMedicalHistory[field.key]\" />\r\n                  {{ field.label }}\r\n                </label>\r\n              </div>\r\n            </div>\r\n\r\n            <label>Comments:</label>\r\n            <textarea v-model=\"modalMedicalHistory.comment_by_examine_doctor\" style=\"width:100%;height:150px;\"></textarea><br>\r\n            <button type=\"submit\">Save Changes</button>\r\n            <button type=\"button\" @click=\"closeModal\">Cancel</button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </teleport>\r\n\r\n\r\n    <!-- Display Medical History -->\r\n    <div class=\"medical-box\">\r\n      \r\n      <div style=\"display: flex; gap: 8px;\">\r\n\r\n        <table class=\"std-table\">\r\n          <thead>\r\n            <tr>\r\n              <th>Medical Condition</th>\r\n              <th>Yes/No</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr v-for=\"field in medicalFields.slice(0, medicalFields.length/3)\" :key=\"field.key\">\r\n              <td>{{ field.label }}</td>\r\n              <td :style=\"{ color: medicalHistory[field.key] ? 'red' : 'green' }\">\r\n                {{ medicalHistory[field.key] ? 'Yes' : 'No' }}\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n\r\n        <table class=\"std-table\">\r\n          <thead>\r\n            <tr>\r\n              <th>Medical Condition</th>\r\n              <th>Yes/No</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr v-for=\"field in medicalFields.slice(medicalFields.length/3, (medicalFields.length/3)*2)\" :key=\"field.key\">\r\n              <td>{{ field.label }}</td>\r\n              <td :style=\"{ color: medicalHistory[field.key] ? 'red' : 'green' }\">\r\n                {{ medicalHistory[field.key] ? 'Yes' : 'No' }}\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n\r\n        <table class=\"std-table\">\r\n          <thead>\r\n            <tr>\r\n              <th>Medical Condition</th>\r\n              <th>Yes/No</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr v-for=\"field in medicalFields.slice((medicalFields.length/3)*2)\" :key=\"field.key\">\r\n              <td :style=\"{ fontWeight: field.label === 'None of the Above' ? 'bold' : '' }\">\r\n                {{ field.label === 'None of the Above' ? field.label : field.label }}\r\n              </td>\r\n              <td :style=\"{ color: field.key === 'none_of_the_above' ? (medicalHistory[field.key] ? 'green' : 'red') : (medicalHistory[field.key] ? 'red' : 'green') }\">\r\n                {{ medicalHistory[field.key] ? 'Yes' : 'No' }}\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n\r\n      </div>\r\n\r\n      <div class=\"inv-box\" style=\"margin-top:1rem; margin-bottom: 1rem;\">\r\n        <strong>Doctor's Comment:</strong> <small><i>(to be filled by OHD)</i></small>\r\n        <p>{{ medicalHistory.comment_by_examine_doctor }}</p>\r\n      </div>\r\n    </div>\r\n\r\n    <button :disabled=\"!accessCheck('edit')\" class=\"action-btn\" @click=\"openModal\">Edit Medical History</button>\r\n    <!-- <button @click=\"$router.push('/dashboard')\" style=\"margin-left:1rem;\">Back</button> -->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { canSession } from '@/shared/sessionAcl';\r\nimport cfg from '@/apiConfig';\r\nimport { handleUnauthorized } from '@/shared/handleUnauthorized';\r\n\r\nexport default {\r\n  inject: {\r\n    currentSessionHeader: { from: 'currentSessionHeader', default: () => () => null },\r\n    refreshSessionHeader: { from: 'refreshSessionHeader', default: () => async () => {} },\r\n  },\r\n  data() {\r\n    return {\r\n      baseUrl: cfg.API_BASE_URL,\r\n      medicalHistory: {},\r\n      modalMedicalHistory: {},\r\n      isModalOpen: false,\r\n      // List of fields with labels for display + editing\r\n      medicalFields: [\r\n        { key: 'abnormal_heartbeat', label: 'Abnormal Heartbeat' },\r\n        { key: 'bladder_trouble', label: 'Bladder Trouble' },\r\n        { key: 'dermatitis_eczema', label: 'Dermatitis / Eczema' },\r\n        { key: 'depression', label: 'Depression' },\r\n        { key: 'heart_murmur', label: 'Heart Murmur' },\r\n        { key: 'hernia', label: 'Hernia' },\r\n        { key: 'jaundice', label: 'Jaundice' },\r\n        { key: 'kidney_disease', label: 'Kidney Disease' },\r\n        { key: 'peptic_ulcer', label: 'Peptic Ulcer' },\r\n        { key: 'persistent_night_sweats', label: 'Persistent Night Sweats' },\r\n        { key: 'rectal_bleeding', label: 'Rectal Bleeding' },\r\n        { key: 'unintentional_weight_loss', label: 'Unintentional Weight Loss' },\r\n        { key: 'asthma_bronchitis', label: 'Asthma / Bronchitis' },\r\n        { key: 'bowel_disorder', label: 'Bowel Disorder' },\r\n        { key: 'diabetes', label: 'Diabetes' },\r\n        { key: 'frequent_indigestion', label: 'Frequent Indigestion' },\r\n        { key: 'high_blood_pressure', label: 'High Blood Pressure' },\r\n        { key: 'hospitalisation_surgery', label: 'Hospitalisation / Surgery' },\r\n        { key: 'migraine_headache', label: 'Migraine / Headache' },\r\n        { key: 'psoriasis_skin_disease', label: 'Psoriasis / Skin Disease' },\r\n        { key: 'persistent_diarrhoea', label: 'Persistent Diarrhoea' },\r\n        { key: 'renal_colic_stone', label: 'Renal Colic / Stone' },\r\n        { key: 'swollen_lymph_glands', label: 'Swollen Lymph Glands' },\r\n        { key: 'anxiety', label: 'Anxiety' },\r\n        { key: 'blood_in_urine', label: 'Blood in Urine' },\r\n        { key: 'dizziness_giddiness', label: 'Dizziness / Giddiness' },\r\n        { key: 'faints_blackouts', label: 'Faints / Blackouts' },\r\n        { key: 'hay_fever', label: 'Hay Fever' },\r\n        { key: 'joint_disorder', label: 'Joint Disorder' },\r\n        { key: 'liver_gall_bladder', label: 'Liver / Gall / Bladder' },\r\n        { key: 'piles_haemorrhoids', label: 'Piles / Haemorrhoids' },\r\n        { key: 'rheumatic_fever', label: 'Rheumatic Fever' },\r\n        { key: 'std', label: 'STD' },\r\n        { key: 'tuberculosis', label: 'Tuberculosis' },\r\n        { key: 'none_of_the_above', label: 'None of the Above' },\r\n      ]\r\n    };\r\n  },\r\n  mounted() {\r\n    this.fetchMedicalHistory();\r\n  },\r\n  computed: {\r\n    // step-by-step: call the injected function to get the header\r\n    sessionHeader() {\r\n      return this.currentSessionHeader ? this.currentSessionHeader() : null;\r\n    },\r\n    sessionStatus() {\r\n      return this.sessionHeader?.status || 'draft';\r\n    },\r\n  },\r\n  methods: {\r\n    // Access control wrapper\r\n    accessCheck(action) {\r\n      let role = null;\r\n      try {\r\n        role = JSON.parse(localStorage.getItem('user_info'))?.role || 'staff';\r\n      } catch (e) { /* ignore */ }\r\n      return canSession(role, this.sessionStatus, action);\r\n    },\r\n    blankMedicalObj() {\r\n      const base = {}\r\n      this.medicalFields.forEach(f => { base[f.key] = false })\r\n      base.comment_by_examine_doctor = ''\r\n      return base\r\n    },\r\n    fetchMedicalHistory() {\r\n      // const userInfo = localStorage.getItem('user_info');\r\n      // if (!userInfo) return;\r\n      // const staffEmail = JSON.parse(userInfo).email.replace(/\\./g, 'XYZ');\r\n      const staffSessionID = this.$route.params.sessionId || '';\r\n\r\n      fetch(`${this.baseUrl}/medical-history/${staffSessionID}`, {\r\n        headers: { Authorization: `Bearer ${localStorage.getItem('jwt_token')}` }\r\n      })\r\n        .then(res => {\r\n          if (handleUnauthorized(res)) return;\r\n\r\n          return res.json();\r\n        })\r\n        .then(raw => {\r\n          const data = Array.isArray(raw) ? (raw[0] || {}) : raw\r\n\r\n          // start from defaults so every key exists\r\n          const normalized = this.blankMedicalObj()\r\n\r\n          // convert Y/N to boolean where present\r\n          this.medicalFields.forEach(f => {\r\n            const v = data[f.key]\r\n            if (v === 'Y') normalized[f.key] = true\r\n            else if (v === 'N') normalized[f.key] = false\r\n            // if API already returns booleans, this also works:\r\n            else if (typeof v === 'boolean') normalized[f.key] = v\r\n          })\r\n\r\n          normalized.comment_by_examine_doctor =\r\n            data.comment_by_examine_doctor || ''\r\n\r\n          this.medicalHistory = normalized;\r\n          // console.log(\"Medical History: \", this.medicalHistory);\r\n        })\r\n        .catch(err => console.error(err))\r\n    },\r\n\r\n    openModal() {\r\n      // shallow clone of the already-boolean state\r\n      this.modalMedicalHistory = { ...this.medicalHistory }\r\n      this.isModalOpen = true\r\n\r\n      // prevent body scroll while modal open\r\n      document.body.style.overflow = 'hidden'\r\n    },\r\n    closeModal() {\r\n      this.isModalOpen = false\r\n      document.body.style.overflow = ''\r\n    },\r\n\r\n    submitMedicalHistory() {\r\n      const userInfo = localStorage.getItem('user_info');\r\n      // if (!userInfo) return;\r\n      // const staffEmail = JSON.parse(userInfo).email.replace(/\\./g, 'XYZ');\r\n      const staffSessionID = this.$route.params.sessionId || '';\r\n\r\n      // convert boolean back to Y/N before sending\r\n      const payload = {}\r\n      this.medicalFields.forEach(field => {\r\n        payload[field.key] = this.modalMedicalHistory[field.key] ? 'Y' : 'N'\r\n      })\r\n      payload.staff_email = JSON.parse(userInfo).email\r\n      payload.comment_by_examine_doctor =\r\n        this.modalMedicalHistory.comment_by_examine_doctor || ''\r\n\r\n      fetch(`${this.baseUrl}/medical-history/edit/${staffSessionID}`, {\r\n        method: 'PUT',\r\n        headers: {\r\n          Authorization: `Bearer ${localStorage.getItem('jwt_token')}`,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(payload)\r\n      })\r\n        .then(res => res.json())\r\n        .then(() => {\r\n          this.isModalOpen = false\r\n          document.body.style.overflow = ''\r\n          this.fetchMedicalHistory() // refresh display\r\n        })\r\n        .catch(err => console.error(err))\r\n    },\r\n  },\r\n  watch: {\r\n    'modalMedicalHistory.none_of_the_above'(newVal) {\r\n        if (newVal) {\r\n            // uncheck all other fields except none_of_the_above\r\n            this.medicalFields.forEach(field => {\r\n                if (field.key !== 'none_of_the_above' && field.key !== 'comment_by_examine_doctor') {\r\n                this.modalMedicalHistory[field.key] = false;\r\n                }\r\n            });\r\n        }\r\n        // // uncheck none_of_the_above if any other field is checked\r\n        // else {\r\n        //     this.medicalFields.forEach(field => {\r\n        //         if (field.key !== 'none_of_the_above' && field.key !== 'comment_by_examine_doctor') {\r\n        //         this.modalMedicalHistory[field.key] = true;\r\n        //         }\r\n        //     });\r\n        // }\r\n    }\r\n }\r\n\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.medical-box {\r\n  background: #f7fafc;\r\n  padding: 16px;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 6px rgba(0,0,0,0.1);\r\n  margin-bottom: 16px;\r\n}\r\n.medical-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));\r\n  gap: 12px;\r\n}\r\n.medical-item {\r\n  background: white;\r\n  padding: 8px;\r\n  border-radius: 4px;\r\n  box-shadow: 0 1px 3px rgba(0,0,0,0.05);\r\n}\r\n.medical-comment {\r\n  margin-top: 12px;\r\n  background: white;\r\n  padding: 8px;\r\n  border-radius: 4px;\r\n  box-shadow: 0 1px 3px rgba(0,0,0,0.05);\r\n}\r\n.checkbox-label {\r\n  display: flex;\r\n  align-items: center;\r\n  cursor: pointer;\r\n  margin-bottom: 8px;\r\n}\r\n.checkbox-label input[type=\"checkbox\"] {\r\n  transform: scale(2); /* Make checkbox bigger */\r\n  margin-right: 8px;      /* Space between box and label */\r\n  cursor: pointer;\r\n}\r\n</style>\r\n","// src/shared/acl/sessionAcl.js\r\nexport const Roles = Object.freeze({ STAFF:'staff', DOCTOR:'doctor', ADMIN:'admin' });\r\nexport const Status = Object.freeze({ DRAFT:'draft', SUBMITTED:'submitted', LOCKED:'locked' });\r\n\r\n//action: 'view' | 'edit' | 'delete' | 'create' | 'submit' | 'lock' | 'upload_report'\r\n\r\nexport function canSession(role, status, action) {\r\n  if (role === Roles.ADMIN) {\r\n    // admin can do everything except editing LOCKED (better to use unlock flow)\r\n    if (status === Status.LOCKED && (action === 'edit' || action === 'upload_report')) return false;\r\n    return true;\r\n  }\r\n\r\n  if (role === Roles.STAFF) {\r\n    if (action === 'view') return true; // can view all statuses\r\n    if (status === Status.DRAFT && (action === 'edit')) return true;\r\n    return false; // no submit/lock/delete for staff\r\n  }\r\n\r\n  if (role === Roles.DOCTOR) {\r\n    if (action === 'view') return true; // can view all statuses\r\n    if (status !== Status.LOCKED && (action === 'edit' || action === 'upload_report')) return true;\r\n    // doctors do not submit/lock/delete sessions\r\n    return false;\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\n// allowed status transitions by role\r\nexport function canTransition(role, from, to) {\r\n  if (role === Roles.ADMIN) return true; // simplest: admin controls transitions\r\n  if (role === Roles.DOCTOR) return (from === Status.DRAFT && to === Status.SUBMITTED);\r\n  // staff typically cant change status\r\n  return false;\r\n}\r\n","import { render } from \"./ManageMedicalHistory.vue?vue&type=template&id=0c50b4d2&scoped=true\"\nimport script from \"./ManageMedicalHistory.vue?vue&type=script&lang=js\"\nexport * from \"./ManageMedicalHistory.vue?vue&type=script&lang=js\"\n\nimport \"./ManageMedicalHistory.vue?vue&type=style&index=0&id=0c50b4d2&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0c50b4d2\"]])\n\nexport default __exports__","<template>\r\n  <div>\r\n    <h2>Lifestyle</h2>\r\n\r\n    <!-- Edit Lifestyle Modal -->\r\n    <teleport to=\"body\">\r\n      <div v-if=\"isModalOpen\" class=\"modal-overlay\" @click=\"closeModal\">\r\n        <div class=\"modal-content\" @click.stop>\r\n          <h3>Edit Lifestyle</h3>\r\n          <form @submit.prevent=\"submitLifestyle\">\r\n\r\n            <label>Smoking Habit:</label>\r\n            <select v-model=\"modalLifestyle.smoking_habit\">\r\n              <option value=\"never smoked\">Never Smoked</option>\r\n              <option value=\"ex-smoker\">Ex-Smoker</option>\r\n              <option value=\"current smoker\">Current Smoker</option>\r\n            </select><br>\r\n\r\n            <label>Years Smoked:</label> \r\n            <input type=\"number\" v-model.number=\"modalLifestyle.years_smoked\"\r\n                :disabled=\"modalLifestyle.smoking_habit === 'never smoked'\"\r\n                :required=\"modalLifestyle.smoking_habit !== 'never smoked'\" /><br>\r\n\r\n            <label>Amount Smoked per Day:</label>\r\n            <input type=\"number\" step=\"0.01\" v-model.number=\"modalLifestyle.amount_smoke_day\"\r\n                :disabled=\"modalLifestyle.smoking_habit === 'never smoked'\"\r\n                :required=\"modalLifestyle.smoking_habit !== 'never smoked'\" /><br>\r\n\r\n            <div>\r\n            <label>Date Stopped:</label>\r\n            <!-- <input type=\"date\" v-model=\"modalLifestyle.date_stopped\"\r\n                :disabled=\"modalLifestyle.smoking_habit === 'never smoked' || modalLifestyle.smoking_habit === 'current smoker'\"\r\n                :required=\"modalLifestyle.smoking_habit === 'ex-smoker'\" /> -->\r\n            <VueDatePicker \r\n                  v-model=\"modalLifestyle.date_stopped\"\r\n                  :max-date=\"new Date()\"\r\n                  :year-range=\"[1900, new Date().getFullYear()]\"\r\n                  auto-apply\r\n                  :enable-time-picker=\"false\"\r\n                  :disabled=\"modalLifestyle.smoking_habit === 'never smoked' || modalLifestyle.smoking_habit === 'current smoker'\"\r\n                  :required=\"modalLifestyle.smoking_habit === 'ex-smoker'\"\r\n            />\r\n            </div>\r\n            <br>\r\n\r\n            <!-- <label>Alcohol Drink:</label> -->\r\n            <label>Do you drink alcohol?</label>\r\n            <select v-model=\"modalLifestyle.alcohol_drink\">\r\n              <option value=\"Y\">Yes</option>\r\n              <option value=\"N\">No</option>\r\n            </select><br>\r\n\r\n            <!-- <label>Drinks per Week:</label> -->\r\n            <label>How many drinks per typical week? \r\n              <small><i>\r\n                (Note: 1 drink equivalent to 1 glass wine / 7 oz or half pint beer / 1 oz or single measure spirits)\r\n              </i></small> \r\n            </label><br>\r\n            <input type=\"number\" v-model.number=\"modalLifestyle.drink_per_week\"\r\n                  :disabled=\"modalLifestyle.alcohol_drink !== 'Y'\"\r\n                  :required=\"modalLifestyle.alcohol_drink === 'Y'\" /><br>\r\n\r\n            <!-- <label>Taking Prescribed Drugs:</label> -->\r\n            <label>Are you taking or have you taken drugs other than bought from a chemist or\r\n              prescribed by a doctor to treat an illness?\r\n            </label>\r\n            <select v-model=\"modalLifestyle.taking_prescribed_drugs\">\r\n              <option value=\"Y\">Yes</option>\r\n              <option value=\"N\">No</option>\r\n            </select><br>\r\n\r\n            <label>Details: <small><i>(if yes, give details below)</i></small></label>\r\n            <textarea v-model=\"modalLifestyle.drug_detail\"></textarea><br>\r\n\r\n            <label>\r\n              Declaration Consent:\r\n              <small><i>(to be signed in the presence of the examining doctor)</i></small>\r\n            </label>\r\n            <p>I hereby certify the above information is correct. \r\n              I also understand that voluntary non-disclosure of any of Information required above is \r\n              an offence and disciplinary action may be taken against me. \r\n              I further agree to give consent to the examining Approved Medical \r\n              Examiner to disclose the results of this medical questionnaire and examination \r\n              to authorised ATB Occupational Health Doctor/Advisor, for the purpose of \r\n              verification of my fitness to work status.\r\n            </p>\r\n            <input type=\"checkbox\" v-model=\"modalLifestyle.declaration_consent\" /><br>\r\n\r\n            <label>Consent Signer Name:</label>\r\n            <input type=\"text\" v-model=\"modalLifestyle.consent_signer_name\"\r\n                  :disabled=\"!modalLifestyle.declaration_consent\"\r\n                  :required=\"modalLifestyle.declaration_consent\" /><br>\r\n\r\n            <label>Consent Signer Date:</label>\r\n            <input type=\"date\" v-model=\"modalLifestyle.consent_signer_date\"\r\n                  :disabled=\"!modalLifestyle.declaration_consent\"\r\n                  :required=\"modalLifestyle.declaration_consent\" /><br>\r\n\r\n            <button type=\"submit\">Save Changes</button>\r\n            <button type=\"button\" @click=\"closeModal\">Cancel</button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </teleport>\r\n\r\n    <!-- Display Lifestyle Info -->\r\n    <div class=\"lifestyle-box\">\r\n      <div><strong>Smoking Habit:</strong> {{ lifestyle.smoking_habit ? lifestyle.smoking_habit.charAt(0).toUpperCase() + lifestyle.smoking_habit.slice(1) : '-' }}</div>\r\n      <div v-if=\"lifestyle.smoking_habit !== 'never smoked'\"><strong>Years Smoked:</strong> {{ lifestyle.years_smoked || '-' }}</div>\r\n      <div v-if=\"lifestyle.smoking_habit === 'current smoker'\"><strong>Amount Smoked/Day:</strong> {{ lifestyle.amount_smoke_day || '-' }}</div>\r\n      <div v-if=\"lifestyle.smoking_habit === 'ex-smoker'\"><strong>Date Stopped:</strong> {{ lifestyle.date_stopped || '-' }}</div>\r\n        <br>\r\n      <div><strong>Alcohol Drink:</strong> {{ lifestyle.alcohol_drink === 'Y' ? 'Yes' : 'No' }}</div>\r\n      <div v-if=\"lifestyle.alcohol_drink === 'Y'\"><strong>Drinks per Week:</strong> {{ lifestyle.drink_per_week || '-' }}</div>\r\n        <br>\r\n      <div><strong>Prescribed Drugs:</strong> {{ lifestyle.taking_prescribed_drugs === 'Y' ? 'Yes' : 'No' }}</div>\r\n\r\n      <div class=\"inv-box\" style=\"margin-bottom: 0%;\">\r\n        <strong>Details: </strong> <small><i>(to be filled by OHD)</i></small>\r\n        <p> {{ lifestyle.drug_detail || '-' }} </p>\r\n      </div>\r\n    </div>\r\n      \r\n    <br>\r\n    <div><strong> Declaration:</strong>\r\n      <p>I hereby certify the above information is correct. \r\n          I also understand that voluntary non-disclosure of any of Information required above is \r\n          an offence and disciplinary action may be taken against me. \r\n          I further agree to give consent to the examining Approved Medical \r\n          Examiner to disclose the results of this medical questionnaire and examination \r\n          to authorised ATB Occupational Health Doctor/Advisor, for the purpose of \r\n          verification of my fitness to work status.\r\n      </p>\r\n    </div>\r\n      <br>\r\n    <div><strong>Declaration Consent:</strong> {{ lifestyle.declaration_consent ? 'Signed Digitally' : 'Unsigned' }}</div>\r\n    <div v-if=\"lifestyle.declaration_consent\"><strong>Name:</strong> {{ lifestyle.consent_signer_name || '-' }}</div>\r\n    <div v-if=\"lifestyle.declaration_consent\"><strong>Date:</strong> {{ formatDateShort(lifestyle.consent_signer_date) || '-' }}</div>   \r\n\r\n    <button :disabled=\"!accessCheck('edit')\" class=\"action-btn\" @click=\"openModal\">Edit Lifestyle</button>\r\n    <!-- <button @click=\"$router.push('/dashboard')\" style=\"margin-left:1rem;\">Back</button> -->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { canSession } from '@/shared/sessionAcl';\r\nimport cfg from '@/apiConfig';\r\nimport { handleUnauthorized } from '@/shared/handleUnauthorized';\r\nimport { formatDateShort } from '@/shared/dateFormat';\r\nimport { VueDatePicker } from '@vuepic/vue-datepicker';\r\n\r\nexport default {\r\n  components: { VueDatePicker },\r\n  inject: {\r\n    currentSessionHeader: { from: 'currentSessionHeader', default: () => () => null },\r\n    refreshSessionHeader: { from: 'refreshSessionHeader', default: () => async () => {} },\r\n  },\r\n  data() {\r\n    return {\r\n      baseUrl: cfg.API_BASE_URL,\r\n      lifestyle: {},\r\n      modalLifestyle: {},\r\n      isModalOpen: false\r\n    };\r\n  },\r\n  mounted() {\r\n    this.fetchLifestyle();\r\n  },\r\n  computed: {\r\n    // step-by-step: call the injected function to get the header\r\n    sessionHeader() {\r\n      return this.currentSessionHeader ? this.currentSessionHeader() : null;\r\n    },\r\n    sessionStatus() {\r\n      return this.sessionHeader?.status || 'draft';\r\n    },\r\n  },\r\n  methods: {\r\n    formatDateShort,\r\n    // Access control wrapper\r\n    accessCheck(action) {\r\n      let role = null;\r\n      try {\r\n        role = JSON.parse(localStorage.getItem('user_info'))?.role || 'staff';\r\n      } catch (e) { /* ignore */ }\r\n      return canSession(role, this.sessionStatus, action);\r\n    },\r\n    // boolean normalizer\r\n    asBool(v) {\r\n      if (v === true || v === false) return v;\r\n      if (v == null) return false;\r\n      if (typeof v === 'number') return v === 1;\r\n      if (typeof v === 'string') {\r\n        const s = v.trim().toLowerCase();\r\n        return s === '1' || s === 'true' || s === 'y' || s === 'yes';\r\n      }\r\n      return !!v;\r\n    },\r\n    fetchLifestyle() {\r\n      const staffSessionID = this.$route.params.sessionId || '';\r\n      fetch(`${this.baseUrl}/lifestyle/${staffSessionID}`, {\r\n        headers: { Authorization: `Bearer ${localStorage.getItem('jwt_token')}` }\r\n      })\r\n      .then(res => {\r\n        if (handleUnauthorized(res)) return;\r\n\r\n        return res.json();\r\n      })\r\n      .then(data => {\r\n        const lifestyleData = Array.isArray(data) ? data[0] || {} : data;\r\n        lifestyleData.declaration_consent = this.asBool(lifestyleData.declaration_consent);\r\n\r\n        this.lifestyle = lifestyleData;\r\n        // console.log(\"Lifestyle: \", this.lifestyle);\r\n      })\r\n      .catch(err => console.error(err));\r\n    },\r\n\r\n    openModal() {\r\n      this.modalLifestyle = { \r\n        ...this.lifestyle, \r\n        declaration_consent: this.asBool(this.lifestyle.declaration_consent),\r\n      };\r\n      this.isModalOpen = true;\r\n    },\r\n    closeModal() { this.isModalOpen = false; },\r\n    \r\n    submitLifestyle() {\r\n      const staffSessionID = this.$route.params.sessionId || '';\r\n      const payload = { ...this.modalLifestyle };\r\n\r\n      if (payload.smoking_habit === 'never smoked') {\r\n        payload.years_smoked = null;\r\n        payload.amount_smoke_day = null;\r\n        payload.date_stopped = null;\r\n      } else if (payload.smoking_habit === 'current smoker') {\r\n        payload.date_stopped = null;\r\n      }\r\n\r\n      if (payload.alcohol_drink !== 'Y') payload.drink_per_week = null;\r\n\r\n      if (!payload.declaration_consent) {\r\n        payload.consent_signer_name = '';\r\n        payload.consent_signer_date = null;\r\n      }\r\n\r\n      payload.declaration_consent = this.asBool(payload.declaration_consent) ? 1 : 0;\r\n      payload.updated_by = JSON.parse(localStorage.getItem('user_info'))?.email || null;\r\n\r\n      fetch(`${this.baseUrl}/lifestyle/edit/${staffSessionID}`, {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          Authorization: `Bearer ${localStorage.getItem('jwt_token')}`\r\n        },\r\n        body: JSON.stringify(payload)\r\n      })\r\n      .then(res => res.json())\r\n      .then(() => {\r\n        this.isModalOpen = false;\r\n        this.fetchLifestyle();\r\n      })\r\n      .catch(err => console.error(err));\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n\r\n<style scoped>\r\n/* Form layout */\r\n.form-grid {\r\n  display:grid;\r\n  grid-template-columns: repeat(2, minmax(220px, 1fr));\r\n  gap: 12px 16px;\r\n  margin-top: 8px;\r\n}\r\n.field { display:flex; flex-direction:column; gap:6px; }\r\n.field label { font-size: 13px; color:#4a5568; }\r\n.field input,\r\n.field select {\r\n  border:1px solid #e2e8f0; border-radius:8px; padding:8px 10px;\r\n  font-size:14px; outline:none;\r\n}\r\n.field input.readonly {\r\n  background-color:#f0f0f0; cursor:not-allowed;\r\n}\r\n.span-2 { grid-column: span 2; }\r\n</style>\r\n","import { render } from \"./ManageLifestyle.vue?vue&type=template&id=120c12b6&scoped=true\"\nimport script from \"./ManageLifestyle.vue?vue&type=script&lang=js\"\nexport * from \"./ManageLifestyle.vue?vue&type=script&lang=js\"\n\nimport \"./ManageLifestyle.vue?vue&type=style&index=0&id=120c12b6&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-120c12b6\"]])\n\nexport default __exports__","<template>\r\n  <div>\r\n    <h2>Physical Examination</h2>\r\n\r\n    <!-- Section 1 Table: Vitals / Vision / Colour Vision -->\r\n    <h3>Vitals & Vision</h3>\r\n\r\n    <div>\r\n      <table class=\"std-table\" style=\"border-collapse: collapse;\">\r\n        <thead>\r\n          <tr>\r\n            <th>Weight (kg)</th>\r\n            <th>Height (m)</th>\r\n            <th>BMI</th>\r\n            <th>BP (Sys/Dia)</th>\r\n            <th>Pulse (bpm)</th>\r\n            <th>Blood Group</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr>\r\n            <td>{{ physicalExam.weight_kg ?? '-' }}</td>\r\n            <td>{{ physicalExam.height_m ?? '-' }}</td>\r\n            <td>{{ physicalExam.bmi ?? '-' }}</td>\r\n            <td>{{ physicalExam.bp_sys ?? '-' }}/{{ physicalExam.bp_dia ?? '-' }}</td>\r\n            <td>{{ physicalExam.pulse_bpm ?? '-' }}</td>\r\n            <td>{{ physicalExam.blood_group ?? '-' }}</td>\r\n          </tr>\r\n\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n\r\n    <div style=\"display: flex; gap: 16px; margin: 16px 0; margin-bottom: 0%;\">\r\n\r\n      <table class=\"std-table\">\r\n        <thead>\r\n          <tr>\r\n            <th colspan=\"4\">Distant Vision</th>\r\n          </tr>\r\n          <tr>\r\n            <th></th> \r\n            <th>R</th>\r\n            <th>L</th>\r\n            <th>Both</th> \r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr>\r\n            <th>Uncorrected</th>\r\n            <td>{{ physicalExam.dist_uncorr_r ?? '-' }}</td>\r\n            <td>{{ physicalExam.dist_uncorr_l ?? '-' }}</td>\r\n            <td>{{ physicalExam.dist_uncorr_b ?? '-' }}</td>\r\n            <!-- <td></td> -->\r\n          </tr>\r\n          <tr>\r\n            <th>Corrected</th>\r\n            <td>{{ physicalExam.dist_corr_r ?? '-' }}</td>\r\n            <td>{{ physicalExam.dist_corr_l ?? '-' }}</td>\r\n            <td>{{ physicalExam.dist_corr_b ?? '-' }}</td>\r\n            <!-- <td></td> -->\r\n          </tr>\r\n\r\n            </tbody>\r\n      </table>\r\n\r\n      <table class=\"std-table\">\r\n        <thead>\r\n          <tr>\r\n            <th colspan=\"4\">Near Vision</th>\r\n          </tr>\r\n          <tr>\r\n            <th></th> \r\n            <th>R</th>\r\n            <th>L</th>\r\n            <th>Both</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr>\r\n            <th>Uncorrected</th>\r\n            <td>{{ physicalExam.near_uncorr_r ?? '-' }}</td>\r\n            <td>{{ physicalExam.near_uncorr_l ?? '-' }}</td>\r\n            <td>{{ physicalExam.near_uncorr_b ?? '-' }}</td>\r\n          </tr>\r\n          <tr>\r\n            <th>Corrected</th>\r\n            <td>{{ physicalExam.near_corr_r ?? '-' }}</td>\r\n            <td>{{ physicalExam.near_corr_l ?? '-' }}</td>\r\n            <td>{{ physicalExam.near_corr_b ?? '-' }}</td>\r\n          </tr>\r\n\r\n        </tbody>\r\n      </table>\r\n      <table class=\"std-table\">\r\n        <tbody>\r\n          <tr>\r\n            <th colspan=\"2\">Colour Vision</th>\r\n          </tr>\r\n          <tr>\r\n            <td colspan=\"2\">{{ physicalExam.colour_vision ?? '-' }}</td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n    <button :disabled=\"!accessCheck('edit')\" class=\"action-btn\" @click=\"openModal\">Edit Vitals & Vision</button>\r\n\r\n    <!-- Section 2 Table: Body Systems -->\r\n    <h3>Body System Examination</h3>\r\n    <div style=\"display: flex; gap: 8px;\">\r\n\r\n      <table class=\"std-table\">\r\n        <thead>\r\n          <tr>\r\n            <th>Body System</th>\r\n            <th>Result</th>\r\n            <th>Details</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr v-for=\"field in bodySystemFields.slice(0, bodySystemFields.length / 2)\" :key=\"field.key\">\r\n            <td><strong>{{ field.label }}</strong></td>\r\n            <td :style=\"{ color: \r\n              physicalExam2[field.key] === 'Abnormal' ? 'red' : \r\n              physicalExam2[field.key] === 'Normal' ? 'green' : \r\n              physicalExam2[field.key] === 'Not examined' ? 'grey' : '' }\"\r\n            >\r\n              {{ physicalExam2[field.key] ?? '-' }}\r\n            </td>\r\n            <td>\r\n              {{ physicalExam2[field.key + '_details_abnormality'] || '-' }}\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n\r\n      <table class=\"std-table\">\r\n        <thead>\r\n          <tr>\r\n            <th>Body System</th>\r\n            <th>Result</th>\r\n            <th>Details</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr v-for=\"field in bodySystemFields.slice(bodySystemFields.length / 2)\" :key=\"field.key\">\r\n            <td><strong>{{ field.label }}</strong></td>\r\n            <td :style=\"{ color: \r\n              physicalExam2[field.key] === 'Abnormal' ? 'red' : \r\n              physicalExam2[field.key] === 'Normal' ? 'green' : \r\n              physicalExam2[field.key] === 'Not examined' ? 'grey' : '' }\"\r\n            >\r\n              {{ physicalExam2[field.key] ?? '-' }}\r\n            </td>\r\n            <td>\r\n              {{ physicalExam2[field.key + '_details_abnormality'] || '-' }}\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n      \r\n    </div>\r\n    <button :disabled=\"!accessCheck('edit')\" class=\"action-btn\" @click=\"openModal2\">Edit Body Systems</button>\r\n\r\n    <!-- <button @click=\"$router.push('/dashboard')\" style=\"margin-top:1rem;\">Back</button> -->\r\n\r\n    <!-- Modal 1: Edit physical_exams -->\r\n    <div v-if=\"isModalOpen\" class=\"modal-overlay\" @click=\"closeModal\">\r\n      <div class=\"modal-content\" @click.stop style=\"overflow-y:auto; max-height:90vh;\">\r\n        <h3>Edit Vitals & Vision</h3>\r\n        <form @submit.prevent=\"submitPhysicalExam\">\r\n          <div class=\"physical-grid\">\r\n            <div class=\"physical-item\">\r\n              <label>Weight (kg):</label>\r\n              <input type=\"number\" step=\"0.1\" v-model.number=\"modalPhysicalExam.weight_kg\" @input=\"calculateBMI\" />\r\n            </div>\r\n            <div class=\"physical-item\">\r\n              <label>Height (m):</label>\r\n              <input type=\"number\" step=\"0.01\" v-model.number=\"modalPhysicalExam.height_m\" @input=\"calculateBMI\" />\r\n            </div>\r\n            <div class=\"physical-item\">\r\n              <label>BMI:</label>\r\n              <input type=\"number\" :value=\"modalPhysicalExam.bmi\" readonly />\r\n            </div>\r\n            <div class=\"physical-item\">\r\n              <label>BP Systolic:</label>\r\n              <input type=\"number\" v-model=\"modalPhysicalExam.bp_sys\" />\r\n            </div>\r\n            <div class=\"physical-item\">\r\n              <label>BP Diastolic:</label>\r\n              <input type=\"number\" v-model=\"modalPhysicalExam.bp_dia\" />\r\n            </div>\r\n            <div class=\"physical-item\">\r\n              <label>Pulse (bpm):</label>\r\n              <input type=\"number\" v-model=\"modalPhysicalExam.pulse_bpm\" />\r\n            </div>\r\n            <div class=\"physical-item\">\r\n              <label>Blood Group:</label>\r\n              <select v-model=\"modalPhysicalExam.blood_group\">\r\n                <option>A+</option>\r\n                <option>A-</option>\r\n                <option>B+</option>\r\n                <option>B-</option>\r\n                <option>AB+</option>\r\n                <option>AB-</option>\r\n                <option>O+</option>\r\n                <option>O-</option>\r\n                <option>Unknown</option>\r\n              </select>\r\n            </div>\r\n            <div class=\"physical-item\">\r\n              <label>Distant Vision (R/L/B):</label>\r\n              <input type=\"text\" placeholder=\"R\" v-model=\"modalPhysicalExam.dist_uncorr_r\" />\r\n              <input type=\"text\" placeholder=\"L\" v-model=\"modalPhysicalExam.dist_uncorr_l\" />\r\n              <input type=\"text\" placeholder=\"B\" v-model=\"modalPhysicalExam.dist_uncorr_b\" />\r\n            </div>\r\n            <div class=\"physical-item\">\r\n              <label>Distant Vision Corrected (R/L/B):</label>\r\n              <input type=\"text\" placeholder=\"R\" v-model=\"modalPhysicalExam.dist_corr_r\" />\r\n              <input type=\"text\" placeholder=\"L\" v-model=\"modalPhysicalExam.dist_corr_l\" />\r\n              <input type=\"text\" placeholder=\"B\" v-model=\"modalPhysicalExam.dist_corr_b\" />\r\n            </div>\r\n            <div class=\"physical-item\">\r\n              <label>Near Vision (R/L/B):</label>\r\n              <input type=\"text\" placeholder=\"R\" v-model=\"modalPhysicalExam.near_uncorr_r\" />\r\n              <input type=\"text\" placeholder=\"L\" v-model=\"modalPhysicalExam.near_uncorr_l\" />\r\n              <input type=\"text\" placeholder=\"B\" v-model=\"modalPhysicalExam.near_uncorr_b\" />\r\n            </div>\r\n            <div class=\"physical-item\">\r\n              <label>Near Vision Corrected (R/L/B):</label>\r\n              <input type=\"text\" placeholder=\"R\" v-model=\"modalPhysicalExam.near_corr_r\" />\r\n              <input type=\"text\" placeholder=\"L\" v-model=\"modalPhysicalExam.near_corr_l\" />\r\n              <input type=\"text\" placeholder=\"B\" v-model=\"modalPhysicalExam.near_corr_b\" />\r\n            </div>\r\n            <div class=\"physical-item\">\r\n              <label>Colour Vision:</label>\r\n              <input type=\"text\" v-model=\"modalPhysicalExam.colour_vision\" />\r\n            </div>\r\n          </div>\r\n          <button type=\"submit\">Save Changes</button>\r\n          <button type=\"button\" @click=\"closeModal\">Cancel</button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Modal 2: Edit physical_exams_2 -->\r\n    <div v-if=\"isModal2Open\" class=\"modal-overlay\" @click=\"closeModal2\">\r\n      <div class=\"modal-content\" @click.stop style=\"overflow-y:auto; max-height:90vh;\">\r\n        <h3>Edit Body System Exam</h3>\r\n        <form @submit.prevent=\"submitPhysicalExam2\">\r\n          <div class=\"physical-grid\">\r\n            <div v-for=\"field in bodySystemFields\" :key=\"field.key\" class=\"physical-item\">\r\n              <label>{{ field.label }}:</label>\r\n              <select v-model=\"modalPhysicalExam2[field.key]\">\r\n                <option>Normal</option>\r\n                <option>Abnormal</option>\r\n                <option>Not examined</option>\r\n              </select>\r\n              <textarea v-model=\"modalPhysicalExam2[field.key + '_details_abnormality']\" placeholder=\"Details (if abnormal)\" style=\"width:100%; height:50px;\" :disabled=\"modalPhysicalExam2[field.key] !== 'Abnormal'\"></textarea>\r\n            </div>\r\n          </div>\r\n          <button type=\"submit\">Save Changes</button>\r\n          <button type=\"button\" @click=\"closeModal2\">Cancel</button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { canSession } from '@/shared/sessionAcl';\r\nimport cfg from '@/apiConfig';\r\nimport { handleUnauthorized } from '@/shared/handleUnauthorized';\r\n\r\nexport default {\r\n  inject: {\r\n    currentSessionHeader: { from: 'currentSessionHeader', default: () => () => null },\r\n    refreshSessionHeader: { from: 'refreshSessionHeader', default: () => async () => {} },\r\n  },\r\n  data() {\r\n    return {\r\n      baseUrl: cfg.API_BASE_URL,\r\n      physicalExam: {},\r\n      physicalExam2: {},\r\n      isModalOpen: false,\r\n      isModal2Open: false,\r\n      modalPhysicalExam: {},\r\n      modalPhysicalExam2: {},\r\n      bodySystemFields: [\r\n        { key: 'head', label: 'Head' },\r\n        { key: 'eyes', label: 'Eyes' },\r\n        { key: 'ears_and_drums', label: 'Ears and Drums' },\r\n        { key: 'hearing', label: 'Hearing' },\r\n        { key: 'nose_and_sinuses', label: 'Nose and Sinuses' },\r\n        { key: 'mouth_teeth_throat', label: 'Mouth, Teeth, Throat' },\r\n        { key: 'neck_and_thyroid', label: 'Neck and Thyroid' },\r\n        { key: 'chest_and_lungs', label: 'Chest and Lungs' },\r\n        { key: 'breasts', label: 'Breasts' },\r\n        { key: 'heart', label: 'Heart' },\r\n        { key: 'peripheral_arteries', label: 'Peripheral Arteries' },\r\n        { key: 'peripheral_veins', label: 'Peripheral Veins' },\r\n        { key: 'abdomen', label: 'Abdomen' },\r\n        { key: 'hernia_orifices', label: 'Hernia Orifices' },\r\n        { key: 'genitalia', label: 'Genitalia' },\r\n        { key: 'rectal_examination', label: 'Rectal Examination' },\r\n        { key: 'upper_limbs', label: 'Upper Limbs' },\r\n        { key: 'lower_limbs', label: 'Lower Limbs' },\r\n        { key: 'spine', label: 'Spine' },\r\n        { key: 'skin', label: 'Skin' },\r\n        { key: 'lymph_nodes', label: 'Lymph Nodes' },\r\n        { key: 'neurological', label: 'Neurological' },\r\n        { key: 'psychiatric', label: 'Psychiatric' },\r\n      ]\r\n    };\r\n  },\r\n  mounted() {\r\n    this.fetchPhysicalExam();\r\n    this.fetchPhysicalExam2();\r\n  },\r\n  computed: {\r\n    sessionHeader() {\r\n      return this.currentSessionHeader ? this.currentSessionHeader() : null;\r\n    },\r\n    sessionStatus() {\r\n      return this.sessionHeader?.status || 'draft';\r\n    },\r\n  },\r\n  methods: {\r\n    // Access control wrapper\r\n    accessCheck(action) {\r\n      let role = null;\r\n      try {\r\n        role = JSON.parse(localStorage.getItem('user_info'))?.role || 'staff';\r\n      } catch (e) { /* ignore */ }\r\n      return canSession(role, this.sessionStatus, action);\r\n    },\r\n\r\n    calculateBMI() {\r\n      if (!this.modalPhysicalExam) this.modalPhysicalExam = {};\r\n      const w = parseFloat(this.modalPhysicalExam.weight_kg);\r\n      const h = parseFloat(this.modalPhysicalExam.height_m);\r\n      if (Number.isFinite(w) && Number.isFinite(h) && h > 0) {\r\n        this.modalPhysicalExam.bmi = +(w / (h * h)).toFixed(1);\r\n      } else {\r\n        this.modalPhysicalExam.bmi = null;\r\n      }\r\n    },\r\n\r\n    fetchPhysicalExam() {\r\n      // const staffEmail = JSON.parse(localStorage.getItem('user_info')).email.replace(/\\./g, 'XYZ');\r\n      const staffSessionID = this.$route.params.sessionId || '';\r\n      fetch(`${this.baseUrl}/physical-exams/${staffSessionID}`, {\r\n        headers: { Authorization: `Bearer ${localStorage.getItem('jwt_token')}` }\r\n      })\r\n        .then(res => {\r\n          if (handleUnauthorized(res)) return;\r\n\r\n          return res.json();\r\n        })\r\n        .then(data => {\r\n            this.physicalExam = Array.isArray(data) ? data[0] || {} : data;\r\n            // console.log(\"physicalExam: \", this.physicalExam);\r\n        })\r\n        .catch(err => console.error(err));\r\n\r\n    },\r\n    fetchPhysicalExam2() {\r\n      // const staffEmail = JSON.parse(localStorage.getItem('user_info')).email.replace(/\\./g, 'XYZ');\r\n      const staffSessionID = this.$route.params.sessionId || '';\r\n      fetch(`${this.baseUrl}/physical-exams-2/${staffSessionID}`, {\r\n        headers: { Authorization: `Bearer ${localStorage.getItem('jwt_token')}` }\r\n      })\r\n      .then(res => {\r\n        if (handleUnauthorized(res)) return;\r\n\r\n        return res.json();\r\n      })\r\n      .then(data => {\r\n          this.physicalExam2 = Array.isArray(data) ? data[0] || {} : data;\r\n          // console.log(\"physicalExam2: \", this.physicalExam2);\r\n      })\r\n      .catch(err => console.error(err));\r\n\r\n    },\r\n    openModal() {\r\n      const defaults = {\r\n        weight_kg: null, height_m: null, bmi: null,\r\n        bp_sys: null, bp_dia: null, pulse_bpm: null,\r\n        blood_group: 'Unknown',\r\n        dist_uncorr_r: null, dist_uncorr_l: null, dist_uncorr_b: null,\r\n        dist_corr_r: null,   dist_corr_l: null,   dist_corr_b: null,\r\n        near_uncorr_r: null, near_uncorr_l: null, near_uncorr_b: null,\r\n        near_corr_r: null,   near_corr_l: null,   near_corr_b: null,\r\n        colour_vision: null\r\n      };\r\n      this.modalPhysicalExam = { ...defaults, ...(this.physicalExam || {}) };\r\n      this.calculateBMI();\r\n      this.isModalOpen = true;\r\n    },\r\n    closeModal() {\r\n      this.isModalOpen = false;\r\n    },\r\n    openModal2() {\r\n      this.modalPhysicalExam2 = { ...this.physicalExam2 };\r\n      this.isModal2Open = true;\r\n    },\r\n    closeModal2() {\r\n      this.isModal2Open = false;\r\n    },\r\n    submitPhysicalExam() {\r\n      const updated_by = JSON.parse(localStorage.getItem('user_info')).email;\r\n      const staffSessionID = this.$route.params.sessionId || '';\r\n      fetch(`${this.baseUrl}/physical-exams/edit/${staffSessionID}`, {\r\n        method: 'PUT',\r\n        headers: {\r\n          Authorization: `Bearer ${localStorage.getItem('jwt_token')}`,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          ...this.modalPhysicalExam,\r\n          updated_by\r\n        })\r\n      })\r\n        .then(res => res.json())\r\n        .then(() => {\r\n          this.fetchPhysicalExam();\r\n          this.closeModal();\r\n        })\r\n        .catch(err => console.error(err));\r\n    },\r\n    submitPhysicalExam2() {\r\n      const updated_by = JSON.parse(localStorage.getItem('user_info')).email;\r\n      const staffSessionID = this.$route.params.sessionId || '';\r\n      fetch(`${this.baseUrl}/physical-exams-2/edit/${staffSessionID}`, {\r\n        method: 'PUT',\r\n        headers: {\r\n          Authorization: `Bearer ${localStorage.getItem('jwt_token')}`,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          ...this.modalPhysicalExam2,\r\n          updated_by\r\n        })\r\n      })\r\n        .then(res => res.json())\r\n        .then(() => {\r\n          this.fetchPhysicalExam2();\r\n          this.closeModal2();\r\n        })\r\n        .catch(err => console.error(err));\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.physical-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit,minmax(250px,1fr));\r\n  gap: 12px;\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.physical-item {\r\n  background: #f8f8f8;\r\n  padding: 8px;\r\n  border-radius: 4px;\r\n  border: 1px solid #ddd;\r\n}\r\n</style>\r\n","import { render } from \"./ManagePhysicalExam.vue?vue&type=template&id=786d9e3e&scoped=true\"\nimport script from \"./ManagePhysicalExam.vue?vue&type=script&lang=js\"\nexport * from \"./ManagePhysicalExam.vue?vue&type=script&lang=js\"\n\nimport \"./ManagePhysicalExam.vue?vue&type=style&index=0&id=786d9e3e&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-786d9e3e\"]])\n\nexport default __exports__","<template>\r\n  <div>\r\n    <h2>Investigations</h2>\r\n\r\n    <!-- <button @click=\"$router.push('/dashboard')\" style=\"margin-top: 1rem;\">Back</button> -->\r\n\r\n    <!-- ========================== A) GENERAL INVESTIGATIONS (TABLE) ========================== -->\r\n    <h3 class=\"table-header\">\r\n      General Investigations\r\n      <button :disabled=\"!accessCheck('edit')\" class=\"action-btn\" @click=\"openGenModal\">Edit General Investigations</button>\r\n    </h3>\r\n    <table class=\"std-table\">\r\n      <thead>\r\n        <tr>\r\n          <th style=\"width: 30%\">Test</th>\r\n          <th style=\"width: 20%\">Status</th>\r\n          <th>Details of any abnormality</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr v-for=\"row in generalRows\" :key=\"row.key\">\r\n          <td>{{ row.label }}</td>\r\n          <td>\r\n            <span :style=\"{color: \r\n              investigations[row.statusKey] === 'Abnormal' ? 'red' : \r\n              investigations[row.statusKey] === 'Normal' ? 'green' : 'grey'}\"\r\n            >\r\n              {{ investigations[row.statusKey] ?? '-' }}\r\n            </span>\r\n          </td>\r\n          <td>{{ investigations[row.detailsKey] ?? '-' }}</td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n\r\n    <!-- ============================ B) LABORATORY RESULTS (HYBRID) ============================ -->\r\n    <h2 class=\"table-header\" style=\"margin-top: 24px;\">\r\n      Laboratory Results\r\n      <button :disabled=\"!accessCheck('edit')\" class=\"action-btn\" @click=\"openLabModal\">Edit All Lab Results</button>\r\n    </h2>\r\n\r\n    <div class=\"info-container\">\r\n      <span class=\"info-icon\" style=\"align-items: right;\" @click=\"showInfo = !this.showInfo\"></span>\r\n\r\n      <div v-if=\"showInfo\" class=\"info-overlay\" @click.self=\"showInfo = false\">\r\n        <div class=\"info-box\">\r\n          <h4 style=\"color:black\">Hybrid Edit Mode</h4>\r\n          <p style=\"color: black\">\r\n            You can opt to edit Lab Results <b>all at once</b> (Edit All Lab Results) or <b>each individual lines</b> (Action > Edit).<br>\r\n            <b>Tip:</b> You can edit multiple lines using Edit button, then either \r\n            click the <b>'Save All'</b> or <b>'Cancel'</b> button in the bottom row to update/cancel all changes.\r\n          </p>\r\n          \r\n          <button style=\"color: white; background-color: blue;\" @click=\"showInfo = false\">Got it</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    \r\n    <!-- :disabled=\"!accessCheck(s, 'edit')\" -->\r\n\r\n    <!-- Sticky top bar (only when there are pending changes) -->\r\n    <!-- <div class=\"sticky-bar top\" v-if=\"dirtyKeys.size\">\r\n      <button class=\"primary\" @click=\"saveAllLab\">Save All</button>\r\n      <button @click=\"cancelAllLab\">Cancel</button>\r\n      <span class=\"muted\">{{ dirtyKeys.size }} change(s) pending</span>\r\n    </div> -->\r\n\r\n    <div v-for=\"grp in labGroupOrder\" :key=\"grp\">\r\n      <h3 style=\"margin-top: 16px;\">{{ groupLabel(grp) }}</h3>\r\n      <table class=\"std-table\">\r\n        <thead>\r\n          <tr>\r\n            <th style=\"width: 28%\">Test</th>\r\n            <th style=\"width: 10%\">Abbrv.</th>\r\n            <th style=\"width: 24%\">Normal Range</th>\r\n            <th style=\"width: 18%\">Result</th>\r\n            <th>Remark</th>\r\n            <th style=\"width: 110px;\">Action</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr v-for=\"item in labGroups[grp]\" :key=\"item.key\">\r\n            <td>{{ item.test }}</td>\r\n            <td>{{ item.abbr }}</td>\r\n            <td v-html=\"item.range || '-'\"></td>\r\n\r\n            <!-- READ-ONLY VIEW -->\r\n            <template v-if=\"editingRow !== item.key\">\r\n              <td>\r\n                <span :style=\"{ color: \r\n                  (investigationsLab[`${item.key}_result`] === 'Abnormal' ? 'red' : \r\n                  investigationsLab[`${item.key}_result`] === 'Normal' ? 'green' : 'grey') \r\n                }\">\r\n                  {{ investigationsLab[`${item.key}_result`] ?? 'Not done' }}\r\n                </span>\r\n              </td>\r\n              <td>{{ investigationsLab[`${item.key}_remark`] ?? '-' }}</td>\r\n              <td>\r\n                <button :disabled=\"!accessCheck('edit')\" class=\"mini-btn\" @click=\"startRowEdit(item.key)\">Edit</button>\r\n              </td>\r\n            </template>\r\n\r\n            <!-- INLINE EDIT VIEW -->\r\n            <template v-else>\r\n              <td>\r\n                <select v-model=\"editableLab[`${item.key}_result`]\" @change=\"markDirty(item.key)\">\r\n                  <option>Not done</option>\r\n                  <option>Normal</option>\r\n                  <option>Abnormal</option>\r\n                </select>\r\n              </td>\r\n              <td>\r\n                <textarea\r\n                  v-model=\"editableLab[`${item.key}_remark`]\"\r\n                  @input=\"markDirty(item.key)\"\r\n                  placeholder=\"Remark (optional)\"\r\n                ></textarea>\r\n              </td>\r\n              <td class=\"row-actions\">\r\n                <button class=\"mini-btn primary\" :disabled=\"!isRowDirty(item.key)\" @click=\"saveLabRow(item.key)\">Save</button>\r\n                <button class=\"mini-btn\" @click=\"cancelRowEdit(item.key)\">Cancel</button>\r\n              </td>\r\n            </template>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n\r\n    <!-- Sticky bottom bar -->\r\n    <div class=\"sticky-bar bottom\" v-if=\"dirtyKeys.size\">\r\n      <button class=\"primary\" @click=\"saveAllLab\">Save All</button>\r\n      <button @click=\"cancelAllLab\">Cancel</button>\r\n      <span class=\"muted\">{{ dirtyKeys.size }} change(s) pending</span>\r\n    </div>\r\n\r\n    <!-- ============================ C) URINE DRUG TESTS (TABLE) ============================= -->\r\n    <h2 class=\"table-header\" style=\"margin-top: 24px;\">\r\n      Urine Drug Test\r\n      <button :disabled=\"!accessCheck('edit')\" class=\"action-btn\" @click=\"openDrugModal\">Edit Drug Tests</button>\r\n    </h2>\r\n    <table class=\"std-table\">\r\n      <thead>\r\n        <tr>\r\n          <th style=\"width: 40%\">Test</th>\r\n          <th style=\"width: 25%\">Result</th>\r\n          <th>Remark</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr v-for=\"t in drugTests\" :key=\"t.key\">\r\n          <td>{{ t.label }}</td>\r\n          <td>\r\n            <span \r\n            :style=\"{ color: \r\n              investigations[`${t.key}_result`] === 'Negative' ? 'green' : \r\n              investigations[`${t.key}_result`] === 'Non-negative' ? 'red' : \r\n              investigations[`${t.key}_result`] === 'Not done' ? 'grey' : '' }\"\r\n              >\r\n              {{ investigations[`${t.key}_result`] ?? 'Not done' }}\r\n            </span>\r\n          </td>\r\n          <td>{{ investigations[`${t.key}_remark`] ?? '-' }}</td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n\r\n    <div class=\"inv-box\">\r\n      <strong>Remarks by Examine Doctor : </strong> <small><i>(to be filled by OHD)</i></small>\r\n      <div>{{ (investigations.remarks_ohd && investigations.remarks_ohd.trim()) ? investigations.remarks_ohd : '-' }}</div>\r\n    </div>\r\n\r\n    <!-- <button @click=\"$router.push('/dashboard')\" style=\"margin-top: 1rem;\">Back</button> -->\r\n\r\n    <!-- ================================ MODAL: GENERAL ====================================== -->\r\n    <div v-if=\"isGenModalOpen\" class=\"modal-overlay\" @click=\"closeGenModal\">\r\n      <div class=\"modal-content\" @click.stop style=\"overflow-y:auto; max-height:90vh;\">\r\n        <h3>Edit General Investigations</h3>\r\n        <form @submit.prevent=\"submitGeneral\">\r\n          <div class=\"two-col\">\r\n            <div v-for=\"row in generalRows\" :key=\"row.key\" class=\"card\">\r\n              <label class=\"lbl\">{{ row.label }}</label>\r\n              <select v-model=\"modalGeneral[row.statusKey]\">\r\n                <option :value=\"null\">-</option>\r\n                <option>Normal</option>\r\n                <option>Abnormal</option>\r\n              </select>\r\n              <textarea v-model=\"modalGeneral[row.detailsKey]\" placeholder=\"Details of any abnormality\"></textarea>\r\n            </div>\r\n          </div>\r\n\r\n          <div style=\"margin-top: 8px;\">\r\n            <button type=\"submit\">Save Changes</button>\r\n            <button type=\"button\" @click=\"closeGenModal\">Cancel</button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- ================================ MODAL: LAB (EDIT ALL) =============================== -->\r\n    <div v-if=\"isLabModalOpen\" class=\"modal-overlay\" @click=\"closeLabModal\">\r\n      <div class=\"modal-content\" @click.stop style=\"overflow-y:auto; max-height:90vh;\">\r\n        <h3>Edit All Laboratory Results</h3>\r\n        <form @submit.prevent=\"submitLab\">\r\n          <div style=\"margin-top:10px;\">\r\n            <button type=\"submit\">Save Changes</button>\r\n            <button type=\"button\" @click=\"closeLabModal\">Cancel</button>\r\n          </div>\r\n          <div v-for=\"grp in labGroupOrder\" :key=\"grp\">\r\n            <h4 style=\"margin-top:10px;\">{{ groupLabel(grp) }}</h4>\r\n            <div class=\"inv-grid\">\r\n              <div class=\"inv-item\" v-for=\"item in labGroups[grp]\" :key=\"item.key\">\r\n                <div class=\"lbl\">{{ item.test }} ({{ item.abbr }})</div>\r\n                <div class=\"muted\" v-html=\"item.range || '&nbsp;'\"></div>\r\n                <select v-model=\"modalLab[`${item.key}_result`]\">\r\n                  <option>Not done</option>\r\n                  <option>Normal</option>\r\n                  <option>Abnormal</option>\r\n                </select>\r\n                <textarea v-model=\"modalLab[`${item.key}_remark`]\" placeholder=\"Remark (optional)\"></textarea>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div style=\"margin-top:10px;\">\r\n            <button type=\"submit\">Save Changes</button>\r\n            <button type=\"button\" @click=\"closeLabModal\">Cancel</button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- ================================ MODAL: DRUG ========================================= -->\r\n    <div v-if=\"isDrugModalOpen\" class=\"modal-overlay\" @click=\"closeDrugModal\">\r\n      <div class=\"modal-content\" @click.stop style=\"overflow-y:auto; max-height:90vh;\">\r\n        <h3>Edit Urine Drug Test & OHD Remarks</h3>\r\n        <form @submit.prevent=\"submitDrug\">\r\n          <div class=\"two-col\">\r\n            <div v-for=\"t in drugTests\" :key=\"t.key\" class=\"card\">\r\n              <label class=\"lbl\">{{ t.label }} Result</label>\r\n              <select v-model=\"modalDrug[`${t.key}_result`]\">\r\n                <option>Not done</option>\r\n                <option>Negative</option>\r\n                <option>Non-negative</option>\r\n              </select>\r\n              <textarea v-model=\"modalDrug[`${t.key}_remark`]\" placeholder=\"Remark\"></textarea>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"card\">\r\n            <label class=\"lbl\">Remarks by Examine Doctor :</label>\r\n            <textarea v-model=\"modalDrug.remarks_ohd\" placeholder=\"Summary / conclusion\"></textarea>\r\n          </div>\r\n\r\n          <div style=\"margin-top: 8px;\">\r\n            <button type=\"submit\">Save Changes</button>\r\n            <button type=\"button\" @click=\"closeDrugModal\">Cancel</button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { canSession } from '@/shared/sessionAcl';\r\nimport cfg from '@/apiConfig';\r\nimport { handleUnauthorized } from '@/shared/handleUnauthorized';\r\n\r\nexport default {\r\n  inject: {\r\n    currentSessionHeader: { from: 'currentSessionHeader', default: () => () => null },\r\n    refreshSessionHeader: { from: 'refreshSessionHeader', default: () => async () => {} },\r\n  },\r\n  data() {\r\n    return {\r\n      baseUrl: cfg.API_BASE_URL,\r\n      showInfo: false,\r\n\r\n      investigations: {},\r\n      investigationsLab: {},\r\n\r\n      // Modals (General + LabAll + Drug)\r\n      isGenModalOpen: false,\r\n      isLabModalOpen: false,\r\n      isDrugModalOpen: false,\r\n\r\n      // Modal models\r\n      modalGeneral: {},\r\n      modalLab: {},\r\n      modalDrug: {},\r\n\r\n      // Inline Lab editing\r\n      editableLab: {},\r\n      originalLab: {},\r\n      dirtyKeys: new Set(),\r\n      editingRow: null, // row key currently inline editing, e.g. 'hb'\r\n\r\n      // Table A config (General)\r\n      generalRows: [\r\n        { key: 'spirometry', label: 'Spirometry', statusKey: 'spirometry_status', detailsKey: 'spirometry_details' },\r\n        { key: 'audiometry', label: 'Audiometry', statusKey: 'audiometry_status', detailsKey: 'audiometry_details' },\r\n        { key: 'chest_xray', label: 'Chest X-ray', statusKey: 'chest_xray_status', detailsKey: 'chest_xray_details' },\r\n        { key: 'electrocardiograph', label: 'Electrocardiograph', statusKey: 'electrocardiograph_status', detailsKey: 'electrocardiograph_details' },\r\n      ],\r\n\r\n      // Table B config (Lab)\r\n      labGroupOrder: ['haematology','glucose','lipids','electrolytes','renal','liver','urineChem','urineMicro','serology'],\r\n      labGroups: {\r\n        haematology: [\r\n          { key: 'hb',     test: 'Haemoglobin',          abbr: 'Hb',    range: '13 - 18 g/dl' },\r\n          { key: 'rbc',    test: 'RBC',                  abbr: 'RBC',   range: '4.50 - 6.50 x 10^12/L' },\r\n          { key: 'pcv',    test: 'PCV',                  abbr: 'PCV',   range: '0.40 - 0.55' },\r\n          { key: 'mcv',    test: 'MCV',                  abbr: 'MCV',   range: '78 - 99 fl' },\r\n          { key: 'mch',    test: 'MCH',                  abbr: 'MCH',   range: '27 - 32 pg' },\r\n          { key: 'mchc',   test: 'MCHC',                 abbr: 'MCHC',  range: '300 - 600 g/L' },\r\n          { key: 'rdw',    test: 'RDW',                  abbr: 'RDW',   range: '11.15%' },\r\n          { key: 'wbc',    test: 'White Cell Count',     abbr: 'WBC',   range: '4 - 11 x 10^9/L' },\r\n          { key: 'neut',   test: 'Neutrophils',          abbr: 'Neut',  range: '2.0 - 8.0 x 10^9/L' },\r\n          { key: 'lym',    test: 'Lymphocytes',          abbr: 'Lym',   range: '1.0 - 4.0 x 10^9/L' },\r\n          { key: 'mon',    test: 'Monocytes',            abbr: 'Mon',   range: '&lt;1.1 x 10^9/L' },\r\n          { key: 'eon',    test: 'Eosinophils',          abbr: 'Eon',   range: '&lt;0.6 x 10^9/L' },\r\n          { key: 'bas',    test: 'Basophils',            abbr: 'Bas',   range: '&lt;0.2 x 10^9/L' },\r\n          { key: 'plet',   test: 'Platelets',            abbr: 'Plet',  range: '150 - 450 x 10^9/L' },\r\n          { key: 'esr',    test: 'ESR',                  abbr: 'ESR',   range: '&lt;21 mm/hr' },\r\n          { key: 'fbp',    test: 'Full Blood Picture',   abbr: 'FBP',   range: '' },\r\n        ],\r\n        glucose: [\r\n          { key: 'fbs',    test: 'Fasting',              abbr: 'FBS',   range: '(3.9 - 6.0 mmol/L)' },\r\n          { key: 'rbs',    test: 'Random',               abbr: 'RBS',   range: '(3.9 - 10.0 mmol/L)' },\r\n        ],\r\n        lipids: [\r\n          { key: 'tchol',  test: 'Total Cholesterol',    abbr: 'Tchol', range: '&lt;5.2 mmol/L' },\r\n          { key: 'tg',     test: 'Triglyceride',         abbr: 'TG',    range: '&lt;1.68 mmol/L' },\r\n          { key: 'hdl',    test: 'HDL Cholesterol',      abbr: 'HDL',   range: '&gt;1.03 mmol/L' },\r\n          { key: 'ldl',    test: 'LDL Cholesterol',      abbr: 'LDL',   range: '&lt;3.9 mmol/L' },\r\n        ],\r\n        electrolytes: [\r\n          { key: 'na',     test: 'Sodium',               abbr: 'Na',    range: '135 - 145 mmol/L' },\r\n          { key: 'k',      test: 'Potassium',            abbr: 'K',     range: '3.5 - 5.1 mmol/L' },\r\n          { key: 'cl',     test: 'Chloride',             abbr: 'Cl',    range: '95 - 110 mmol/L' },\r\n        ],\r\n        renal: [\r\n          { key: 'bu',     test: 'Urea',                 abbr: 'BU',    range: '2.5 - 8.0 mmol/L' },\r\n          { key: 'creat',  test: 'Creatinine',           abbr: 'Creat', range: '53 - 115 mol/L' },\r\n          { key: 'ua',     test: 'Uric acid',            abbr: 'UA',    range: '153 - 425 mol/L' },\r\n          { key: 'ca',     test: 'Calcium',              abbr: 'Ca',    range: '2.10 - 2.60 mmol/L' },\r\n          { key: 'cca',    test: 'Corrected Calcium',    abbr: 'Cca',   range: '2.10 - 2.60 mmol/L' },\r\n          { key: 'po4',    test: 'Phosphate',            abbr: 'PO4',   range: '0.65 - 1.45 mmol/L' },\r\n        ],\r\n        liver: [\r\n          { key: 'tprot',  test: 'Total Protein',        abbr: 'Tprot', range: '60 - 82 g/dl' },\r\n          { key: 'alb',    test: 'Albumin',              abbr: 'Alb',   range: '35 - 50 g/dl' },\r\n          { key: 'glo',    test: 'Globulin',             abbr: 'Glo',   range: '20 - 39 g/dl' },\r\n          { key: 'agr',    test: 'Albumin/Globulin Ratio', abbr: 'AGR', range: '1.0 - 2.5' },\r\n          { key: 'alkp',   test: 'Alkaline Phosphatase', abbr: 'AlkP',  range: '30 - 120 U/L' },\r\n          { key: 'tbil',   test: 'Total Bilirubin',      abbr: 'Tbil',  range: '&lt;21 mol/L' },\r\n          { key: 'ggt',    test: 'Gamma Glutamyl Transferase', abbr: 'GGT', range: '&lt;51 U/L' },\r\n          { key: 'ast',    test: 'Aspartate Transaminase', abbr: 'AST', range: '&lt;41 U/L' },\r\n          { key: 'alt',    test: 'Alanine Transaminase', abbr: 'ALT',   range: '&lt;51 U/L' },\r\n        ],\r\n        urineChem: [\r\n          { key: 'uprot',  test: 'Protein',              abbr: 'Uprot', range: 'Negative' },\r\n          { key: 'uph',    test: 'pH',                   abbr: 'UpH',   range: 'Acidic' },\r\n          { key: 'uglu',   test: 'Glucose',              abbr: 'Uglu',  range: 'Negative' },\r\n          { key: 'uket',   test: 'Ketones',              abbr: 'Uket',  range: 'Negative' },\r\n          { key: 'usg',    test: 'Specific Gravity',     abbr: 'USG',   range: '1.005 - 1.030' },\r\n          { key: 'ubld',   test: 'Blood',                abbr: 'Ubld',  range: 'Negative' },\r\n        ],\r\n        urineMicro: [\r\n          { key: 'uleu',   test: 'Leucocytes',           abbr: 'Uleu',  range: '&lt;10 x 10^6/L' },\r\n          { key: 'uery',   test: 'Erythrocytes',         abbr: 'Uery',  range: '&lt;10 x 10^6/L' },\r\n          { key: 'uecell', test: 'Epithelial Cells',     abbr: 'UEcell',range: 'Negative' },\r\n          { key: 'ucc',    test: 'Cast and Crystal',     abbr: 'UCC',   range: 'Negative' },\r\n        ],\r\n        serology: [\r\n          { key: 'vdrl',   test: 'VDRL',                 abbr: 'VDRL',  range: 'non-reactive' },\r\n          { key: 'hbsag',  test: 'Hep B surface antigen',abbr: 'HbsAg', range: 'non-detected' },\r\n          { key: 'hbsab',  test: 'Hep B surface antibody', abbr: 'HbsAb', range: '0 IU/L' },\r\n          { key: 'hcs',    test: 'Hep C Antigen/Antibody', abbr: 'Hcs', range: '' },\r\n        ]\r\n      },\r\n\r\n      // Table C config (Urine Drugs)\r\n      drugTests: [\r\n        { key: 'opiates', label: 'Opiates' },\r\n        { key: 'cannabinoids', label: 'Cannabinoids' },\r\n        { key: 'amphetamine', label: 'Amphetamine' },\r\n        { key: 'mdma', label: 'MDMA' },\r\n        { key: 'benzodiazepine', label: 'Benzodiazepine' },\r\n      ],\r\n    };\r\n  },\r\n  computed: {\r\n    // step-by-step: call the injected function to get the header\r\n    sessionHeader() {\r\n      return this.currentSessionHeader ? this.currentSessionHeader() : null;\r\n    },\r\n    sessionStatus() {\r\n      return this.sessionHeader?.status || 'draft';\r\n    },\r\n  },\r\n  mounted() {\r\n    this.fetchInvestigations();\r\n    this.fetchInvestigationsLab().then(() => {\r\n      this.seedLabEditors();\r\n    });\r\n  },\r\n\r\n  methods: {\r\n    // Access control wrapper\r\n    accessCheck(action) {\r\n      let role = null;\r\n      try {\r\n        role = JSON.parse(localStorage.getItem('user_info'))?.role || 'staff';\r\n      } catch (e) { /* ignore */ }\r\n      return canSession(role, this.sessionStatus, action);\r\n    },\r\n    groupLabel(k) {\r\n      const L = {\r\n        haematology: 'Haematology', glucose: 'Glucose', lipids: 'Lipids',\r\n        electrolytes: 'Electrolytes', renal: 'Renal Function', liver: 'Liver Function',\r\n        urineChem: 'Urinalysis (Chemistry)', urineMicro: 'Urinalysis (Microscopy)', serology: 'Serology'\r\n      };\r\n      return L[k] || k;\r\n    },\r\n\r\n    // ------------------------- fetchers -------------------------\r\n    async fetchInvestigations() {\r\n      // const staffEmailXYZ = JSON.parse(localStorage.getItem('user_info')).email.replace(/\\./g, 'XYZ');\r\n      const staffSessionID = this.$route.params.sessionId || '';\r\n      return fetch(`${this.baseUrl}/investigations/${staffSessionID}`, {\r\n        headers: { Authorization: `Bearer ${localStorage.getItem('jwt_token')}` }\r\n      })\r\n      .then(res => {\r\n        if (handleUnauthorized(res)) return;\r\n\r\n        return res.json();\r\n      })\r\n      .then(d => { \r\n        this.investigations = Array.isArray(d) ? (d[0] || {}) : d; \r\n        // console.log(\"investigations: \",this.investigations); \r\n      })\r\n      .catch(err => console.error(err));\r\n    },\r\n    async fetchInvestigationsLab() {\r\n      // const staffEmailXYZ = JSON.parse(localStorage.getItem('user_info')).email.replace(/\\./g, 'XYZ');\r\n      const staffSessionID = this.$route.params.sessionId || '';\r\n      return fetch(`${this.baseUrl}/investigations-lab/${staffSessionID}`, {\r\n        headers: { Authorization: `Bearer ${localStorage.getItem('jwt_token')}` }\r\n      })\r\n        .then(res => {\r\n          if (handleUnauthorized(res)) return;\r\n\r\n          return res.json();\r\n        })\r\n        .then(d => { \r\n          this.investigationsLab = Array.isArray(d) ? (d[0] || {}) : d;\r\n          // console.log(\"investigationsLab: \",this.investigationsLab);\r\n        })\r\n        .catch(err => console.error(err));\r\n    },\r\n    // -------------------- Seed / Dirty tracking for Lab --------------------\r\n    seedLabEditors() {\r\n      const seed = {};\r\n      Object.values(this.labGroups).flat().forEach(item => {\r\n        seed[`${item.key}_result`] = this.investigationsLab?.[`${item.key}_result`] ?? 'Not done';\r\n        seed[`${item.key}_remark`] = this.investigationsLab?.[`${item.key}_remark`] ?? null;\r\n      });\r\n      this.editableLab = { ...seed };\r\n      this.originalLab = JSON.parse(JSON.stringify(seed));\r\n      this.dirtyKeys.clear();\r\n      this.editingRow = null;\r\n    },\r\n    markDirty(itemKey) {\r\n      const resKey = `${itemKey}_result`;\r\n      const remKey = `${itemKey}_remark`;\r\n      const dirty =\r\n        this.editableLab[resKey] !== this.originalLab[resKey] ||\r\n        (this.editableLab[remKey] ?? '') !== (this.originalLab[remKey] ?? '');\r\n      if (dirty) this.dirtyKeys.add(itemKey);\r\n      else this.dirtyKeys.delete(itemKey);\r\n    },\r\n    isRowDirty(itemKey) {\r\n      return this.dirtyKeys.has(itemKey);\r\n    },\r\n    startRowEdit(itemKey) {\r\n      // ensure editableLab is synced with latest investigationsLab before editing\r\n      this.editableLab[`${itemKey}_result`] = this.investigationsLab?.[`${itemKey}_result`] ?? 'Not done';\r\n      this.editableLab[`${itemKey}_remark`] = this.investigationsLab?.[`${itemKey}_remark`] ?? null;\r\n      // reset dirty for clean comparison\r\n      this.originalLab[`${itemKey}_result`] = this.editableLab[`${itemKey}_result`];\r\n      this.originalLab[`${itemKey}_remark`] = this.editableLab[`${itemKey}_remark`];\r\n      this.dirtyKeys.delete(itemKey);\r\n      this.editingRow = itemKey;\r\n    },\r\n    cancelRowEdit(itemKey) {\r\n      // revert this row from original\r\n      this.editableLab[`${itemKey}_result`] = this.originalLab[`${itemKey}_result`];\r\n      this.editableLab[`${itemKey}_remark`] = this.originalLab[`${itemKey}_remark`];\r\n      this.dirtyKeys.delete(itemKey);\r\n      if (this.editingRow === itemKey) this.editingRow = null;\r\n    },\r\n\r\n    // ------------------------- Save Lab (inline / all) -------------------------\r\n    saveLabRow(itemKey) {\r\n      const payload = { ...this.investigationsLab };\r\n      \r\n      payload[`${itemKey}_result`] = this.editableLab[`${itemKey}_result`];\r\n      payload[`${itemKey}_remark`] = this.editableLab[`${itemKey}_remark`];\r\n      payload.updated_by = JSON.parse(localStorage.getItem('user_info')).email;\r\n\r\n      // const staffEmailXYZ = JSON.parse(localStorage.getItem('user_info')).email.replace(/\\./g,'XYZ');\r\n      const staffSessionID = this.$route.params.sessionId || '';\r\n      fetch(`${this.baseUrl}/investigations-lab/edit/${staffSessionID}`, {\r\n        method: 'PUT',\r\n        headers: {\r\n          Authorization: `Bearer ${localStorage.getItem('jwt_token')}`,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(payload)\r\n      })\r\n      .then(r => r.json())\r\n      .then(() => {\r\n        this.investigationsLab = payload;\r\n        // sync originals for this row\r\n        this.originalLab[`${itemKey}_result`] = this.editableLab[`${itemKey}_result`];\r\n        this.originalLab[`${itemKey}_remark`] = this.editableLab[`${itemKey}_remark`];\r\n        this.dirtyKeys.delete(itemKey);\r\n        if (this.editingRow === itemKey) this.editingRow = null;\r\n        this.fetchInvestigationsLab();\r\n      })\r\n      .catch(err => console.error(err));\r\n    },\r\n    saveAllLab() {\r\n      const payload = { ...this.investigationsLab, ...this.editableLab };\r\n      payload.updated_by = JSON.parse(localStorage.getItem('user_info')).email;\r\n      // const staffEmailXYZ = JSON.parse(localStorage.getItem('user_info')).email.replace(/\\./g,'XYZ');\r\n      const staffSessionID = this.$route.params.sessionId || '';\r\n      fetch(`${this.baseUrl}/investigations-lab/edit/${staffSessionID}`, {\r\n        method: 'PUT',\r\n        headers: {\r\n          Authorization: `Bearer ${localStorage.getItem('jwt_token')}`,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(payload)\r\n      })\r\n      .then(r => r.json())\r\n      .then(() => {\r\n        this.investigationsLab = payload;\r\n        this.seedLabEditors();\r\n      })\r\n      .catch(err => console.error(err));\r\n    },\r\n    cancelAllLab() {\r\n      this.editableLab = JSON.parse(JSON.stringify(this.originalLab));\r\n      this.dirtyKeys.clear();\r\n      this.editingRow = null;\r\n    },\r\n\r\n    // ------------------------- Modals open/close + submit -------------------------\r\n    openGenModal() {\r\n      const cur = this.investigations || {};\r\n      const seed = {};\r\n      this.generalRows.forEach(row => {\r\n        seed[row.statusKey]  = cur[row.statusKey]  ?? null;\r\n        seed[row.detailsKey] = cur[row.detailsKey] ?? null;\r\n      });\r\n      // keep remarks_ohd untouched here (edited in drug modal)\r\n      this.modalGeneral = seed;\r\n      this.isGenModalOpen = true;\r\n    },\r\n    closeGenModal() { this.isGenModalOpen = false; this.fetchInvestigations(); },\r\n    submitGeneral() {\r\n      // const staffEmailXYZ = JSON.parse(localStorage.getItem('user_info')).email.replace(/\\./g,'XYZ');\r\n      const staffSessionID = this.$route.params.sessionId || '';\r\n      const merged = { ...(this.investigations || {}), ...this.modalGeneral };\r\n      merged.updated_by = JSON.parse(localStorage.getItem('user_info')).email;\r\n      fetch(`${this.baseUrl}/investigations/edit/${staffSessionID}`, {\r\n        method: 'PUT',\r\n        headers: { Authorization: `Bearer ${localStorage.getItem('jwt_token')}`, 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(merged)\r\n      })\r\n        .then(r => r.json())\r\n        .then(() => { this.fetchInvestigations(); this.closeGenModal(); })\r\n        .catch(err => console.error(err));\r\n    },\r\n\r\n    openLabModal() {\r\n      const defaults = {};\r\n      Object.values(this.labGroups).flat().forEach(item => {\r\n        defaults[`${item.key}_result`] = 'Not done';\r\n        defaults[`${item.key}_remark`] = null;\r\n      });\r\n      this.modalLab = { ...defaults, ...(this.investigationsLab || {}) };\r\n      this.modalLab.updated_by = JSON.parse(localStorage.getItem('user_info')).email;\r\n      this.isLabModalOpen = true;\r\n    },\r\n    closeLabModal() { this.isLabModalOpen = false; this.fetchInvestigationsLab(); },\r\n    submitLab() {\r\n      // const staffEmailXYZ = JSON.parse(localStorage.getItem('user_info')).email.replace(/\\./g,'XYZ');\r\n      const staffSessionID = this.$route.params.sessionId || '';\r\n      fetch(`${this.baseUrl}/investigations-lab/edit/${staffSessionID}`, {\r\n        method: 'PUT',\r\n        headers: { Authorization: `Bearer ${localStorage.getItem('jwt_token')}`, 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(this.modalLab)\r\n      })\r\n        .then(r => r.json())\r\n        .then(() => {\r\n          this.fetchInvestigationsLab().then(() => this.seedLabEditors());\r\n          this.closeLabModal();\r\n        })\r\n        .catch(err => console.error(err));\r\n    },\r\n\r\n    openDrugModal() {\r\n      const cur = this.investigations || {};\r\n      const seed = {};\r\n      this.drugTests.forEach(t => {\r\n        seed[`${t.key}_result`] = cur[`${t.key}_result`] ?? 'Not done';\r\n        seed[`${t.key}_remark`] = cur[`${t.key}_remark`] ?? null;\r\n      });\r\n      seed.remarks_ohd = cur.remarks_ohd ?? null;\r\n      this.modalDrug = seed;\r\n      this.isDrugModalOpen = true;\r\n    },\r\n    closeDrugModal() { this.isDrugModalOpen = false; this.fetchInvestigations(); },\r\n    submitDrug() {\r\n      // const staffEmailXYZ = JSON.parse(localStorage.getItem('user_info')).email.replace(/\\./g,'XYZ');\r\n      const staffSessionID = this.$route.params.sessionId || '';\r\n      const merged = { ...(this.investigations || {}), ...this.modalDrug };\r\n      merged.updated_by = JSON.parse(localStorage.getItem('user_info')).email;\r\n\r\n      fetch(`${this.baseUrl}/investigations/edit/${staffSessionID}`, {\r\n        method: 'PUT',\r\n        headers: { Authorization: `Bearer ${localStorage.getItem('jwt_token')}`, 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(merged)\r\n      })\r\n        .then(r => r.json())\r\n        .then(() => { this.fetchInvestigations(); this.closeDrugModal(); })\r\n        .catch(err => console.error(err));\r\n    },\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n\r\n/* Inline row actions */\r\n.row-actions {\r\n  display: flex;\r\n  gap: 6px;\r\n  align-items: center;\r\n}\r\n\r\n/* Cards / grids for modals */\r\n.two-col {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(280px,1fr));\r\n  gap: 12px;\r\n}\r\n\r\n.lbl { display:block; font-weight:600; margin-bottom:6px; }\r\n.muted { font-size: 12px; color: #666; margin-bottom: 6px; }\r\n.inv-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit,minmax(240px,1fr));\r\n  gap: 12px;\r\n  margin-bottom: 8px;\r\n}\r\n.inv-item {\r\n  background: #f8f8f8;\r\n  padding: 8px;\r\n  border-radius: 4px;\r\n  border: 1px solid #ddd;\r\n}\r\n\r\n/* Controls */\r\nselect, textarea {\r\n  width: 100%;\r\n  margin-top: 6px;\r\n}\r\ntextarea {\r\n  min-height: 60px;\r\n  resize: vertical;\r\n}\r\nbutton {\r\n  margin-top: 10px;\r\n  margin-right: 8px;\r\n  padding: 6px 12px;\r\n  font-size: 13px;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  background: #edf2f7;\r\n  color: #2d3748;\r\n  transition: background 0.2s ease;\r\n}\r\nbutton:hover { background: #e2e8f0; }\r\nbutton.primary {\r\n  background: #2f855a;\r\n  color: #fff;\r\n}\r\nbutton.primary:hover { background: #276749; }\r\n\r\n.mini-btn {\r\n  background: #4299e1;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 4px;\r\n  padding: 4px 8px;\r\n  font-size: 12px;\r\n  cursor: pointer;\r\n}\r\n.mini-btn:disabled {\r\n  background: #cbd5e0;\r\n  color: #2d3748a8;\r\n  cursor: not-allowed;\r\n  opacity: 1;\r\n}\r\n.mini-btn.primary {\r\n  background: #2f855a;\r\n}\r\n.mini-btn.primary:hover { background: #276749; }\r\n\r\n/* Sticky bars for long sections */\r\n.sticky-bar {\r\n  position: sticky;\r\n  z-index: 5;\r\n  background: #fff;\r\n  border: 1px solid #e2e8f0;\r\n  padding: 8px 10px;\r\n  display: flex;\r\n  gap: 8px;\r\n  align-items: center;\r\n}\r\n.sticky-bar.top { top: 0; }\r\n.sticky-bar.bottom { bottom: 0; margin-top: 8px; }\r\n.muted { color: #718096; font-size: 12px; }\r\n</style>\r\n","import { render } from \"./ManageInvestigations.vue?vue&type=template&id=90b8715e\"\nimport script from \"./ManageInvestigations.vue?vue&type=script&lang=js\"\nexport * from \"./ManageInvestigations.vue?vue&type=script&lang=js\"\n\nimport \"./ManageInvestigations.vue?vue&type=style&index=0&id=90b8715e&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n    <div>\r\n        <h2>Doctor Information</h2>\r\n\r\n        <div v-if=\"isEditing\">\r\n            <form @submit.prevent=\"updateDoctorInfo\">\r\n                <div>\r\n                    <label for=\"doctor_name\">Name:</label>\r\n                    <input type=\"text\" v-model=\"doctorData.doctor_name\" required />\r\n                </div>\r\n                <div>\r\n                    <label for=\"doctor_email\">Email (readonly):</label>\r\n                    <input type=\"text\" v-model=\"doctorData.doctor_email\" readonly style=\"background-color: #ccc; cursor: not-allowed;\" />\r\n                </div>\r\n                <!-- <div>\r\n                    <label for=\"gender\">Gender:</label>\r\n                    <select v-model=\"staffData.gender\">\r\n                        <option value=\"M\">Male</option>\r\n                        <option value=\"F\">Female</option>\r\n                    </select>\r\n                </div> -->\r\n                <div>\r\n                    <label for=\"phone_no\">Phone No:</label>\r\n                    <input type=\"text\" v-model=\"doctorData.phone_no\" required />\r\n                </div>\r\n                <button type=\"submit\" :disabled=\"!isFormChanged\">Save Changes</button>\r\n                <button type=\"button\" @click=\"cancelEdit\">Cancel</button>\r\n            </form>\r\n        </div>\r\n\r\n        <div v-else>\r\n            <table>\r\n                <tbody>\r\n                    <tr><td><b>Name:</b></td> <td>{{ doctorData.doctor_name }}</td></tr>\r\n                    <tr><td><b>Email:</b></td> <td>{{ doctorData.doctor_email }}</td></tr>\r\n                    <tr><td><b>Phone No:</b></td> <td>{{ doctorData.phone_no }}</td></tr>\r\n                </tbody>\r\n            </table>\r\n            <button @click=\"editDoctorInfo\">Edit</button>\r\n            <button @click=\"$router.push('/dashboard')\" style=\"margin-left: 1rem;\">Back</button>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport cfg from '@/apiConfig';\r\nimport { handleUnauthorized } from '@/shared/handleUnauthorized';\r\nexport default {\r\n    data() {\r\n        return {\r\n            baseUrl: cfg.API_BASE_URL,\r\n            isEditing: false,\r\n            doctorData: {\r\n                doctor_uid: '',\r\n                doctor_email: '',\r\n                doctor_name: '',\r\n                phone_no: ''\r\n            },\r\n            originalDoctorData: null\r\n        };\r\n    },\r\n    mounted() {\r\n        this.fetchDoctorInfo();\r\n    },\r\n    computed: {\r\n        isFormChanged() {\r\n            if (!this.originalDoctorData) return false;\r\n            \r\n            const fields = [\r\n                'doctor_name',\r\n                'phone_no'\r\n            ];\r\n            return fields.some(field => this.doctorData[field] !== this.originalDoctorData[field]);\r\n        }\r\n    },\r\n    methods: {\r\n        fetchDoctorInfo() {\r\n            const userInfo = localStorage.getItem('user_info');\r\n\r\n            if (!userInfo) return;\r\n            const doctorEmail = JSON.parse(userInfo).email.replace(/\\./g, 'XYZ');\r\n            \r\n            fetch(`${this.baseUrl}/doctor/info/${encodeURIComponent(doctorEmail)}`, {\r\n                method: 'GET',\r\n                headers: {\r\n                    'Authorization': `Bearer ${localStorage.getItem('jwt_token')}`,\r\n                    'Content-Type': 'application/json'\r\n                }\r\n            })\r\n                .then(res => res.json())\r\n                .then(data => {\r\n                    this.doctorData = data;\r\n                    // deep clone for change detection\r\n                    this.originalDoctorData = JSON.parse(JSON.stringify(data));\r\n                })\r\n                .catch(err => {\r\n                    console.error('Error:', err);\r\n                    alert('Failed to fetch doctor info.');\r\n                });\r\n        },\r\n        editDoctorInfo() {\r\n            this.isEditing = true;\r\n        },\r\n        cancelEdit() {\r\n            this.isEditing = false;\r\n            this.fetchDoctorInfo();\r\n        },\r\n        updateDoctorInfo() {\r\n            const userInfo = localStorage.getItem('user_info');\r\n\r\n            if (!userInfo) return;\r\n            const doctorEmail = JSON.parse(userInfo).email.replace(/\\./g, 'XYZ');\r\n\r\n            fetch(`${this.baseUrl}/doctor/edit-info/${encodeURIComponent(doctorEmail)}`, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Authorization': `Bearer ${localStorage.getItem('jwt_token')}`,\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                body: JSON.stringify(this.doctorData)\r\n            })\r\n                .then(res => {\r\n                    if (handleUnauthorized(res)) return;\r\n\r\n                    return res.json();\r\n                })\r\n                .then(() => {\r\n                    this.isEditing = false;\r\n                    alert('Personal info updated successfully');\r\n                    this.fetchDoctorInfo();\r\n                })\r\n                .catch(err => {\r\n                    console.error('Error updating doctor info:', err);\r\n                    alert('Failed to update data.');\r\n                });\r\n        }\r\n    }\r\n};\r\n\r\n</script>\r\n","import { render } from \"./ManageDoctorInfo.vue?vue&type=template&id=2078441e\"\nimport script from \"./ManageDoctorInfo.vue?vue&type=script&lang=js\"\nexport * from \"./ManageDoctorInfo.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","// router/index.js\nimport { createRouter, createWebHashHistory } from 'vue-router';\n\n// Universal Views\nimport MyDashboard from '../views/MyDashboard.vue';\nimport MyRegister from '../views/MyRegister.vue';\nimport MyLogin from '../views/MyLogin.vue';\nimport MyProfile from '../views/MyProfile.vue';\nimport ViewSession from '@/views/Staff/SessionFiles/ViewSession.vue';\nimport ViewNonSession from '@/views/Staff/NonSessionFiles/ViewNonSession.vue';\nimport AnalyticsAllPage from '@/views/Admin/StatsOverall/AnalyticsAllPage.vue';\n\n// Admin\nimport ManageUsers from '../views/Admin/ManageUsers.vue';\nimport ResetPassword from '../views/Admin/ResetPassword.vue';\nimport RegisterUser from '../views/Admin/RegisterUser.vue'; // new\nimport EditUser from '../views/Admin/EditUser.vue'; // new\nimport ManageSessions from '../views/Admin/ManageSessions.vue'; // new\nimport NonSessionCompleteness from '@/views/Admin/NonSessionCompleteness.vue';\nimport ViewUser from '../views/Admin/ViewUser.vue'; // new\n\n// Staff \nimport ManageStaffInfo from '../views/Staff/NonSessionFiles/ManageInfo.vue';\n// import ManageStaffRecord from '../views/Staff/ManageStaffRecord.vue';\nimport ManageOccupationHistory from '@/views/Staff/NonSessionFiles/ManageOccupationHistory.vue';\nimport ManageFamilyHistory from '@/views/Staff/NonSessionFiles/ManageFamilyHistory.vue';\nimport AnalyticsPage from '@/views/Staff/Statistics/AnalyticsPage.vue';\n// may be moved to other access\nimport MySessions from '@/views/Staff/SessionFiles/MySessions.vue';\nimport ManageMedicalHistory from '@/views/Staff/SessionFiles/ManageMedicalHistory.vue';\nimport ManageLifestyle from '@/views/Staff/SessionFiles/ManageLifestyle.vue';\nimport ManagePhysicalExam from '@/views/Staff/SessionFiles/ManagePhysicalExam.vue';\nimport ManageInvestigations from '@/views/Staff/SessionFiles/ManageInvestigations.vue';\n\n// Doctor\nimport ManageDoctorInfo from '../views/Doctor/ManageDoctorInfo.vue';\n\nconst routes = [\n  // Authentication Routes\n  { path: '/', name: 'Login', component: MyLogin }, // Named the login route\n  { path: '/register', name: 'Register', component: MyRegister }, // Named the register route\n\n  // View Profile\n  {\n      path: '/profile',\n      name: 'profile',\n      component: MyProfile  // Map the Profile route to your Profile component\n    },\n  // Dashboards - Protected route\n  {\n    path: '/dashboard',\n    name: 'Dashboard',\n    component: MyDashboard,\n    meta: { requiresAuth: true } // Mark this route as requiring authentication\n  },\n\n  // Admin Routes - Protected routes\n  { path: '/admin/manage-users', component: ManageUsers, meta: { requiresAuth: true, role: 'admin' } },\n  { path: '/admin/view-user/:email', component: ViewUser, props: true, meta: { requiresAuth: true, role: 'admin' } },\n  { path: '/admin/register-user', component: RegisterUser, meta: { requiresAuth: true, role: 'admin' } },\n  { path: '/admin/edit-user/:userId', component: EditUser, props: true, meta: { requiresAuth: true, role: 'admin' } },\n  { path: '/admin/manage-sessions', component: ManageSessions, meta: { requiresAuth: true, role: 'admin' } },\n  { path: '/admin/non-session-completeness', component: NonSessionCompleteness, meta: { requiresAuth: true, role: 'admin' } },\n  // { path: '/admin/edit-record/:staffEmail', component: EditRecord, props: true, meta: { requiresAuth: true, role: 'admin' } },\n  { path: '/reset-password/:userId/:userEmail', component: ResetPassword, meta: { requiresAuth: true, role: 'admin' } },\n\n  // Staff Routes - Protected routes\n  // { path: '/staff/manage-info', component: ManageStaffInfo, meta: { requiresAuth: true, role: 'staff' } },\n  // { path: '/staff/manage-record', component: ManageStaffRecord, meta: { requiresAuth: true, role: 'staff' } },\n  // { path: '/staff/manage-occupation-history', component: ManageOccupationHistory, meta: { requiresAuth: true, role: 'staff' } },\n  // { path: '/staff/manage-family-history', component: ManageFamilyHistory, meta: { requiresAuth: true, role: 'staff' } },\n  { path: '/staff/analytics-page', component: AnalyticsPage, meta: { requiresAuth: true, role: 'staff' } },\n  // may be moved to other access\n  { path: '/staff/my-sessions', component: MySessions, meta: { requiresAuth: true, role: 'staff' } },\n  // { path: '/staff/manage-medical-history', component: ManageMedicalHistory, meta: { requiresAuth: true, role: 'staff' } },\n  // { path: '/staff/manage-lifestyle', component: ManageLifestyle, meta: { requiresAuth: true, role: 'staff' } },\n  // { path: '/staff/manage-physical-exams', component: ManagePhysicalExam, meta: { requiresAuth: true, role: 'staff' } },\n  // { path: '/staff/manage-investigations', component: ManageInvestigations, meta: { requiresAuth: true, role: 'staff' } },\n\n  // Doctor Routes - Protected routes\n  { path: '/doctor/manage-info', component: ManageDoctorInfo, meta: { requiresAuth: true, role: 'doctor' } },\n  { path: '/doctor/non-session-completeness', component: NonSessionCompleteness, meta: { requiresAuth: true, role: 'doctor' } },\n\n  // General Routes - except 'Restricted'\n  {\n    path: '/analytics-all-page',\n    alias: ['/admin/analytics-all-page', '/doctor/analytics-all-page'],\n    component: AnalyticsAllPage,\n    meta: { requiresAuth: true, rolesAllowed: ['admin', 'doctor'] }\n  },\n  {\n    path: '/manage-sessions',\n    alias: ['/admin/manage-sessions', '/doctor/manage-sessions'],\n    component: ManageSessions,\n    meta: { requiresAuth: true, rolesAllowed: ['admin', 'doctor'] }\n  },\n  {\n    path: '/non-session/:staffEmail?',\n    alias: ['/staff/non-session', '/admin/non-session/:staffEmail', '/doctor/non-session/:staffEmail'],\n    component: ViewNonSession,\n    children: [\n      { path: '', redirect: { name: 'ns-staff-info' } },\n      { path: 'staff-info',name: 'ns-staff-info',component: ManageStaffInfo },\n      { path: 'occ-history', name: 'ns-occ-history', component: ManageOccupationHistory },\n      { path: 'fam-history', name: 'ns-fam-history',component: ManageFamilyHistory },\n    ],\n    meta: { requiresAuth: true, rolesAllowed: ['staff', 'admin', 'doctor'] }\n  },\n  {\n      path: '/session/:sessionId',\n      alias: ['/staff/session/:sessionId', '/admin/session/:sessionId', '/doctor/session/:sessionId'],\n      component: ViewSession,\n      children: [\n        { path: '', redirect: { name: 'session-medical-history' } },\n        { path: 'medical-history',name: 'session-medical-history',component: ManageMedicalHistory },\n        { path: 'physical',       name: 'session-physical',      component: ManagePhysicalExam },\n        { path: 'investigations', name: 'session-investigations',component: ManageInvestigations },\n        { path: 'lifestyle',      name: 'session-lifestyle',     component: ManageLifestyle },\n      ],\n      meta: { requiresAuth: true, rolesAllowed: ['staff', 'doctor', 'admin'] },\n  },\n  {\n    path: '/export/medical',\n    name: 'export-medical',\n    component: () => import('@/views/ExportMedicalRecord.vue'),\n    meta: { requiresAuth: true, rolesAllowed: ['admin', 'doctor', 'staff'] }\n  },\n  { path: '/reset-password', component: ResetPassword } // allow users to reset their own password without role restriction\n];\n\nconst router = createRouter({\n  history: createWebHashHistory(), // uses hash mode\n  routes\n});\n\n// Navigation Guard: Protect routes that require authentication and handle role-based access\nrouter.beforeEach((to, from, next) => {\n  const isAuthenticated = !!localStorage.getItem('jwt_token');\n  const userInfoString = localStorage.getItem('user_info');\n  let userRole = null;\n\n  if (userInfoString) {\n    try {\n      userRole = JSON.parse(userInfoString).role || null;\n    } catch (e) {\n      console.error('Error parsing user_info from localStorage:', e);\n      localStorage.removeItem('jwt_token');\n      localStorage.removeItem('user_info');\n      return next({ name: 'Login' });\n    }\n  }\n\n  // // prevent visiting login/register when already authed\n  // if ((to.name === 'Login' || to.name === 'Register') && isAuthenticated) {\n  //   return next({ name: 'Dashboard' });\n  // }\n\n  if (to.meta.requiresAuth) {\n    if (!isAuthenticated) {\n      return next({ name: 'Login' });\n    }\n\n    // legacy single-role check (keeps your existing admin-bypass)\n    if (to.meta.role && userRole !== to.meta.role && userRole !== 'admin') {\n      alert(`Access Denied: You do not have the required role (${to.meta.role}) to view this page.`);\n      return next({ name: 'Dashboard' });\n    }\n\n    // multi-role check\n    if (Array.isArray(to.meta.rolesAllowed) && !to.meta.rolesAllowed.includes(userRole)) {\n      // if always want admin to bypass, either include 'admin' in rolesAllowed or use the code below\n      // if (userRole !== 'admin') {\n      alert('Access Denied: You do not have permission to view this page.');\n      return next({ name: 'Dashboard' });\n      // }\n    }\n  }\n\n  next();\n});\n\nexport default router;\n","<template>\r\n  <div id=\"app\">\r\n    <header>\r\n      <div class=\"header-left\">\r\n        <img src=\"../assets/atb.png\" alt=\"ATB Logo\" class=\"logo\" />\r\n        <div class=\"app-title-container\">\r\n          <h1>MERITS</h1>\r\n          <span class=\"app-tagline\">Medical Examination Record & Information Tracking System</span>\r\n        </div>\r\n      </div>\r\n      <div class=\"header-right\">\r\n        <span class=\"profile-sidebar\">\r\n            <ProfileSidebar v-if=\"currentUser && currentUser.email\" :user=\"currentUser\" />\r\n        </span>\r\n        <button v-if=\"!showMobileWarning\" class=\"btn primary\" @click=\"$router.push('/profile')\"></button>\r\n      </div>\r\n    </header>\r\n\r\n    <div class=\"mobile-warning\" v-show=\"showMobileWarning\">\r\n        <div class=\"page-container\">\r\n            <p class=\"warning-content\">\r\n                <strong>Optimized for Desktop</strong>\r\n                <br>We apologize for the inconvenience! This website is currently optimized \r\n                for desktop or tablet (landscape) viewing to ensure the best experience.\r\n                <br>Please switch to the <b>mobile's desktop mode</b> or use a <b>larger screen device</b> to continue.\r\n                <br>Thank you for your patience!\r\n            </p>\r\n            <button @click=\"proceedAnyway\" class=\"proceed-btn\" style=\"border: 1px solid #CBD5E0; background: #2b6cb0; color: white; padding: 8px 12px; border-radius: 4px; cursor:pointer;\">\r\n                Proceed Anyway\r\n            </button>\r\n        </div>\r\n    </div>\r\n\r\n    <NavBar\r\n    v-if=\"showNavBar\"\r\n    :key=\"$route.fullPath\"\r\n    />\r\n\r\n    <main class=\"page-container\" \r\n        :style=\"currentUser ? \r\n            '' : \r\n            'background-image: url(\\'https://signup.softclinicgenx.com/wp-content/uploads/2022/05/medical-report-with-medical-equipment.jpg\\');background-repeat: no-repeat;background-size: cover;'\"\r\n    >\r\n      <router-view />\r\n      <ScrollToTop />\r\n    </main>\r\n    \r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport NavBar from './components/NavBar.vue'\r\nimport ProfileSidebar from './components/ProfileSidebar.vue'\r\nimport ScrollToTop from './components/ScrollToTop.vue';\r\n\r\nexport default {\r\n    components: { \r\n        ProfileSidebar, \r\n        NavBar,\r\n        ScrollToTop\r\n    },\r\n    data() {\r\n        return {\r\n            // selectedRole: 'personbmi',\r\n            // profiles: {},\r\n            currentUser: null,\r\n            showMobileWarning: true,\r\n        }\r\n    },\r\n    mounted() {\r\n        // console.log('App.vue mounted')\r\n        this.loadUser();\r\n        window.addEventListener('user-logout', this.handleLogout)\r\n        window.addEventListener('user-login', this.loadUser)\r\n    },\r\n    beforeUnmount() {\r\n        window.removeEventListener('user-logout', this.handleLogout)\r\n        window.removeEventListener('user-login', this.loadUser)\r\n    },\r\n    computed: {\r\n        // currentUser() {\r\n        //   return { ...this.profiles }\r\n        // },\r\n        showNavBar() {\r\n            // hide navbar on login page\r\n            return this.$route.path !== '/login';\r\n        }\r\n    },\r\n    methods: {\r\n        proceedAnyway() {\r\n            this.showMobileWarning = false;\r\n        },\r\n        loadUser() {\r\n            const userStr = localStorage.getItem('user_info')\r\n            // console.log('userStr: ', userStr)\r\n            this.currentUser = userStr ? JSON.parse(userStr) : null\r\n        },\r\n        handleLogout() {\r\n            this.currentUser = null\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n/* full-page base styling */\r\n#app {\r\nfont-family: 'Inter', sans-serif;\r\nbackground-color: #f9fafb;\r\nmin-height: 100vh;\r\ndisplay: flex;\r\nflex-direction: column;\r\n}\r\n\r\n/* main content container */\r\n.page-container {\r\nflex: 1;\r\nwidth: calc(100% - 1.5rem);\r\nmax-width: 1600px;\r\nmargin: 2rem auto;\r\npadding: 2rem 3rem;\r\nbackground: #ffffff;\r\nborder-radius: 12px;\r\nbox-shadow: 0 2px 10px rgba(0,0,0,0.05);\r\nbox-sizing: border-box;\r\n}\r\n/* ensures padding doesnt overflow width */\r\n\r\n/* header clean-up */\r\n/* header {\r\ndisplay: flex;\r\njustify-content: space-between;\r\nalign-items: center;\r\npadding: 1rem 2rem;\r\nbackground: #1a202c;\r\ncolor: #fff;\r\n} */\r\n\r\n/* .logo {\r\nwidth: 6em;\r\nheight: 3em;\r\nmargin-right: 1rem;\r\n} */\r\n\r\n:root {\r\n  \r\n  --primary: #2f855a;\r\n  --gray: #e2e8f0;\r\n  --light-gray: #f7fafc;\r\n  --text: #2d3748;\r\n  --bg: #ffffff;\r\n}\r\n\r\n* {\r\n    box-sizing: border-box;\r\n}\r\n\r\nbody {\r\n    margin: 0;\r\n    font-family: 'Inter', sans-serif;\r\n    background-color: var(--light-gray);\r\n    color: var(--text);\r\n}\r\n\r\nheader {\r\n  background: var(--bg);\r\n  padding: 12px 24px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  border-bottom: 1px solid var(--gray);\r\n}\r\n\r\n.header-left {\r\n  /* Ensure the logo and title align nicely */\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px; /* Space between logo and title container */\r\n}\r\n\r\n.logo {\r\n  /* Slightly more modern/standard logo size */\r\n  width: auto;\r\n  height: 2.5em;\r\n  /* float: left; - Removed float for better flex layout */\r\n  margin-right: 0; /* No margin needed with 'gap' on .header-left */\r\n}\r\n\r\n.app-title-container {\r\n  display: flex;\r\n  flex-direction: column; /* Stacks the title and tagline */\r\n  line-height: 1.2; /* Tighter line height for stacked text */\r\n}\r\n\r\nheader h1 {\r\n  font-size: 24px;\r\n  font-weight: 800;\r\n  color: var(--primary); \r\n  margin: 0;\r\n  padding: 0;\r\n  line-height: 1.2;\r\n  font-style: normal;\r\n}\r\n\r\n.app-tagline {\r\n  font-size: 11px;\r\n  font-weight: 400;\r\n  color: #718096; /* Lighter color for secondary text */\r\n  margin-top: 2px;\r\n}\r\n\r\n.header-right {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 16px;\r\n}\r\n\r\nselect {\r\n    padding: 6px;\r\n    font-size: 14px;\r\n}\r\n\r\n.profile {\r\n    cursor: pointer;\r\n}\r\n\r\n.profile img {\r\n    width: 34px;\r\n    height: 34px;\r\n    border-radius: 50%;\r\n    border: 1px solid #ccc;\r\n}\r\n\r\n.sidebar-overlay {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    width:75vw;\r\n    height: 100vh;\r\n    background: rgba(0, 0, 0, 0.3);\r\n    display: none;\r\n    z-index: 998;\r\n}\r\n\r\n.sidebar.open {\r\n    transform: translateX(0);\r\n}\r\n\r\n.sidebar .close-btn {\r\n    align-self: flex-end;\r\n    font-size: 20px;\r\n    cursor: pointer;\r\n    margin-bottom: 20px;\r\n}\r\n\r\n.sidebar .avatar {\r\n    width: 64px;\r\n    height: 64px;\r\n    border-radius: 50%;\r\n    margin-bottom: 10px;\r\n}\r\n\r\n.sidebar .name {\r\n    font-weight: 600;\r\n    font-size: 16px;\r\n}\r\n\r\n.sidebar .email {\r\n    font-size: 13px;\r\n    color: #718096;\r\n    margin-bottom: 4px;\r\n}\r\n\r\n.sidebar .role {\r\n    font-size: 13px;\r\n    font-style: italic;\r\n    color: #4a5568;\r\n    margin-bottom: 24px;\r\n}\r\n\r\n.sidebar button {\r\n    background: none;\r\n    border: none;\r\n    padding: 12px 0;\r\n    text-align: left;\r\n    font-size: 14px;\r\n    cursor: pointer;\r\n    color: var(--text);\r\n    border-top: 1px solid #eee;\r\n    transition: background 0.2s;\r\n}\r\n\r\n.sidebar button:hover {\r\n    background-color: var(--light-gray);\r\n}\r\n\r\n.menu {\r\n    padding: 30px;\r\n}\r\n\r\n.menu h2 {\r\n    font-size: 16px;\r\n    font-weight: 600;\r\n}\r\n\r\n.menu ul {\r\n    list-style: none;\r\n    padding: 0;\r\n}\r\n\r\n.menu li {\r\n    background: var(--bg);\r\n    padding: 10px 15px;\r\n    border: 1px solid var(--gray);\r\n    border-radius: 6px;\r\n    margin-bottom: 8px;\r\n}\r\n\r\nnav ul li a:hover {\r\n    background-color: #edf2f7;\r\n}\r\n\r\n\r\n@media (max-width: 768px) {\r\n    .sidebar {\r\n        width: 100%;\r\n        max-width: none;\r\n        height: 50vh;\r\n        bottom: 0;\r\n        top: auto;\r\n        right: 0;\r\n        left: 0;\r\n        border-top-left-radius: 12px;\r\n        border-top-right-radius: 12px;\r\n        transform: translateY(100%);\r\n        transition: transform 0.3s ease;\r\n    }\r\n\r\n    .sidebar.open {\r\n        transform: translateY(0);\r\n    }\r\n}\r\n</style>","// components/NavBar.vue\r\n<template>\r\n  <!-- <nav>\r\n    <ul>\r\n      <li v-for=\"item in menus\" :key=\"item\">\r\n        <router-link :to=\"`/${item.toLowerCase().replace(/\\s+/g, '-')}`\">{{ item }}</router-link>\r\n      </li>\r\n    </ul>\r\n  </nav> -->\r\n  <nav>\r\n      <ul>\r\n        <li v-for=\"item in menu\" :key=\"item.name\">\r\n          <router-link :to=\"item.route\">{{ item.name }}</router-link>\r\n        </li>\r\n      </ul>\r\n    </nav>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'NavBar',\r\n\r\n  data() {\r\n    return {\r\n      // will store the parsed user_info object\r\n      currentUserInfo: null, // will be populated in created hook\r\n      menuItems: {\r\n        doctor: [\r\n          { name: '', route: '/dashboard' },\r\n          { name: 'Manage Doctor Info', route: '/doctor/manage-info' },\r\n          { name: 'Manage Staff Info', route: '/doctor/non-session-completeness' },\r\n          { name: 'Manage Sessions & Reports', route: '/doctor/manage-sessions' },\r\n          { name: 'Analytics', route: '/doctor/analytics-all-page' }\r\n        ],\r\n        staff: [\r\n          { name: '', route: '/dashboard' },\r\n          { name: 'My Staff Info', route: '/staff/non-session' },\r\n          // { name: 'Manage Staff Info', route: '/staff/manage-info' },\r\n          // { name: 'Manage Medical Record', route: '/staff/manage-record' },\r\n          // { name: 'Manage Occupational History', route: '/staff/manage-occupation-history' },\r\n          // { name: 'Manage Family History', route: '/staff/manage-family-history' },\r\n          // { name: 'Manage Medical History', route: '/staff/manage-medical-history' },\r\n          // { name: 'Mangage Lifestyle', route: '/staff/manage-lifestyle' },\r\n          // { name: 'Manage Physical Exams', route: '/staff/manage-physical-exams' },\r\n          // { name: 'Manage Investigations', route: '/staff/manage-investigations' },\r\n          { name: 'My Sessions Info', route: '/staff/my-sessions' },\r\n          { name: 'Analytics', route: '/staff/analytics-page' }\r\n        ],\r\n        admin: [\r\n          { name: '', route: '/dashboard' },\r\n          { name: 'Manage Users', route: '/admin/manage-users' },\r\n          { name: 'Manage Staff Info', route: '/admin/non-session-completeness' },\r\n          { name: 'Manage Sessions', route: '/admin/manage-sessions' },\r\n          { name: 'Analytics', route: '/admin/analytics-all-page' }\r\n        ],\r\n        restricted: [\r\n          { name: '', route: '/dashboard' },\r\n        ]\r\n      }\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    menu() {\r\n      const user_raw = localStorage.getItem('user_info');\r\n      if (!user_raw) return []; // guard when logged out\r\n      \r\n      try {\r\n        const role = JSON.parse(user_raw)?.role;\r\n        return this.menuItems[role] || [];\r\n      } catch (_) {\r\n        return [];\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n</script>\r\n\r\n<style scoped>\r\nnav {\r\n  background-color: #343a40;\r\n  padding: 15px 30px;\r\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\nnav ul {\r\n  list-style: none;\r\n  padding: 0;\r\n  margin: 0;\r\n  display: flex;\r\n  gap: 25px; \r\n}\r\n\r\nnav li a {\r\n  text-decoration: none;\r\n  color: #ffffff; \r\n  font-weight: bold;\r\n  font-size: 1rem;\r\n  padding: 5px 0;\r\n  transition: color 0.2s ease, border-bottom 0.2s ease;\r\n}\r\n\r\nnav li a:hover {\r\n  color: #007bff; \r\n  /* border-bottom: 2px solid #007bff; */\r\n  background-color: transparent;\r\n}\r\n</style>","import { render } from \"./NavBar.vue?vue&type=template&id=ef04575a&scoped=true\"\nimport script from \"./NavBar.vue?vue&type=script&lang=js\"\nexport * from \"./NavBar.vue?vue&type=script&lang=js\"\n\nimport \"./NavBar.vue?vue&type=style&index=0&id=ef04575a&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-ef04575a\"]])\n\nexport default __exports__","<template>\r\n  <div>\r\n    <!-- Avatar Trigger -->\r\n    <img :src=\"img\" class=\"avatar\" alt=\"User\" @click=\"openSidebar\" />\r\n\r\n    <!-- Sidebar Panel -->\r\n    <div class=\"sidebar\" :class=\"{ open: isOpen }\" role=\"dialog\" aria-modal=\"true\" aria-label=\"User menu\">\r\n      <div class=\"header\">\r\n        <span class=\"close\" @click=\"closeSidebar\" aria-label=\"Close sidebar\"></span>\r\n      </div>\r\n      <div class=\"content\">\r\n        <img :src=\"img\" class=\"avatar-large\" alt=\"User avatar\" />\r\n        <div class=\"name\">{{ localUser.fullname }}</div>\r\n        <div class=\"email\">{{ localUser.email }}</div>\r\n        <div class=\"role\">({{ formattedRole }})</div>\r\n\r\n        <div class=\"actions\">\r\n          <button @click=\"viewProfile\" class=\"view-profile\"> View Profile</button>\r\n          <button @click=\"logout\" class=\"logout\"> Logout</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Clickable overlay (closes on click) -->\r\n    <div v-if=\"isOpen\" class=\"overlay\" @click=\"closeSidebar\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'ProfileSidebar',\r\n  data() {\r\n    return {\r\n      isOpen: false,\r\n      img: \"https://cdn.pixabay.com/photo/2023/02/18/11/00/icon-7797704_640.png\",\r\n      localUser: { fullname: '', email: '', role: '' }\r\n    };\r\n  },\r\n  mounted() {\r\n    const userInfo = JSON.parse(localStorage.getItem('user_info'));\r\n    if (userInfo) this.localUser = userInfo;\r\n\r\n    // close on ESC\r\n    window.addEventListener('keydown', this.onKeydown);\r\n\r\n    // close when route changes\r\n    this.unwatch = this.$watch('$route.fullPath', () => {\r\n      if (this.isOpen) this.closeSidebar();\r\n    });\r\n  },\r\n  beforeUnmount() {\r\n    window.removeEventListener('keydown', this.onKeydown);\r\n    if (this.unwatch) this.unwatch();\r\n    this.unlockScroll();\r\n  },\r\n  computed: {\r\n    formattedRole() {\r\n      if (!this.localUser.role) return 'Unknown Role';\r\n      const roleMap = { admin: 'Admin', doctor: 'Doctor', staff: 'Staff' };\r\n      return roleMap[this.localUser.role] || (this.localUser.role[0]?.toUpperCase() + this.localUser.role.slice(1));\r\n    }\r\n  },\r\n  methods: {\r\n    onKeydown(e) {\r\n      if (e.key === 'Escape' && this.isOpen) this.closeSidebar();\r\n    },\r\n    lockScroll() {\r\n      // prevent background scroll when open\r\n      document.body.style.overflow = 'hidden';\r\n    },\r\n    unlockScroll() {\r\n      document.body.style.overflow = '';\r\n    },\r\n    openSidebar() {\r\n      this.isOpen = true;\r\n      this.lockScroll();\r\n    },\r\n    closeSidebar() {\r\n      this.isOpen = false;\r\n      this.unlockScroll();\r\n    },\r\n    viewProfile() {\r\n      this.$router.push('/profile');\r\n      this.closeSidebar();\r\n    },\r\n    logout() {\r\n      this.closeSidebar();\r\n      localStorage.removeItem('jwt_token');\r\n      localStorage.removeItem('user_info');\r\n      window.dispatchEvent(new Event('user-logout'));\r\n      this.$router.push('/');\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.avatar {\r\n  width: 36px;\r\n  height: 36px;\r\n  border-radius: 50%;\r\n  border: 2px solid #cbd5e0;\r\n  cursor: pointer;\r\n}\r\n\r\n/* Overlay below the sidebar but above page content */\r\n.overlay {\r\n  position: fixed;\r\n  inset: 0; /* top:0; right:0; bottom:0; left:0 */\r\n  background: rgba(0, 0, 0, 0.25);\r\n  z-index: 1090; /* below sidebar (1100) */\r\n}\r\n\r\n/* sidebar */\r\n.sidebar {\r\n  position: fixed;\r\n  top: 0;\r\n  right: 0;\r\n  height: 100vh;\r\n  width: clamp(280px, 80vw, 360px); \r\n  \r\n  background: #fff;\r\n  box-shadow: -4px 0 16px rgba(0, 0, 0, 0.12);\r\n  \r\n  /* CRITICAL: Ensure the default state is hidden */\r\n  transform: translateX(100%);\r\n  transition: transform 0.28s ease;\r\n  z-index: 1100;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.sidebar.open {\r\n  transform: translateX(0);\r\n}\r\n\r\n.header {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  padding: 12px;\r\n  border-bottom: 1px solid #e2e8f0;\r\n}\r\n\r\n.close {\r\n  font-size: 22px;\r\n  color: #718096;\r\n  cursor: pointer;\r\n  line-height: 1;\r\n}\r\n\r\n.content {\r\n  padding: 24px;\r\n  text-align: center;\r\n  overflow-y: auto; /* scroll inside if very small height */\r\n  -webkit-overflow-scrolling: touch;\r\n}\r\n\r\n.avatar-large {\r\n  width: 72px;\r\n  height: 72px;\r\n  border-radius: 50%;\r\n  margin-bottom: 12px;\r\n}\r\n\r\n.name {\r\n  font-weight: 600;\r\n  font-size: 18px;\r\n  margin-bottom: 4px;\r\n}\r\n\r\n.email {\r\n  font-size: 14px;\r\n  color: #4a5568;\r\n}\r\n\r\n.role {\r\n  font-size: 13px;\r\n  font-style: italic;\r\n  color: #718096;\r\n  margin-bottom: 24px;\r\n}\r\n\r\n.actions {\r\n  border-top: 1px solid #e2e8f0;\r\n  padding-top: 16px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 10px;\r\n}\r\n\r\nbutton {\r\n  background: none;\r\n  border: none;\r\n  font-size: 14px;\r\n  color: #2d3748;\r\n  text-align: left;\r\n  cursor: pointer;\r\n}\r\n\r\n.view-profile { color: #4a90e2; }\r\n.logout { color: #e53e3e; }\r\n\r\n/* optional: tighter header on very small heights */\r\n@media (max-height: 500px) {\r\n  .content { padding: 16px; }\r\n}\r\n</style>\r\n","import { render } from \"./ProfileSidebar.vue?vue&type=template&id=66e16b89&scoped=true\"\nimport script from \"./ProfileSidebar.vue?vue&type=script&lang=js\"\nexport * from \"./ProfileSidebar.vue?vue&type=script&lang=js\"\n\nimport \"./ProfileSidebar.vue?vue&type=style&index=0&id=66e16b89&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-66e16b89\"]])\n\nexport default __exports__","<template>\r\n  <button\r\n    v-show=\"visible\"\r\n    class=\"scroll-top\"\r\n    @click=\"toTop\"\r\n    aria-label=\"Scroll to top\"\r\n  >\r\n    \r\n  </button>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'ScrollToTop',\r\n  data() {\r\n    return { visible: false, rafId: null };\r\n  },\r\n  mounted() {\r\n    // Use rAF to avoid running too often while scrolling\r\n    const onScroll = () => {\r\n      if (this.rafId) return;\r\n      this.rafId = requestAnimationFrame(() => {\r\n        this.visible = window.scrollY > 150; // show after this amount of px\r\n        this.rafId = null;\r\n      });\r\n    };\r\n    this._onScroll = onScroll;\r\n    window.addEventListener('scroll', onScroll, { passive: true });\r\n  },\r\n  beforeUnmount() {\r\n    window.removeEventListener('scroll', this._onScroll);\r\n    if (this.rafId) cancelAnimationFrame(this.rafId);\r\n  },\r\n  methods: {\r\n    toTop() {\r\n      const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;\r\n      window.scrollTo({ top: 0, behavior: prefersReduced ? 'auto' : 'smooth' });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.scroll-top {\r\n  position: fixed;\r\n  right: 22px;\r\n  bottom: 22px;\r\n  width: 44px;\r\n  height: 44px;\r\n  border: none;\r\n  border-radius: 9999px;\r\n  background: #1f2937; /* slate-800 */\r\n  color: #fff;\r\n  font-size: 20px;\r\n  line-height: 1;\r\n  cursor: pointer;\r\n  box-shadow: 0 8px 18px rgba(0,0,0,.2);\r\n  opacity: 40%;\r\n  transform: translateY(10px);\r\n  transition: opacity .2s ease, transform .2s ease, background .15s ease;\r\n  z-index: 3000; \r\n}\r\n\r\n.scroll-top:hover { background: #111827; }  /* slate-900 */\r\n.scroll-top:focus { outline: 2px solid #60a5fa; outline-offset: 2px; }\r\n\r\n.scroll-top[v-cloak], .scroll-top:not([style]) { display: none; } /* safety */\r\n\r\n/* v-show toggles display; we want a fadeso rely on opacity/transform */\r\n.scroll-top[style*=\"display: none\"] { display: none !important; }\r\n</style>\r\n","import { render } from \"./ScrollToTop.vue?vue&type=template&id=6b21529e&scoped=true\"\nimport script from \"./ScrollToTop.vue?vue&type=script&lang=js\"\nexport * from \"./ScrollToTop.vue?vue&type=script&lang=js\"\n\nimport \"./ScrollToTop.vue?vue&type=style&index=0&id=6b21529e&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6b21529e\"]])\n\nexport default __exports__","import { render } from \"./App.vue?vue&type=template&id=0b64ac76\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=0b64ac76&lang=css\"\n\nimport exportComponent from \"../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","// main.js\nimport { createApp } from 'vue'\nimport App from './App.vue'\nimport router from './router'\nimport './styles/main.css'\n// import { formatDate } from './shared/dateFormat.js'\n\ncreateApp(App)\n    .use(router)\n    .mount('#app')\n    // .config.globalProperties.$formatDate = formatDate\n","// src/apiConfig.js\r\nconst isLocal = typeof window !== 'undefined' &&\r\n  /^(localhost|127\\.0\\.0\\.1)/.test(location.hostname);\r\n\r\n// Manual override if needed\r\nconst IS_PRODUCTION = isLocal ? false : true;\r\n\r\nconst API_BASE_URL = IS_PRODUCTION\r\n  ? \"https://darkgray-mole-938146.hostingersite.com/api\"\r\n  : \"http://localhost:8000/api\";\r\n\r\n// Allow emergency override via localStorage (no rebuild needed)\r\nconst LS_KEY = 'API_BASE_URL_OVERRIDE';\r\nconst override = typeof localStorage !== 'undefined' ? localStorage.getItem(LS_KEY) : null;\r\n\r\nexport default {\r\n  API_BASE_URL: (override && override.trim()) || API_BASE_URL,\r\n  setOverride(url) { localStorage.setItem(LS_KEY, url); },\r\n  clearOverride() { localStorage.removeItem(LS_KEY); }\r\n};\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = function(chunkId) {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce(function(promises, key) {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = function(chunkId) {\n\t// return url for filenames based on template\n\treturn \"js/\" + chunkId + \".\" + \"030f0b7f\" + \".js\";\n};","// This function allow to reference async chunks\n__webpack_require__.miniCssF = function(chunkId) {\n\t// return url for filenames based on template\n\treturn \"css/\" + chunkId + \".\" + \"af247525\" + \".css\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","var inProgress = {};\nvar dataWebpackPrefix = \"bmi-app-gen:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = function(url, done, key, chunkId) {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = function(prev, event) {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach(function(fn) { return fn(event); });\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"/\";","if (typeof document === \"undefined\") return;\nvar createStylesheet = function(chunkId, fullhref, oldTag, resolve, reject) {\n\tvar linkTag = document.createElement(\"link\");\n\n\tlinkTag.rel = \"stylesheet\";\n\tlinkTag.type = \"text/css\";\n\tif (__webpack_require__.nc) {\n\t\tlinkTag.nonce = __webpack_require__.nc;\n\t}\n\tvar onLinkComplete = function(event) {\n\t\t// avoid mem leaks.\n\t\tlinkTag.onerror = linkTag.onload = null;\n\t\tif (event.type === 'load') {\n\t\t\tresolve();\n\t\t} else {\n\t\t\tvar errorType = event && event.type;\n\t\t\tvar realHref = event && event.target && event.target.href || fullhref;\n\t\t\tvar err = new Error(\"Loading CSS chunk \" + chunkId + \" failed.\\n(\" + errorType + \": \" + realHref + \")\");\n\t\t\terr.name = \"ChunkLoadError\";\n\t\t\terr.code = \"CSS_CHUNK_LOAD_FAILED\";\n\t\t\terr.type = errorType;\n\t\t\terr.request = realHref;\n\t\t\tif (linkTag.parentNode) linkTag.parentNode.removeChild(linkTag)\n\t\t\treject(err);\n\t\t}\n\t}\n\tlinkTag.onerror = linkTag.onload = onLinkComplete;\n\tlinkTag.href = fullhref;\n\n\n\tif (oldTag) {\n\t\toldTag.parentNode.insertBefore(linkTag, oldTag.nextSibling);\n\t} else {\n\t\tdocument.head.appendChild(linkTag);\n\t}\n\treturn linkTag;\n};\nvar findStylesheet = function(href, fullhref) {\n\tvar existingLinkTags = document.getElementsByTagName(\"link\");\n\tfor(var i = 0; i < existingLinkTags.length; i++) {\n\t\tvar tag = existingLinkTags[i];\n\t\tvar dataHref = tag.getAttribute(\"data-href\") || tag.getAttribute(\"href\");\n\t\tif(tag.rel === \"stylesheet\" && (dataHref === href || dataHref === fullhref)) return tag;\n\t}\n\tvar existingStyleTags = document.getElementsByTagName(\"style\");\n\tfor(var i = 0; i < existingStyleTags.length; i++) {\n\t\tvar tag = existingStyleTags[i];\n\t\tvar dataHref = tag.getAttribute(\"data-href\");\n\t\tif(dataHref === href || dataHref === fullhref) return tag;\n\t}\n};\nvar loadStylesheet = function(chunkId) {\n\treturn new Promise(function(resolve, reject) {\n\t\tvar href = __webpack_require__.miniCssF(chunkId);\n\t\tvar fullhref = __webpack_require__.p + href;\n\t\tif(findStylesheet(href, fullhref)) return resolve();\n\t\tcreateStylesheet(chunkId, fullhref, null, resolve, reject);\n\t});\n}\n// object to store loaded CSS chunks\nvar installedCssChunks = {\n\t57: 0\n};\n\n__webpack_require__.f.miniCss = function(chunkId, promises) {\n\tvar cssChunks = {\"140\":1};\n\tif(installedCssChunks[chunkId]) promises.push(installedCssChunks[chunkId]);\n\telse if(installedCssChunks[chunkId] !== 0 && cssChunks[chunkId]) {\n\t\tpromises.push(installedCssChunks[chunkId] = loadStylesheet(chunkId).then(function() {\n\t\t\tinstalledCssChunks[chunkId] = 0;\n\t\t}, function(e) {\n\t\t\tdelete installedCssChunks[chunkId];\n\t\t\tthrow e;\n\t\t}));\n\t}\n};\n\n// no hmr\n\n// no prefetching\n\n// no preloaded","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t57: 0\n};\n\n__webpack_require__.f.j = function(chunkId, promises) {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise(function(resolve, reject) { installedChunkData = installedChunks[chunkId] = [resolve, reject]; });\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = function(event) {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkbmi_app_gen\"] = self[\"webpackChunkbmi_app_gen\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], function() { return __webpack_require__(4046); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["handleUnauthorized","res","status","localStorage","clear","window","dispatchEvent","Event","alert","router","push","name","class","_createElementBlock","_hoisted_1","_createElementVNode","_toDisplayString","$options","userDisplayName","roleLabel","_hoisted_2","onClick","_cache","args","logout","_createBlock","_component_analytics_all_dashboard","key","_component_analytics_dashboard","_hoisted_3","$data","q","$event","type","placeholder","_normalizeClass","active","activeYear","setYear","title","_hoisted_4","totalsAll","abnormalLabs","_Fragment","_renderList","years","y","_hoisted_6","_hoisted_7","abnormalByYear","hasAnyData","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","kpi","staffCount","_hoisted_12","_hoisted_13","_hoisted_14","sessionCount","_hoisted_15","_hoisted_16","_hoisted_17","abnormal","_hoisted_18","_hoisted_19","_hoisted_20","pctAbnormal","_hoisted_21","_hoisted_22","latestVitalsByStaff","slice","row","_key","_hoisted_23","_hoisted_24","staff_name","yearOf","session_date","weight_kg","height_m","bmi","bp_sys","bp_dia","pulse_bpm","length","_hoisted_25","colspan","_hoisted_26","labsFiltered","reverse","l","session_id","staff_email","_hoisted_27","_hoisted_28","ldl_result","tchol_result","hdl_result","badgeClass","isRowAbnormal","_hoisted_29","data","baseUrl","cfg","API_BASE_URL","summary","staffMap","Map","labsSeriesYear","vitals","labs","computed","this","ys","Set","map","r","yearFromBucket","bucket","filter","Boolean","sort","a","b","vitalsFiltered","arr","filterByYear","filterByQuery","totals","sumAbnormalFromSeries","sessionCountFromSummary","normal","notdone","filteredYearSeries","totalLabResults","pctAbn","Math","round","staffSet","s","size","by","v","k","cur","get","Date","set","out","values","forEach","i","mounted","loadData","buildAbnormalByYear","methods","headers","Authorization","getItem","staffList","fetch","then","json","catch","x","labsYear","Promise","all","series","top","top_staff_by_sessions","staffEmails","t","unique","Array","from","perStaffPromises","async","staffXYZ","email","replace","vitalsRows","labsRows","vitalsAll","labsAll","byDateAsc","attachNames","d","getFullYear","String","n","Number","isFinite","toLowerCase","trim","includes","rows","sessions_by_period","reduce","acc","count","add","counts","ldl_result_abnormal","tchol_result_abnormal","hdl_result_abnormal","some","isBad","__exports__","activeSessionId","setActiveSession","sortedSessions","fmtDate","_hoisted_5","abnormalBySession","kpiBMI","value","deltaClass","delta","prettyDelta","caption","kpiBP","kpiPulse","kpiLabs","sessions","dateA","getTime","dateB","countLabStatuses","Abnormal","latest","lastByDate","prev","prevByDate","toFixed","ds","dd","abs","Normal","buildAbnormalIndex","toLocaleDateString","userInfo","JSON","parse","at","id","sid","vals","startsWith","components","AnalyticsAllDashboard","AnalyticsDashboard","currentUserInfo","showInfo","jwtToken","userRole","role","fullname","username","doctor","staff","admin","restricted","created","loadUserInfo","console","warn","userInfoString","e","error","removeItem","$router","render","onSubmit","_withModifiers","register","for","form","required","password","confirmPassword","disabled","fullName","matricNo","yearOfStudy","min","max","programme","lecturerName","lecturerStaffId","lecturerEmail","lecturerDepartment","advisorName","advisorStaffId","advisorEmail","advisorDepartment","adviseeQuota","adminName","adminEmail","successMessage","errorMessage","_createVNode","_component_router_link","to","watch","newRole","oldRole","body","full_name","matric_no","year_of_study","parseInt","lecturer_id","department","advisor_id","advisee_quota","log","method","stringify","ok","resetForm","setTimeout","err","login","group","token","user","setItem","location","href","groupEnd","loading","save","readonly","formattedRole","job_title","phone_no","isDirty","saving","reset","style","_ctx","original","charAt","toUpperCase","pick","o","loadUserData","staffEmailXYZ","doctor_email","admin_email","doctor_name","admin_name","Error","updated","current","merged","message","sessionId","staffName","staffEmail","_component_RouterLink","sub","_component_router_view","$route","fullPath","getSessionHeader","baseURL","has","setSessionHeader","header","invalidateSessionHeader","delete","provide","refreshSessionHeader","refreshHeader","currentSessionHeader","sessionHeader","params","getStaffInfo","child","query","currentStaffHeader","staffHeader","refreshStaffHeader","fetchStaffEmail","encodeEmailForPath","encodeURIComponent","emailXYZ","payload","mode","_KeepAlive","_component_AnalyticsAllDashboard","_component_AnalyticsAllCharts","_component_AnalyticsAllDashboard2","_component_AnalyticsAllCharts2","ref","height","sessionsByPeriod","labelFromBucket","step","bmiThresholds","lowMax","onInput","onBandInput","number","fitMax","bmiPoints","Chart","LineController","BarController","LineElement","BarElement","PointElement","LinearScale","CategoryScale","Tooltip","Legend","Filler","Title","ScatterController","vitalsSeries","labsSeries","charts","bp","pulse","lipids","bmiScatter","scatterDebounce","renderAllCharts","addEventListener","resizeCharts","beforeUnmount","destroyCharts","removeEventListener","MAX_SCATTER_STAFF","emails","per","isArray","isNaN","date","pts","p","Object","keys","destroy","c","resize","renderBMI","renderBP","renderPulse","renderLipids","renderBMIScatter","ctx","$refs","bmiCanvas","getContext","labels","avg_bmi","datasets","label","tension","fill","pointRadius","options","responsive","plugins","legend","display","tooltip","intersect","datalabels","align","anchor","offset","color","font","weight","formatter","val","scales","beginAtZero","text","bpCanvas","sys","avg_bp_sys","dia","avg_bp_dia","backgroundColor","borderRadius","padding","pulseCanvas","avg_pulse_bpm","lipidsCanvas","ldl_result_normal","tchol_result_normal","hdl_result_normal","ldl_result_not_done","tchol_result_not_done","hdl_result_not_done","stack","stacked","ticks","stepSize","clearTimeout","canvas","bmiScatterCanvas","stop","low","fit","exceed","pt","thresholdLines","afterDraw","chart","chartArea","drawLine","dash","getPixelForValue","setLineDash","strokeStyle","lineWidth","beginPath","moveTo","left","lineTo","right","stroke","restore","requestAnimationFrame","animation","callbacks","items","parsed","idx","item","callback","lab","result_status","_component_VueDatePicker","load","displayedFields","field","formatField","results","formatDateShort","highlightCell","formatDate","Intl","DateTimeFormat","year","month","day","hour","minute","hour12","format","undefined","fieldLabels","tg_result","tbil_result","ggt_result","ast_result","alt_result","fbs_result","rbs_result","ua_result","bu_result","creat_result","na_result","k_result","cl_result","typeToFields","cholesterol","liver","glucose","uric_acid","renal","VueDatePicker","debounceTimer","abortController","debouncedLoad","getTimezoneOffset","localISOTime","toISOString","url","fromStr","toStr","col","gotoSession","selectedYear","latestSessionsCount","totalAbnormal","ChartDataLabels","GROUPS","tests","other","latestPerStaff","filtered","g","renderAll","loadLatestPerStaff","statusText","$nextTick","destroyAll","renderGroup","groupKey","total","percents","borderColor","borderWidth","barThickness","indexAxis","maintainAspectRatio","dataIndex","AnalyticsAllCharts","AnalyticsAllCharts2","AnalyticsAllDashboard2","roleFilter","registerUser","filteredUsers","user_id","currentAdmin","formatRole","editUser","deleteUser","users","u","confirm","reload","resetPassword","userId","userEmail","newPassword","back","isAdmin","confirmation","new_password","isAdminSelected","isStaff","init_staff_profile","init_session","session_type","session_status","submitting","success","duplicate_recent","response","txt","updateUser","originalUser","isModalChanged","fetchUserInfo","isFilteredView","isCreateOpen","closeCreateModal","submitCreate","createForm","onChange","syncDuplicateDefault","staffEmailList","no_forms","hasPrevForSelected","creating","isEditOpen","closeEditModal","submitEdit","editForm","isAdminRole","assigned_doctor_email","doctorEmailList","session_remarks","editing","search","yearFilter","availableYears","toString","typeFilter","statusFilter","page","goFirst","prevPage","totalPages","nextPage","goLast","pageSize","changePageSize","_hoisted_30","createNewSession","showMetadata","showHasTables","_component_ExportExcel","pagedSessions","allRows","columns","nsColumns","filename","sheetName","trigger","_withCtx","open","_hoisted_31","onScroll","onTableScroll","_hoisted_32","toggleDateSort","sortDir","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_39","_hoisted_40","_hoisted_41","_hoisted_42","_hoisted_43","_hoisted_44","_hoisted_45","_hoisted_46","_hoisted_47","created_by","_hoisted_48","created_at","_hoisted_49","updated_by","_hoisted_50","updated_at","_hoisted_51","has_forms_all","_hoisted_52","_normalizeStyle","has_mh","_hoisted_53","has_lifestyle","_hoisted_54","has_pe1","has_pe2","_hoisted_55","has_investigations","has_ilab","_hoisted_56","reportExists","_hoisted_57","_hoisted_58","toggleReportMenu","_hoisted_59","openReportMenuId","reportsLoadingId","_hoisted_60","reportsBySession","_hoisted_61","_hoisted_62","report_id","_hoisted_63","file_name","substring","_hoisted_64","file_size","uploaded_at","_hoisted_65","target","rel","_hoisted_66","deleteReport","deletingReportId","_hoisted_67","_hoisted_68","_hoisted_69","uploadTitleBySession","accept","onPickFile","uploadReport","uploadFileBySession","uploadingSessionId","_hoisted_72","_hoisted_73","viewSession","_hoisted_74","toggleRowMenu","_hoisted_75","openRowMenuId","_hoisted_76","openEdit","_hoisted_77","_hoisted_78","deleteSession","_hoisted_79","filteredSessions","_hoisted_80","onXScroll","width","tableScrollWidth","_renderSlot","$slots","hasAnyRows","show","close","$props","hasAllRows","exportScope","effectiveRows","normalizedColumns","selected","selectAll","clearAll","exportNow","props","default","defaultSelectedKeys","newCols","_getXLSX","XLSX","_valueFor","raw","getter","_autosize","ws","selectedCols","exportedRows","widths","headerLen","maxCell","m","len","wch","utils","json_to_sheet","skipHeader","wb","book_new","book_append_sheet","suffix","writeFile","ExportExcel","resizeObs","reportHas","init_tables","hasPrevByStaff","duplicating","ceil","start","dir","toTime","bt","matchSearch","matchYear","matchStatus","matchType","fetchSessions","fetchEmails","closeMenus","applyStaffQuery","_onDocClick_reports","closest","document","measureXBar","ResizeObserver","wrap","$el","querySelector","observe","activeStaffEmail","immediate","handler","deep","disconnect","scrollWidth","xScroll","scrollLeft","refreshReportFlagsForSessions","decodeURIComponent","fromQuery","endpoint","msg","toYMD","dt","fresh","force","reports","firstReport","del","$delete","rb","rh","has_report","setReportExists","next","sessionIds","onReportUploaded","onReportDeleted","ensureReportsLoaded","list","$set","finally","file","files","sessionRow","fd","FormData","append","reject","clone","reportId","debouncedFetch","complete","incomplete","showSummaryColumns","displayedItems","openDetails","non_session_score","staff_info_complete","personal_doctor_email","staff_updated_at","sinceCreated","occ_updated_at","family_min_ok","fam_named_count","fam_updated_at","fhd_answered","fhd_updated_at","session_count","goEditStaff","goSessions","detailOpen","closeDetails","detail","staff_no","nationality","address","occupational_history","oh","oh_id","company","nature_of_work","family_history","_hoisted_70","fh","fh_id","relationship","relative_name","sex","year_of_born","age_now","age_at_death","state_health_death_cause","_hoisted_71","family_history_disease","yn","heart_disease","high_blood_pressure","diabetes","kidney_disease","allergy","asthma","eczema","tuberculosis","epilepsy","mental_disorder","alcohol_dependence","drug_abuse","birth_abnormality","details","fetchSummary","src","hay","rowStatus","fmtDateTime","URLSearchParams","page_size","occ","fam","fhd","staff_created_at","toDateString","getHours","getMinutes","staffOk","famOk","fhdOk","toLocaleString","staff_uid","marital_status","date_of_birth","age","ic_passport","doctor_phone_no","reason_for_examination","openModal","staffData","date_of_this_assessment","date_of_last_assessment","isModalOpen","closeModal","submitStaffEdit","modalStaff","syncAgeFromYear","pattern","originalStaffData","isFormChanged","fields","f","fetchStaffInfo","staffEmailInView","now","editingHistory","submitEntry","modalHistory","occupationalHistory","history","index","openEditModal","deleteHistory","openAddModal","fetchOccupationalHistory","findIndex","h","splice","isConfirmed","isFamilyModalOpen","closeFamilyModal","editingFamily","submitFamilyEntry","modalFamily","isDiseaseModalOpen","closeDiseaseModal","submitDiseaseEntry","modalDisease","cancer","none_above","familyHistory","openEditFamilyModal","deleteFamilyMember","openAddFamilyModal","familyHistoryDisease","openDiseaseModal","fetchFamilyHistory","fetchFamilyDisease","asBool","fhdData","confirmed","defaultDisease","formatDiseaseLabel","newYear","currentYear","newRelationship","maleRelationships","femaleRelationships","newValue","medicalFields","none_of_the_above","_resolveDynamicComponent","currentComp","perSessionCounts","AnalyticsCharts","toggleInfo","safeName","kb","prettyTs","preventDefault","_Teleport","closeInfo","yOk","stOk","tOk","fetchMine","_onDocClick","Infinity","promises","ts","bytes","submitMedicalHistory","modalMedicalHistory","comment_by_examine_doctor","medicalHistory","fontWeight","accessCheck","Roles","freeze","STAFF","DOCTOR","ADMIN","Status","DRAFT","SUBMITTED","LOCKED","canSession","action","inject","fetchMedicalHistory","sessionStatus","blankMedicalObj","base","staffSessionID","normalized","overflow","newVal","submitLifestyle","modalLifestyle","smoking_habit","years_smoked","amount_smoke_day","date_stopped","alcohol_drink","drink_per_week","taking_prescribed_drugs","drug_detail","declaration_consent","consent_signer_name","consent_signer_date","lifestyle","fetchLifestyle","lifestyleData","physicalExam","blood_group","dist_uncorr_r","dist_uncorr_l","dist_uncorr_b","dist_corr_r","dist_corr_l","dist_corr_b","near_uncorr_r","near_uncorr_l","near_uncorr_b","near_corr_r","near_corr_l","near_corr_b","colour_vision","bodySystemFields","physicalExam2","openModal2","submitPhysicalExam","modalPhysicalExam","calculateBMI","isModal2Open","closeModal2","submitPhysicalExam2","modalPhysicalExam2","fetchPhysicalExam","fetchPhysicalExam2","w","parseFloat","defaults","openGenModal","generalRows","investigations","statusKey","detailsKey","openLabModal","labGroupOrder","grp","groupLabel","labGroups","test","abbr","innerHTML","range","editingRow","investigationsLab","startRowEdit","editableLab","markDirty","isRowDirty","saveLabRow","cancelRowEdit","dirtyKeys","saveAllLab","cancelAllLab","openDrugModal","drugTests","remarks_ohd","isGenModalOpen","closeGenModal","submitGeneral","modalGeneral","isLabModalOpen","closeLabModal","submitLab","modalLab","isDrugModalOpen","closeDrugModal","submitDrug","modalDrug","originalLab","haematology","electrolytes","urineChem","urineMicro","serology","fetchInvestigations","fetchInvestigationsLab","seedLabEditors","L","seed","flat","itemKey","resKey","remKey","dirty","isEditing","updateDoctorInfo","doctorData","cancelEdit","editDoctorInfo","doctor_uid","originalDoctorData","fetchDoctorInfo","doctorEmail","routes","path","component","MyLogin","MyRegister","MyProfile","MyDashboard","meta","requiresAuth","ManageUsers","ViewUser","RegisterUser","EditUser","ManageSessions","NonSessionCompleteness","ResetPassword","AnalyticsPage","MySessions","ManageDoctorInfo","alias","AnalyticsAllPage","rolesAllowed","ViewNonSession","children","redirect","ManageStaffInfo","ManageOccupationHistory","ManageFamilyHistory","ViewSession","ManageMedicalHistory","ManagePhysicalExam","ManageInvestigations","ManageLifestyle","createRouter","createWebHashHistory","beforeEach","isAuthenticated","_imports_0","alt","currentUser","_component_ProfileSidebar","showMobileWarning","proceedAnyway","showNavBar","_component_NavBar","_component_ScrollToTop","menu","route","menuItems","user_raw","_","img","openSidebar","isOpen","closeSidebar","localUser","viewProfile","onKeydown","unwatch","$watch","unlockScroll","roleMap","lockScroll","toTop","visible","rafId","scrollY","_onScroll","passive","cancelAnimationFrame","prefersReduced","matchMedia","matches","scrollTo","behavior","ProfileSidebar","NavBar","ScrollToTop","loadUser","handleLogout","userStr","createApp","App","use","mount","isLocal","hostname","IS_PRODUCTION","LS_KEY","override","setOverride","clearOverride","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call","deferred","O","result","chunkIds","fn","priority","notFulfilled","fulfilled","j","every","__esModule","definition","defineProperty","enumerable","chunkId","miniCssF","globalThis","Function","obj","prop","prototype","hasOwnProperty","inProgress","dataWebpackPrefix","done","script","needAttach","scripts","getElementsByTagName","getAttribute","createElement","charset","timeout","nc","setAttribute","onScriptComplete","event","onerror","onload","doneFns","parentNode","removeChild","bind","head","appendChild","Symbol","toStringTag","createStylesheet","fullhref","oldTag","resolve","linkTag","nonce","onLinkComplete","errorType","realHref","code","request","insertBefore","nextSibling","findStylesheet","existingLinkTags","tag","dataHref","existingStyleTags","loadStylesheet","installedCssChunks","miniCss","cssChunks","installedChunks","installedChunkData","promise","loadingEnded","realSrc","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","__webpack_exports__"],"sourceRoot":""}